import{_ as A}from"./_plugin-vue_export-helper-DRcqrMy4.js";import{v as H}from"./el-loading-CDKhOZ5N.js";import{E as j}from"./el-dialog-BhSLWNki.js";import"./el-overlay-BgBDSbqt.js";import{a as q,E as G}from"./el-form-item-D3sxnqbV.js";/* empty css                 *//* empty css               */import{E as K,a as P}from"./el-select-VV4aDOx5.js";import"./el-scrollbar-DIA22QBm.js";import"./el-popper-D2gumpQS.js";import{E as J}from"./el-card-BACn9qe_.js";import{E as Q}from"./el-empty-DFB2bBLd.js";import{E as X,a as Y}from"./el-table-column-Bc7SfHZW.js";import"./el-checkbox-Dwc9rtqq.js";import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import{E as Z}from"./el-alert-CHOaiL-m.js";import{d as ee,s as te}from"./admin-Ds-44br9.js";import{a as y,f as I}from"./format-68UbSpw-.js";import{E as oe}from"./index-DTydKQfe.js";import{r as u,p as le,c as ae,q as se,s as ne,e as E,h as e,w as o,U as B,o as i,O,G as r,k as s,t as d,j as ie,g as re,V as de,W as me,f as n,E as pe,H as ue,l as ce}from"./index-Bd4-WGnv.js";import"./index-C585l_VU.js";import"./refs-D6FW0B1r.js";import"./castArray-CRhzGHtd.js";import"./_baseClone-DsOkhf4F.js";import"./strings-C9Hk7sRF.js";import"./_baseIteratee-BtBIbnQi.js";import"./clamp-BcRwWhhj.js";import"./toNumber-BjADBi_g.js";import"./index-lW1wLRgX.js";import"./omit-rEkUoBp5.js";import"./debounce-rf4AVrH1.js";import"./raf-DB0AmFco.js";const _e={class:"risk-page"},fe={key:1,class:"mobile-card-list"},ve={class:"card-header flex-between"},ye={class:"sn"},Ee={class:"card-body"},be={class:"title"},we={class:"time text-gray"},ge={class:"card-footer"},ke=768,he={__name:"RiskMonitor",setup(Ve){const g=u(window.innerWidth),c=le(()=>g.value<ke),_=u(!1),f=u([]),m=u(!1),k=u(null),a=ae({actionType:"",interventionNote:""});se(()=>{V(),window.addEventListener("resize",h)}),ne(()=>{window.removeEventListener("resize",h)});const h=()=>{g.value=window.innerWidth};async function V(){_.value=!0;try{f.value=await ee()}finally{_.value=!1}}function T(b){k.value=b,a.actionType="",a.interventionNote="",m.value=!0}async function z(){await te({orderId:k.value.id,...a}),ce.success("记录已提交"),m.value=!1,V()}return(b,l)=>{const M=Z,p=Y,x=oe,v=ie,S=X,D=Q,L=J,w=P,R=K,C=G,U=pe,W=q,F=j,N=H;return i(),E("div",_e,[e(M,{title:"请密切关注下列一级高危订单，必要时进行人工干预！",type:"error","show-icon":"",class:"mb-20",closable:!1}),e(L,null,{default:o(()=>[c.value?B((i(),E("div",fe,[f.value.length===0?(i(),O(D,{key:0,description:"暂无高风险订单"})):re("",!0),(i(!0),E(de,null,me(f.value,t=>(i(),E("div",{key:t.orderSn,class:"risk-card"},[n("div",ve,[n("span",ye,"订单号: "+d(t.orderSn),1),e(x,{type:r(y)(t.status).type,size:"small"},{default:o(()=>[s(d(r(y)(t.status).text),1)]),_:2},1032,["type"])]),n("div",Ee,[n("p",be,d(t.title),1),n("p",we,d(r(I)(b.row.createTime)),1)]),n("div",ge,[e(v,{type:"danger",class:"full-width",onClick:$=>T(t)},{default:o(()=>[...l[5]||(l[5]=[s(" 人工介入 ",-1)])]),_:1},8,["onClick"])])]))),128))])),[[N,_.value]]):B((i(),O(S,{key:0,data:f.value,style:{width:"100%"}},{default:o(()=>[e(p,{prop:"orderSn",label:"订单号",width:"180"}),e(p,{prop:"title",label:"标题"}),e(p,{label:"状态",width:"120"},{default:o(({row:t})=>[e(x,{type:r(y)(t.status).type},{default:o(()=>[s(d(r(y)(t.status).text),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"createTime",label:"发布时间",width:"180"},{default:o(({row:t})=>[s(d(r(I)(t.createTime)),1)]),_:1}),e(p,{label:"操作",width:"150",fixed:"right"},{default:o(({row:t})=>[e(v,{type:"danger",size:"small",onClick:$=>T(t)},{default:o(()=>[...l[4]||(l[4]=[s("人工介入",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[N,_.value]])]),_:1}),e(F,{modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=t=>m.value=t),title:"风险干预记录",width:c.value?"90%":"500px",fullscreen:c.value},{footer:o(()=>[n("div",{class:ue({"mobile-dialog-footer":c.value})},[e(v,{onClick:l[2]||(l[2]=t=>m.value=!1)},{default:o(()=>[...l[6]||(l[6]=[s("取消",-1)])]),_:1}),e(v,{type:"primary",onClick:z},{default:o(()=>[...l[7]||(l[7]=[s("提交记录",-1)])]),_:1})],2)]),default:o(()=>[e(W,{model:a,"label-width":"80px","label-position":"top"},{default:o(()=>[e(C,{label:"干预动作"},{default:o(()=>[e(R,{modelValue:a.actionType,"onUpdate:modelValue":l[0]||(l[0]=t=>a.actionType=t),placeholder:"请选择",style:{width:"100%"}},{default:o(()=>[e(w,{label:"电话核实",value:"电话核实"}),e(w,{label:"现场增援",value:"现场增援"}),e(w,{label:"协调资源",value:"协调资源"})]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"详细说明"},{default:o(()=>[e(U,{modelValue:a.interventionNote,"onUpdate:modelValue":l[1]||(l[1]=t=>a.interventionNote=t),type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","width","fullscreen"])])}}},at=A(he,[["__scopeId","data-v-02e5862c"]]);export{at as default};
