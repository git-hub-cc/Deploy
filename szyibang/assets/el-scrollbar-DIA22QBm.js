import{y as K,_ as U,A as X,L as ee,B as te,ay as se,r as v,p as L,M as oe,av as D,aP as V,O as $,o as x,w as le,U as re,f as j,a5 as ne,H as B,G as R,N as I,aq as ie,X as ce,bz as ue,e as ae,h as Y,V as ve,z as C,ac as fe,af as me,aZ as F,D as G,J as de,c as pe,cp as he,q as be,aa as J,cg as ge,g as ye,F as Se,P as we,an as ze,bc as Z,T as Ee}from"./index-Bd4-WGnv.js";const T=4,_e={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},ke=({move:b,size:f,bar:o})=>({[o.size]:f,transform:`translate${o.axis}(${b}%)`}),q=Symbol("scrollbarContextKey"),He=K({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Te="Thumb",Le=X({__name:"thumb",props:He,setup(b){const f=b,o=ee(q),s=te("scrollbar");o||se(Te,"can not inject scrollbar context");const m=v(),c=v(),S=v({}),g=v(!1);let p=!1,i=!1,d=0,u=0,a=ue?document.onselectstart:null;const t=L(()=>_e[f.vertical?"vertical":"horizontal"]),l=L(()=>ke({size:f.size,move:f.move,bar:t.value})),z=L(()=>m.value[t.value.offset]**2/o.wrapElement[t.value.scrollSize]/f.ratio/c.value[t.value.offset]),w=n=>{var h;if(n.stopPropagation(),n.ctrlKey||[1,2].includes(n.button))return;(h=window.getSelection())==null||h.removeAllRanges(),H(n);const E=n.currentTarget;E&&(S.value[t.value.axis]=E[t.value.offset]-(n[t.value.client]-E.getBoundingClientRect()[t.value.direction]))},k=n=>{if(!c.value||!m.value||!o.wrapElement)return;const h=Math.abs(n.target.getBoundingClientRect()[t.value.direction]-n[t.value.client]),E=c.value[t.value.offset]/2,y=(h-E)*100*z.value/m.value[t.value.offset];o.wrapElement[t.value.scroll]=y*o.wrapElement[t.value.scrollSize]/100},H=n=>{n.stopImmediatePropagation(),p=!0,d=o.wrapElement.scrollHeight,u=o.wrapElement.scrollWidth,document.addEventListener("mousemove",O),document.addEventListener("mouseup",N),a=document.onselectstart,document.onselectstart=()=>!1},O=n=>{if(!m.value||!c.value||p===!1)return;const h=S.value[t.value.axis];if(!h)return;const E=(m.value.getBoundingClientRect()[t.value.direction]-n[t.value.client])*-1,y=c.value[t.value.offset]-h,e=(E-y)*100*z.value/m.value[t.value.offset];t.value.scroll==="scrollLeft"?o.wrapElement[t.value.scroll]=e*u/100:o.wrapElement[t.value.scroll]=e*d/100},N=()=>{p=!1,S.value[t.value.axis]=0,document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",N),P(),i&&(g.value=!1)},M=()=>{i=!1,g.value=!!f.size},W=()=>{i=!0,g.value=p};oe(()=>{P(),document.removeEventListener("mouseup",N)});const P=()=>{document.onselectstart!==a&&(document.onselectstart=a)};return D(V(o,"scrollbarElement"),"mousemove",M),D(V(o,"scrollbarElement"),"mouseleave",W),(n,h)=>(x(),$(ce,{name:R(s).b("fade"),persisted:""},{default:le(()=>[re(j("div",{ref_key:"instance",ref:m,class:B([R(s).e("bar"),R(s).is(t.value.key)]),onMousedown:k,onClick:h[0]||(h[0]=ne(()=>{},["stop"]))},[j("div",{ref_key:"thumb",ref:c,class:B(R(s).e("thumb")),style:I(l.value),onMousedown:w},null,38)],34),[[ie,n.always||g.value]])]),_:1},8,["name"]))}});var Q=U(Le,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Ne=K({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),Pe=X({__name:"bar",props:Ne,setup(b,{expose:f}){const o=b,s=ee(q),m=v(0),c=v(0),S=v(""),g=v(""),p=v(1),i=v(1);return f({handleScroll:a=>{if(a){const t=a.offsetHeight-T,l=a.offsetWidth-T;c.value=a.scrollTop*100/t*p.value,m.value=a.scrollLeft*100/l*i.value}},update:()=>{const a=s==null?void 0:s.wrapElement;if(!a)return;const t=a.offsetHeight-T,l=a.offsetWidth-T,z=t**2/a.scrollHeight,w=l**2/a.scrollWidth,k=Math.max(z,o.minSize),H=Math.max(w,o.minSize);p.value=z/(t-z)/(k/(t-k)),i.value=w/(l-w)/(H/(l-H)),g.value=k+T<t?`${k}px`:"",S.value=H+T<l?`${H}px`:""}}),(a,t)=>(x(),ae(ve,null,[Y(Q,{move:m.value,ratio:i.value,size:S.value,always:a.always},null,8,["move","ratio","size","always"]),Y(Q,{move:c.value,ratio:p.value,size:g.value,vertical:"",always:a.always},null,8,["move","ratio","size","always"])],64))}});var Re=U(Pe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Ce=K({distance:{type:Number,default:0},height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:me([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...fe(["ariaLabel","ariaOrientation"])}),xe={"end-reached":b=>["left","right","top","bottom"].includes(b),scroll:({scrollTop:b,scrollLeft:f})=>[b,f].every(C)},Be=["tabindex"],Oe="ElScrollbar",Ae=X({name:Oe,__name:"scrollbar",props:Ce,emits:xe,setup(b,{expose:f,emit:o}){const s=b,m=o,c=te("scrollbar");let S,g,p,i=0,d=0,u="";const a={bottom:!1,top:!1,right:!1,left:!1},t=v(),l=v(),z=v(),w=v(),k=L(()=>{const e={},r=F(s.height),_=F(s.maxHeight);return r&&(e.height=r),_&&(e.maxHeight=_),[s.wrapStyle,e]}),H=L(()=>[s.wrapClass,c.e("wrap"),{[c.em("wrap","hidden-default")]:!s.native}]),O=L(()=>[c.e("view"),s.viewClass]),N=e=>{var r;return(r=a[e])!=null?r:!1},M={top:"bottom",bottom:"top",left:"right",right:"left"},W=e=>{const r=M[u];if(!r)return;const _=e[u],A=e[r];_&&!a[u]&&(a[u]=!0),!A&&a[r]&&(a[r]=!1)},P=()=>{var e;if(l.value){(e=w.value)==null||e.handleScroll(l.value);const r=i,_=d;i=l.value.scrollTop,d=l.value.scrollLeft;const A={bottom:i+l.value.clientHeight>=l.value.scrollHeight-s.distance,top:i<=s.distance&&r!==0,right:d+l.value.clientWidth>=l.value.scrollWidth-s.distance&&_!==d,left:d<=s.distance&&_!==0};if(m("scroll",{scrollTop:i,scrollLeft:d}),r!==i&&(u=i>r?"bottom":"top"),_!==d&&(u=d>_?"right":"left"),s.distance>0){if(N(u))return;W(A)}A[u]&&m("end-reached",u)}};function n(e,r){ze(e)?l.value.scrollTo(e):C(e)&&C(r)&&l.value.scrollTo(e,r)}const h=e=>{C(e)&&(l.value.scrollTop=e)},E=e=>{C(e)&&(l.value.scrollLeft=e)},y=()=>{var e;(e=w.value)==null||e.update(),a[u]=!1};return G(()=>s.noresize,e=>{e?(S==null||S(),g==null||g(),p==null||p()):({stop:S}=Z(z,y),{stop:g}=Z(l,y),p=D("resize",y))},{immediate:!0}),G(()=>[s.maxHeight,s.height],()=>{s.native||J(()=>{var e;y(),l.value&&((e=w.value)==null||e.handleScroll(l.value))})}),de(q,pe({scrollbarElement:t,wrapElement:l})),he(()=>{l.value&&(l.value.scrollTop=i,l.value.scrollLeft=d)}),be(()=>{s.native||J(()=>{y()})}),ge(()=>y()),f({wrapRef:l,update:y,scrollTo:n,setScrollTop:h,setScrollLeft:E,handleScroll:P}),(e,r)=>(x(),ae("div",{ref_key:"scrollbarRef",ref:t,class:B(R(c).b())},[j("div",{ref_key:"wrapRef",ref:l,class:B(H.value),style:I(k.value),tabindex:e.tabindex,onScroll:P},[(x(),$(we(e.tag),{id:e.id,ref_key:"resizeRef",ref:z,class:B(O.value),style:I(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:le(()=>[Se(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,Be),e.native?ye("v-if",!0):(x(),$(Re,{key:0,ref_key:"barRef",ref:w,always:e.always,"min-size":e.minSize},null,8,["always","min-size"]))],2))}});var Me=U(Ae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const De=Ee(Me);export{De as E,xe as s};
