import{y as _,bk as W,p as f,bl as G,r as c,D as Z,av as H,M as j,aZ as J,_ as K,A as Q,aT as x,bm as ee,B as ae,aA as se,O as te,o as y,w as R,h as S,X as oe,G as e,U as le,bn as re,bo as ne,f as N,aR as ie,a5 as de,e as A,g as z,H as n,F as D,t as ue,m as fe,R as ce,N as ve,aq as pe,T as me}from"./index-Bd4-WGnv.js";import{E as be}from"./index-C585l_VU.js";import{d as we,a as he,u as ge}from"./el-overlay-BgBDSbqt.js";const ye=_({...he,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},resizable:Boolean,size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),ze={...we,"resize-start":(t,l)=>t instanceof MouseEvent&&typeof l=="number",resize:(t,l)=>t instanceof MouseEvent&&typeof l=="number","resize-end":(t,l)=>t instanceof MouseEvent&&typeof l=="number"};function ke(t,l,k){const{width:v,height:L}=W(),p=f(()=>["ltr","rtl"].includes(t.direction)),E=f(()=>["ltr","ttb"].includes(t.direction)?1:-1),B=f(()=>p.value?v.value:L.value),m=f(()=>G(s.value+E.value*b.value,4,B.value)),s=c(0),b=c(0),i=c(!1),d=c(!1);let w=[],u=[];const M=()=>{var o;const r=(o=l.value)==null?void 0:o.closest('[aria-modal="true"]');return r?p.value?r.offsetWidth:r.offsetHeight:100};Z(()=>[t.size,t.resizable],()=>{d.value=!1,s.value=0,b.value=0,h()});const C=o=>{t.resizable&&(d.value||(s.value=M(),d.value=!0),w=[o.pageX,o.pageY],i.value=!0,k("resize-start",o,s.value),u.push(H(window,"mouseup",h),H(window,"mousemove",F)))},F=o=>{const{pageX:r,pageY:$}=o,I=r-w[0],g=$-w[1];b.value=p.value?I:g,k("resize",o,m.value)},h=o=>{i.value&&(w=[],s.value=m.value,b.value=0,i.value=!1,u.forEach(r=>r==null?void 0:r()),u=[],o&&k("resize-end",o,s.value))},P=H(l,"mousedown",C);return j(()=>{P(),h()}),{size:f(()=>d.value?`${m.value}px`:J(t.size)),isResizing:i,isHorizontal:p}}const Ee=["aria-label","aria-labelledby","aria-describedby"],Ce=["id","aria-level"],Re=["aria-label"],Se=["id"],Ae=Q({name:"ElDrawer",inheritAttrs:!1,__name:"drawer",props:ye,emits:ze,setup(t,{expose:l,emit:k}){const v=t,L=k,p=x();ee({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},f(()=>!!p.title));const E=c(),B=c(),m=c(),s=ae("drawer"),{t:b}=se(),{afterEnter:i,afterLeave:d,beforeLeave:w,visible:u,rendered:M,titleId:C,bodyId:F,zIndex:h,onModalClick:P,onOpenAutoFocus:o,onCloseAutoFocus:r,onFocusoutPrevented:$,onCloseRequested:I,handleClose:g}=ge(v,E),{isHorizontal:q,size:O,isResizing:X}=ke(v,m,L),V=f(()=>v.modalPenetrable&&!v.modal);return l({handleClose:g,afterEnter:i,afterLeave:d}),(a,T)=>(y(),te(e(be),{to:a.appendTo,disabled:a.appendTo!=="body"?!1:!a.appendToBody},{default:R(()=>[S(oe,{name:e(s).b("fade"),onAfterEnter:e(i),onAfterLeave:e(d),onBeforeLeave:e(w),persisted:""},{default:R(()=>{var U;return[le(S(e(re),{mask:a.modal,"overlay-class":[e(s).is("drawer"),(U=a.modalClass)!=null?U:"",`${e(s).namespace.value}-modal-drawer`,e(s).is("penetrable",V.value)],"z-index":e(h),onClick:e(P)},{default:R(()=>[S(e(ne),{loop:"",trapped:e(u),"focus-trap-el":E.value,"focus-start-el":B.value,onFocusAfterTrapped:e(o),onFocusAfterReleased:e(r),onFocusoutPrevented:e($),onReleaseRequested:e(I)},{default:R(()=>[N("div",ie({ref_key:"drawerRef",ref:E,"aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:e(C),"aria-describedby":e(F)},a.$attrs,{class:[e(s).b(),a.direction,e(u)&&"open",e(s).is("dragging",e(X))],style:{[e(q)?"width":"height"]:e(O)},role:"dialog",onClick:T[1]||(T[1]=de(()=>{},["stop"]))}),[N("span",{ref_key:"focusStartRef",ref:B,class:n(e(s).e("sr-focus")),tabindex:"-1"},null,2),a.withHeader?(y(),A("header",{key:0,class:n([e(s).e("header"),a.headerClass])},[a.$slots.title?D(a.$slots,"title",{key:1},()=>[z(" DEPRECATED SLOT ")]):D(a.$slots,"header",{key:0,close:e(g),titleId:e(C),titleClass:e(s).e("title")},()=>[N("span",{id:e(C),role:"heading","aria-level":a.headerAriaLevel,class:n(e(s).e("title"))},ue(a.title),11,Ce)]),a.showClose?(y(),A("button",{key:2,"aria-label":e(b)("el.drawer.close"),class:n(e(s).e("close-btn")),type:"button",onClick:T[0]||(T[0]=(...Y)=>e(g)&&e(g)(...Y))},[S(e(fe),{class:n(e(s).e("close"))},{default:R(()=>[S(e(ce))]),_:1},8,["class"])],10,Re)):z("v-if",!0)],2)):z("v-if",!0),e(M)?(y(),A("div",{key:1,id:e(F),class:n([e(s).e("body"),a.bodyClass])},[D(a.$slots,"default")],10,Se)):z("v-if",!0),a.$slots.footer?(y(),A("div",{key:2,class:n([e(s).e("footer"),a.footerClass])},[D(a.$slots,"footer")],2)):z("v-if",!0),a.resizable?(y(),A("div",{key:3,ref_key:"draggerRef",ref:m,style:ve({zIndex:e(h)}),class:n(e(s).e("dragger"))},null,6)):z("v-if",!0)],16,Ee)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[pe,e(u)]])]}),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var Be=K(Ae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const Le=me(Be);export{Le as E};
