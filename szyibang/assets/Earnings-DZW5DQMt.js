import{_ as T}from"./_plugin-vue_export-helper-DRcqrMy4.js";import{v as V}from"./el-loading-CZvZ1YE_.js";import{E as I}from"./el-empty-DZ3VuUlJ.js";/* empty css               *//* empty css                  */import{$ as P,b as $,r as _,q as R,at as A,l as c,d as D,U as H,e as g,f as s,t as i,G as r,h as w,w as l,k as u,j as L,m as W,O as m,V as q,W as F,o as a,x as B,a1 as x}from"./index-Dczg_W-s.js";import{c as U,d as j}from"./responder-C44x3bf_.js";import{b as f,f as G}from"./format-68UbSpw-.js";import{E as O}from"./index-CsPiBT-M.js";function J(k){return P({url:"/responder/withdraw",method:"post",data:{amount:k}})}const K={class:"earnings-page mobile-view-wrapper"},Q={class:"assets-card"},X={class:"amount"},Y={class:"btn-group"},Z={class:"function-grid"},tt={class:"icon-box auth"},st={class:"status-tag"},et={class:"stats-row flex-between"},at={class:"stat-item"},ot={class:"num"},nt={class:"stat-item"},it={class:"num"},rt={class:"stat-item"},lt={class:"num score-num"},dt={class:"list-container"},ct={key:1,class:"trans-list"},ut={class:"left"},mt={class:"title text-ellipsis"},ft={class:"time"},vt={class:"right income"},pt={__name:"Earnings",setup(k){const v=$(),y=_(!0),o=_({balance:0,ratingAvg:5}),h=_({todayCount:0,todayIncome:0}),b=_([]);R(E);async function E(){y.value=!0;try{const[e,t,n]=await Promise.all([A(),U(),j()]);e&&(o.value=e),t&&(h.value=t),n&&(b.value=n),v.refreshProfile()}catch(e){console.error("获取收益数据失败",e),c.error("数据加载失败，请刷新重试")}finally{y.value=!1}}function N(){if(o.value.balance<=0){c.warning("当前账户余额为0，无法提现");return}B.prompt(x("div",null,[x("p",{style:"margin-bottom: 8px;"},"请输入要提现的金额"),x("p",{style:"font-size: 12px; color: #909399;"},`可提现余额: ¥ ${f(o.value.balance)}`)]),"提现申请",{confirmButtonText:"下一步",cancelButtonText:"取消",inputValidator:e=>{const t=Number(e);return!e||isNaN(t)?"请输入数字金额":t<=0?"提现金额必须大于0":t>o.value.balance?"提现金额不能超过可用余额":!0}}).then(({value:e})=>{const t=Number(e);B.confirm(`您确定要提现 ¥ ${f(t)} 到您的银行卡吗？`,"确认提现",{type:"warning"}).then(async()=>{try{const n=await J(t);c.success(n||"提现成功！"),await E()}catch{}}).catch(()=>{c.info("已取消提现")})}).catch(()=>{c.info("已取消提现")})}return(e,t)=>{const n=L,M=D("Postcard"),S=W,p=O,z=I,C=V;return H((a(),g("div",K,[s("div",Q,[t[2]||(t[2]=s("div",{class:"label"},"账户余额 (元)",-1)),s("div",X,i(r(f)(o.value.balance)),1),s("div",Y,[w(n,{round:"",size:"small",class:"withdraw-btn",onClick:N},{default:l(()=>[...t[1]||(t[1]=[u("提现",-1)])]),_:1})])]),s("div",Z,[s("div",{class:"grid-item",onClick:t[0]||(t[0]=d=>e.$router.push("/responder/certification"))},[s("div",tt,[w(S,null,{default:l(()=>[w(M)]),_:1})]),t[7]||(t[7]=s("div",{class:"label"},"资质认证",-1)),s("div",st,[r(v).authStatus===2?(a(),m(p,{key:0,type:"success",size:"small",effect:"dark"},{default:l(()=>[...t[3]||(t[3]=[u("已认证",-1)])]),_:1})):r(v).authStatus===3?(a(),m(p,{key:1,type:"danger",size:"small",effect:"dark"},{default:l(()=>[...t[4]||(t[4]=[u("已驳回",-1)])]),_:1})):r(v).authStatus===1?(a(),m(p,{key:2,type:"info",size:"small",effect:"dark"},{default:l(()=>[...t[5]||(t[5]=[u("审核中",-1)])]),_:1})):(a(),m(p,{key:3,type:"warning",size:"small",effect:"dark"},{default:l(()=>[...t[6]||(t[6]=[u("去认证",-1)])]),_:1}))])])]),s("div",et,[s("div",at,[s("div",ot,i(h.value.todayCount||0),1),t[8]||(t[8]=s("div",{class:"txt"},"今日单数",-1))]),s("div",nt,[s("div",it,"¥ "+i(r(f)(h.value.todayIncome)),1),t[9]||(t[9]=s("div",{class:"txt"},"今日收入",-1))]),s("div",rt,[s("div",lt,i(o.value.ratingAvg?Number(o.value.ratingAvg).toFixed(1):"5.0"),1),t[10]||(t[10]=s("div",{class:"txt"},"服务评分",-1))])]),s("div",dt,[t[11]||(t[11]=s("div",{class:"list-header"},"近期明细",-1)),b.value.length===0?(a(),m(z,{key:0,description:"暂无收益记录"})):(a(),g("div",ct,[(a(!0),g(q,null,F(b.value,d=>(a(),g("div",{key:d.id,class:"trans-item flex-between"},[s("div",ut,[s("div",mt,"完成订单 "+i(d.title),1),s("div",ft,i(r(G)(d.createTime,"yyyy-MM-dd HH:mm")),1)]),s("div",vt,"+ "+i(r(f)(d.responderIncome)),1)]))),128))]))])])),[[C,y.value]])}}},Bt=T(pt,[["__scopeId","data-v-9ac076cc"]]);export{Bt as default};
