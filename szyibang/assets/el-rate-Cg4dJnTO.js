import{z as G,y as fe,ab as S,C as H,ac as me,ad as pe,ae as U,af as k,ag as V,K as q,ah as he,_ as be,A as ye,L as Ve,ai as we,aj as xe,B as Ce,ak as _e,r as w,p as n,al as Ie,am as N,an as X,ao as M,ap as J,D as ge,e as x,o as d,g as Ee,V as Se,W as Te,H as f,G as t,h as Q,w as Y,U as C,O as _,P as I,aq as g,m as Z,N as B,t as De,ar as ke,as as E,T as Ne}from"./index-Dczg_W-s.js";import{c as Me}from"./clamp-4xPGxAbA.js";const Be=fe({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:k([Array,Object]),default:()=>U(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:k([Array,Object]),default:()=>[V,V,V]},voidIcon:{type:q,default:()=>he},disabledVoidIcon:{type:q,default:()=>V},disabled:{type:Boolean,default:void 0},allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:k(Array),default:()=>U(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:pe,clearable:Boolean,...me(["ariaLabel"])}),He={[H]:m=>G(m),[S]:m=>G(m)},Ae=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],Pe=["onMousemove","onClick"],Oe=ye({name:"ElRate",__name:"rate",props:Be,emits:He,setup(m,{expose:ee,emit:ae}){function T(e,u){const i=r=>X(r),l=Object.keys(u).map(r=>+r).filter(r=>{const y=u[r];return(i(y)?y.excluded:!1)?e<r:e<=r}).sort((r,y)=>r-y),h=u[l[0]];return i(h)&&h.value||h}const a=m,p=ae,A=Ve(we,void 0),le=xe(),s=Ce("rate"),{inputId:oe,isLabeledByFormItem:P}=_e(a,{formItemContext:A}),o=w(a.modelValue),D=w(-1),v=w(!0),O=w([]),te=n(()=>O.value.map(e=>e.$el.clientWidth)),se=n(()=>[s.b(),s.m(le.value)]),c=Ie(),re=n(()=>s.cssVarBlock({"void-color":a.voidColor,"disabled-void-color":a.disabledVoidColor,"fill-color":F.value})),j=n(()=>{let e="";return a.showScore?e=a.scoreTemplate.replace(/\{\s*value\s*\}/,c.value?`${a.modelValue}`:`${o.value}`):a.showText&&(e=a.texts[Math.ceil(o.value)-1]),e}),z=n(()=>a.modelValue*100-Math.floor(a.modelValue)*100),ne=n(()=>N(a.colors)?{[a.lowThreshold]:a.colors[0],[a.highThreshold]:{value:a.colors[1],excluded:!0},[a.max]:a.colors[2]}:a.colors),F=n(()=>{const e=T(o.value,ne.value);return X(e)?"":e}),ue=n(()=>{let e="";return c.value?e=`${z.value}%`:a.allowHalf&&(e="50%"),{color:F.value,width:e}}),L=n(()=>{let e=N(a.icons)?[...a.icons]:{...a.icons};return e=M(e),N(e)?{[a.lowThreshold]:e[0],[a.highThreshold]:{value:e[1],excluded:!0},[a.max]:e[2]}:e}),ie=n(()=>T(a.modelValue,L.value)),R=n(()=>c.value?J(a.disabledVoidIcon)?a.disabledVoidIcon:M(a.disabledVoidIcon):J(a.voidIcon)?a.voidIcon:M(a.voidIcon)),ce=n(()=>T(o.value,L.value));function b(e){const u=c.value&&z.value>0&&e-1<a.modelValue&&e>a.modelValue,i=a.allowHalf&&v.value&&e-.5<=o.value&&e>o.value;return u||i}function K(e){a.clearable&&e===a.modelValue&&(e=0),p(S,e),a.modelValue!==e&&p(H,e)}function de(e){c.value||(a.allowHalf&&v.value?K(o.value):K(e))}function ve(e){if(c.value)return;const u=ke(e),i=a.allowHalf?.5:1;let l=o.value;switch(u){case E.up:case E.right:l+=i;break;case E.left:case E.down:l-=i;break}if(l=Me(l,0,a.max),l!==o.value)return e.stopPropagation(),e.preventDefault(),p(S,l),p(H,l),l}function W(e,u){c.value||(a.allowHalf&&u?(v.value=u.offsetX*2<=te.value[e-1],o.value=v.value?e-.5:e):o.value=e,D.value=e)}function $(){c.value||(a.allowHalf&&(v.value=a.modelValue!==Math.floor(a.modelValue)),o.value=a.modelValue,D.value=-1)}return ge(()=>a.modelValue,e=>{o.value=e,v.value=a.modelValue!==Math.floor(a.modelValue)}),a.modelValue||p(S,0),ee({setCurrentValue:W,resetCurrentValue:$}),(e,u)=>{var i;return d(),x("div",{id:t(oe),class:f([se.value,t(s).is("disabled",t(c))]),role:"slider","aria-label":t(P)?void 0:e.ariaLabel||"rating","aria-labelledby":t(P)?(i=t(A))==null?void 0:i.labelId:void 0,"aria-valuenow":o.value,"aria-valuetext":j.value||void 0,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0",style:B(re.value),onKeydown:ve},[(d(!0),x(Se,null,Te(e.max,(l,h)=>(d(),x("span",{key:h,class:f(t(s).e("item")),onMousemove:r=>W(l,r),onMouseleave:$,onClick:r=>de(l)},[Q(t(Z),{ref_for:!0,ref_key:"iconRefs",ref:O,class:f([t(s).e("icon"),{hover:D.value===l},t(s).is("active",l<=o.value),t(s).is("focus-visible",l===Math.ceil(o.value||1))])},{default:Y(()=>[C((d(),_(I(ce.value),null,null,512)),[[g,!b(l)&&l<=o.value]]),C((d(),_(I(R.value),null,null,512)),[[g,!b(l)&&l>o.value]]),C((d(),_(I(R.value),{class:f([t(s).em("decimal","box")])},null,8,["class"])),[[g,b(l)]]),C(Q(t(Z),{style:B(ue.value),class:f([t(s).e("icon"),t(s).e("decimal")])},{default:Y(()=>[(d(),_(I(ie.value)))]),_:1},8,["style","class"]),[[g,b(l)]])]),_:2},1032,["class"])],42,Pe))),128)),e.showText||e.showScore?(d(),x("span",{key:0,class:f(t(s).e("text")),style:B({color:e.textColor})},De(j.value),7)):Ee("v-if",!0)],46,Ae)}}});var je=be(Oe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]]);const Re=Ne(je);export{Re as E};
