import{cB as Fe,y as G,ae as ne,af as j,_ as ge,A as X,L as re,ay as ie,B as Y,r as _,p as w,b6 as W,D as M,bc as se,M as ye,e as _e,g as Ne,o as Ce,N as Ve,H as Te,G as K,aa as q,cC as Ie,cD as Le,a7 as Me,cE as fe,q as De,cg as We,cF as He,h as b,m as U,cG as Ke,b5 as Ue,ar as le,as as z,R as je,ap as qe,z as Ge,F as oe,cH as Xe,ab as we,I as Ee,J as Ye,aT as Je,c as Ze,cI as Qe,U as et,aq as tt,S as at,T as nt}from"./index-Dczg_W-s.js";import{c as st,r as Se}from"./raf-BqDiCstf.js";import{c as A}from"./strings-WYGwQQeI.js";import{c as lt}from"./clamp-4xPGxAbA.js";import{u as ot}from"./index-FNwGa4Fn.js";import{o as rt}from"./omit-CXgNd_Yj.js";const it="horizontal",ct="vertical",ut={[it]:"deltaX",[ct]:"deltaY"},dt=({atEndEdge:e,atStartEdge:r,layout:p},h)=>{let a,i=0;const N=m=>m<0&&r.value||m>0&&e.value;return{hasReachedEdge:N,onWheel:m=>{st(a);const v=m[ut[p.value]];N(i)&&N(i+v)||(i+=v,Fe()||m.preventDefault(),a=Se(()=>{h(i),i=0}))}}},J=Symbol("tabsRootContextKey"),vt=G({tabs:{type:j(Array),default:()=>ne([])},tabRefs:{type:j(Object),default:()=>ne({})}}),me="ElTabBar",bt=X({name:me,__name:"tab-bar",props:vt,setup(e,{expose:r}){const p=e,h=re(J);h||ie(me,"<el-tabs><el-tab-bar /></el-tabs>");const a=Y("tabs"),i=_(),N=_(),f=w(()=>{var n;return W(h.props.defaultValue)||!!((n=N.value)!=null&&n.transform)}),m=()=>{let n=0,E=0;const o=["top","bottom"].includes(h.props.tabPosition)?"width":"height",$=o==="width"?"x":"y",x=$==="x"?"left":"top";return p.tabs.every(S=>{if(W(S.paneName))return!1;const t=p.tabRefs[S.paneName];if(!t)return!1;if(!S.active)return!0;n=t[`offset${A(x)}`],E=t[`client${A(o)}`];const g=window.getComputedStyle(t);return o==="width"&&(E-=Number.parseFloat(g.paddingLeft)+Number.parseFloat(g.paddingRight),n+=Number.parseFloat(g.paddingLeft)),!1}),{[o]:`${E}px`,transform:`translate${A($)}(${n}px)`}},v=()=>N.value=m(),C=[],y=()=>{C.forEach(n=>n.stop()),C.length=0,Object.values(p.tabRefs).forEach(n=>{C.push(se(n,v))})};M(()=>p.tabs,async()=>{await q(),v(),y()},{immediate:!0});const u=se(i,()=>v());return ye(()=>{C.forEach(n=>n.stop()),C.length=0,u.stop()}),r({ref:i,update:v}),(n,E)=>f.value?(Ce(),_e("div",{key:0,ref_key:"barRef",ref:i,class:Te([K(a).e("active-bar"),K(a).is(K(h).props.tabPosition)]),style:Ve(N.value)},null,6)):Ne("v-if",!0)}});var ft=ge(bt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const mt=G({panes:{type:j(Array),default:()=>ne([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean,tabindex:{type:[String,Number],default:void 0}}),pt={tabClick:(e,r,p)=>p instanceof Event,tabRemove:(e,r)=>r instanceof Event},pe="ElTabNav",ht=X({name:pe,props:mt,emits:pt,setup(e,{expose:r,emit:p}){const h=re(J);h||ie(pe,"<el-tabs><tab-nav /></el-tabs>");const a=Y("tabs"),i=Ie(),N=Le(),f=_(),m=_(),v=_(),C=_({}),y=_(),u=_(!1),n=_(0),E=_(!1),o=_(!0),$=Me(),x=w(()=>["top","bottom"].includes(h.props.tabPosition)),S=w(()=>x.value?"width":"height"),t=w(()=>({transform:`translate${S.value==="width"?"X":"Y"}(-${n.value}px)`})),{width:g,height:P}=fe(f),{width:F,height:L}=fe(m,{width:0,height:0},{box:"border-box"}),D=w(()=>x.value?g.value:P.value),V=w(()=>x.value?F.value:L.value),{onWheel:I}=dt({atStartEdge:w(()=>n.value<=0),atEndEdge:w(()=>V.value-n.value<=D.value),layout:w(()=>x.value?"horizontal":"vertical")},s=>{n.value=lt(n.value+s,0,V.value-D.value)}),Z=()=>{if(!f.value)return;const s=f.value[`offset${A(S.value)}`],d=n.value;if(!d)return;const l=d>s?d-s:0;n.value=l},Re=()=>{if(!f.value||!m.value)return;const s=m.value[`offset${A(S.value)}`],d=f.value[`offset${A(S.value)}`],l=n.value;if(s-l<=d)return;const c=s-l>d*2?l+d:s-d;n.value=c},ce=async()=>{const s=m.value;if(!u.value||!v.value||!f.value||!s)return;await q();const d=C.value[e.currentName];if(!d)return;const l=f.value,c=d.getBoundingClientRect(),T=l.getBoundingClientRect(),R=x.value?s.offsetWidth-T.width:s.offsetHeight-T.height,k=n.value;let B=k;x.value?(c.left<T.left&&(B=k-(T.left-c.left)),c.right>T.right&&(B=k+c.right-T.right)):(c.top<T.top&&(B=k-(T.top-c.top)),c.bottom>T.bottom&&(B=k+(c.bottom-T.bottom))),B=Math.max(B,0),n.value=Math.min(B,R)},ue=()=>{var s;if(!m.value||!f.value)return;e.stretch&&((s=y.value)==null||s.update());const d=m.value[`offset${A(S.value)}`],l=f.value[`offset${A(S.value)}`],c=n.value;l<d?(u.value=u.value||{},u.value.prev=c,u.value.next=c+l<d,d-c<l&&(n.value=d-l)):(u.value=!1,c>0&&(n.value=0))},xe=s=>{const d=le(s);let l=0;switch(d){case z.left:case z.up:l=-1;break;case z.right:case z.down:l=1;break;default:return}const c=Array.from(s.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let R=c.indexOf(s.target)+l;R<0?R=c.length-1:R>=c.length&&(R=0),c[R].focus({preventScroll:!0}),c[R].click(),de()},de=()=>{o.value&&(E.value=!0)},Q=()=>E.value=!1,Be=(s,d)=>{C.value[d]=s},$e=async()=>{await q();const s=C.value[e.currentName];s==null||s.focus({preventScroll:!0})};return M(i,s=>{s==="hidden"?o.value=!1:s==="visible"&&setTimeout(()=>o.value=!0,50)}),M(N,s=>{s?setTimeout(()=>o.value=!0,50):o.value=!1}),se(v,()=>{Se(ue)}),De(()=>setTimeout(()=>ce(),0)),We(()=>ue()),r({scrollToActiveTab:ce,removeFocus:Q,focusActiveTab:$e,tabListRef:m,tabBarRef:y,scheduleRender:()=>He($)}),()=>{const s=u.value?[b("span",{class:[a.e("nav-prev"),a.is("disabled",!u.value.prev)],onClick:Z},[b(U,null,{default:()=>[b(Ke,null,null)]})]),b("span",{class:[a.e("nav-next"),a.is("disabled",!u.value.next)],onClick:Re},[b(U,null,{default:()=>[b(Ue,null,null)]})])]:null,d=e.panes.map((l,c)=>{var T,R,k,B,ve;const ke=l.uid,ee=l.props.disabled,H=(R=(T=l.props.name)!=null?T:l.index)!=null?R:`${c}`,te=!ee&&(l.isClosable||l.props.closable!==!1&&e.editable);l.index=`${c}`;const Oe=te?b(U,{class:"is-icon-close",onClick:O=>p("tabRemove",l,O)},{default:()=>[b(je,null,null)]}):null,ze=((B=(k=l.slots).label)==null?void 0:B.call(k))||l.props.label,Ae=!ee&&l.active?(ve=e.tabindex)!=null?ve:h.props.tabindex:-1;return b("div",{ref:O=>Be(O,H),class:[a.e("item"),a.is(h.props.tabPosition),a.is("active",l.active),a.is("disabled",ee),a.is("closable",te),a.is("focus",E.value)],id:`tab-${H}`,key:`tab-${ke}`,"aria-controls":`pane-${H}`,role:"tab","aria-selected":l.active,tabindex:Ae,onFocus:()=>de(),onBlur:()=>Q(),onClick:O=>{Q(),p("tabClick",l,H,O)},onKeydown:O=>{const be=le(O);te&&(be===z.delete||be===z.backspace)&&p("tabRemove",l,O)}},[ze,Oe])});return $.value,b("div",{ref:v,class:[a.e("nav-wrap"),a.is("scrollable",!!u.value),a.is(h.props.tabPosition)]},[s,b("div",{class:a.e("nav-scroll"),ref:f},[e.panes.length>0?b("div",{class:[a.e("nav"),a.is(h.props.tabPosition),a.is("stretch",e.stretch&&["top","bottom"].includes(h.props.tabPosition))],ref:m,style:t.value,role:"tablist",onKeydown:xe,onWheel:I},[e.type?null:b(ft,{ref:y,tabs:[...e.panes],tabRefs:C.value},null),d]):null])])}}}),gt=G({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},defaultValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:j(Function),default:()=>!0},stretch:Boolean,tabindex:{type:[String,Number],default:0}}),ae=e=>qe(e)||Ge(e),yt={[we]:e=>ae(e),tabClick:(e,r)=>r instanceof Event,tabChange:e=>ae(e),edit:(e,r)=>["remove","add"].includes(r),tabRemove:e=>ae(e),tabAdd:()=>!0},_t=X({name:"ElTabs",props:gt,emits:yt,setup(e,{emit:r,slots:p,expose:h}){var a;const i=Y("tabs"),N=w(()=>["left","right"].includes(e.tabPosition)),{children:f,addChild:m,removeChild:v,ChildrenSorter:C}=ot(Ee(),"ElTabPane"),y=_(),u=_((a=W(e.modelValue)?e.defaultValue:e.modelValue)!=null?a:"0"),n=async(t,g=!1)=>{var P,F,L,D;if(!(u.value===t||W(t)))try{let V;if(e.beforeLeave){const I=e.beforeLeave(t,u.value);V=I instanceof Promise?await I:I}else V=!0;if(V!==!1){const I=(P=f.value.find(Z=>Z.paneName===u.value))==null?void 0:P.isFocusInsidePane();u.value=t,g&&(r(we,t),r("tabChange",t)),(L=(F=y.value)==null?void 0:F.removeFocus)==null||L.call(F),I&&((D=y.value)==null||D.focusActiveTab())}}catch{}},E=(t,g,P)=>{t.props.disabled||(r("tabClick",t,P),n(g,!0))},o=(t,g)=>{t.props.disabled||W(t.props.name)||(g.stopPropagation(),r("edit",t.props.name,"remove"),r("tabRemove",t.props.name))},$=()=>{r("edit",void 0,"add"),r("tabAdd")},x=t=>{const g=le(t);[z.enter,z.numpadEnter].includes(g)&&$()},S=t=>{const g=t.el.firstChild,P=["bottom","right"].includes(e.tabPosition)?t.children[0].el:t.children[1].el;g!==P&&g.before(P)};return M(()=>e.modelValue,t=>n(t)),M(u,async()=>{var t;await q(),(t=y.value)==null||t.scrollToActiveTab()}),Ye(J,{props:e,currentName:u,registerPane:m,unregisterPane:v,nav$:y}),h({currentName:u,get tabNavRef(){return rt(y.value,["scheduleRender"])}}),()=>{const t=p["add-icon"],g=e.editable||e.addable?b("div",{class:[i.e("new-tab"),N.value&&i.e("new-tab-vertical")],tabindex:e.tabindex,onClick:$,onKeydown:x},[t?oe(p,"add-icon"):b(U,{class:i.is("icon-plus")},{default:()=>[b(Xe,null,null)]})]):null,P=()=>b(ht,{ref:y,currentName:u.value,editable:e.editable,type:e.type,panes:f.value,stretch:e.stretch,onTabClick:E,onTabRemove:o},null),F=b("div",{class:[i.e("header"),N.value&&i.e("header-vertical"),i.is(e.tabPosition)]},[b(C,null,{default:P,$stable:!0}),g]),L=b("div",{class:i.e("content")},[oe(p,"default")]);return b("div",{class:[i.b(),i.m(e.tabPosition),{[i.m("card")]:e.type==="card",[i.m("border-card")]:e.type==="border-card"}],onVnodeMounted:S,onVnodeUpdated:S},[L,F])}}}),Nt=G({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),Ct=["id","aria-hidden","aria-labelledby"],he="ElTabPane",Tt=X({name:he,__name:"tab-pane",props:Nt,setup(e){const r=e,p=Ee(),h=Je(),a=re(J);a||ie(he,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const i=Y("tab-pane"),N=_(),f=_(),m=w(()=>{var o;return(o=r.closable)!=null?o:a.props.closable}),v=w(()=>{var o;return a.currentName.value===((o=r.name)!=null?o:f.value)}),C=_(v.value),y=w(()=>{var o;return(o=r.name)!=null?o:f.value}),u=w(()=>!r.lazy||C.value||v.value),n=()=>{var o;return(o=N.value)==null?void 0:o.contains(document.activeElement)};M(v,o=>{o&&(C.value=!0)});const E=Ze({uid:p.uid,getVnode:()=>p.vnode,slots:h,props:r,paneName:y,active:v,index:f,isClosable:m,isFocusInsidePane:n});return a.registerPane(E),ye(()=>{a.unregisterPane(E)}),Qe(()=>{var o;h.label&&((o=a.nav$.value)==null||o.scheduleRender())}),(o,$)=>u.value?et((Ce(),_e("div",{key:0,id:`pane-${y.value}`,ref_key:"paneRef",ref:N,class:Te(K(i).b()),role:"tabpanel","aria-hidden":!v.value,"aria-labelledby":`tab-${y.value}`},[oe(o.$slots,"default")],10,Ct)),[[tt,v.value]]):Ne("v-if",!0)}});var Pe=ge(Tt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const Bt=nt(_t,{TabPane:Pe}),$t=at(Pe);export{$t as E,Bt as a};
