import{_ as B}from"./_plugin-vue_export-helper-DRcqrMy4.js";import{v as L}from"./el-loading-CDKhOZ5N.js";/* empty css                  *//* empty css               */import{E as D}from"./el-empty-DFB2bBLd.js";import{E as N,a as M}from"./el-tab-pane-DzKcNUtr.js";import{u as P,r as g,p as U,q as F,e as f,h as u,U as j,w as n,O as i,g as r,V as q,W as A,o as a,f as o,t as c,k as l,G as k,a5 as G,j as H,x as I,l as R}from"./index-Bd4-WGnv.js";import{d as W,g as J,b as K}from"./seeker-DggyzDn7.js";import{a as E,f as Q}from"./format-68UbSpw-.js";import{E as X}from"./index-DTydKQfe.js";import"./raf-DB0AmFco.js";import"./strings-C9Hk7sRF.js";import"./clamp-BcRwWhhj.js";import"./toNumber-BjADBi_g.js";import"./index-Gk_XwiDR.js";import"./omit-rEkUoBp5.js";import"./_baseClone-DsOkhf4F.js";const Y={class:"order-list-page mobile-view-wrapper"},Z={class:"list-content"},tt=["onClick"],et={class:"card-header flex-between"},st={class:"category"},at={class:"flex-center"},ot={class:"card-body"},nt={class:"title text-ellipsis"},lt={class:"time text-gray"},it={class:"card-footer flex-between"},rt={class:"amount"},ut={__name:"OrderList",setup(ct){const b=P(),_=g(!0),v=g("all"),m=g([]),C=U(()=>{switch(v.value){case"ongoing":return m.value.filter(s=>s.status>10&&s.status<55);case"history":return m.value.filter(s=>s.status>=55||s.status===60);default:return m.value}});F(()=>{h()});async function h(){_.value=!0;try{m.value=await W()}finally{_.value=!1}}function w(s){b.push(`/seeker/order-detail/${s}`)}function T(s){window.open(J(s),"_self")}function S(s){b.push(`/seeker/evaluation/${s}`)}async function V(s){try{await I.confirm("请确认响应方已完成所有服务内容。","确认完成",{type:"success"}),await K(s),R.success("操作成功！"),h()}catch{}}return(s,e)=>{const y=N,O=M,$=D,x=X,p=H,z=L;return a(),f("div",Y,[u(O,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),class:"custom-tabs",stretch:""},{default:n(()=>[u(y,{label:"全部",name:"all"}),u(y,{label:"进行中",name:"ongoing"}),u(y,{label:"已完成",name:"history"})]),_:1},8,["modelValue"]),j((a(),f("div",Z,[C.value.length===0?(a(),i($,{key:0,description:"暂无相关订单"})):r("",!0),(a(!0),f(q,null,A(C.value,t=>(a(),f("div",{key:t.id,class:"order-card",onClick:d=>w(t.orderSn)},[o("div",et,[o("span",st,c(t.categoryName),1),o("div",at,[t.hasDispute?(a(),i(x,{key:0,type:"danger",effect:"dark",size:"small",class:"mr-2"},{default:n(()=>[...e[2]||(e[2]=[l("纠纷中",-1)])]),_:1})):r("",!0),u(x,{size:"small",type:k(E)(t.status).type},{default:n(()=>[l(c(k(E)(t.status).text),1)]),_:2},1032,["type"])])]),o("div",ot,[o("h4",nt,c(t.title),1),o("p",lt,c(k(Q)(t.createTime)),1)]),o("div",it,[o("span",rt,[e[3]||(e[3]=l("总额: ",-1)),o("strong",null,"¥ "+c(t.totalAmount),1)]),o("div",{class:"actions",onClick:e[1]||(e[1]=G(()=>{},["stop"]))},[t.status===10?(a(),i(p,{key:0,type:"danger",size:"small",plain:"",onClick:d=>T(t.orderSn)},{default:n(()=>[...e[4]||(e[4]=[l("去支付",-1)])]),_:1},8,["onClick"])):r("",!0),t.status>=30&&t.status<50?(a(),i(p,{key:1,size:"small",onClick:d=>w(t.orderSn)},{default:n(()=>[...e[5]||(e[5]=[l("联系对方",-1)])]),_:1},8,["onClick"])):r("",!0),t.status===50?(a(),i(p,{key:2,type:"primary",size:"small",onClick:d=>V(t.orderSn)},{default:n(()=>[...e[6]||(e[6]=[l("确认完成",-1)])]),_:1},8,["onClick"])):r("",!0),t.status===55?(a(),i(p,{key:3,type:"success",size:"small",plain:"",onClick:d=>S(t.orderSn)},{default:n(()=>[...e[7]||(e[7]=[l("去评价",-1)])]),_:1},8,["onClick"])):r("",!0)])])],8,tt))),128))])),[[z,_.value]])])}}},Vt=B(ut,[["__scopeId","data-v-990330c9"]]);export{Vt as default};
