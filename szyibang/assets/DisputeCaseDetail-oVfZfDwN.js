import{_ as $}from"./_plugin-vue_export-helper-DRcqrMy4.js";import{v as j}from"./el-loading-CZvZ1YE_.js";import{E as q,a as G}from"./el-col-BtXEwClX.js";import{E as O}from"./el-alert-BEEKy4hc.js";import{a as W,E as J}from"./el-form-item-BAbr5JjY.js";/* empty css                  *//* empty css                 */import{E as K}from"./el-input-number-G37_5v12.js";import{a as Q,E as X}from"./el-tab-pane-Cgm8Z_XO.js";import{E as Y}from"./el-empty-DZ3VuUlJ.js";import{E as Z}from"./el-card-Dguapzm2.js";import{E as ee}from"./el-image-viewer-CaQ1nI1O.js";import{E as se}from"./el-avatar-8rGA4kVS.js";import{E as te}from"./el-page-header-Do0TP4tY.js";import{a as oe,r as w,c as ae,q as le,U as ne,e as r,h as o,O as m,g as I,w as a,f as e,t as i,o as n,V as y,W as E,G as V,H as re,E as ie,j as de,k as ce,l as C,x as me}from"./index-Dczg_W-s.js";import{g as ue,r as pe}from"./dispute-DBxZJlml.js";import{f as A}from"./format-68UbSpw-.js";import"./castArray-Bkbd9iUu.js";import"./_baseClone-DlauArLD.js";import"./raf-BqDiCstf.js";import"./strings-WYGwQQeI.js";import"./clamp-4xPGxAbA.js";import"./toNumber-BxgSLSKp.js";import"./index-FNwGa4Fn.js";import"./omit-CXgNd_Yj.js";import"./index-D5yFMpEK.js";import"./debounce-D6x4jhS0.js";const _e={class:"admin-case-detail"},ve={class:"flex-center"},fe={class:"detail-item"},be={class:"val"},ye={class:"detail-item"},Ee={class:"val desc"},ge={class:"detail-item"},ke={class:"img-grid"},he={class:"chat-history-box"},xe={class:"time"},we={class:"text"},Ie={key:0},Ve={key:1},Ce={key:0,class:"resolve-area mt-20"},Ae={key:1,class:"resolved-info mt-20"},De={class:"result-list"},Te={class:"res-item"},Be={class:"val"},He={class:"res-item"},Ue={class:"val price"},Ne={class:"res-item"},Re={class:"val"},Fe={class:"flex-center"},ze={key:0},Le={class:"detail-item"},Me={class:"val desc"},Pe={class:"detail-item"},Se={class:"img-grid"},$e={__name:"DisputeCaseDetail",setup(je){const D=oe().params.id,u=w(!0),t=w(null),d=ae({result:"",amount:0});le(g);async function g(){u.value=!0;try{t.value=await ue(D)}finally{u.value=!1}}function T(){if(!d.result)return C.warning("请输入裁决结果");me.confirm("确定提交裁决吗？提交后将立即生效且不可撤销，涉及资金将自动划扣。","最终确认",{type:"warning"}).then(async()=>{await pe({caseId:t.value.id,resolutionResult:d.result,compensationAmount:d.amount}),C.success("裁决成功"),g()})}function B(c){return{1:"服务迟到",2:"质量差",3:"物品损坏",4:"态度恶劣",99:"其他"}[c]||"未知"}function H(c){return c?Number(c).toFixed(2):"0.00"}return(c,s)=>{const U=te,k=se,h=ee,p=Z,_=q,v=Y,x=X,N=Q,R=ie,f=J,F=K,z=de,L=W,M=O,P=G,S=j;return ne((n(),r("div",_e,[o(U,{onBack:s[0]||(s[0]=l=>c.$router.back()),title:"案件裁决处理",class:"mb-20"}),t.value?(n(),m(P,{key:0,gutter:20},{default:a(()=>[o(_,{span:6},{default:a(()=>[o(p,{class:"h-100"},{header:a(()=>[e("div",ve,[o(k,{size:30,src:t.value.seekerAvatar},null,8,["src"]),s[3]||(s[3]=e("span",{class:"ml-2 font-bold"},"求助方 (原告)",-1))])]),default:a(()=>[e("div",fe,[s[4]||(s[4]=e("div",{class:"label"},"追责原因",-1)),e("div",be,i(B(t.value.reasonType)),1)]),e("div",ye,[s[5]||(s[5]=e("div",{class:"label"},"诉求描述",-1)),e("div",Ee,i(t.value.description),1)]),e("div",ge,[s[6]||(s[6]=e("div",{class:"label"},"证据材料",-1)),e("div",ke,[(n(!0),r(y,null,E(t.value.evidenceUrls,(l,b)=>(n(),m(h,{key:b,src:l,"preview-src-list":t.value.evidenceUrls,class:"ev-img",fit:"cover"},null,8,["src","preview-src-list"]))),128))])])]),_:1})]),_:1}),o(_,{span:12},{default:a(()=>[o(p,{class:"h-100 body-card"},{header:a(()=>[...s[7]||(s[7]=[e("span",{class:"font-bold"},"系统客观记录",-1)])]),default:a(()=>[o(N,{type:"border-card",class:"evidence-tabs"},{default:a(()=>[o(x,{label:"聊天记录"},{default:a(()=>[e("div",he,[(n(!0),r(y,null,E(t.value.chatHistory,l=>(n(),r("div",{key:l.id,class:"chat-item"},[e("span",xe,"["+i(V(A)(l.sendTime,"HH:mm"))+"]",1),e("span",{class:re(["sender",l.senderId===t.value.seekerId?"s-seeker":"s-responder"])},i(l.senderId===t.value.seekerId?"求助方":"响应方")+": ",3),e("span",we,[l.msgType===1?(n(),r("span",Ie,i(l.textContent),1)):(n(),r("span",Ve,"[媒体消息]"))])]))),128)),!t.value.chatHistory||!t.value.chatHistory.length?(n(),m(v,{key:0,description:"暂无聊天记录","image-size":"60"})):I("",!0)])]),_:1}),o(x,{label:"订单轨迹"},{default:a(()=>[o(v,{description:"LBS轨迹回放功能开发中..."})]),_:1})]),_:1}),t.value.status<40?(n(),r("div",Ce,[s[10]||(s[10]=e("div",{class:"area-title"},"管理员裁决",-1)),o(L,{"label-width":"80px"},{default:a(()=>[o(f,{label:"裁决结果"},{default:a(()=>[o(R,{modelValue:d.result,"onUpdate:modelValue":s[1]||(s[1]=l=>d.result=l),type:"textarea",rows:3,placeholder:"请输入最终处理意见..."},null,8,["modelValue"])]),_:1}),o(f,{label:"赔偿金额"},{default:a(()=>[o(F,{modelValue:d.amount,"onUpdate:modelValue":s[2]||(s[2]=l=>d.amount=l),min:0,precision:2},null,8,["modelValue"]),s[8]||(s[8]=e("span",{class:"ml-2 text-xs text-gray"},"将从响应方余额扣除",-1))]),_:1}),o(f,null,{default:a(()=>[o(z,{type:"primary",onClick:T},{default:a(()=>[...s[9]||(s[9]=[ce("确认裁决",-1)])]),_:1})]),_:1})]),_:1})])):(n(),r("div",Ae,[o(M,{title:"案件已裁决",type:"success",closable:!1,"show-icon":""},{default:a(()=>[e("div",De,[e("div",Te,[s[11]||(s[11]=e("span",{class:"label"},"裁决结果:",-1)),e("span",Be,i(t.value.resolutionResult||"无"),1)]),e("div",He,[s[12]||(s[12]=e("span",{class:"label"},"赔偿金额:",-1)),e("span",Ue,"¥ "+i(H(t.value.compensationAmount)),1)]),e("div",Ne,[s[13]||(s[13]=e("span",{class:"label"},"处理时间:",-1)),e("span",Re,i(V(A)(t.value.resolveTime)),1)])])]),_:1})]))]),_:1})]),_:1}),o(_,{span:6},{default:a(()=>[o(p,{class:"h-100"},{header:a(()=>[e("div",Fe,[o(k,{size:30,src:t.value.responderAvatar},null,8,["src"]),s[14]||(s[14]=e("span",{class:"ml-2 font-bold"},"响应方 (被告)",-1))])]),default:a(()=>[t.value.responderAppeal?(n(),r("div",ze,[e("div",Le,[s[15]||(s[15]=e("div",{class:"label"},"申诉内容",-1)),e("div",Me,i(t.value.responderAppeal),1)]),e("div",Pe,[s[16]||(s[16]=e("div",{class:"label"},"证据材料",-1)),e("div",Se,[(n(!0),r(y,null,E(t.value.responderEvidenceUrls,(l,b)=>(n(),m(h,{key:b,src:l,"preview-src-list":t.value.responderEvidenceUrls,class:"ev-img",fit:"cover"},null,8,["src","preview-src-list"]))),128))])])])):(n(),m(v,{key:1,description:"暂未提交申诉"}))]),_:1})]),_:1})]),_:1})):I("",!0)])),[[S,u.value]])}}},ys=$($e,[["__scopeId","data-v-73dbd103"]]);export{ys as default};
