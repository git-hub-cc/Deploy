import{_ as N}from"./_plugin-vue_export-helper-DRcqrMy4.js";import{E as R,a as q}from"./el-form-item-D3sxnqbV.js";/* empty css                  */import{E as F}from"./el-progress-xYuBwGGD.js";/* empty css                 *//* empty css               */import{E as A,a as C}from"./el-select-VV4aDOx5.js";import"./el-scrollbar-DIA22QBm.js";import"./el-popper-D2gumpQS.js";import{E as L}from"./el-alert-CHOaiL-m.js";import{E as P}from"./el-page-header-Cg0l_7Nt.js";import{a as M,u as O,r as p,c as S,d as $,e as j,h as e,f,w as o,E as z,m as H,j as J,k as G,v as K,l as _,x as Q,o as W}from"./index-Bd4-WGnv.js";import{a as X}from"./dispute-B4wU6ckY.js";import"./castArray-CRhzGHtd.js";import"./_baseClone-DsOkhf4F.js";import"./index-DTydKQfe.js";import"./strings-C9Hk7sRF.js";import"./_baseIteratee-BtBIbnQi.js";import"./clamp-BcRwWhhj.js";import"./toNumber-BjADBi_g.js";import"./index-lW1wLRgX.js";import"./index-C585l_VU.js";const Y={class:"apply-dispute-page mobile-view-wrapper"},Z={class:"content"},ee={__name:"ApplyDispute",setup(te){const v=M(),y=O(),g=Number(v.query.orderId),u=p(null),m=p(!1),d=p([]),c=p([]),l=S({reasonType:null,description:""}),b={reasonType:[{required:!0,message:"请选择追责原因",trigger:"change"}],description:[{required:!0,message:"请填写详细说明",trigger:"blur"}]};async function E(a){const t=new FormData;t.append("file",a.file);try{const n=await K(t);c.value.push(n)}catch{_.error("图片上传失败")}}function w(a){}async function V(){u.value&&await u.value.validate(async a=>{if(a){if(c.value.length===0)try{await Q.confirm("您未上传任何证据图片，这可能影响裁决结果，确定提交吗？","提示",{type:"warning"})}catch{return}m.value=!0;try{await X({orderId:g,reasonType:l.reasonType,description:l.description,evidenceUrls:JSON.stringify(c.value)}),_.success("申请提交成功"),y.back()}catch(t){console.error(t)}finally{m.value=!1}}})}return(a,t)=>{const n=P,k=L,r=C,x=A,i=R,T=z,h=$("Plus"),U=H,B=F,I=J,D=q;return W(),j("div",Y,[e(n,{onBack:t[0]||(t[0]=s=>a.$router.back()),title:"申请追责",class:"page-header"}),f("div",Z,[e(k,{title:"请提供真实有效的证据，虚假举报将面临封号处罚。",type:"warning","show-icon":"",closable:!1,class:"mb-20"}),e(D,{ref_key:"formRef",ref:u,model:l,rules:b,"label-position":"top"},{default:o(()=>[e(i,{label:"追责原因",prop:"reasonType"},{default:o(()=>[e(x,{modelValue:l.reasonType,"onUpdate:modelValue":t[1]||(t[1]=s=>l.reasonType=s),placeholder:"请选择主要原因",class:"w-100"},{default:o(()=>[e(r,{label:"服务迟到/未到",value:1}),e(r,{label:"服务质量差/未解决",value:2}),e(r,{label:"造成物品损坏",value:3}),e(r,{label:"态度恶劣/骚扰",value:4}),e(r,{label:"其他原因",value:99})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"详细说明",prop:"description"},{default:o(()=>[e(T,{modelValue:l.description,"onUpdate:modelValue":t[2]||(t[2]=s=>l.description=s),type:"textarea",rows:5,placeholder:"请详细描述事情经过、损失情况等..."},null,8,["modelValue"])]),_:1}),e(i,{label:"上传证据 (图片/视频)",prop:"evidenceList"},{default:o(()=>[e(B,{"file-list":d.value,"onUpdate:fileList":t[3]||(t[3]=s=>d.value=s),action:"#","list-type":"picture-card","http-request":E,limit:5,"on-remove":w},{default:o(()=>[e(U,null,{default:o(()=>[e(h)]),_:1})]),_:1},8,["file-list"]),t[4]||(t[4]=f("div",{class:"tip-text mt-2"},"支持聊天截图、现场照片、通话记录等",-1))]),_:1}),e(i,null,{default:o(()=>[e(I,{type:"danger",class:"w-100 submit-btn",size:"large",onClick:V,loading:m.value},{default:o(()=>[...t[5]||(t[5]=[G(" 提交申请 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}},xe=N(ee,[["__scopeId","data-v-0d50965b"]]);export{xe as default};
