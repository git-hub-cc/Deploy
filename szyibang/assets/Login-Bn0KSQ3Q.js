import{_ as V}from"./_plugin-vue_export-helper-DRcqrMy4.js";/* empty css               */import{E as x,a as C}from"./el-form-item-BAbr5JjY.js";/* empty css                  *//* empty css                 */import{u as I,a as h,b as q,r as w,c as z,d as B,e as L,f as r,g as N,h as o,w as s,E as R,i as $,j as T,k as a,l as U,o as F}from"./index-Dczg_W-s.js";import{E as K}from"./index-CsPiBT-M.js";import"./castArray-Bkbd9iUu.js";import"./_baseClone-DlauArLD.js";const S={class:"login-page mobile-view-wrapper"},j={class:"login-header"},D={class:"login-form-container"},M={class:"footer-links flex-between"},A={class:"demo-tips"},G={__name:"Login",setup(H){const n=I(),g=h(),v=q(),p=w(null),u=w(!1),t=z({phone:"",password:""}),k={phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]};async function c(){p.value&&await p.value.validate(async i=>{if(i){u.value=!0;try{const{userInfo:e}=await v.login(t);if(U.success(`欢迎回来，${e.nickname}`),g.query.redirect){n.push(g.query.redirect);return}switch(e.roleType){case 1:n.push("/seeker/home");break;case 2:n.push("/responder/hall");break;case 3:case 4:n.push("/admin/dashboard");break;default:n.push("/")}}catch{}finally{u.value=!1}}})}function d(i){t.phone=i,t.password="123456"}return(i,e)=>{const _=R,m=x,y=T,b=C,E=B("router-link"),f=K;return F(),L("div",S,[r("div",j,[N("",!0),e[5]||(e[5]=r("h1",{class:"app-name"},"数智易帮",-1)),e[6]||(e[6]=r("p",{class:"app-slogan"},"同城应急资源调配平台",-1))]),r("div",D,[o(b,{ref_key:"formRef",ref:p,model:t,rules:k,size:"large"},{default:s(()=>[o(m,{prop:"phone"},{default:s(()=>[o(_,{modelValue:t.phone,"onUpdate:modelValue":e[0]||(e[0]=l=>t.phone=l),placeholder:"请输入手机号","prefix-icon":"Iphone",clearable:""},null,8,["modelValue"])]),_:1}),o(m,{prop:"password"},{default:s(()=>[o(_,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=l=>t.password=l),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":"",onKeyup:$(c,["enter"])},null,8,["modelValue"])]),_:1}),o(m,null,{default:s(()=>[o(y,{type:"primary",class:"submit-btn",loading:u.value,onClick:c},{default:s(()=>[...e[7]||(e[7]=[a(" 登 录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),r("div",M,[o(E,{to:"/register"},{default:s(()=>[...e[8]||(e[8]=[a("没有账号？立即注册",-1)])]),_:1}),e[9]||(e[9]=r("span",{class:"text-gray"},"忘记密码?",-1))]),r("div",A,[e[13]||(e[13]=r("p",null,"演示账号(密码123456):",-1)),o(f,{size:"small",onClick:e[2]||(e[2]=l=>d("13800000001"))},{default:s(()=>[...e[10]||(e[10]=[a("管理员",-1)])]),_:1}),o(f,{size:"small",type:"success",onClick:e[3]||(e[3]=l=>d("13011112222"))},{default:s(()=>[...e[11]||(e[11]=[a("求助方",-1)])]),_:1}),o(f,{size:"small",type:"warning",onClick:e[4]||(e[4]=l=>d("13133334444"))},{default:s(()=>[...e[12]||(e[12]=[a("响应方",-1)])]),_:1})])])])}}},oe=V(G,[["__scopeId","data-v-f99fb544"]]);export{oe as default};
