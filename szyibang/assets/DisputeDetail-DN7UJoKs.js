import{_ as re}from"./_plugin-vue_export-helper-DRcqrMy4.js";import{v as ie}from"./el-loading-CDKhOZ5N.js";/* empty css                  */import{E as ue}from"./el-progress-xYuBwGGD.js";/* empty css                 */import{E as ce}from"./el-image-viewer-Cfn1FMc4.js";/* empty css               */import{E as pe}from"./el-page-header-Cg0l_7Nt.js";import{y as Y,C as X,z as Z,_ as ee,A as se,B as te,D as J,e as u,o as r,F as O,h as c,G as o,H as d,I as ae,J as de,K as ve,r as A,L as me,q as le,p as y,M as fe,g as f,f as l,N as j,O as C,w,P as _e,m as R,Q as ye,R as ge,t as m,k as B,S as he,T as Se,a as we,u as ke,b as Ee,c as be,d as Ce,U as Ie,V as q,W as G,E as Te,j as Ne,v as Ue,l as Q}from"./index-Bd4-WGnv.js";import{g as $e,s as De}from"./dispute-B4wU6ckY.js";import{f as xe}from"./format-68UbSpw-.js";import{u as Ae}from"./index-Gk_XwiDR.js";import{E as Be}from"./index-DTydKQfe.js";import"./_baseClone-DsOkhf4F.js";import"./index-C585l_VU.js";import"./debounce-rf4AVrH1.js";import"./toNumber-BjADBi_g.js";const Pe=Y({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),Ve={[X]:(I,k)=>[I,k].every(Z)},ne="ElSteps",ze=se({name:"ElSteps",__name:"steps",props:Pe,emits:Ve,setup(I,{emit:k}){const n=I,_=k,g=te("steps"),{children:e,addChild:a,removeChild:E,ChildrenSorter:b}=Ae(ae(),"ElStep");return J(e,()=>{e.value.forEach((p,v)=>{p.setIndex(v)})}),de(ne,{props:n,steps:e,addStep:a,removeStep:E}),J(()=>n.active,(p,v)=>{_(X,p,v)}),(p,v)=>(r(),u("div",{class:d([o(g).b(),o(g).m(p.simple?"simple":p.direction)])},[O(p.$slots,"default"),c(o(b))],2))}});var Me=ee(ze,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/steps.vue"]]);const Fe=Y({title:{type:String,default:""},icon:{type:ve},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),Oe=se({name:"ElStep",__name:"item",props:Fe,setup(I){const k=I,n=te("step"),_=A(-1),g=A({}),e=A(""),a=me(ne),E=ae();let b=0,p=0;le(()=>{J([()=>a.props.active,()=>a.props.processStatus,()=>a.props.finishStatus],([t],[S])=>{p=S||0,b=t-p,z(t)},{immediate:!0})});const v=y(()=>k.status||e.value),L=y(()=>{const t=a.steps.value[_.value-1];return t?t.internalStatus.value:"wait"}),U=y(()=>a.props.alignCenter),P=y(()=>a.props.direction==="vertical"),h=y(()=>a.props.simple),$=y(()=>a.steps.value.length),i=y(()=>{var t;return((t=a.steps.value[$.value-1])==null?void 0:t.uid)===E.uid}),s=y(()=>h.value?"":a.props.space),D=y(()=>[n.b(),n.is(h.value?"simple":a.props.direction),n.is("flex",i.value&&!s.value&&!U.value),n.is("center",U.value&&!P.value&&!h.value)]),T=y(()=>{const t={flexBasis:Z(s.value)?`${s.value}px`:s.value?s.value:`${100/($.value-(U.value?0:1))}%`};return P.value||i.value&&(t.maxWidth=`${100/$.value}%`),t}),W=t=>{_.value=t},V=t=>{const S=t==="wait",x={transitionDelay:`${Math.abs(b)===1?0:b>0?(_.value+1-p)*150:-(_.value+1-a.props.active)*150}ms`},F=t===a.props.processStatus||S?0:100;x.borderWidth=F&&!h.value?"1px":0,x[a.props.direction==="vertical"?"height":"width"]=`${F}%`,g.value=x},z=t=>{t>_.value?e.value=a.props.finishStatus:t===_.value&&L.value!=="error"?e.value=a.props.processStatus:e.value="wait";const S=a.steps.value[_.value-1];S&&S.calcProgress(e.value)},M={uid:E.uid,getVnode:()=>E.vnode,currentStatus:v,internalStatus:e,setIndex:W,calcProgress:V};return a.addStep(M),fe(()=>{a.removeStep(M)}),(t,S)=>(r(),u("div",{style:j(T.value),class:d(D.value)},[f(" icon & line "),l("div",{class:d([o(n).e("head"),o(n).is(v.value)])},[h.value?f("v-if",!0):(r(),u("div",{key:0,class:d(o(n).e("line"))},[l("i",{class:d(o(n).e("line-inner")),style:j(g.value)},null,6)],2)),l("div",{class:d([o(n).e("icon"),o(n).is(t.icon||t.$slots.icon?"icon":"text")])},[O(t.$slots,"icon",{},()=>[t.icon?(r(),C(o(R),{key:0,class:d(o(n).e("icon-inner"))},{default:w(()=>[(r(),C(_e(t.icon)))]),_:1},8,["class"])):v.value==="success"?(r(),C(o(R),{key:1,class:d([o(n).e("icon-inner"),o(n).is("status")])},{default:w(()=>[c(o(ye))]),_:1},8,["class"])):v.value==="error"?(r(),C(o(R),{key:2,class:d([o(n).e("icon-inner"),o(n).is("status")])},{default:w(()=>[c(o(ge))]),_:1},8,["class"])):h.value?f("v-if",!0):(r(),u("div",{key:3,class:d(o(n).e("icon-inner"))},m(_.value+1),3))])],2)],2),f(" title & description "),l("div",{class:d(o(n).e("main"))},[l("div",{class:d([o(n).e("title"),o(n).is(v.value)])},[O(t.$slots,"title",{},()=>[B(m(t.title),1)])],2),h.value?(r(),u("div",{key:0,class:d(o(n).e("arrow"))},null,2)):(r(),u("div",{key:1,class:d([o(n).e("description"),o(n).is(v.value)])},[O(t.$slots,"description",{},()=>[B(m(t.description),1)])],2))],2)],6))}});var oe=ee(Oe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/item.vue"]]);const Re=Se(Me,{Step:oe}),Le=he(oe),We={class:"dispute-detail-page mobile-view-wrapper"},He={key:0,class:"content"},Je={class:"steps-box"},Ke={class:"info-card"},je={class:"row"},qe={class:"value"},Ge={class:"row"},Qe={class:"row"},Ye={class:"value"},Xe={class:"row"},Ze={class:"info-card"},es={class:"desc-box"},ss={key:0,class:"img-list mt-2"},ts={key:0,class:"info-card"},as={class:"card-title flex-between"},ls={key:0},ns={key:0,class:"img-preview mt-2"},os={class:"text-xs text-gray"},rs={key:1},is={class:"desc-box"},us={key:0,class:"img-list mt-2"},cs={key:1,class:"info-card result"},ps={class:"result-content"},ds={class:"mb-2"},vs={key:0,class:"money"},ms={class:"time-footer"},fs={__name:"DisputeDetail",setup(I){const k=we();ke();const n=Ee(),_=k.params.id,g=A(!0),e=A(null),a=be({desc:"",urls:[]}),E=y(()=>{if(!e.value)return 0;const i=e.value.status;return i===10?1:i===20?2:i===30?3:i===40?4:0}),b=y(()=>e.value?n.roleType===2&&e.value.responderId===n.userInfo.id&&!e.value.responderAppeal&&e.value.status<40:!1);le(p);async function p(){g.value=!0;try{e.value=await $e(_)}finally{g.value=!1}}async function v(i){const s=new FormData;s.append("file",i.file);const D=await Ue(s);a.urls.push(D)}async function L(){if(!a.desc)return Q.warning("请填写申诉理由");try{await De({caseId:e.value.id,appealDescription:a.desc,evidenceUrls:JSON.stringify(a.urls)}),Q.success("申诉提交成功"),p()}catch{}}function U(){}function P(i){return{1:"服务迟到",2:"质量差",3:"物品损坏",4:"态度恶劣",99:"其他"}[i]||"未知"}function h(i){return i===40?"success":i===50?"info":"warning"}function $(i){return i===10?"待处理":i===30?"平台介入中":i===40?"已裁决":i===50?"已撤销":"进行中"}return(i,s)=>{const D=pe,T=Le,W=Re,V=Be,z=ce,M=Te,t=Ce("Plus"),S=R,K=ue,x=Ne,F=ie;return Ie((r(),u("div",We,[c(D,{onBack:s[0]||(s[0]=N=>i.$router.back()),title:"追责详情",class:"page-header"}),e.value?(r(),u("div",He,[l("div",Je,[c(W,{active:E.value,"finish-status":"success","align-center":""},{default:w(()=>[c(T,{title:"提交申请"}),c(T,{title:"对方申诉"}),c(T,{title:"平台介入"}),c(T,{title:"裁决完成"})]),_:1},8,["active"])]),l("div",Ke,[s[6]||(s[6]=l("div",{class:"card-title"},"案件信息",-1)),l("div",je,[s[2]||(s[2]=l("span",{class:"label"},"案件编号：",-1)),l("span",qe,m(e.value.caseSn),1)]),l("div",Ge,[s[3]||(s[3]=l("span",{class:"label"},"关联订单：",-1)),l("span",{class:"value link",onClick:U},m(e.value.orderSn),1)]),l("div",Qe,[s[4]||(s[4]=l("span",{class:"label"},"追责原因：",-1)),l("span",Ye,m(P(e.value.reasonType)),1)]),l("div",Xe,[s[5]||(s[5]=l("span",{class:"label"},"当前状态：",-1)),c(V,{size:"small",type:h(e.value.status)},{default:w(()=>[B(m($(e.value.status)),1)]),_:1},8,["type"])])]),l("div",Ze,[s[7]||(s[7]=l("div",{class:"card-title"},"求助方主张",-1)),l("div",es,m(e.value.description),1),e.value.evidenceUrls&&e.value.evidenceUrls.length?(r(),u("div",ss,[(r(!0),u(q,null,G(e.value.evidenceUrls,(N,H)=>(r(),C(z,{key:H,src:N,"preview-src-list":e.value.evidenceUrls,fit:"cover",class:"img-item"},null,8,["src","preview-src-list"]))),128))])):f("",!0)]),e.value.status>=20?(r(),u("div",ts,[l("div",as,[s[9]||(s[9]=l("span",null,"响应方申诉",-1)),e.value.responderAppeal?f("",!0):(r(),C(V,{key:0,type:"info",size:"small"},{default:w(()=>[...s[8]||(s[8]=[B("未提交",-1)])]),_:1}))]),b.value?(r(),u("div",ls,[c(M,{modelValue:a.desc,"onUpdate:modelValue":s[1]||(s[1]=N=>a.desc=N),type:"textarea",rows:3,placeholder:"请输入申诉理由...",class:"mb-2"},null,8,["modelValue"]),c(K,{action:"#","list-type":"picture-card","http-request":v,"show-file-list":!1},{default:w(()=>[c(S,null,{default:w(()=>[c(t)]),_:1})]),_:1}),a.urls.length?(r(),u("div",ns,[l("span",os,"已选 "+m(a.urls.length)+" 张图片",1)])):f("",!0),c(x,{type:"primary",class:"w-100 mt-3",onClick:L},{default:w(()=>[...s[10]||(s[10]=[B("提交申诉",-1)])]),_:1})])):e.value.responderAppeal?(r(),u("div",rs,[l("div",is,m(e.value.responderAppeal),1),e.value.responderEvidenceUrls&&e.value.responderEvidenceUrls.length?(r(),u("div",us,[(r(!0),u(q,null,G(e.value.responderEvidenceUrls,(N,H)=>(r(),C(z,{key:H,src:N,"preview-src-list":e.value.responderEvidenceUrls,fit:"cover",class:"img-item"},null,8,["src","preview-src-list"]))),128))])):f("",!0)])):f("",!0)])):f("",!0),e.value.status===40?(r(),u("div",cs,[s[11]||(s[11]=l("div",{class:"card-title"},"平台最终裁决",-1)),l("div",ps,[l("p",ds,m(e.value.resolutionResult),1),e.value.compensationAmount>0?(r(),u("div",vs," 涉及赔偿：¥ "+m(e.value.compensationAmount),1)):f("",!0)]),l("div",ms,"裁决时间: "+m(o(xe)(e.value.resolveTime)),1)])):f("",!0)])):f("",!0)])),[[F,g.value]])}}},As=re(fs,[["__scopeId","data-v-4fc1b3f3"]]);export{As as default};
