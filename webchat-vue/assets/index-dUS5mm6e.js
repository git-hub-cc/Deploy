const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./UserProfile-CwwM8bFF.js","./ResourcePreview-Coimu1VB.js","./ResourcePreview-Cr8EXnph.css","./UserProfile-D8ShF3fG.css","./GroupInfo-DqPASKW1.js","./GroupInfo-CrkgkYht.css","./PeopleLobby-BvsCfAOy.js","./PeopleLobby-BSFU_4g7.css","./SettingsModal-B0vRU_CE.js","./ModalWrapper-DMihTpK2.js","./ModalWrapper-Cs58jh8A.css","./SettingsModal-C0U_UqbU.css","./NewContactModal-n_u8LAxz.js","./NewContactModal-Dm9jUSPd.css","./LocationPickerModal-CnknUs6N.js","./leaflet-src-B1vOQq_m.js","./LocationPickerModal-DJ7XX8KR.css","./ScreenshotEditor-B6rRLeK-.js","./ScreenshotEditor-BnIPsSkW.css","./ScreenshotGuideModal-BjrQB4KQ.js","./ScreenshotGuideModal-tx93HEqI.css","./IncomingCallModal-B2J3qiJ_.js","./IncomingCallModal-BHsESB4a.css","./ConfirmationModal-BqPN9LM5.js","./ConfirmationModal-DbuOEv6u.css","./MediaViewerModal-B_49g2X0.js","./MediaViewerModal-Baj2aEWJ.css","./LocationViewerModal-9wBLXpXq.js","./LocationViewerModal-DtZFkG5v.css","./WorldMapModal-CwQCGVTV.js","./WorldMapModal-C3FuHrDQ.css","./ImageCropperModal-D31CoGAa.js","./ImageCropperModal-BpomnhwU.css"])))=>i.map(i=>d[i]);
var ft=Object.defineProperty;var ht=(_,S,w)=>S in _?ft(_,S,{enumerable:!0,configurable:!0,writable:!0,value:w}):_[S]=w;var nt=(_,S,w)=>ht(_,typeof S!="symbol"?S+"":S,w);(function(){const S=document.createElement("link").relList;if(S&&S.supports&&S.supports("modulepreload"))return;for(const T of document.querySelectorAll('link[rel="modulepreload"]'))E(T);new MutationObserver(T=>{for(const A of T)if(A.type==="childList")for(const k of A.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&E(k)}).observe(document,{childList:!0,subtree:!0});function w(T){const A={};return T.integrity&&(A.integrity=T.integrity),T.referrerPolicy&&(A.referrerPolicy=T.referrerPolicy),T.crossOrigin==="use-credentials"?A.credentials="include":T.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function E(T){if(T.ep)return;T.ep=!0;const A=w(T);fetch(T.href,A)}})();const global$1=globalThis||void 0||self;/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function makeMap(_){const S=Object.create(null);for(const w of _.split(","))S[w]=1;return w=>w in S}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=_=>_.charCodeAt(0)===111&&_.charCodeAt(1)===110&&(_.charCodeAt(2)>122||_.charCodeAt(2)<97),isModelListener=_=>_.startsWith("onUpdate:"),extend=Object.assign,remove$1=(_,S)=>{const w=_.indexOf(S);w>-1&&_.splice(w,1)},hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn=(_,S)=>hasOwnProperty$2.call(_,S),isArray$1=Array.isArray,isMap=_=>toTypeString(_)==="[object Map]",isSet=_=>toTypeString(_)==="[object Set]",isDate=_=>toTypeString(_)==="[object Date]",isRegExp=_=>toTypeString(_)==="[object RegExp]",isFunction=_=>typeof _=="function",isString$1=_=>typeof _=="string",isSymbol$1=_=>typeof _=="symbol",isObject$3=_=>_!==null&&typeof _=="object",isPromise=_=>(isObject$3(_)||isFunction(_))&&isFunction(_.then)&&isFunction(_.catch),objectToString$1=Object.prototype.toString,toTypeString=_=>objectToString$1.call(_),toRawType=_=>toTypeString(_).slice(8,-1),isPlainObject$2=_=>toTypeString(_)==="[object Object]",isIntegerKey=_=>isString$1(_)&&_!=="NaN"&&_[0]!=="-"&&""+parseInt(_,10)===_,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=_=>{const S=Object.create(null);return(w=>S[w]||(S[w]=_(w)))},camelizeRE=/-\w/g,camelize=cacheStringFunction(_=>_.replace(camelizeRE,S=>S.slice(1).toUpperCase())),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(_=>_.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(_=>_.charAt(0).toUpperCase()+_.slice(1)),toHandlerKey=cacheStringFunction(_=>_?`on${capitalize(_)}`:""),hasChanged=(_,S)=>!Object.is(_,S),invokeArrayFns=(_,...S)=>{for(let w=0;w<_.length;w++)_[w](...S)},def=(_,S,w,E=!1)=>{Object.defineProperty(_,S,{configurable:!0,enumerable:!1,writable:E,value:w})},looseToNumber=_=>{const S=parseFloat(_);return isNaN(S)?_:S},toNumber$1=_=>{const S=isString$1(_)?Number(_):NaN;return isNaN(S)?_:S};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global$1<"u"?global$1:{});function normalizeStyle(_){if(isArray$1(_)){const S={};for(let w=0;w<_.length;w++){const E=_[w],T=isString$1(E)?parseStringStyle(E):normalizeStyle(E);if(T)for(const A in T)S[A]=T[A]}return S}else if(isString$1(_)||isObject$3(_))return _}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(_){const S={};return _.replace(styleCommentRE,"").split(listDelimiterRE).forEach(w=>{if(w){const E=w.split(propertyDelimiterRE);E.length>1&&(S[E[0].trim()]=E[1].trim())}}),S}function normalizeClass(_){let S="";if(isString$1(_))S=_;else if(isArray$1(_))for(let w=0;w<_.length;w++){const E=normalizeClass(_[w]);E&&(S+=E+" ")}else if(isObject$3(_))for(const w in _)_[w]&&(S+=w+" ");return S.trim()}function normalizeProps(_){if(!_)return null;let{class:S,style:w}=_;return S&&!isString$1(S)&&(_.class=normalizeClass(S)),w&&(_.style=normalizeStyle(w)),_}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(_){return!!_||_===""}function looseCompareArrays(_,S){if(_.length!==S.length)return!1;let w=!0;for(let E=0;w&&E<_.length;E++)w=looseEqual(_[E],S[E]);return w}function looseEqual(_,S){if(_===S)return!0;let w=isDate(_),E=isDate(S);if(w||E)return w&&E?_.getTime()===S.getTime():!1;if(w=isSymbol$1(_),E=isSymbol$1(S),w||E)return _===S;if(w=isArray$1(_),E=isArray$1(S),w||E)return w&&E?looseCompareArrays(_,S):!1;if(w=isObject$3(_),E=isObject$3(S),w||E){if(!w||!E)return!1;const T=Object.keys(_).length,A=Object.keys(S).length;if(T!==A)return!1;for(const k in _){const x=_.hasOwnProperty(k),R=S.hasOwnProperty(k);if(x&&!R||!x&&R||!looseEqual(_[k],S[k]))return!1}}return String(_)===String(S)}function looseIndexOf(_,S){return _.findIndex(w=>looseEqual(w,S))}const isRef$1=_=>!!(_&&_.__v_isRef===!0),toDisplayString=_=>isString$1(_)?_:_==null?"":isArray$1(_)||isObject$3(_)&&(_.toString===objectToString$1||!isFunction(_.toString))?isRef$1(_)?toDisplayString(_.value):JSON.stringify(_,replacer,2):String(_),replacer=(_,S)=>isRef$1(S)?replacer(_,S.value):isMap(S)?{[`Map(${S.size})`]:[...S.entries()].reduce((w,[E,T],A)=>(w[stringifySymbol(E,A)+" =>"]=T,w),{})}:isSet(S)?{[`Set(${S.size})`]:[...S.values()].map(w=>stringifySymbol(w))}:isSymbol$1(S)?stringifySymbol(S):isObject$3(S)&&!isArray$1(S)&&!isPlainObject$2(S)?String(S):S,stringifySymbol=(_,S="")=>{var w;return isSymbol$1(_)?`Symbol(${(w=_.description)!=null?w:S})`:_};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(S=!1){this.detached=S,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!S&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let S,w;if(this.scopes)for(S=0,w=this.scopes.length;S<w;S++)this.scopes[S].pause();for(S=0,w=this.effects.length;S<w;S++)this.effects[S].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let S,w;if(this.scopes)for(S=0,w=this.scopes.length;S<w;S++)this.scopes[S].resume();for(S=0,w=this.effects.length;S<w;S++)this.effects[S].resume()}}run(S){if(this._active){const w=activeEffectScope;try{return activeEffectScope=this,S()}finally{activeEffectScope=w}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(S){if(this._active){this._active=!1;let w,E;for(w=0,E=this.effects.length;w<E;w++)this.effects[w].stop();for(this.effects.length=0,w=0,E=this.cleanups.length;w<E;w++)this.cleanups[w]();if(this.cleanups.length=0,this.scopes){for(w=0,E=this.scopes.length;w<E;w++)this.scopes[w].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!S){const T=this.parent.scopes.pop();T&&T!==this&&(this.parent.scopes[this.index]=T,T.index=this.index)}this.parent=void 0}}}function effectScope(_){return new EffectScope(_)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(_,S=!1){activeEffectScope&&activeEffectScope.cleanups.push(_)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(S){this.fn=S,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const S=activeSub,w=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=S,shouldTrack=w,this.flags&=-3}}stop(){if(this.flags&1){for(let S=this.deps;S;S=S.nextDep)removeSub(S);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(_,S=!1){if(_.flags|=8,S){_.next=batchedComputed,batchedComputed=_;return}_.next=batchedSub,batchedSub=_}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let S=batchedComputed;for(batchedComputed=void 0;S;){const w=S.next;S.next=void 0,S.flags&=-9,S=w}}let _;for(;batchedSub;){let S=batchedSub;for(batchedSub=void 0;S;){const w=S.next;if(S.next=void 0,S.flags&=-9,S.flags&1)try{S.trigger()}catch(E){_||(_=E)}S=w}}if(_)throw _}function prepareDeps(_){for(let S=_.deps;S;S=S.nextDep)S.version=-1,S.prevActiveLink=S.dep.activeLink,S.dep.activeLink=S}function cleanupDeps(_){let S,w=_.depsTail,E=w;for(;E;){const T=E.prevDep;E.version===-1?(E===w&&(w=T),removeSub(E),removeDep(E)):S=E,E.dep.activeLink=E.prevActiveLink,E.prevActiveLink=void 0,E=T}_.deps=S,_.depsTail=w}function isDirty(_){for(let S=_.deps;S;S=S.nextDep)if(S.dep.version!==S.version||S.dep.computed&&(refreshComputed(S.dep.computed)||S.dep.version!==S.version))return!0;return!!_._dirty}function refreshComputed(_){if(_.flags&4&&!(_.flags&16)||(_.flags&=-17,_.globalVersion===globalVersion)||(_.globalVersion=globalVersion,!_.isSSR&&_.flags&128&&(!_.deps&&!_._dirty||!isDirty(_))))return;_.flags|=2;const S=_.dep,w=activeSub,E=shouldTrack;activeSub=_,shouldTrack=!0;try{prepareDeps(_);const T=_.fn(_._value);(S.version===0||hasChanged(T,_._value))&&(_.flags|=128,_._value=T,S.version++)}catch(T){throw S.version++,T}finally{activeSub=w,shouldTrack=E,cleanupDeps(_),_.flags&=-3}}function removeSub(_,S=!1){const{dep:w,prevSub:E,nextSub:T}=_;if(E&&(E.nextSub=T,_.prevSub=void 0),T&&(T.prevSub=E,_.nextSub=void 0),w.subs===_&&(w.subs=E,!E&&w.computed)){w.computed.flags&=-5;for(let A=w.computed.deps;A;A=A.nextDep)removeSub(A,!0)}!S&&!--w.sc&&w.map&&w.map.delete(w.key)}function removeDep(_){const{prevDep:S,nextDep:w}=_;S&&(S.nextDep=w,_.prevDep=void 0),w&&(w.prevDep=S,_.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const _=trackStack.pop();shouldTrack=_===void 0?!0:_}function cleanupEffect(_){const{cleanup:S}=_;if(_.cleanup=void 0,S){const w=activeSub;activeSub=void 0;try{S()}finally{activeSub=w}}}let globalVersion=0;class Link{constructor(S,w){this.sub=S,this.dep=w,this.version=w.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(S){this.computed=S,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(S){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let w=this.activeLink;if(w===void 0||w.sub!==activeSub)w=this.activeLink=new Link(activeSub,this),activeSub.deps?(w.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=w,activeSub.depsTail=w):activeSub.deps=activeSub.depsTail=w,addSub(w);else if(w.version===-1&&(w.version=this.version,w.nextDep)){const E=w.nextDep;E.prevDep=w.prevDep,w.prevDep&&(w.prevDep.nextDep=E),w.prevDep=activeSub.depsTail,w.nextDep=void 0,activeSub.depsTail.nextDep=w,activeSub.depsTail=w,activeSub.deps===w&&(activeSub.deps=E)}return w}trigger(S){this.version++,globalVersion++,this.notify(S)}notify(S){startBatch();try{for(let w=this.subs;w;w=w.prevSub)w.sub.notify()&&w.sub.dep.notify()}finally{endBatch()}}}function addSub(_){if(_.dep.sc++,_.sub.flags&4){const S=_.dep.computed;if(S&&!_.dep.subs){S.flags|=20;for(let E=S.deps;E;E=E.nextDep)addSub(E)}const w=_.dep.subs;w!==_&&(_.prevSub=w,w&&(w.nextSub=_)),_.dep.subs=_}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(_,S,w){if(shouldTrack&&activeSub){let E=targetMap.get(_);E||targetMap.set(_,E=new Map);let T=E.get(w);T||(E.set(w,T=new Dep),T.map=E,T.key=w),T.track()}}function trigger(_,S,w,E,T,A){const k=targetMap.get(_);if(!k){globalVersion++;return}const x=R=>{R&&R.trigger()};if(startBatch(),S==="clear")k.forEach(x);else{const R=isArray$1(_),P=R&&isIntegerKey(w);if(R&&w==="length"){const M=Number(E);k.forEach((N,I)=>{(I==="length"||I===ARRAY_ITERATE_KEY||!isSymbol$1(I)&&I>=M)&&x(N)})}else switch((w!==void 0||k.has(void 0))&&x(k.get(w)),P&&x(k.get(ARRAY_ITERATE_KEY)),S){case"add":R?P&&x(k.get("length")):(x(k.get(ITERATE_KEY)),isMap(_)&&x(k.get(MAP_KEY_ITERATE_KEY)));break;case"delete":R||(x(k.get(ITERATE_KEY)),isMap(_)&&x(k.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(_)&&x(k.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(_,S){const w=targetMap.get(_);return w&&w.get(S)}function reactiveReadArray(_){const S=toRaw(_);return S===_?S:(track(S,"iterate",ARRAY_ITERATE_KEY),isShallow(_)?S:S.map(toReactive))}function shallowReadArray(_){return track(_=toRaw(_),"iterate",ARRAY_ITERATE_KEY),_}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(..._){return reactiveReadArray(this).concat(..._.map(S=>isArray$1(S)?reactiveReadArray(S):S))},entries(){return iterator(this,"entries",_=>(_[1]=toReactive(_[1]),_))},every(_,S){return apply(this,"every",_,S,void 0,arguments)},filter(_,S){return apply(this,"filter",_,S,w=>w.map(toReactive),arguments)},find(_,S){return apply(this,"find",_,S,toReactive,arguments)},findIndex(_,S){return apply(this,"findIndex",_,S,void 0,arguments)},findLast(_,S){return apply(this,"findLast",_,S,toReactive,arguments)},findLastIndex(_,S){return apply(this,"findLastIndex",_,S,void 0,arguments)},forEach(_,S){return apply(this,"forEach",_,S,void 0,arguments)},includes(..._){return searchProxy(this,"includes",_)},indexOf(..._){return searchProxy(this,"indexOf",_)},join(_){return reactiveReadArray(this).join(_)},lastIndexOf(..._){return searchProxy(this,"lastIndexOf",_)},map(_,S){return apply(this,"map",_,S,void 0,arguments)},pop(){return noTracking(this,"pop")},push(..._){return noTracking(this,"push",_)},reduce(_,...S){return reduce(this,"reduce",_,S)},reduceRight(_,...S){return reduce(this,"reduceRight",_,S)},shift(){return noTracking(this,"shift")},some(_,S){return apply(this,"some",_,S,void 0,arguments)},splice(..._){return noTracking(this,"splice",_)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(_){return reactiveReadArray(this).toSorted(_)},toSpliced(..._){return reactiveReadArray(this).toSpliced(..._)},unshift(..._){return noTracking(this,"unshift",_)},values(){return iterator(this,"values",toReactive)}};function iterator(_,S,w){const E=shallowReadArray(_),T=E[S]();return E!==_&&!isShallow(_)&&(T._next=T.next,T.next=()=>{const A=T._next();return A.done||(A.value=w(A.value)),A}),T}const arrayProto=Array.prototype;function apply(_,S,w,E,T,A){const k=shallowReadArray(_),x=k!==_&&!isShallow(_),R=k[S];if(R!==arrayProto[S]){const N=R.apply(_,A);return x?toReactive(N):N}let P=w;k!==_&&(x?P=function(N,I){return w.call(this,toReactive(N),I,_)}:w.length>2&&(P=function(N,I){return w.call(this,N,I,_)}));const M=R.call(k,P,E);return x&&T?T(M):M}function reduce(_,S,w,E){const T=shallowReadArray(_);let A=w;return T!==_&&(isShallow(_)?w.length>3&&(A=function(k,x,R){return w.call(this,k,x,R,_)}):A=function(k,x,R){return w.call(this,k,toReactive(x),R,_)}),T[S](A,...E)}function searchProxy(_,S,w){const E=toRaw(_);track(E,"iterate",ARRAY_ITERATE_KEY);const T=E[S](...w);return(T===-1||T===!1)&&isProxy(w[0])?(w[0]=toRaw(w[0]),E[S](...w)):T}function noTracking(_,S,w=[]){pauseTracking(),startBatch();const E=toRaw(_)[S].apply(_,w);return endBatch(),resetTracking(),E}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(_=>_!=="arguments"&&_!=="caller").map(_=>Symbol[_]).filter(isSymbol$1));function hasOwnProperty$1(_){isSymbol$1(_)||(_=String(_));const S=toRaw(this);return track(S,"has",_),S.hasOwnProperty(_)}class BaseReactiveHandler{constructor(S=!1,w=!1){this._isReadonly=S,this._isShallow=w}get(S,w,E){if(w==="__v_skip")return S.__v_skip;const T=this._isReadonly,A=this._isShallow;if(w==="__v_isReactive")return!T;if(w==="__v_isReadonly")return T;if(w==="__v_isShallow")return A;if(w==="__v_raw")return E===(T?A?shallowReadonlyMap:readonlyMap:A?shallowReactiveMap:reactiveMap).get(S)||Object.getPrototypeOf(S)===Object.getPrototypeOf(E)?S:void 0;const k=isArray$1(S);if(!T){let R;if(k&&(R=arrayInstrumentations[w]))return R;if(w==="hasOwnProperty")return hasOwnProperty$1}const x=Reflect.get(S,w,isRef(S)?S:E);if((isSymbol$1(w)?builtInSymbols.has(w):isNonTrackableKeys(w))||(T||track(S,"get",w),A))return x;if(isRef(x)){const R=k&&isIntegerKey(w)?x:x.value;return T&&isObject$3(R)?readonly(R):R}return isObject$3(x)?T?readonly(x):reactive(x):x}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(S=!1){super(!1,S)}set(S,w,E,T){let A=S[w];if(!this._isShallow){const R=isReadonly(A);if(!isShallow(E)&&!isReadonly(E)&&(A=toRaw(A),E=toRaw(E)),!isArray$1(S)&&isRef(A)&&!isRef(E))return R||(A.value=E),!0}const k=isArray$1(S)&&isIntegerKey(w)?Number(w)<S.length:hasOwn(S,w),x=Reflect.set(S,w,E,isRef(S)?S:T);return S===toRaw(T)&&(k?hasChanged(E,A)&&trigger(S,"set",w,E):trigger(S,"add",w,E)),x}deleteProperty(S,w){const E=hasOwn(S,w);S[w];const T=Reflect.deleteProperty(S,w);return T&&E&&trigger(S,"delete",w,void 0),T}has(S,w){const E=Reflect.has(S,w);return(!isSymbol$1(w)||!builtInSymbols.has(w))&&track(S,"has",w),E}ownKeys(S){return track(S,"iterate",isArray$1(S)?"length":ITERATE_KEY),Reflect.ownKeys(S)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(S=!1){super(!0,S)}set(S,w){return!0}deleteProperty(S,w){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=_=>_,getProto$1=_=>Reflect.getPrototypeOf(_);function createIterableMethod(_,S,w){return function(...E){const T=this.__v_raw,A=toRaw(T),k=isMap(A),x=_==="entries"||_===Symbol.iterator&&k,R=_==="keys"&&k,P=T[_](...E),M=w?toShallow:S?toReadonly:toReactive;return!S&&track(A,"iterate",R?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:N,done:I}=P.next();return I?{value:N,done:I}:{value:x?[M(N[0]),M(N[1])]:M(N),done:I}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(_){return function(...S){return _==="delete"?!1:_==="clear"?void 0:this}}function createInstrumentations(_,S){const w={get(T){const A=this.__v_raw,k=toRaw(A),x=toRaw(T);_||(hasChanged(T,x)&&track(k,"get",T),track(k,"get",x));const{has:R}=getProto$1(k),P=S?toShallow:_?toReadonly:toReactive;if(R.call(k,T))return P(A.get(T));if(R.call(k,x))return P(A.get(x));A!==k&&A.get(T)},get size(){const T=this.__v_raw;return!_&&track(toRaw(T),"iterate",ITERATE_KEY),T.size},has(T){const A=this.__v_raw,k=toRaw(A),x=toRaw(T);return _||(hasChanged(T,x)&&track(k,"has",T),track(k,"has",x)),T===x?A.has(T):A.has(T)||A.has(x)},forEach(T,A){const k=this,x=k.__v_raw,R=toRaw(x),P=S?toShallow:_?toReadonly:toReactive;return!_&&track(R,"iterate",ITERATE_KEY),x.forEach((M,N)=>T.call(A,P(M),P(N),k))}};return extend(w,_?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(T){!S&&!isShallow(T)&&!isReadonly(T)&&(T=toRaw(T));const A=toRaw(this);return getProto$1(A).has.call(A,T)||(A.add(T),trigger(A,"add",T,T)),this},set(T,A){!S&&!isShallow(A)&&!isReadonly(A)&&(A=toRaw(A));const k=toRaw(this),{has:x,get:R}=getProto$1(k);let P=x.call(k,T);P||(T=toRaw(T),P=x.call(k,T));const M=R.call(k,T);return k.set(T,A),P?hasChanged(A,M)&&trigger(k,"set",T,A):trigger(k,"add",T,A),this},delete(T){const A=toRaw(this),{has:k,get:x}=getProto$1(A);let R=k.call(A,T);R||(T=toRaw(T),R=k.call(A,T)),x&&x.call(A,T);const P=A.delete(T);return R&&trigger(A,"delete",T,void 0),P},clear(){const T=toRaw(this),A=T.size!==0,k=T.clear();return A&&trigger(T,"clear",void 0,void 0),k}}),["keys","values","entries",Symbol.iterator].forEach(T=>{w[T]=createIterableMethod(T,_,S)}),w}function createInstrumentationGetter(_,S){const w=createInstrumentations(_,S);return(E,T,A)=>T==="__v_isReactive"?!_:T==="__v_isReadonly"?_:T==="__v_raw"?E:Reflect.get(hasOwn(w,T)&&T in E?w:E,T,A)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(_){switch(_){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(_){return _.__v_skip||!Object.isExtensible(_)?0:targetTypeMap(toRawType(_))}function reactive(_){return isReadonly(_)?_:createReactiveObject(_,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(_){return createReactiveObject(_,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(_){return createReactiveObject(_,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(_){return createReactiveObject(_,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(_,S,w,E,T){if(!isObject$3(_)||_.__v_raw&&!(S&&_.__v_isReactive))return _;const A=getTargetType(_);if(A===0)return _;const k=T.get(_);if(k)return k;const x=new Proxy(_,A===2?E:w);return T.set(_,x),x}function isReactive(_){return isReadonly(_)?isReactive(_.__v_raw):!!(_&&_.__v_isReactive)}function isReadonly(_){return!!(_&&_.__v_isReadonly)}function isShallow(_){return!!(_&&_.__v_isShallow)}function isProxy(_){return _?!!_.__v_raw:!1}function toRaw(_){const S=_&&_.__v_raw;return S?toRaw(S):_}function markRaw(_){return!hasOwn(_,"__v_skip")&&Object.isExtensible(_)&&def(_,"__v_skip",!0),_}const toReactive=_=>isObject$3(_)?reactive(_):_,toReadonly=_=>isObject$3(_)?readonly(_):_;function isRef(_){return _?_.__v_isRef===!0:!1}function ref$1(_){return createRef(_,!1)}function shallowRef(_){return createRef(_,!0)}function createRef(_,S){return isRef(_)?_:new RefImpl(_,S)}class RefImpl{constructor(S,w){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=w?S:toRaw(S),this._value=w?S:toReactive(S),this.__v_isShallow=w}get value(){return this.dep.track(),this._value}set value(S){const w=this._rawValue,E=this.__v_isShallow||isShallow(S)||isReadonly(S);S=E?S:toRaw(S),hasChanged(S,w)&&(this._rawValue=S,this._value=E?S:toReactive(S),this.dep.trigger())}}function unref(_){return isRef(_)?_.value:_}function toValue(_){return isFunction(_)?_():unref(_)}const shallowUnwrapHandlers={get:(_,S,w)=>S==="__v_raw"?_:unref(Reflect.get(_,S,w)),set:(_,S,w,E)=>{const T=_[S];return isRef(T)&&!isRef(w)?(T.value=w,!0):Reflect.set(_,S,w,E)}};function proxyRefs(_){return isReactive(_)?_:new Proxy(_,shallowUnwrapHandlers)}function toRefs(_){const S=isArray$1(_)?new Array(_.length):{};for(const w in _)S[w]=propertyToRef(_,w);return S}class ObjectRefImpl{constructor(S,w,E){this._object=S,this._key=w,this._defaultValue=E,this.__v_isRef=!0,this._value=void 0}get value(){const S=this._object[this._key];return this._value=S===void 0?this._defaultValue:S}set value(S){this._object[this._key]=S}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}function propertyToRef(_,S,w){const E=_[S];return isRef(E)?E:new ObjectRefImpl(_,S,w)}class ComputedRefImpl{constructor(S,w,E){this.fn=S,this.setter=w,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!w,this.isSSR=E}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const S=this.dep.track();return refreshComputed(this),S&&(S.version=this.dep.version),this._value}set value(S){this.setter&&this.setter(S)}}function computed$1(_,S,w=!1){let E,T;return isFunction(_)?E=_:(E=_.get,T=_.set),new ComputedRefImpl(E,T,w)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(_,S=!1,w=activeWatcher){if(w){let E=cleanupMap.get(w);E||cleanupMap.set(w,E=[]),E.push(_)}}function watch$1(_,S,w=EMPTY_OBJ){const{immediate:E,deep:T,once:A,scheduler:k,augmentJob:x,call:R}=w,P=$=>T?$:isShallow($)||T===!1||T===0?traverse($,1):traverse($);let M,N,I,V,B=!1,D=!1;if(isRef(_)?(N=()=>_.value,B=isShallow(_)):isReactive(_)?(N=()=>P(_),B=!0):isArray$1(_)?(D=!0,B=_.some($=>isReactive($)||isShallow($)),N=()=>_.map($=>{if(isRef($))return $.value;if(isReactive($))return P($);if(isFunction($))return R?R($,2):$()})):isFunction(_)?S?N=R?()=>R(_,2):_:N=()=>{if(I){pauseTracking();try{I()}finally{resetTracking()}}const $=activeWatcher;activeWatcher=M;try{return R?R(_,3,[V]):_(V)}finally{activeWatcher=$}}:N=NOOP,S&&T){const $=N,H=T===!0?1/0:T;N=()=>traverse($(),H)}const z=getCurrentScope(),O=()=>{M.stop(),z&&z.active&&remove$1(z.effects,M)};if(A&&S){const $=S;S=(...H)=>{$(...H),O()}}let L=D?new Array(_.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const F=$=>{if(!(!(M.flags&1)||!M.dirty&&!$))if(S){const H=M.run();if(T||B||(D?H.some((j,q)=>hasChanged(j,L[q])):hasChanged(H,L))){I&&I();const j=activeWatcher;activeWatcher=M;try{const q=[H,L===INITIAL_WATCHER_VALUE?void 0:D&&L[0]===INITIAL_WATCHER_VALUE?[]:L,V];L=H,R?R(S,3,q):S(...q)}finally{activeWatcher=j}}}else M.run()};return x&&x(F),M=new ReactiveEffect(N),M.scheduler=k?()=>k(F,!1):F,V=$=>onWatcherCleanup($,!1,M),I=M.onStop=()=>{const $=cleanupMap.get(M);if($){if(R)R($,4);else for(const H of $)H();cleanupMap.delete(M)}},S?E?F(!0):L=M.run():k?k(F.bind(null,!0),!0):M.run(),O.pause=M.pause.bind(M),O.resume=M.resume.bind(M),O.stop=O,O}function traverse(_,S=1/0,w){if(S<=0||!isObject$3(_)||_.__v_skip||(w=w||new Map,(w.get(_)||0)>=S))return _;if(w.set(_,S),S--,isRef(_))traverse(_.value,S,w);else if(isArray$1(_))for(let E=0;E<_.length;E++)traverse(_[E],S,w);else if(isSet(_)||isMap(_))_.forEach(E=>{traverse(E,S,w)});else if(isPlainObject$2(_)){for(const E in _)traverse(_[E],S,w);for(const E of Object.getOwnPropertySymbols(_))Object.prototype.propertyIsEnumerable.call(_,E)&&traverse(_[E],S,w)}return _}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(_,...S){if(isWarning)return;isWarning=!0,pauseTracking();const w=stack.length?stack[stack.length-1].component:null,E=w&&w.appContext.config.warnHandler,T=getComponentTrace();if(E)callWithErrorHandling(E,w,11,[_+S.map(A=>{var k,x;return(x=(k=A.toString)==null?void 0:k.call(A))!=null?x:JSON.stringify(A)}).join(""),w&&w.proxy,T.map(({vnode:A})=>`at <${formatComponentName(w,A.type)}>`).join(`
`),T]);else{const A=[`[Vue warn]: ${_}`,...S];T.length&&A.push(`
`,...formatTrace(T)),console.warn(...A)}resetTracking(),isWarning=!1}function getComponentTrace(){let _=stack[stack.length-1];if(!_)return[];const S=[];for(;_;){const w=S[0];w&&w.vnode===_?w.recurseCount++:S.push({vnode:_,recurseCount:0});const E=_.component&&_.component.parent;_=E&&E.vnode}return S}function formatTrace(_){const S=[];return _.forEach((w,E)=>{S.push(...E===0?[]:[`
`],...formatTraceEntry(w))}),S}function formatTraceEntry({vnode:_,recurseCount:S}){const w=S>0?`... (${S} recursive calls)`:"",E=_.component?_.component.parent==null:!1,T=` at <${formatComponentName(_.component,_.type,E)}`,A=">"+w;return _.props?[T,...formatProps(_.props),A]:[T+A]}function formatProps(_){const S=[],w=Object.keys(_);return w.slice(0,3).forEach(E=>{S.push(...formatProp(E,_[E]))}),w.length>3&&S.push(" ..."),S}function formatProp(_,S,w){return isString$1(S)?(S=JSON.stringify(S),w?S:[`${_}=${S}`]):typeof S=="number"||typeof S=="boolean"||S==null?w?S:[`${_}=${S}`]:isRef(S)?(S=formatProp(_,toRaw(S.value),!0),w?S:[`${_}=Ref<`,S,">"]):isFunction(S)?[`${_}=fn${S.name?`<${S.name}>`:""}`]:(S=toRaw(S),w?S:[`${_}=`,S])}function callWithErrorHandling(_,S,w,E){try{return E?_(...E):_()}catch(T){handleError(T,S,w)}}function callWithAsyncErrorHandling(_,S,w,E){if(isFunction(_)){const T=callWithErrorHandling(_,S,w,E);return T&&isPromise(T)&&T.catch(A=>{handleError(A,S,w)}),T}if(isArray$1(_)){const T=[];for(let A=0;A<_.length;A++)T.push(callWithAsyncErrorHandling(_[A],S,w,E));return T}}function handleError(_,S,w,E=!0){const T=S?S.vnode:null,{errorHandler:A,throwUnhandledErrorInProduction:k}=S&&S.appContext.config||EMPTY_OBJ;if(S){let x=S.parent;const R=S.proxy,P=`https://vuejs.org/error-reference/#runtime-${w}`;for(;x;){const M=x.ec;if(M){for(let N=0;N<M.length;N++)if(M[N](_,R,P)===!1)return}x=x.parent}if(A){pauseTracking(),callWithErrorHandling(A,null,10,[_,R,P]),resetTracking();return}}logError(_,w,T,E,k)}function logError(_,S,w,E=!0,T=!1){if(T)throw _;console.error(_)}const queue$1=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(_){const S=currentFlushPromise||resolvedPromise;return _?S.then(this?_.bind(this):_):S}function findInsertionIndex(_){let S=flushIndex+1,w=queue$1.length;for(;S<w;){const E=S+w>>>1,T=queue$1[E],A=getId(T);A<_||A===_&&T.flags&2?S=E+1:w=E}return S}function queueJob(_){if(!(_.flags&1)){const S=getId(_),w=queue$1[queue$1.length-1];!w||!(_.flags&2)&&S>=getId(w)?queue$1.push(_):queue$1.splice(findInsertionIndex(S),0,_),_.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(_){isArray$1(_)?pendingPostFlushCbs.push(..._):activePostFlushCbs&&_.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,_):_.flags&1||(pendingPostFlushCbs.push(_),_.flags|=1),queueFlush()}function flushPreFlushCbs(_,S,w=flushIndex+1){for(;w<queue$1.length;w++){const E=queue$1[w];if(E&&E.flags&2){if(_&&E.id!==_.uid)continue;queue$1.splice(w,1),w--,E.flags&4&&(E.flags&=-2),E(),E.flags&4||(E.flags&=-2)}}}function flushPostFlushCbs(_){if(pendingPostFlushCbs.length){const S=[...new Set(pendingPostFlushCbs)].sort((w,E)=>getId(w)-getId(E));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...S);return}for(activePostFlushCbs=S,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const w=activePostFlushCbs[postFlushIndex];w.flags&4&&(w.flags&=-2),w.flags&8||w(),w.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=_=>_.id==null?_.flags&2?-1:1/0:_.id;function flushJobs(_){try{for(flushIndex=0;flushIndex<queue$1.length;flushIndex++){const S=queue$1[flushIndex];S&&!(S.flags&8)&&(S.flags&4&&(S.flags&=-2),callWithErrorHandling(S,S.i,S.i?15:14),S.flags&4||(S.flags&=-2))}}finally{for(;flushIndex<queue$1.length;flushIndex++){const S=queue$1[flushIndex];S&&(S.flags&=-2)}flushIndex=-1,queue$1.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue$1.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(_){const S=currentRenderingInstance;return currentRenderingInstance=_,currentScopeId=_&&_.type.__scopeId||null,S}function pushScopeId(_){currentScopeId=_}function popScopeId(){currentScopeId=null}const withScopeId=_=>withCtx;function withCtx(_,S=currentRenderingInstance,w){if(!S||_._n)return _;const E=(...T)=>{E._d&&setBlockTracking(-1);const A=setCurrentRenderingInstance(S);let k;try{k=_(...T)}finally{setCurrentRenderingInstance(A),E._d&&setBlockTracking(1)}return k};return E._n=!0,E._c=!0,E._d=!0,E}function withDirectives(_,S){if(currentRenderingInstance===null)return _;const w=getComponentPublicInstance(currentRenderingInstance),E=_.dirs||(_.dirs=[]);for(let T=0;T<S.length;T++){let[A,k,x,R=EMPTY_OBJ]=S[T];A&&(isFunction(A)&&(A={mounted:A,updated:A}),A.deep&&traverse(k),E.push({dir:A,instance:w,value:k,oldValue:void 0,arg:x,modifiers:R}))}return _}function invokeDirectiveHook(_,S,w,E){const T=_.dirs,A=S&&S.dirs;for(let k=0;k<T.length;k++){const x=T[k];A&&(x.oldValue=A[k].value);let R=x.dir[E];R&&(pauseTracking(),callWithAsyncErrorHandling(R,w,8,[_.el,x,_,S]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=_=>_.__isTeleport,leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const _={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{_.isMounted=!0}),onBeforeUnmount(()=>{_.isUnmounting=!0}),_}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=_=>{const S=_.subTree;return S.component?recursiveGetSubtree(S.component):S},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(_,{slots:S}){const w=getCurrentInstance(),E=useTransitionState();return()=>{const T=S.default&&getTransitionRawChildren(S.default(),!0);if(!T||!T.length)return;const A=findNonCommentChild(T),k=toRaw(_),{mode:x}=k;if(E.isLeaving)return emptyPlaceholder(A);const R=getInnerChild$1(A);if(!R)return emptyPlaceholder(A);let P=resolveTransitionHooks(R,k,E,w,N=>P=N);R.type!==Comment&&setTransitionHooks(R,P);let M=w.subTree&&getInnerChild$1(w.subTree);if(M&&M.type!==Comment&&!isSameVNodeType(M,R)&&recursiveGetSubtree(w).type!==Comment){let N=resolveTransitionHooks(M,k,E,w);if(setTransitionHooks(M,N),x==="out-in"&&R.type!==Comment)return E.isLeaving=!0,N.afterLeave=()=>{E.isLeaving=!1,w.job.flags&8||w.update(),delete N.afterLeave,M=void 0},emptyPlaceholder(A);x==="in-out"&&R.type!==Comment?N.delayLeave=(I,V,B)=>{const D=getLeavingNodesForType(E,M);D[String(M.key)]=M,I[leaveCbKey]=()=>{V(),I[leaveCbKey]=void 0,delete P.delayedLeave,M=void 0},P.delayedLeave=()=>{B(),delete P.delayedLeave,M=void 0}}:M=void 0}else M&&(M=void 0);return A}}};function findNonCommentChild(_){let S=_[0];if(_.length>1){for(const w of _)if(w.type!==Comment){S=w;break}}return S}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(_,S){const{leavingVNodes:w}=_;let E=w.get(S.type);return E||(E=Object.create(null),w.set(S.type,E)),E}function resolveTransitionHooks(_,S,w,E,T){const{appear:A,mode:k,persisted:x=!1,onBeforeEnter:R,onEnter:P,onAfterEnter:M,onEnterCancelled:N,onBeforeLeave:I,onLeave:V,onAfterLeave:B,onLeaveCancelled:D,onBeforeAppear:z,onAppear:O,onAfterAppear:L,onAppearCancelled:F}=S,$=String(_.key),H=getLeavingNodesForType(w,_),j=(X,te)=>{X&&callWithAsyncErrorHandling(X,E,9,te)},q=(X,te)=>{const ee=te[1];j(X,te),isArray$1(X)?X.every(G=>G.length<=1)&&ee():X.length<=1&&ee()},W={mode:k,persisted:x,beforeEnter(X){let te=R;if(!w.isMounted)if(A)te=z||R;else return;X[leaveCbKey]&&X[leaveCbKey](!0);const ee=H[$];ee&&isSameVNodeType(_,ee)&&ee.el[leaveCbKey]&&ee.el[leaveCbKey](),j(te,[X])},enter(X){let te=P,ee=M,G=N;if(!w.isMounted)if(A)te=O||P,ee=L||M,G=F||N;else return;let de=!1;const le=X[enterCbKey$1]=ae=>{de||(de=!0,ae?j(G,[X]):j(ee,[X]),W.delayedLeave&&W.delayedLeave(),X[enterCbKey$1]=void 0)};te?q(te,[X,le]):le()},leave(X,te){const ee=String(_.key);if(X[enterCbKey$1]&&X[enterCbKey$1](!0),w.isUnmounting)return te();j(I,[X]);let G=!1;const de=X[leaveCbKey]=le=>{G||(G=!0,te(),le?j(D,[X]):j(B,[X]),X[leaveCbKey]=void 0,H[ee]===_&&delete H[ee])};H[ee]=_,V?q(V,[X,de]):de()},clone(X){const te=resolveTransitionHooks(X,S,w,E,T);return T&&T(te),te}};return W}function emptyPlaceholder(_){if(isKeepAlive(_))return _=cloneVNode(_),_.children=null,_}function getInnerChild$1(_){if(!isKeepAlive(_))return isTeleport(_.type)&&_.children?findNonCommentChild(_.children):_;if(_.component)return _.component.subTree;const{shapeFlag:S,children:w}=_;if(w){if(S&16)return w[0];if(S&32&&isFunction(w.default))return w.default()}}function setTransitionHooks(_,S){_.shapeFlag&6&&_.component?(_.transition=S,setTransitionHooks(_.component.subTree,S)):_.shapeFlag&128?(_.ssContent.transition=S.clone(_.ssContent),_.ssFallback.transition=S.clone(_.ssFallback)):_.transition=S}function getTransitionRawChildren(_,S=!1,w){let E=[],T=0;for(let A=0;A<_.length;A++){let k=_[A];const x=w==null?k.key:String(w)+String(k.key!=null?k.key:A);k.type===Fragment?(k.patchFlag&128&&T++,E=E.concat(getTransitionRawChildren(k.children,S,x))):(S||k.type!==Comment)&&E.push(x!=null?cloneVNode(k,{key:x}):k)}if(T>1)for(let A=0;A<E.length;A++)E[A].patchFlag=-2;return E}function defineComponent(_,S){return isFunction(_)?extend({name:_.name},S,{setup:_}):_}function markAsyncBoundary(_){_.ids=[_.ids[0]+_.ids[2]+++"-",0,0]}const pendingSetRefMap=new WeakMap;function setRef(_,S,w,E,T=!1){if(isArray$1(_)){_.forEach((B,D)=>setRef(B,S&&(isArray$1(S)?S[D]:S),w,E,T));return}if(isAsyncWrapper(E)&&!T){E.shapeFlag&512&&E.type.__asyncResolved&&E.component.subTree.component&&setRef(_,S,w,E.component.subTree);return}const A=E.shapeFlag&4?getComponentPublicInstance(E.component):E.el,k=T?null:A,{i:x,r:R}=_,P=S&&S.r,M=x.refs===EMPTY_OBJ?x.refs={}:x.refs,N=x.setupState,I=toRaw(N),V=N===EMPTY_OBJ?NO:B=>hasOwn(I,B);if(P!=null&&P!==R){if(invalidatePendingSetRef(S),isString$1(P))M[P]=null,V(P)&&(N[P]=null);else if(isRef(P)){P.value=null;const B=S;B.k&&(M[B.k]=null)}}if(isFunction(R))callWithErrorHandling(R,x,12,[k,M]);else{const B=isString$1(R),D=isRef(R);if(B||D){const z=()=>{if(_.f){const O=B?V(R)?N[R]:M[R]:R.value;if(T)isArray$1(O)&&remove$1(O,A);else if(isArray$1(O))O.includes(A)||O.push(A);else if(B)M[R]=[A],V(R)&&(N[R]=M[R]);else{const L=[A];R.value=L,_.k&&(M[_.k]=L)}}else B?(M[R]=k,V(R)&&(N[R]=k)):D&&(R.value=k,_.k&&(M[_.k]=k))};if(k){const O=()=>{z(),pendingSetRefMap.delete(_)};O.id=-1,pendingSetRefMap.set(_,O),queuePostRenderEffect(O,w)}else invalidatePendingSetRef(_),z()}}}function invalidatePendingSetRef(_){const S=pendingSetRefMap.get(_);S&&(S.flags|=8,pendingSetRefMap.delete(_))}const isComment=_=>_.nodeType===8;getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;function forEachElement(_,S){if(isComment(_)&&_.data==="["){let w=1,E=_.nextSibling;for(;E;){if(E.nodeType===1){if(S(E)===!1)break}else if(isComment(E))if(E.data==="]"){if(--w===0)break}else E.data==="["&&w++;E=E.nextSibling}}else S(_)}const isAsyncWrapper=_=>!!_.type.__asyncLoader;function defineAsyncComponent(_){isFunction(_)&&(_={loader:_});const{loader:S,loadingComponent:w,errorComponent:E,delay:T=200,hydrate:A,timeout:k,suspensible:x=!0,onError:R}=_;let P=null,M,N=0;const I=()=>(N++,P=null,V()),V=()=>{let B;return P||(B=P=S().catch(D=>{if(D=D instanceof Error?D:new Error(String(D)),R)return new Promise((z,O)=>{R(D,()=>z(I()),()=>O(D),N+1)});throw D}).then(D=>B!==P&&P?P:(D&&(D.__esModule||D[Symbol.toStringTag]==="Module")&&(D=D.default),M=D,D)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:V,__asyncHydrate(B,D,z){let O=!1;(D.bu||(D.bu=[])).push(()=>O=!0);const L=()=>{O||z()},F=A?()=>{const $=A(L,H=>forEachElement(B,H));$&&(D.bum||(D.bum=[])).push($)}:L;M?F():V().then(()=>!D.isUnmounted&&F())},get __asyncResolved(){return M},setup(){const B=currentInstance;if(markAsyncBoundary(B),M)return()=>createInnerComp(M,B);const D=F=>{P=null,handleError(F,B,13,!E)};if(x&&B.suspense||isInSSRComponentSetup)return V().then(F=>()=>createInnerComp(F,B)).catch(F=>(D(F),()=>E?createVNode(E,{error:F}):null));const z=ref$1(!1),O=ref$1(),L=ref$1(!!T);return T&&setTimeout(()=>{L.value=!1},T),k!=null&&setTimeout(()=>{if(!z.value&&!O.value){const F=new Error(`Async component timed out after ${k}ms.`);D(F),O.value=F}},k),V().then(()=>{z.value=!0,B.parent&&isKeepAlive(B.parent.vnode)&&B.parent.update()}).catch(F=>{D(F),O.value=F}),()=>{if(z.value&&M)return createInnerComp(M,B);if(O.value&&E)return createVNode(E,{error:O.value});if(w&&!L.value)return createInnerComp(w,B)}}})}function createInnerComp(_,S){const{ref:w,props:E,children:T,ce:A}=S.vnode,k=createVNode(_,E,T);return k.ref=w,k.ce=A,delete S.vnode.ce,k}const isKeepAlive=_=>_.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(_,{slots:S}){const w=getCurrentInstance(),E=w.ctx;if(!E.renderer)return()=>{const L=S.default&&S.default();return L&&L.length===1?L[0]:L};const T=new Map,A=new Set;let k=null;const x=w.suspense,{renderer:{p:R,m:P,um:M,o:{createElement:N}}}=E,I=N("div");E.activate=(L,F,$,H,j)=>{const q=L.component;P(L,F,$,0,x),R(q.vnode,L,F,$,q,x,H,L.slotScopeIds,j),queuePostRenderEffect(()=>{q.isDeactivated=!1,q.a&&invokeArrayFns(q.a);const W=L.props&&L.props.onVnodeMounted;W&&invokeVNodeHook(W,q.parent,L)},x)},E.deactivate=L=>{const F=L.component;invalidateMount(F.m),invalidateMount(F.a),P(L,I,null,1,x),queuePostRenderEffect(()=>{F.da&&invokeArrayFns(F.da);const $=L.props&&L.props.onVnodeUnmounted;$&&invokeVNodeHook($,F.parent,L),F.isDeactivated=!0},x)};function V(L){resetShapeFlag(L),M(L,w,x,!0)}function B(L){T.forEach((F,$)=>{const H=getComponentName(F.type);H&&!L(H)&&D($)})}function D(L){const F=T.get(L);F&&(!k||!isSameVNodeType(F,k))?V(F):k&&resetShapeFlag(k),T.delete(L),A.delete(L)}watch(()=>[_.include,_.exclude],([L,F])=>{L&&B($=>matches(L,$)),F&&B($=>!matches(F,$))},{flush:"post",deep:!0});let z=null;const O=()=>{z!=null&&(isSuspense(w.subTree.type)?queuePostRenderEffect(()=>{T.set(z,getInnerChild(w.subTree))},w.subTree.suspense):T.set(z,getInnerChild(w.subTree)))};return onMounted(O),onUpdated(O),onBeforeUnmount(()=>{T.forEach(L=>{const{subTree:F,suspense:$}=w,H=getInnerChild(F);if(L.type===H.type&&L.key===H.key){resetShapeFlag(H);const j=H.component.da;j&&queuePostRenderEffect(j,$);return}V(L)})}),()=>{if(z=null,!S.default)return k=null;const L=S.default(),F=L[0];if(L.length>1)return k=null,L;if(!isVNode(F)||!(F.shapeFlag&4)&&!(F.shapeFlag&128))return k=null,F;let $=getInnerChild(F);if($.type===Comment)return k=null,$;const H=$.type,j=getComponentName(isAsyncWrapper($)?$.type.__asyncResolved||{}:H),{include:q,exclude:W,max:X}=_;if(q&&(!j||!matches(q,j))||W&&j&&matches(W,j))return $.shapeFlag&=-257,k=$,F;const te=$.key==null?H:$.key,ee=T.get(te);return $.el&&($=cloneVNode($),F.shapeFlag&128&&(F.ssContent=$)),z=te,ee?($.el=ee.el,$.component=ee.component,$.transition&&setTransitionHooks($,$.transition),$.shapeFlag|=512,A.delete(te),A.add(te)):(A.add(te),X&&A.size>parseInt(X,10)&&D(A.values().next().value)),$.shapeFlag|=256,k=$,isSuspense(F.type)?F:$}}},KeepAlive=KeepAliveImpl;function matches(_,S){return isArray$1(_)?_.some(w=>matches(w,S)):isString$1(_)?_.split(",").includes(S):isRegExp(_)?(_.lastIndex=0,_.test(S)):!1}function onActivated(_,S){registerKeepAliveHook(_,"a",S)}function onDeactivated(_,S){registerKeepAliveHook(_,"da",S)}function registerKeepAliveHook(_,S,w=currentInstance){const E=_.__wdc||(_.__wdc=()=>{let T=w;for(;T;){if(T.isDeactivated)return;T=T.parent}return _()});if(injectHook(S,E,w),w){let T=w.parent;for(;T&&T.parent;)isKeepAlive(T.parent.vnode)&&injectToKeepAliveRoot(E,S,w,T),T=T.parent}}function injectToKeepAliveRoot(_,S,w,E){const T=injectHook(S,_,E,!0);onUnmounted(()=>{remove$1(E[S],T)},w)}function resetShapeFlag(_){_.shapeFlag&=-257,_.shapeFlag&=-513}function getInnerChild(_){return _.shapeFlag&128?_.ssContent:_}function injectHook(_,S,w=currentInstance,E=!1){if(w){const T=w[_]||(w[_]=[]),A=S.__weh||(S.__weh=(...k)=>{pauseTracking();const x=setCurrentInstance(w),R=callWithAsyncErrorHandling(S,w,_,k);return x(),resetTracking(),R});return E?T.unshift(A):T.push(A),A}}const createHook=_=>(S,w=currentInstance)=>{(!isInSSRComponentSetup||_==="sp")&&injectHook(_,(...E)=>S(...E),w)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(_,S=currentInstance){injectHook("ec",_,S)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(_,S){return resolveAsset(COMPONENTS,_,!0,S)||_}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(_){return isString$1(_)?resolveAsset(COMPONENTS,_,!1)||_:_||NULL_DYNAMIC_COMPONENT}function resolveDirective(_){return resolveAsset(DIRECTIVES,_)}function resolveAsset(_,S,w=!0,E=!1){const T=currentRenderingInstance||currentInstance;if(T){const A=T.type;if(_===COMPONENTS){const x=getComponentName(A,!1);if(x&&(x===S||x===camelize(S)||x===capitalize(camelize(S))))return A}const k=resolve(T[_]||A[_],S)||resolve(T.appContext[_],S);return!k&&E?A:k}}function resolve(_,S){return _&&(_[S]||_[camelize(S)]||_[capitalize(camelize(S))])}function renderList(_,S,w,E){let T;const A=w,k=isArray$1(_);if(k||isString$1(_)){const x=k&&isReactive(_);let R=!1,P=!1;x&&(R=!isShallow(_),P=isReadonly(_),_=shallowReadArray(_)),T=new Array(_.length);for(let M=0,N=_.length;M<N;M++)T[M]=S(R?P?toReadonly(toReactive(_[M])):toReactive(_[M]):_[M],M,void 0,A)}else if(typeof _=="number"){T=new Array(_);for(let x=0;x<_;x++)T[x]=S(x+1,x,void 0,A)}else if(isObject$3(_))if(_[Symbol.iterator])T=Array.from(_,(x,R)=>S(x,R,void 0,A));else{const x=Object.keys(_);T=new Array(x.length);for(let R=0,P=x.length;R<P;R++){const M=x[R];T[R]=S(_[M],M,R,A)}}else T=[];return T}function renderSlot(_,S,w={},E,T){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce){const P=Object.keys(w).length>0;return S!=="default"&&(w.name=S),openBlock(),createBlock(Fragment,null,[createVNode("slot",w,E)],P?-2:64)}let A=_[S];A&&A._c&&(A._d=!1),openBlock();const k=A&&ensureValidVNode(A(w)),x=w.key||k&&k.key,R=createBlock(Fragment,{key:(x&&!isSymbol$1(x)?x:`_${S}`)+(!k&&E?"_fb":"")},k||[],k&&_._===1?64:-2);return!T&&R.scopeId&&(R.slotScopeIds=[R.scopeId+"-s"]),A&&A._c&&(A._d=!0),R}function ensureValidVNode(_){return _.some(S=>isVNode(S)?!(S.type===Comment||S.type===Fragment&&!ensureValidVNode(S.children)):!0)?_:null}function toHandlers(_,S){const w={};for(const E in _)w[toHandlerKey(E)]=_[E];return w}const getPublicInstance=_=>_?isStatefulComponent(_)?getComponentPublicInstance(_):getPublicInstance(_.parent):null,publicPropertiesMap=extend(Object.create(null),{$:_=>_,$el:_=>_.vnode.el,$data:_=>_.data,$props:_=>_.props,$attrs:_=>_.attrs,$slots:_=>_.slots,$refs:_=>_.refs,$parent:_=>getPublicInstance(_.parent),$root:_=>getPublicInstance(_.root),$host:_=>_.ce,$emit:_=>_.emit,$options:_=>resolveMergedOptions(_),$forceUpdate:_=>_.f||(_.f=()=>{queueJob(_.update)}),$nextTick:_=>_.n||(_.n=nextTick.bind(_.proxy)),$watch:_=>instanceWatch.bind(_)}),hasSetupBinding=(_,S)=>_!==EMPTY_OBJ&&!_.__isScriptSetup&&hasOwn(_,S),PublicInstanceProxyHandlers={get({_},S){if(S==="__v_skip")return!0;const{ctx:w,setupState:E,data:T,props:A,accessCache:k,type:x,appContext:R}=_;let P;if(S[0]!=="$"){const V=k[S];if(V!==void 0)switch(V){case 1:return E[S];case 2:return T[S];case 4:return w[S];case 3:return A[S]}else{if(hasSetupBinding(E,S))return k[S]=1,E[S];if(T!==EMPTY_OBJ&&hasOwn(T,S))return k[S]=2,T[S];if((P=_.propsOptions[0])&&hasOwn(P,S))return k[S]=3,A[S];if(w!==EMPTY_OBJ&&hasOwn(w,S))return k[S]=4,w[S];shouldCacheAccess&&(k[S]=0)}}const M=publicPropertiesMap[S];let N,I;if(M)return S==="$attrs"&&track(_.attrs,"get",""),M(_);if((N=x.__cssModules)&&(N=N[S]))return N;if(w!==EMPTY_OBJ&&hasOwn(w,S))return k[S]=4,w[S];if(I=R.config.globalProperties,hasOwn(I,S))return I[S]},set({_},S,w){const{data:E,setupState:T,ctx:A}=_;return hasSetupBinding(T,S)?(T[S]=w,!0):E!==EMPTY_OBJ&&hasOwn(E,S)?(E[S]=w,!0):hasOwn(_.props,S)||S[0]==="$"&&S.slice(1)in _?!1:(A[S]=w,!0)},has({_:{data:_,setupState:S,accessCache:w,ctx:E,appContext:T,propsOptions:A,type:k}},x){let R,P;return!!(w[x]||_!==EMPTY_OBJ&&x[0]!=="$"&&hasOwn(_,x)||hasSetupBinding(S,x)||(R=A[0])&&hasOwn(R,x)||hasOwn(E,x)||hasOwn(publicPropertiesMap,x)||hasOwn(T.config.globalProperties,x)||(P=k.__cssModules)&&P[x])},defineProperty(_,S,w){return w.get!=null?_._.accessCache[S]=0:hasOwn(w,"value")&&this.set(_,S,w.value,null),Reflect.defineProperty(_,S,w)}};function useSlots(){return getContext().slots}function getContext(_){const S=getCurrentInstance();return S.setupContext||(S.setupContext=createSetupContext(S))}function normalizePropsOrEmits(_){return isArray$1(_)?_.reduce((S,w)=>(S[w]=null,S),{}):_}let shouldCacheAccess=!0;function applyOptions(_){const S=resolveMergedOptions(_),w=_.proxy,E=_.ctx;shouldCacheAccess=!1,S.beforeCreate&&callHook$1(S.beforeCreate,_,"bc");const{data:T,computed:A,methods:k,watch:x,provide:R,inject:P,created:M,beforeMount:N,mounted:I,beforeUpdate:V,updated:B,activated:D,deactivated:z,beforeDestroy:O,beforeUnmount:L,destroyed:F,unmounted:$,render:H,renderTracked:j,renderTriggered:q,errorCaptured:W,serverPrefetch:X,expose:te,inheritAttrs:ee,components:G,directives:de,filters:le}=S;if(P&&resolveInjections(P,E,null),k)for(const ie in k){const Z=k[ie];isFunction(Z)&&(E[ie]=Z.bind(w))}if(T){const ie=T.call(w,w);isObject$3(ie)&&(_.data=reactive(ie))}if(shouldCacheAccess=!0,A)for(const ie in A){const Z=A[ie],J=isFunction(Z)?Z.bind(w,w):isFunction(Z.get)?Z.get.bind(w,w):NOOP,ue=!isFunction(Z)&&isFunction(Z.set)?Z.set.bind(w):NOOP,pe=computed({get:J,set:ue});Object.defineProperty(E,ie,{enumerable:!0,configurable:!0,get:()=>pe.value,set:Re=>pe.value=Re})}if(x)for(const ie in x)createWatcher(x[ie],E,w,ie);if(R){const ie=isFunction(R)?R.call(w):R;Reflect.ownKeys(ie).forEach(Z=>{provide(Z,ie[Z])})}M&&callHook$1(M,_,"c");function Q(ie,Z){isArray$1(Z)?Z.forEach(J=>ie(J.bind(w))):Z&&ie(Z.bind(w))}if(Q(onBeforeMount,N),Q(onMounted,I),Q(onBeforeUpdate,V),Q(onUpdated,B),Q(onActivated,D),Q(onDeactivated,z),Q(onErrorCaptured,W),Q(onRenderTracked,j),Q(onRenderTriggered,q),Q(onBeforeUnmount,L),Q(onUnmounted,$),Q(onServerPrefetch,X),isArray$1(te))if(te.length){const ie=_.exposed||(_.exposed={});te.forEach(Z=>{Object.defineProperty(ie,Z,{get:()=>w[Z],set:J=>w[Z]=J,enumerable:!0})})}else _.exposed||(_.exposed={});H&&_.render===NOOP&&(_.render=H),ee!=null&&(_.inheritAttrs=ee),G&&(_.components=G),de&&(_.directives=de),X&&markAsyncBoundary(_)}function resolveInjections(_,S,w=NOOP){isArray$1(_)&&(_=normalizeInject(_));for(const E in _){const T=_[E];let A;isObject$3(T)?"default"in T?A=inject(T.from||E,T.default,!0):A=inject(T.from||E):A=inject(T),isRef(A)?Object.defineProperty(S,E,{enumerable:!0,configurable:!0,get:()=>A.value,set:k=>A.value=k}):S[E]=A}}function callHook$1(_,S,w){callWithAsyncErrorHandling(isArray$1(_)?_.map(E=>E.bind(S.proxy)):_.bind(S.proxy),S,w)}function createWatcher(_,S,w,E){let T=E.includes(".")?createPathGetter(w,E):()=>w[E];if(isString$1(_)){const A=S[_];isFunction(A)&&watch(T,A)}else if(isFunction(_))watch(T,_.bind(w));else if(isObject$3(_))if(isArray$1(_))_.forEach(A=>createWatcher(A,S,w,E));else{const A=isFunction(_.handler)?_.handler.bind(w):S[_.handler];isFunction(A)&&watch(T,A,_)}}function resolveMergedOptions(_){const S=_.type,{mixins:w,extends:E}=S,{mixins:T,optionsCache:A,config:{optionMergeStrategies:k}}=_.appContext,x=A.get(S);let R;return x?R=x:!T.length&&!w&&!E?R=S:(R={},T.length&&T.forEach(P=>mergeOptions(R,P,k,!0)),mergeOptions(R,S,k)),isObject$3(S)&&A.set(S,R),R}function mergeOptions(_,S,w,E=!1){const{mixins:T,extends:A}=S;A&&mergeOptions(_,A,w,!0),T&&T.forEach(k=>mergeOptions(_,k,w,!0));for(const k in S)if(!(E&&k==="expose")){const x=internalOptionMergeStrats[k]||w&&w[k];_[k]=x?x(_[k],S[k]):S[k]}return _}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(_,S){return S?_?function(){return extend(isFunction(_)?_.call(this,this):_,isFunction(S)?S.call(this,this):S)}:S:_}function mergeInject(_,S){return mergeObjectOptions(normalizeInject(_),normalizeInject(S))}function normalizeInject(_){if(isArray$1(_)){const S={};for(let w=0;w<_.length;w++)S[_[w]]=_[w];return S}return _}function mergeAsArray(_,S){return _?[...new Set([].concat(_,S))]:S}function mergeObjectOptions(_,S){return _?extend(Object.create(null),_,S):S}function mergeEmitsOrPropsOptions(_,S){return _?isArray$1(_)&&isArray$1(S)?[...new Set([..._,...S])]:extend(Object.create(null),normalizePropsOrEmits(_),normalizePropsOrEmits(S??{})):S}function mergeWatchOptions(_,S){if(!_)return S;if(!S)return _;const w=extend(Object.create(null),_);for(const E in S)w[E]=mergeAsArray(_[E],S[E]);return w}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(_,S){return function(E,T=null){isFunction(E)||(E=extend({},E)),T!=null&&!isObject$3(T)&&(T=null);const A=createAppContext(),k=new WeakSet,x=[];let R=!1;const P=A.app={_uid:uid$1++,_component:E,_props:T,_container:null,_context:A,_instance:null,version,get config(){return A.config},set config(M){},use(M,...N){return k.has(M)||(M&&isFunction(M.install)?(k.add(M),M.install(P,...N)):isFunction(M)&&(k.add(M),M(P,...N))),P},mixin(M){return A.mixins.includes(M)||A.mixins.push(M),P},component(M,N){return N?(A.components[M]=N,P):A.components[M]},directive(M,N){return N?(A.directives[M]=N,P):A.directives[M]},mount(M,N,I){if(!R){const V=P._ceVNode||createVNode(E,T);return V.appContext=A,I===!0?I="svg":I===!1&&(I=void 0),_(V,M,I),R=!0,P._container=M,M.__vue_app__=P,getComponentPublicInstance(V.component)}},onUnmount(M){x.push(M)},unmount(){R&&(callWithAsyncErrorHandling(x,P._instance,16),_(null,P._container),delete P._container.__vue_app__)},provide(M,N){return A.provides[M]=N,P},runWithContext(M){const N=currentApp;currentApp=P;try{return M()}finally{currentApp=N}}};return P}}let currentApp=null;function provide(_,S){if(currentInstance){let w=currentInstance.provides;const E=currentInstance.parent&&currentInstance.parent.provides;E===w&&(w=currentInstance.provides=Object.create(E)),w[_]=S}}function inject(_,S,w=!1){const E=getCurrentInstance();if(E||currentApp){let T=currentApp?currentApp._context.provides:E?E.parent==null||E.ce?E.vnode.appContext&&E.vnode.appContext.provides:E.parent.provides:void 0;if(T&&_ in T)return T[_];if(arguments.length>1)return w&&isFunction(S)?S.call(E&&E.proxy):S}}function hasInjectionContext(){return!!(getCurrentInstance()||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=_=>Object.getPrototypeOf(_)===internalObjectProto;function initProps(_,S,w,E=!1){const T={},A=createInternalObject();_.propsDefaults=Object.create(null),setFullProps(_,S,T,A);for(const k in _.propsOptions[0])k in T||(T[k]=void 0);w?_.props=E?T:shallowReactive(T):_.type.props?_.props=T:_.props=A,_.attrs=A}function updateProps(_,S,w,E){const{props:T,attrs:A,vnode:{patchFlag:k}}=_,x=toRaw(T),[R]=_.propsOptions;let P=!1;if((E||k>0)&&!(k&16)){if(k&8){const M=_.vnode.dynamicProps;for(let N=0;N<M.length;N++){let I=M[N];if(isEmitListener(_.emitsOptions,I))continue;const V=S[I];if(R)if(hasOwn(A,I))V!==A[I]&&(A[I]=V,P=!0);else{const B=camelize(I);T[B]=resolvePropValue(R,x,B,V,_,!1)}else V!==A[I]&&(A[I]=V,P=!0)}}}else{setFullProps(_,S,T,A)&&(P=!0);let M;for(const N in x)(!S||!hasOwn(S,N)&&((M=hyphenate(N))===N||!hasOwn(S,M)))&&(R?w&&(w[N]!==void 0||w[M]!==void 0)&&(T[N]=resolvePropValue(R,x,N,void 0,_,!0)):delete T[N]);if(A!==x)for(const N in A)(!S||!hasOwn(S,N))&&(delete A[N],P=!0)}P&&trigger(_.attrs,"set","")}function setFullProps(_,S,w,E){const[T,A]=_.propsOptions;let k=!1,x;if(S)for(let R in S){if(isReservedProp(R))continue;const P=S[R];let M;T&&hasOwn(T,M=camelize(R))?!A||!A.includes(M)?w[M]=P:(x||(x={}))[M]=P:isEmitListener(_.emitsOptions,R)||(!(R in E)||P!==E[R])&&(E[R]=P,k=!0)}if(A){const R=toRaw(w),P=x||EMPTY_OBJ;for(let M=0;M<A.length;M++){const N=A[M];w[N]=resolvePropValue(T,R,N,P[N],_,!hasOwn(P,N))}}return k}function resolvePropValue(_,S,w,E,T,A){const k=_[w];if(k!=null){const x=hasOwn(k,"default");if(x&&E===void 0){const R=k.default;if(k.type!==Function&&!k.skipFactory&&isFunction(R)){const{propsDefaults:P}=T;if(w in P)E=P[w];else{const M=setCurrentInstance(T);E=P[w]=R.call(null,S),M()}}else E=R;T.ce&&T.ce._setProp(w,E)}k[0]&&(A&&!x?E=!1:k[1]&&(E===""||E===hyphenate(w))&&(E=!0))}return E}const mixinPropsCache=new WeakMap;function normalizePropsOptions(_,S,w=!1){const E=w?mixinPropsCache:S.propsCache,T=E.get(_);if(T)return T;const A=_.props,k={},x=[];let R=!1;if(!isFunction(_)){const M=N=>{R=!0;const[I,V]=normalizePropsOptions(N,S,!0);extend(k,I),V&&x.push(...V)};!w&&S.mixins.length&&S.mixins.forEach(M),_.extends&&M(_.extends),_.mixins&&_.mixins.forEach(M)}if(!A&&!R)return isObject$3(_)&&E.set(_,EMPTY_ARR),EMPTY_ARR;if(isArray$1(A))for(let M=0;M<A.length;M++){const N=camelize(A[M]);validatePropName(N)&&(k[N]=EMPTY_OBJ)}else if(A)for(const M in A){const N=camelize(M);if(validatePropName(N)){const I=A[M],V=k[N]=isArray$1(I)||isFunction(I)?{type:I}:extend({},I),B=V.type;let D=!1,z=!0;if(isArray$1(B))for(let O=0;O<B.length;++O){const L=B[O],F=isFunction(L)&&L.name;if(F==="Boolean"){D=!0;break}else F==="String"&&(z=!1)}else D=isFunction(B)&&B.name==="Boolean";V[0]=D,V[1]=z,(D||hasOwn(V,"default"))&&x.push(N)}}const P=[k,x];return isObject$3(_)&&E.set(_,P),P}function validatePropName(_){return _[0]!=="$"&&!isReservedProp(_)}const isInternalKey=_=>_==="_"||_==="_ctx"||_==="$stable",normalizeSlotValue=_=>isArray$1(_)?_.map(normalizeVNode):[normalizeVNode(_)],normalizeSlot=(_,S,w)=>{if(S._n)return S;const E=withCtx((...T)=>normalizeSlotValue(S(...T)),w);return E._c=!1,E},normalizeObjectSlots=(_,S,w)=>{const E=_._ctx;for(const T in _){if(isInternalKey(T))continue;const A=_[T];if(isFunction(A))S[T]=normalizeSlot(T,A,E);else if(A!=null){const k=normalizeSlotValue(A);S[T]=()=>k}}},normalizeVNodeSlots=(_,S)=>{const w=normalizeSlotValue(S);_.slots.default=()=>w},assignSlots=(_,S,w)=>{for(const E in S)(w||!isInternalKey(E))&&(_[E]=S[E])},initSlots=(_,S,w)=>{const E=_.slots=createInternalObject();if(_.vnode.shapeFlag&32){const T=S._;T?(assignSlots(E,S,w),w&&def(E,"_",T,!0)):normalizeObjectSlots(S,E)}else S&&normalizeVNodeSlots(_,S)},updateSlots=(_,S,w)=>{const{vnode:E,slots:T}=_;let A=!0,k=EMPTY_OBJ;if(E.shapeFlag&32){const x=S._;x?w&&x===1?A=!1:assignSlots(T,S,w):(A=!S.$stable,normalizeObjectSlots(S,T)),k=S}else S&&(normalizeVNodeSlots(_,S),k={default:1});if(A)for(const x in T)!isInternalKey(x)&&k[x]==null&&delete T[x]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(_){return baseCreateRenderer(_)}function baseCreateRenderer(_,S){const w=getGlobalThis();w.__VUE__=!0;const{insert:E,remove:T,patchProp:A,createElement:k,createText:x,createComment:R,setText:P,setElementText:M,parentNode:N,nextSibling:I,setScopeId:V=NOOP,insertStaticContent:B}=_,D=(K,ne,fe,Ee=null,be=null,Te=null,Ne=void 0,ve=null,Oe=!!ne.dynamicChildren)=>{if(K===ne)return;K&&!isSameVNodeType(K,ne)&&(Ee=ce(K),Re(K,be,Te,!0),K=null),ne.patchFlag===-2&&(Oe=!1,ne.dynamicChildren=null);const{type:Pe,ref:Se,shapeFlag:Ce}=ne;switch(Pe){case Text:z(K,ne,fe,Ee);break;case Comment:O(K,ne,fe,Ee);break;case Static:K==null&&L(ne,fe,Ee,Ne);break;case Fragment:G(K,ne,fe,Ee,be,Te,Ne,ve,Oe);break;default:Ce&1?H(K,ne,fe,Ee,be,Te,Ne,ve,Oe):Ce&6?de(K,ne,fe,Ee,be,Te,Ne,ve,Oe):(Ce&64||Ce&128)&&Pe.process(K,ne,fe,Ee,be,Te,Ne,ve,Oe,Ae)}Se!=null&&be?setRef(Se,K&&K.ref,Te,ne||K,!ne):Se==null&&K&&K.ref!=null&&setRef(K.ref,null,Te,K,!0)},z=(K,ne,fe,Ee)=>{if(K==null)E(ne.el=x(ne.children),fe,Ee);else{const be=ne.el=K.el;ne.children!==K.children&&P(be,ne.children)}},O=(K,ne,fe,Ee)=>{K==null?E(ne.el=R(ne.children||""),fe,Ee):ne.el=K.el},L=(K,ne,fe,Ee)=>{[K.el,K.anchor]=B(K.children,ne,fe,Ee,K.el,K.anchor)},F=({el:K,anchor:ne},fe,Ee)=>{let be;for(;K&&K!==ne;)be=I(K),E(K,fe,Ee),K=be;E(ne,fe,Ee)},$=({el:K,anchor:ne})=>{let fe;for(;K&&K!==ne;)fe=I(K),T(K),K=fe;T(ne)},H=(K,ne,fe,Ee,be,Te,Ne,ve,Oe)=>{if(ne.type==="svg"?Ne="svg":ne.type==="math"&&(Ne="mathml"),K==null)j(ne,fe,Ee,be,Te,Ne,ve,Oe);else{const Pe=K.el&&K.el._isVueCE?K.el:null;try{Pe&&Pe._beginPatch(),X(K,ne,be,Te,Ne,ve,Oe)}finally{Pe&&Pe._endPatch()}}},j=(K,ne,fe,Ee,be,Te,Ne,ve)=>{let Oe,Pe;const{props:Se,shapeFlag:Ce,transition:Fe,dirs:$e}=K;if(Oe=K.el=k(K.type,Te,Se&&Se.is,Se),Ce&8?M(Oe,K.children):Ce&16&&W(K.children,Oe,null,Ee,be,resolveChildrenNamespace(K,Te),Ne,ve),$e&&invokeDirectiveHook(K,null,Ee,"created"),q(Oe,K,K.scopeId,Ne,Ee),Se){for(const ze in Se)ze!=="value"&&!isReservedProp(ze)&&A(Oe,ze,null,Se[ze],Te,Ee);"value"in Se&&A(Oe,"value",null,Se.value,Te),(Pe=Se.onVnodeBeforeMount)&&invokeVNodeHook(Pe,Ee,K)}$e&&invokeDirectiveHook(K,null,Ee,"beforeMount");const De=needTransition(be,Fe);De&&Fe.beforeEnter(Oe),E(Oe,ne,fe),((Pe=Se&&Se.onVnodeMounted)||De||$e)&&queuePostRenderEffect(()=>{Pe&&invokeVNodeHook(Pe,Ee,K),De&&Fe.enter(Oe),$e&&invokeDirectiveHook(K,null,Ee,"mounted")},be)},q=(K,ne,fe,Ee,be)=>{if(fe&&V(K,fe),Ee)for(let Te=0;Te<Ee.length;Te++)V(K,Ee[Te]);if(be){let Te=be.subTree;if(ne===Te||isSuspense(Te.type)&&(Te.ssContent===ne||Te.ssFallback===ne)){const Ne=be.vnode;q(K,Ne,Ne.scopeId,Ne.slotScopeIds,be.parent)}}},W=(K,ne,fe,Ee,be,Te,Ne,ve,Oe=0)=>{for(let Pe=Oe;Pe<K.length;Pe++){const Se=K[Pe]=ve?cloneIfMounted(K[Pe]):normalizeVNode(K[Pe]);D(null,Se,ne,fe,Ee,be,Te,Ne,ve)}},X=(K,ne,fe,Ee,be,Te,Ne)=>{const ve=ne.el=K.el;let{patchFlag:Oe,dynamicChildren:Pe,dirs:Se}=ne;Oe|=K.patchFlag&16;const Ce=K.props||EMPTY_OBJ,Fe=ne.props||EMPTY_OBJ;let $e;if(fe&&toggleRecurse(fe,!1),($e=Fe.onVnodeBeforeUpdate)&&invokeVNodeHook($e,fe,ne,K),Se&&invokeDirectiveHook(ne,K,fe,"beforeUpdate"),fe&&toggleRecurse(fe,!0),(Ce.innerHTML&&Fe.innerHTML==null||Ce.textContent&&Fe.textContent==null)&&M(ve,""),Pe?te(K.dynamicChildren,Pe,ve,fe,Ee,resolveChildrenNamespace(ne,be),Te):Ne||Z(K,ne,ve,null,fe,Ee,resolveChildrenNamespace(ne,be),Te,!1),Oe>0){if(Oe&16)ee(ve,Ce,Fe,fe,be);else if(Oe&2&&Ce.class!==Fe.class&&A(ve,"class",null,Fe.class,be),Oe&4&&A(ve,"style",Ce.style,Fe.style,be),Oe&8){const De=ne.dynamicProps;for(let ze=0;ze<De.length;ze++){const Ve=De[ze],We=Ce[Ve],Ze=Fe[Ve];(Ze!==We||Ve==="value")&&A(ve,Ve,We,Ze,be,fe)}}Oe&1&&K.children!==ne.children&&M(ve,ne.children)}else!Ne&&Pe==null&&ee(ve,Ce,Fe,fe,be);(($e=Fe.onVnodeUpdated)||Se)&&queuePostRenderEffect(()=>{$e&&invokeVNodeHook($e,fe,ne,K),Se&&invokeDirectiveHook(ne,K,fe,"updated")},Ee)},te=(K,ne,fe,Ee,be,Te,Ne)=>{for(let ve=0;ve<ne.length;ve++){const Oe=K[ve],Pe=ne[ve],Se=Oe.el&&(Oe.type===Fragment||!isSameVNodeType(Oe,Pe)||Oe.shapeFlag&198)?N(Oe.el):fe;D(Oe,Pe,Se,null,Ee,be,Te,Ne,!0)}},ee=(K,ne,fe,Ee,be)=>{if(ne!==fe){if(ne!==EMPTY_OBJ)for(const Te in ne)!isReservedProp(Te)&&!(Te in fe)&&A(K,Te,ne[Te],null,be,Ee);for(const Te in fe){if(isReservedProp(Te))continue;const Ne=fe[Te],ve=ne[Te];Ne!==ve&&Te!=="value"&&A(K,Te,ve,Ne,be,Ee)}"value"in fe&&A(K,"value",ne.value,fe.value,be)}},G=(K,ne,fe,Ee,be,Te,Ne,ve,Oe)=>{const Pe=ne.el=K?K.el:x(""),Se=ne.anchor=K?K.anchor:x("");let{patchFlag:Ce,dynamicChildren:Fe,slotScopeIds:$e}=ne;$e&&(ve=ve?ve.concat($e):$e),K==null?(E(Pe,fe,Ee),E(Se,fe,Ee),W(ne.children||[],fe,Se,be,Te,Ne,ve,Oe)):Ce>0&&Ce&64&&Fe&&K.dynamicChildren?(te(K.dynamicChildren,Fe,fe,be,Te,Ne,ve),(ne.key!=null||be&&ne===be.subTree)&&traverseStaticChildren(K,ne,!0)):Z(K,ne,fe,Se,be,Te,Ne,ve,Oe)},de=(K,ne,fe,Ee,be,Te,Ne,ve,Oe)=>{ne.slotScopeIds=ve,K==null?ne.shapeFlag&512?be.ctx.activate(ne,fe,Ee,Ne,Oe):le(ne,fe,Ee,be,Te,Ne,Oe):ae(K,ne,Oe)},le=(K,ne,fe,Ee,be,Te,Ne)=>{const ve=K.component=createComponentInstance(K,Ee,be);if(isKeepAlive(K)&&(ve.ctx.renderer=Ae),setupComponent(ve,!1,Ne),ve.asyncDep){if(be&&be.registerDep(ve,Q,Ne),!K.el){const Oe=ve.subTree=createVNode(Comment);O(null,Oe,ne,fe),K.placeholder=Oe.el}}else Q(ve,K,ne,fe,be,Te,Ne)},ae=(K,ne,fe)=>{const Ee=ne.component=K.component;if(shouldUpdateComponent(K,ne,fe))if(Ee.asyncDep&&!Ee.asyncResolved){ie(Ee,ne,fe);return}else Ee.next=ne,Ee.update();else ne.el=K.el,Ee.vnode=ne},Q=(K,ne,fe,Ee,be,Te,Ne)=>{const ve=()=>{if(K.isMounted){let{next:Ce,bu:Fe,u:$e,parent:De,vnode:ze}=K;{const rt=locateNonHydratedAsyncRoot(K);if(rt){Ce&&(Ce.el=ze.el,ie(K,Ce,Ne)),rt.asyncDep.then(()=>{K.isUnmounted||ve()});return}}let Ve=Ce,We;toggleRecurse(K,!1),Ce?(Ce.el=ze.el,ie(K,Ce,Ne)):Ce=ze,Fe&&invokeArrayFns(Fe),(We=Ce.props&&Ce.props.onVnodeBeforeUpdate)&&invokeVNodeHook(We,De,Ce,ze),toggleRecurse(K,!0);const Ze=renderComponentRoot(K),et=K.subTree;K.subTree=Ze,D(et,Ze,N(et.el),ce(et),K,be,Te),Ce.el=Ze.el,Ve===null&&updateHOCHostEl(K,Ze.el),$e&&queuePostRenderEffect($e,be),(We=Ce.props&&Ce.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(We,De,Ce,ze),be)}else{let Ce;const{el:Fe,props:$e}=ne,{bm:De,m:ze,parent:Ve,root:We,type:Ze}=K,et=isAsyncWrapper(ne);toggleRecurse(K,!1),De&&invokeArrayFns(De),!et&&(Ce=$e&&$e.onVnodeBeforeMount)&&invokeVNodeHook(Ce,Ve,ne),toggleRecurse(K,!0);{We.ce&&We.ce._def.shadowRoot!==!1&&We.ce._injectChildStyle(Ze);const rt=K.subTree=renderComponentRoot(K);D(null,rt,fe,Ee,K,be,Te),ne.el=rt.el}if(ze&&queuePostRenderEffect(ze,be),!et&&(Ce=$e&&$e.onVnodeMounted)){const rt=ne;queuePostRenderEffect(()=>invokeVNodeHook(Ce,Ve,rt),be)}(ne.shapeFlag&256||Ve&&isAsyncWrapper(Ve.vnode)&&Ve.vnode.shapeFlag&256)&&K.a&&queuePostRenderEffect(K.a,be),K.isMounted=!0,ne=fe=Ee=null}};K.scope.on();const Oe=K.effect=new ReactiveEffect(ve);K.scope.off();const Pe=K.update=Oe.run.bind(Oe),Se=K.job=Oe.runIfDirty.bind(Oe);Se.i=K,Se.id=K.uid,Oe.scheduler=()=>queueJob(Se),toggleRecurse(K,!0),Pe()},ie=(K,ne,fe)=>{ne.component=K;const Ee=K.vnode.props;K.vnode=ne,K.next=null,updateProps(K,ne.props,Ee,fe),updateSlots(K,ne.children,fe),pauseTracking(),flushPreFlushCbs(K),resetTracking()},Z=(K,ne,fe,Ee,be,Te,Ne,ve,Oe=!1)=>{const Pe=K&&K.children,Se=K?K.shapeFlag:0,Ce=ne.children,{patchFlag:Fe,shapeFlag:$e}=ne;if(Fe>0){if(Fe&128){ue(Pe,Ce,fe,Ee,be,Te,Ne,ve,Oe);return}else if(Fe&256){J(Pe,Ce,fe,Ee,be,Te,Ne,ve,Oe);return}}$e&8?(Se&16&&oe(Pe,be,Te),Ce!==Pe&&M(fe,Ce)):Se&16?$e&16?ue(Pe,Ce,fe,Ee,be,Te,Ne,ve,Oe):oe(Pe,be,Te,!0):(Se&8&&M(fe,""),$e&16&&W(Ce,fe,Ee,be,Te,Ne,ve,Oe))},J=(K,ne,fe,Ee,be,Te,Ne,ve,Oe)=>{K=K||EMPTY_ARR,ne=ne||EMPTY_ARR;const Pe=K.length,Se=ne.length,Ce=Math.min(Pe,Se);let Fe;for(Fe=0;Fe<Ce;Fe++){const $e=ne[Fe]=Oe?cloneIfMounted(ne[Fe]):normalizeVNode(ne[Fe]);D(K[Fe],$e,fe,null,be,Te,Ne,ve,Oe)}Pe>Se?oe(K,be,Te,!0,!1,Ce):W(ne,fe,Ee,be,Te,Ne,ve,Oe,Ce)},ue=(K,ne,fe,Ee,be,Te,Ne,ve,Oe)=>{let Pe=0;const Se=ne.length;let Ce=K.length-1,Fe=Se-1;for(;Pe<=Ce&&Pe<=Fe;){const $e=K[Pe],De=ne[Pe]=Oe?cloneIfMounted(ne[Pe]):normalizeVNode(ne[Pe]);if(isSameVNodeType($e,De))D($e,De,fe,null,be,Te,Ne,ve,Oe);else break;Pe++}for(;Pe<=Ce&&Pe<=Fe;){const $e=K[Ce],De=ne[Fe]=Oe?cloneIfMounted(ne[Fe]):normalizeVNode(ne[Fe]);if(isSameVNodeType($e,De))D($e,De,fe,null,be,Te,Ne,ve,Oe);else break;Ce--,Fe--}if(Pe>Ce){if(Pe<=Fe){const $e=Fe+1,De=$e<Se?ne[$e].el:Ee;for(;Pe<=Fe;)D(null,ne[Pe]=Oe?cloneIfMounted(ne[Pe]):normalizeVNode(ne[Pe]),fe,De,be,Te,Ne,ve,Oe),Pe++}}else if(Pe>Fe)for(;Pe<=Ce;)Re(K[Pe],be,Te,!0),Pe++;else{const $e=Pe,De=Pe,ze=new Map;for(Pe=De;Pe<=Fe;Pe++){const Qe=ne[Pe]=Oe?cloneIfMounted(ne[Pe]):normalizeVNode(ne[Pe]);Qe.key!=null&&ze.set(Qe.key,Pe)}let Ve,We=0;const Ze=Fe-De+1;let et=!1,rt=0;const at=new Array(Ze);for(Pe=0;Pe<Ze;Pe++)at[Pe]=0;for(Pe=$e;Pe<=Ce;Pe++){const Qe=K[Pe];if(We>=Ze){Re(Qe,be,Te,!0);continue}let it;if(Qe.key!=null)it=ze.get(Qe.key);else for(Ve=De;Ve<=Fe;Ve++)if(at[Ve-De]===0&&isSameVNodeType(Qe,ne[Ve])){it=Ve;break}it===void 0?Re(Qe,be,Te,!0):(at[it-De]=Pe+1,it>=rt?rt=it:et=!0,D(Qe,ne[it],fe,null,be,Te,Ne,ve,Oe),We++)}const st=et?getSequence(at):EMPTY_ARR;for(Ve=st.length-1,Pe=Ze-1;Pe>=0;Pe--){const Qe=De+Pe,it=ne[Qe],lt=ne[Qe+1],ot=Qe+1<Se?lt.el||lt.placeholder:Ee;at[Pe]===0?D(null,it,fe,ot,be,Te,Ne,ve,Oe):et&&(Ve<0||Pe!==st[Ve]?pe(it,fe,ot,2):Ve--)}}},pe=(K,ne,fe,Ee,be=null)=>{const{el:Te,type:Ne,transition:ve,children:Oe,shapeFlag:Pe}=K;if(Pe&6){pe(K.component.subTree,ne,fe,Ee);return}if(Pe&128){K.suspense.move(ne,fe,Ee);return}if(Pe&64){Ne.move(K,ne,fe,Ae);return}if(Ne===Fragment){E(Te,ne,fe);for(let Ce=0;Ce<Oe.length;Ce++)pe(Oe[Ce],ne,fe,Ee);E(K.anchor,ne,fe);return}if(Ne===Static){F(K,ne,fe);return}if(Ee!==2&&Pe&1&&ve)if(Ee===0)ve.beforeEnter(Te),E(Te,ne,fe),queuePostRenderEffect(()=>ve.enter(Te),be);else{const{leave:Ce,delayLeave:Fe,afterLeave:$e}=ve,De=()=>{K.ctx.isUnmounted?T(Te):E(Te,ne,fe)},ze=()=>{Te._isLeaving&&Te[leaveCbKey](!0),Ce(Te,()=>{De(),$e&&$e()})};Fe?Fe(Te,De,ze):ze()}else E(Te,ne,fe)},Re=(K,ne,fe,Ee=!1,be=!1)=>{const{type:Te,props:Ne,ref:ve,children:Oe,dynamicChildren:Pe,shapeFlag:Se,patchFlag:Ce,dirs:Fe,cacheIndex:$e}=K;if(Ce===-2&&(be=!1),ve!=null&&(pauseTracking(),setRef(ve,null,fe,K,!0),resetTracking()),$e!=null&&(ne.renderCache[$e]=void 0),Se&256){ne.ctx.deactivate(K);return}const De=Se&1&&Fe,ze=!isAsyncWrapper(K);let Ve;if(ze&&(Ve=Ne&&Ne.onVnodeBeforeUnmount)&&invokeVNodeHook(Ve,ne,K),Se&6)we(K.component,fe,Ee);else{if(Se&128){K.suspense.unmount(fe,Ee);return}De&&invokeDirectiveHook(K,null,ne,"beforeUnmount"),Se&64?K.type.remove(K,ne,fe,Ae,Ee):Pe&&!Pe.hasOnce&&(Te!==Fragment||Ce>0&&Ce&64)?oe(Pe,ne,fe,!1,!0):(Te===Fragment&&Ce&384||!be&&Se&16)&&oe(Oe,ne,fe),Ee&&me(K)}(ze&&(Ve=Ne&&Ne.onVnodeUnmounted)||De)&&queuePostRenderEffect(()=>{Ve&&invokeVNodeHook(Ve,ne,K),De&&invokeDirectiveHook(K,null,ne,"unmounted")},fe)},me=K=>{const{type:ne,el:fe,anchor:Ee,transition:be}=K;if(ne===Fragment){ge(fe,Ee);return}if(ne===Static){$(K);return}const Te=()=>{T(fe),be&&!be.persisted&&be.afterLeave&&be.afterLeave()};if(K.shapeFlag&1&&be&&!be.persisted){const{leave:Ne,delayLeave:ve}=be,Oe=()=>Ne(fe,Te);ve?ve(K.el,Te,Oe):Oe()}else Te()},ge=(K,ne)=>{let fe;for(;K!==ne;)fe=I(K),T(K),K=fe;T(ne)},we=(K,ne,fe)=>{const{bum:Ee,scope:be,job:Te,subTree:Ne,um:ve,m:Oe,a:Pe}=K;invalidateMount(Oe),invalidateMount(Pe),Ee&&invokeArrayFns(Ee),be.stop(),Te&&(Te.flags|=8,Re(Ne,K,ne,fe)),ve&&queuePostRenderEffect(ve,ne),queuePostRenderEffect(()=>{K.isUnmounted=!0},ne)},oe=(K,ne,fe,Ee=!1,be=!1,Te=0)=>{for(let Ne=Te;Ne<K.length;Ne++)Re(K[Ne],ne,fe,Ee,be)},ce=K=>{if(K.shapeFlag&6)return ce(K.component.subTree);if(K.shapeFlag&128)return K.suspense.next();const ne=I(K.anchor||K.el),fe=ne&&ne[TeleportEndKey];return fe?I(fe):ne};let ye=!1;const xe=(K,ne,fe)=>{K==null?ne._vnode&&Re(ne._vnode,null,null,!0):D(ne._vnode||null,K,ne,null,null,null,fe),ne._vnode=K,ye||(ye=!0,flushPreFlushCbs(),flushPostFlushCbs(),ye=!1)},Ae={p:D,um:Re,m:pe,r:me,mt:le,mc:W,pc:Z,pbc:te,n:ce,o:_};return{render:xe,hydrate:void 0,createApp:createAppAPI(xe)}}function resolveChildrenNamespace({type:_,props:S},w){return w==="svg"&&_==="foreignObject"||w==="mathml"&&_==="annotation-xml"&&S&&S.encoding&&S.encoding.includes("html")?void 0:w}function toggleRecurse({effect:_,job:S},w){w?(_.flags|=32,S.flags|=4):(_.flags&=-33,S.flags&=-5)}function needTransition(_,S){return(!_||_&&!_.pendingBranch)&&S&&!S.persisted}function traverseStaticChildren(_,S,w=!1){const E=_.children,T=S.children;if(isArray$1(E)&&isArray$1(T))for(let A=0;A<E.length;A++){const k=E[A];let x=T[A];x.shapeFlag&1&&!x.dynamicChildren&&((x.patchFlag<=0||x.patchFlag===32)&&(x=T[A]=cloneIfMounted(T[A]),x.el=k.el),!w&&x.patchFlag!==-2&&traverseStaticChildren(k,x)),x.type===Text&&x.patchFlag!==-1&&(x.el=k.el),x.type===Comment&&!x.el&&(x.el=k.el)}}function getSequence(_){const S=_.slice(),w=[0];let E,T,A,k,x;const R=_.length;for(E=0;E<R;E++){const P=_[E];if(P!==0){if(T=w[w.length-1],_[T]<P){S[E]=T,w.push(E);continue}for(A=0,k=w.length-1;A<k;)x=A+k>>1,_[w[x]]<P?A=x+1:k=x;P<_[w[A]]&&(A>0&&(S[E]=w[A-1]),w[A]=E)}}for(A=w.length,k=w[A-1];A-- >0;)w[A]=k,k=S[k];return w}function locateNonHydratedAsyncRoot(_){const S=_.subTree.component;if(S)return S.asyncDep&&!S.asyncResolved?S:locateNonHydratedAsyncRoot(S)}function invalidateMount(_){if(_)for(let S=0;S<_.length;S++)_[S].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(_,S){return doWatch(_,null,S)}function watch(_,S,w){return doWatch(_,S,w)}function doWatch(_,S,w=EMPTY_OBJ){const{immediate:E,deep:T,flush:A,once:k}=w,x=extend({},w),R=S&&E||!S&&A!=="post";let P;if(isInSSRComponentSetup){if(A==="sync"){const V=useSSRContext();P=V.__watcherHandles||(V.__watcherHandles=[])}else if(!R){const V=()=>{};return V.stop=NOOP,V.resume=NOOP,V.pause=NOOP,V}}const M=currentInstance;x.call=(V,B,D)=>callWithAsyncErrorHandling(V,M,B,D);let N=!1;A==="post"?x.scheduler=V=>{queuePostRenderEffect(V,M&&M.suspense)}:A!=="sync"&&(N=!0,x.scheduler=(V,B)=>{B?V():queueJob(V)}),x.augmentJob=V=>{S&&(V.flags|=4),N&&(V.flags|=2,M&&(V.id=M.uid,V.i=M))};const I=watch$1(_,S,x);return isInSSRComponentSetup&&(P?P.push(I):R&&I()),I}function instanceWatch(_,S,w){const E=this.proxy,T=isString$1(_)?_.includes(".")?createPathGetter(E,_):()=>E[_]:_.bind(E,E);let A;isFunction(S)?A=S:(A=S.handler,w=S);const k=setCurrentInstance(this),x=doWatch(T,A.bind(E),w);return k(),x}function createPathGetter(_,S){const w=S.split(".");return()=>{let E=_;for(let T=0;T<w.length&&E;T++)E=E[w[T]];return E}}const getModelModifiers=(_,S)=>S==="modelValue"||S==="model-value"?_.modelModifiers:_[`${S}Modifiers`]||_[`${camelize(S)}Modifiers`]||_[`${hyphenate(S)}Modifiers`];function emit(_,S,...w){if(_.isUnmounted)return;const E=_.vnode.props||EMPTY_OBJ;let T=w;const A=S.startsWith("update:"),k=A&&getModelModifiers(E,S.slice(7));k&&(k.trim&&(T=w.map(M=>isString$1(M)?M.trim():M)),k.number&&(T=w.map(looseToNumber)));let x,R=E[x=toHandlerKey(S)]||E[x=toHandlerKey(camelize(S))];!R&&A&&(R=E[x=toHandlerKey(hyphenate(S))]),R&&callWithAsyncErrorHandling(R,_,6,T);const P=E[x+"Once"];if(P){if(!_.emitted)_.emitted={};else if(_.emitted[x])return;_.emitted[x]=!0,callWithAsyncErrorHandling(P,_,6,T)}}const mixinEmitsCache=new WeakMap;function normalizeEmitsOptions(_,S,w=!1){const E=w?mixinEmitsCache:S.emitsCache,T=E.get(_);if(T!==void 0)return T;const A=_.emits;let k={},x=!1;if(!isFunction(_)){const R=P=>{const M=normalizeEmitsOptions(P,S,!0);M&&(x=!0,extend(k,M))};!w&&S.mixins.length&&S.mixins.forEach(R),_.extends&&R(_.extends),_.mixins&&_.mixins.forEach(R)}return!A&&!x?(isObject$3(_)&&E.set(_,null),null):(isArray$1(A)?A.forEach(R=>k[R]=null):extend(k,A),isObject$3(_)&&E.set(_,k),k)}function isEmitListener(_,S){return!_||!isOn(S)?!1:(S=S.slice(2).replace(/Once$/,""),hasOwn(_,S[0].toLowerCase()+S.slice(1))||hasOwn(_,hyphenate(S))||hasOwn(_,S))}function markAttrsAccessed(){}function renderComponentRoot(_){const{type:S,vnode:w,proxy:E,withProxy:T,propsOptions:[A],slots:k,attrs:x,emit:R,render:P,renderCache:M,props:N,data:I,setupState:V,ctx:B,inheritAttrs:D}=_,z=setCurrentRenderingInstance(_);let O,L;try{if(w.shapeFlag&4){const $=T||E,H=$;O=normalizeVNode(P.call(H,$,M,N,V,I,B)),L=x}else{const $=S;O=normalizeVNode($.length>1?$(N,{attrs:x,slots:k,emit:R}):$(N,null)),L=S.props?x:getFunctionalFallthrough(x)}}catch($){blockStack.length=0,handleError($,_,1),O=createVNode(Comment)}let F=O;if(L&&D!==!1){const $=Object.keys(L),{shapeFlag:H}=F;$.length&&H&7&&(A&&$.some(isModelListener)&&(L=filterModelListeners(L,A)),F=cloneVNode(F,L,!1,!0))}return w.dirs&&(F=cloneVNode(F,null,!1,!0),F.dirs=F.dirs?F.dirs.concat(w.dirs):w.dirs),w.transition&&setTransitionHooks(F,w.transition),O=F,setCurrentRenderingInstance(z),O}const getFunctionalFallthrough=_=>{let S;for(const w in _)(w==="class"||w==="style"||isOn(w))&&((S||(S={}))[w]=_[w]);return S},filterModelListeners=(_,S)=>{const w={};for(const E in _)(!isModelListener(E)||!(E.slice(9)in S))&&(w[E]=_[E]);return w};function shouldUpdateComponent(_,S,w){const{props:E,children:T,component:A}=_,{props:k,children:x,patchFlag:R}=S,P=A.emitsOptions;if(S.dirs||S.transition)return!0;if(w&&R>=0){if(R&1024)return!0;if(R&16)return E?hasPropsChanged(E,k,P):!!k;if(R&8){const M=S.dynamicProps;for(let N=0;N<M.length;N++){const I=M[N];if(k[I]!==E[I]&&!isEmitListener(P,I))return!0}}}else return(T||x)&&(!x||!x.$stable)?!0:E===k?!1:E?k?hasPropsChanged(E,k,P):!0:!!k;return!1}function hasPropsChanged(_,S,w){const E=Object.keys(S);if(E.length!==Object.keys(_).length)return!0;for(let T=0;T<E.length;T++){const A=E[T];if(S[A]!==_[A]&&!isEmitListener(w,A))return!0}return!1}function updateHOCHostEl({vnode:_,parent:S},w){for(;S;){const E=S.subTree;if(E.suspense&&E.suspense.activeBranch===_&&(E.el=_.el),E===_)(_=S.vnode).el=w,S=S.parent;else break}}const isSuspense=_=>_.__isSuspense;function queueEffectWithSuspense(_,S){S&&S.pendingBranch?isArray$1(_)?S.effects.push(..._):S.effects.push(_):queuePostFlushCb(_)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(_=!1){blockStack.push(currentBlock=_?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(_,S=!1){isBlockTreeEnabled+=_,_<0&&currentBlock&&S&&(currentBlock.hasOnce=!0)}function setupBlock(_){return _.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(_),_}function createElementBlock(_,S,w,E,T,A){return setupBlock(createBaseVNode(_,S,w,E,T,A,!0))}function createBlock(_,S,w,E,T){return setupBlock(createVNode(_,S,w,E,T,!0))}function isVNode(_){return _?_.__v_isVNode===!0:!1}function isSameVNodeType(_,S){return _.type===S.type&&_.key===S.key}const normalizeKey=({key:_})=>_??null,normalizeRef=({ref:_,ref_key:S,ref_for:w})=>(typeof _=="number"&&(_=""+_),_!=null?isString$1(_)||isRef(_)||isFunction(_)?{i:currentRenderingInstance,r:_,k:S,f:!!w}:_:null);function createBaseVNode(_,S=null,w=null,E=0,T=null,A=_===Fragment?0:1,k=!1,x=!1){const R={__v_isVNode:!0,__v_skip:!0,type:_,props:S,key:S&&normalizeKey(S),ref:S&&normalizeRef(S),scopeId:currentScopeId,slotScopeIds:null,children:w,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:A,patchFlag:E,dynamicProps:T,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return x?(normalizeChildren(R,w),A&128&&_.normalize(R)):w&&(R.shapeFlag|=isString$1(w)?8:16),isBlockTreeEnabled>0&&!k&&currentBlock&&(R.patchFlag>0||A&6)&&R.patchFlag!==32&&currentBlock.push(R),R}const createVNode=_createVNode;function _createVNode(_,S=null,w=null,E=0,T=null,A=!1){if((!_||_===NULL_DYNAMIC_COMPONENT)&&(_=Comment),isVNode(_)){const x=cloneVNode(_,S,!0);return w&&normalizeChildren(x,w),isBlockTreeEnabled>0&&!A&&currentBlock&&(x.shapeFlag&6?currentBlock[currentBlock.indexOf(_)]=x:currentBlock.push(x)),x.patchFlag=-2,x}if(isClassComponent(_)&&(_=_.__vccOpts),S){S=guardReactiveProps(S);let{class:x,style:R}=S;x&&!isString$1(x)&&(S.class=normalizeClass(x)),isObject$3(R)&&(isProxy(R)&&!isArray$1(R)&&(R=extend({},R)),S.style=normalizeStyle(R))}const k=isString$1(_)?1:isSuspense(_)?128:isTeleport(_)?64:isObject$3(_)?4:isFunction(_)?2:0;return createBaseVNode(_,S,w,E,T,k,A,!0)}function guardReactiveProps(_){return _?isProxy(_)||isInternalObject(_)?extend({},_):_:null}function cloneVNode(_,S,w=!1,E=!1){const{props:T,ref:A,patchFlag:k,children:x,transition:R}=_,P=S?mergeProps(T||{},S):T,M={__v_isVNode:!0,__v_skip:!0,type:_.type,props:P,key:P&&normalizeKey(P),ref:S&&S.ref?w&&A?isArray$1(A)?A.concat(normalizeRef(S)):[A,normalizeRef(S)]:normalizeRef(S):A,scopeId:_.scopeId,slotScopeIds:_.slotScopeIds,children:x,target:_.target,targetStart:_.targetStart,targetAnchor:_.targetAnchor,staticCount:_.staticCount,shapeFlag:_.shapeFlag,patchFlag:S&&_.type!==Fragment?k===-1?16:k|16:k,dynamicProps:_.dynamicProps,dynamicChildren:_.dynamicChildren,appContext:_.appContext,dirs:_.dirs,transition:R,component:_.component,suspense:_.suspense,ssContent:_.ssContent&&cloneVNode(_.ssContent),ssFallback:_.ssFallback&&cloneVNode(_.ssFallback),placeholder:_.placeholder,el:_.el,anchor:_.anchor,ctx:_.ctx,ce:_.ce};return R&&E&&setTransitionHooks(M,R.clone(M)),M}function createTextVNode(_=" ",S=0){return createVNode(Text,null,_,S)}function createStaticVNode(_,S){const w=createVNode(Static,null,_);return w.staticCount=S,w}function createCommentVNode(_="",S=!1){return S?(openBlock(),createBlock(Comment,null,_)):createVNode(Comment,null,_)}function normalizeVNode(_){return _==null||typeof _=="boolean"?createVNode(Comment):isArray$1(_)?createVNode(Fragment,null,_.slice()):isVNode(_)?cloneIfMounted(_):createVNode(Text,null,String(_))}function cloneIfMounted(_){return _.el===null&&_.patchFlag!==-1||_.memo?_:cloneVNode(_)}function normalizeChildren(_,S){let w=0;const{shapeFlag:E}=_;if(S==null)S=null;else if(isArray$1(S))w=16;else if(typeof S=="object")if(E&65){const T=S.default;T&&(T._c&&(T._d=!1),normalizeChildren(_,T()),T._c&&(T._d=!0));return}else{w=32;const T=S._;!T&&!isInternalObject(S)?S._ctx=currentRenderingInstance:T===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?S._=1:(S._=2,_.patchFlag|=1024))}else isFunction(S)?(S={default:S,_ctx:currentRenderingInstance},w=32):(S=String(S),E&64?(w=16,S=[createTextVNode(S)]):w=8);_.children=S,_.shapeFlag|=w}function mergeProps(..._){const S={};for(let w=0;w<_.length;w++){const E=_[w];for(const T in E)if(T==="class")S.class!==E.class&&(S.class=normalizeClass([S.class,E.class]));else if(T==="style")S.style=normalizeStyle([S.style,E.style]);else if(isOn(T)){const A=S[T],k=E[T];k&&A!==k&&!(isArray$1(A)&&A.includes(k))&&(S[T]=A?[].concat(A,k):k)}else T!==""&&(S[T]=E[T])}return S}function invokeVNodeHook(_,S,w,E=null){callWithAsyncErrorHandling(_,S,7,[w,E])}const emptyAppContext=createAppContext();let uid$2=0;function createComponentInstance(_,S,w){const E=_.type,T=(S?S.appContext:_.appContext)||emptyAppContext,A={uid:uid$2++,vnode:_,type:E,parent:S,appContext:T,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:S?S.provides:Object.create(T.provides),ids:S?S.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(E,T),emitsOptions:normalizeEmitsOptions(E,T),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:E.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:w,suspenseId:w?w.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return A.ctx={_:A},A.root=S?S.root:A,A.emit=emit.bind(null,A),_.ce&&_.ce(A),A}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const _=getGlobalThis(),S=(w,E)=>{let T;return(T=_[w])||(T=_[w]=[]),T.push(E),A=>{T.length>1?T.forEach(k=>k(A)):T[0](A)}};internalSetCurrentInstance=S("__VUE_INSTANCE_SETTERS__",w=>currentInstance=w),setInSSRSetupState=S("__VUE_SSR_SETTERS__",w=>isInSSRComponentSetup=w)}const setCurrentInstance=_=>{const S=currentInstance;return internalSetCurrentInstance(_),_.scope.on(),()=>{_.scope.off(),internalSetCurrentInstance(S)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(_){return _.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(_,S=!1,w=!1){S&&setInSSRSetupState(S);const{props:E,children:T}=_.vnode,A=isStatefulComponent(_);initProps(_,E,A,S),initSlots(_,T,w||S);const k=A?setupStatefulComponent(_,S):void 0;return S&&setInSSRSetupState(!1),k}function setupStatefulComponent(_,S){const w=_.type;_.accessCache=Object.create(null),_.proxy=new Proxy(_.ctx,PublicInstanceProxyHandlers);const{setup:E}=w;if(E){pauseTracking();const T=_.setupContext=E.length>1?createSetupContext(_):null,A=setCurrentInstance(_),k=callWithErrorHandling(E,_,0,[_.props,T]),x=isPromise(k);if(resetTracking(),A(),(x||_.sp)&&!isAsyncWrapper(_)&&markAsyncBoundary(_),x){if(k.then(unsetCurrentInstance,unsetCurrentInstance),S)return k.then(R=>{handleSetupResult(_,R)}).catch(R=>{handleError(R,_,0)});_.asyncDep=k}else handleSetupResult(_,k)}else finishComponentSetup(_)}function handleSetupResult(_,S,w){isFunction(S)?_.type.__ssrInlineRender?_.ssrRender=S:_.render=S:isObject$3(S)&&(_.setupState=proxyRefs(S)),finishComponentSetup(_)}function finishComponentSetup(_,S,w){const E=_.type;_.render||(_.render=E.render||NOOP);{const T=setCurrentInstance(_);pauseTracking();try{applyOptions(_)}finally{resetTracking(),T()}}}const attrsProxyHandlers={get(_,S){return track(_,"get",""),_[S]}};function createSetupContext(_){const S=w=>{_.exposed=w||{}};return{attrs:new Proxy(_.attrs,attrsProxyHandlers),slots:_.slots,emit:_.emit,expose:S}}function getComponentPublicInstance(_){return _.exposed?_.exposeProxy||(_.exposeProxy=new Proxy(proxyRefs(markRaw(_.exposed)),{get(S,w){if(w in S)return S[w];if(w in publicPropertiesMap)return publicPropertiesMap[w](_)},has(S,w){return w in S||w in publicPropertiesMap}})):_.proxy}const classifyRE=/(?:^|[-_])\w/g,classify=_=>_.replace(classifyRE,S=>S.toUpperCase()).replace(/[-_]/g,"");function getComponentName(_,S=!0){return isFunction(_)?_.displayName||_.name:_.name||S&&_.__name}function formatComponentName(_,S,w=!1){let E=getComponentName(S);if(!E&&S.__file){const T=S.__file.match(/([^/\\]+)\.\w+$/);T&&(E=T[1])}if(!E&&_&&_.parent){const T=A=>{for(const k in A)if(A[k]===S)return k};E=T(_.components||_.parent.type.components)||T(_.appContext.components)}return E?classify(E):w?"App":"Anonymous"}function isClassComponent(_){return isFunction(_)&&"__vccOpts"in _}const computed=(_,S)=>computed$1(_,S,isInSSRComponentSetup);function h$1(_,S,w){try{setBlockTracking(-1);const E=arguments.length;return E===2?isObject$3(S)&&!isArray$1(S)?isVNode(S)?createVNode(_,null,[S]):createVNode(_,S):createVNode(_,null,S):(E>3?w=Array.prototype.slice.call(arguments,2):E===3&&isVNode(w)&&(w=[w]),createVNode(_,S,w))}finally{setBlockTracking(1)}}const version="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:_=>_})}catch{}const unsafeToTrustedHTML=policy?_=>policy.createHTML(_):_=>_,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(_,S,w)=>{S.insertBefore(_,w||null)},remove:_=>{const S=_.parentNode;S&&S.removeChild(_)},createElement:(_,S,w,E)=>{const T=S==="svg"?doc.createElementNS(svgNS,_):S==="mathml"?doc.createElementNS(mathmlNS,_):w?doc.createElement(_,{is:w}):doc.createElement(_);return _==="select"&&E&&E.multiple!=null&&T.setAttribute("multiple",E.multiple),T},createText:_=>doc.createTextNode(_),createComment:_=>doc.createComment(_),setText:(_,S)=>{_.nodeValue=S},setElementText:(_,S)=>{_.textContent=S},parentNode:_=>_.parentNode,nextSibling:_=>_.nextSibling,querySelector:_=>doc.querySelector(_),setScopeId(_,S){_.setAttribute(S,"")},insertStaticContent(_,S,w,E,T,A){const k=w?w.previousSibling:S.lastChild;if(T&&(T===A||T.nextSibling))for(;S.insertBefore(T.cloneNode(!0),w),!(T===A||!(T=T.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(E==="svg"?`<svg>${_}</svg>`:E==="mathml"?`<math>${_}</math>`:_);const x=templateContainer.content;if(E==="svg"||E==="mathml"){const R=x.firstChild;for(;R.firstChild;)x.appendChild(R.firstChild);x.removeChild(R)}S.insertBefore(x,w)}return[k?k.nextSibling:S.firstChild,w?w.previousSibling:S.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=_=>(_.displayName="Transition",_.props=TransitionPropsValidators,_),Transition=decorate$1((_,{slots:S})=>h$1(BaseTransition,resolveTransitionProps(_),S)),callHook=(_,S=[])=>{isArray$1(_)?_.forEach(w=>w(...S)):_&&_(...S)},hasExplicitCallback=_=>_?isArray$1(_)?_.some(S=>S.length>1):_.length>1:!1;function resolveTransitionProps(_){const S={};for(const G in _)G in DOMTransitionPropsValidators||(S[G]=_[G]);if(_.css===!1)return S;const{name:w="v",type:E,duration:T,enterFromClass:A=`${w}-enter-from`,enterActiveClass:k=`${w}-enter-active`,enterToClass:x=`${w}-enter-to`,appearFromClass:R=A,appearActiveClass:P=k,appearToClass:M=x,leaveFromClass:N=`${w}-leave-from`,leaveActiveClass:I=`${w}-leave-active`,leaveToClass:V=`${w}-leave-to`}=_,B=normalizeDuration(T),D=B&&B[0],z=B&&B[1],{onBeforeEnter:O,onEnter:L,onEnterCancelled:F,onLeave:$,onLeaveCancelled:H,onBeforeAppear:j=O,onAppear:q=L,onAppearCancelled:W=F}=S,X=(G,de,le,ae)=>{G._enterCancelled=ae,removeTransitionClass(G,de?M:x),removeTransitionClass(G,de?P:k),le&&le()},te=(G,de)=>{G._isLeaving=!1,removeTransitionClass(G,N),removeTransitionClass(G,V),removeTransitionClass(G,I),de&&de()},ee=G=>(de,le)=>{const ae=G?q:L,Q=()=>X(de,G,le);callHook(ae,[de,Q]),nextFrame(()=>{removeTransitionClass(de,G?R:A),addTransitionClass(de,G?M:x),hasExplicitCallback(ae)||whenTransitionEnds(de,E,D,Q)})};return extend(S,{onBeforeEnter(G){callHook(O,[G]),addTransitionClass(G,A),addTransitionClass(G,k)},onBeforeAppear(G){callHook(j,[G]),addTransitionClass(G,R),addTransitionClass(G,P)},onEnter:ee(!1),onAppear:ee(!0),onLeave(G,de){G._isLeaving=!0;const le=()=>te(G,de);addTransitionClass(G,N),G._enterCancelled?(addTransitionClass(G,I),forceReflow(G)):(forceReflow(G),addTransitionClass(G,I)),nextFrame(()=>{G._isLeaving&&(removeTransitionClass(G,N),addTransitionClass(G,V),hasExplicitCallback($)||whenTransitionEnds(G,E,z,le))}),callHook($,[G,le])},onEnterCancelled(G){X(G,!1,void 0,!0),callHook(F,[G])},onAppearCancelled(G){X(G,!0,void 0,!0),callHook(W,[G])},onLeaveCancelled(G){te(G),callHook(H,[G])}})}function normalizeDuration(_){if(_==null)return null;if(isObject$3(_))return[NumberOf(_.enter),NumberOf(_.leave)];{const S=NumberOf(_);return[S,S]}}function NumberOf(_){return toNumber$1(_)}function addTransitionClass(_,S){S.split(/\s+/).forEach(w=>w&&_.classList.add(w)),(_[vtcKey]||(_[vtcKey]=new Set)).add(S)}function removeTransitionClass(_,S){S.split(/\s+/).forEach(E=>E&&_.classList.remove(E));const w=_[vtcKey];w&&(w.delete(S),w.size||(_[vtcKey]=void 0))}function nextFrame(_){requestAnimationFrame(()=>{requestAnimationFrame(_)})}let endId=0;function whenTransitionEnds(_,S,w,E){const T=_._endId=++endId,A=()=>{T===_._endId&&E()};if(w!=null)return setTimeout(A,w);const{type:k,timeout:x,propCount:R}=getTransitionInfo(_,S);if(!k)return E();const P=k+"end";let M=0;const N=()=>{_.removeEventListener(P,I),A()},I=V=>{V.target===_&&++M>=R&&N()};setTimeout(()=>{M<R&&N()},x+1),_.addEventListener(P,I)}function getTransitionInfo(_,S){const w=window.getComputedStyle(_),E=B=>(w[B]||"").split(", "),T=E(`${TRANSITION}Delay`),A=E(`${TRANSITION}Duration`),k=getTimeout(T,A),x=E(`${ANIMATION}Delay`),R=E(`${ANIMATION}Duration`),P=getTimeout(x,R);let M=null,N=0,I=0;S===TRANSITION?k>0&&(M=TRANSITION,N=k,I=A.length):S===ANIMATION?P>0&&(M=ANIMATION,N=P,I=R.length):(N=Math.max(k,P),M=N>0?k>P?TRANSITION:ANIMATION:null,I=M?M===TRANSITION?A.length:R.length:0);const V=M===TRANSITION&&/\b(?:transform|all)(?:,|$)/.test(E(`${TRANSITION}Property`).toString());return{type:M,timeout:N,propCount:I,hasTransform:V}}function getTimeout(_,S){for(;_.length<S.length;)_=_.concat(_);return Math.max(...S.map((w,E)=>toMs(w)+toMs(_[E])))}function toMs(_){return _==="auto"?0:Number(_.slice(0,-1).replace(",","."))*1e3}function forceReflow(_){return(_?_.ownerDocument:document).body.offsetHeight}function patchClass(_,S,w){const E=_[vtcKey];E&&(S=(S?[S,...E]:[...E]).join(" ")),S==null?_.removeAttribute("class"):w?_.setAttribute("class",S):_.className=S}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={name:"show",beforeMount(_,{value:S},{transition:w}){_[vShowOriginalDisplay]=_.style.display==="none"?"":_.style.display,w&&S?w.beforeEnter(_):setDisplay(_,S)},mounted(_,{value:S},{transition:w}){w&&S&&w.enter(_)},updated(_,{value:S,oldValue:w},{transition:E}){!S!=!w&&(E?S?(E.beforeEnter(_),setDisplay(_,!0),E.enter(_)):E.leave(_,()=>{setDisplay(_,!1)}):setDisplay(_,S))},beforeUnmount(_,{value:S}){setDisplay(_,S)}};function setDisplay(_,S){_.style.display=S?_[vShowOriginalDisplay]:"none",_[vShowHidden]=!S}const CSS_VAR_TEXT=Symbol(""),displayRE=/(?:^|;)\s*display\s*:/;function patchStyle(_,S,w){const E=_.style,T=isString$1(w);let A=!1;if(w&&!T){if(S)if(isString$1(S))for(const k of S.split(";")){const x=k.slice(0,k.indexOf(":")).trim();w[x]==null&&setStyle(E,x,"")}else for(const k in S)w[k]==null&&setStyle(E,k,"");for(const k in w)k==="display"&&(A=!0),setStyle(E,k,w[k])}else if(T){if(S!==w){const k=E[CSS_VAR_TEXT];k&&(w+=";"+k),E.cssText=w,A=displayRE.test(w)}}else S&&_.removeAttribute("style");vShowOriginalDisplay in _&&(_[vShowOriginalDisplay]=A?E.display:"",_[vShowHidden]&&(E.display="none"))}const importantRE=/\s*!important$/;function setStyle(_,S,w){if(isArray$1(w))w.forEach(E=>setStyle(_,S,E));else if(w==null&&(w=""),S.startsWith("--"))_.setProperty(S,w);else{const E=autoPrefix(_,S);importantRE.test(w)?_.setProperty(hyphenate(E),w.replace(importantRE,""),"important"):_[E]=w}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(_,S){const w=prefixCache[S];if(w)return w;let E=camelize(S);if(E!=="filter"&&E in _)return prefixCache[S]=E;E=capitalize(E);for(let T=0;T<prefixes.length;T++){const A=prefixes[T]+E;if(A in _)return prefixCache[S]=A}return S}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(_,S,w,E,T,A=isSpecialBooleanAttr(S)){E&&S.startsWith("xlink:")?w==null?_.removeAttributeNS(xlinkNS,S.slice(6,S.length)):_.setAttributeNS(xlinkNS,S,w):w==null||A&&!includeBooleanAttr(w)?_.removeAttribute(S):_.setAttribute(S,A?"":isSymbol$1(w)?String(w):w)}function patchDOMProp(_,S,w,E,T){if(S==="innerHTML"||S==="textContent"){w!=null&&(_[S]=S==="innerHTML"?unsafeToTrustedHTML(w):w);return}const A=_.tagName;if(S==="value"&&A!=="PROGRESS"&&!A.includes("-")){const x=A==="OPTION"?_.getAttribute("value")||"":_.value,R=w==null?_.type==="checkbox"?"on":"":String(w);(x!==R||!("_value"in _))&&(_.value=R),w==null&&_.removeAttribute(S),_._value=w;return}let k=!1;if(w===""||w==null){const x=typeof _[S];x==="boolean"?w=includeBooleanAttr(w):w==null&&x==="string"?(w="",k=!0):x==="number"&&(w=0,k=!0)}try{_[S]=w}catch{}k&&_.removeAttribute(T||S)}function addEventListener(_,S,w,E){_.addEventListener(S,w,E)}function removeEventListener(_,S,w,E){_.removeEventListener(S,w,E)}const veiKey=Symbol("_vei");function patchEvent(_,S,w,E,T=null){const A=_[veiKey]||(_[veiKey]={}),k=A[S];if(E&&k)k.value=E;else{const[x,R]=parseName(S);if(E){const P=A[S]=createInvoker(E,T);addEventListener(_,x,P,R)}else k&&(removeEventListener(_,x,k,R),A[S]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(_){let S;if(optionsModifierRE.test(_)){S={};let E;for(;E=_.match(optionsModifierRE);)_=_.slice(0,_.length-E[0].length),S[E[0].toLowerCase()]=!0}return[_[2]===":"?_.slice(3):hyphenate(_.slice(2)),S]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(_,S){const w=E=>{if(!E._vts)E._vts=Date.now();else if(E._vts<=w.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(E,w.value),S,5,[E])};return w.value=_,w.attached=getNow(),w}function patchStopImmediatePropagation(_,S){if(isArray$1(S)){const w=_.stopImmediatePropagation;return _.stopImmediatePropagation=()=>{w.call(_),_._stopped=!0},S.map(E=>T=>!T._stopped&&E&&E(T))}else return S}const isNativeOn=_=>_.charCodeAt(0)===111&&_.charCodeAt(1)===110&&_.charCodeAt(2)>96&&_.charCodeAt(2)<123,patchProp=(_,S,w,E,T,A)=>{const k=T==="svg";S==="class"?patchClass(_,E,k):S==="style"?patchStyle(_,w,E):isOn(S)?isModelListener(S)||patchEvent(_,S,w,E,A):(S[0]==="."?(S=S.slice(1),!0):S[0]==="^"?(S=S.slice(1),!1):shouldSetAsProp(_,S,E,k))?(patchDOMProp(_,S,E),!_.tagName.includes("-")&&(S==="value"||S==="checked"||S==="selected")&&patchAttr(_,S,E,k,A,S!=="value")):_._isVueCE&&(/[A-Z]/.test(S)||!isString$1(E))?patchDOMProp(_,camelize(S),E,A,S):(S==="true-value"?_._trueValue=E:S==="false-value"&&(_._falseValue=E),patchAttr(_,S,E,k))};function shouldSetAsProp(_,S,w,E){if(E)return!!(S==="innerHTML"||S==="textContent"||S in _&&isNativeOn(S)&&isFunction(w));if(S==="spellcheck"||S==="draggable"||S==="translate"||S==="autocorrect"||S==="sandbox"&&_.tagName==="IFRAME"||S==="form"||S==="list"&&_.tagName==="INPUT"||S==="type"&&_.tagName==="TEXTAREA")return!1;if(S==="width"||S==="height"){const T=_.tagName;if(T==="IMG"||T==="VIDEO"||T==="CANVAS"||T==="SOURCE")return!1}return isNativeOn(S)&&isString$1(w)?!1:S in _}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),decorate=_=>(delete _.props.mode,_),TransitionGroupImpl=decorate({name:"TransitionGroup",props:extend({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(_,{slots:S}){const w=getCurrentInstance(),E=useTransitionState();let T,A;return onUpdated(()=>{if(!T.length)return;const k=_.moveClass||`${_.name||"v"}-move`;if(!hasCSSTransform(T[0].el,w.vnode.el,k)){T=[];return}T.forEach(callPendingCbs),T.forEach(recordPosition);const x=T.filter(applyTranslation);forceReflow(w.vnode.el),x.forEach(R=>{const P=R.el,M=P.style;addTransitionClass(P,k),M.transform=M.webkitTransform=M.transitionDuration="";const N=P[moveCbKey]=I=>{I&&I.target!==P||(!I||I.propertyName.endsWith("transform"))&&(P.removeEventListener("transitionend",N),P[moveCbKey]=null,removeTransitionClass(P,k))};P.addEventListener("transitionend",N)}),T=[]}),()=>{const k=toRaw(_),x=resolveTransitionProps(k);let R=k.tag||Fragment;if(T=[],A)for(let P=0;P<A.length;P++){const M=A[P];M.el&&M.el instanceof Element&&(T.push(M),setTransitionHooks(M,resolveTransitionHooks(M,x,E,w)),positionMap.set(M,{left:M.el.offsetLeft,top:M.el.offsetTop}))}A=S.default?getTransitionRawChildren(S.default()):[];for(let P=0;P<A.length;P++){const M=A[P];M.key!=null&&setTransitionHooks(M,resolveTransitionHooks(M,x,E,w))}return createVNode(R,null,A)}}}),TransitionGroup=TransitionGroupImpl;function callPendingCbs(_){const S=_.el;S[moveCbKey]&&S[moveCbKey](),S[enterCbKey]&&S[enterCbKey]()}function recordPosition(_){newPositionMap.set(_,{left:_.el.offsetLeft,top:_.el.offsetTop})}function applyTranslation(_){const S=positionMap.get(_),w=newPositionMap.get(_),E=S.left-w.left,T=S.top-w.top;if(E||T){const A=_.el.style;return A.transform=A.webkitTransform=`translate(${E}px,${T}px)`,A.transitionDuration="0s",_}}function hasCSSTransform(_,S,w){const E=_.cloneNode(),T=_[vtcKey];T&&T.forEach(x=>{x.split(/\s+/).forEach(R=>R&&E.classList.remove(R))}),w.split(/\s+/).forEach(x=>x&&E.classList.add(x)),E.style.display="none";const A=S.nodeType===1?S:S.parentNode;A.appendChild(E);const{hasTransform:k}=getTransitionInfo(E);return A.removeChild(E),k}const getModelAssigner=_=>{const S=_.props["onUpdate:modelValue"]||!1;return isArray$1(S)?w=>invokeArrayFns(S,w):S};function onCompositionStart(_){_.target.composing=!0}function onCompositionEnd(_){const S=_.target;S.composing&&(S.composing=!1,S.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign");function castValue(_,S,w){return S&&(_=_.trim()),w&&(_=looseToNumber(_)),_}const vModelText={created(_,{modifiers:{lazy:S,trim:w,number:E}},T){_[assignKey]=getModelAssigner(T);const A=E||T.props&&T.props.type==="number";addEventListener(_,S?"change":"input",k=>{k.target.composing||_[assignKey](castValue(_.value,w,A))}),(w||A)&&addEventListener(_,"change",()=>{_.value=castValue(_.value,w,A)}),S||(addEventListener(_,"compositionstart",onCompositionStart),addEventListener(_,"compositionend",onCompositionEnd),addEventListener(_,"change",onCompositionEnd))},mounted(_,{value:S}){_.value=S??""},beforeUpdate(_,{value:S,oldValue:w,modifiers:{lazy:E,trim:T,number:A}},k){if(_[assignKey]=getModelAssigner(k),_.composing)return;const x=(A||_.type==="number")&&!/^0\d/.test(_.value)?looseToNumber(_.value):_.value,R=S??"";x!==R&&(document.activeElement===_&&_.type!=="range"&&(E&&S===w||T&&_.value.trim()===R)||(_.value=R))}},vModelCheckbox={deep:!0,created(_,S,w){_[assignKey]=getModelAssigner(w),addEventListener(_,"change",()=>{const E=_._modelValue,T=getValue(_),A=_.checked,k=_[assignKey];if(isArray$1(E)){const x=looseIndexOf(E,T),R=x!==-1;if(A&&!R)k(E.concat(T));else if(!A&&R){const P=[...E];P.splice(x,1),k(P)}}else if(isSet(E)){const x=new Set(E);A?x.add(T):x.delete(T),k(x)}else k(getCheckboxValue(_,A))})},mounted:setChecked,beforeUpdate(_,S,w){_[assignKey]=getModelAssigner(w),setChecked(_,S,w)}};function setChecked(_,{value:S,oldValue:w},E){_._modelValue=S;let T;if(isArray$1(S))T=looseIndexOf(S,E.props.value)>-1;else if(isSet(S))T=S.has(E.props.value);else{if(S===w)return;T=looseEqual(S,getCheckboxValue(_,!0))}_.checked!==T&&(_.checked=T)}const vModelRadio={created(_,{value:S},w){_.checked=looseEqual(S,w.props.value),_[assignKey]=getModelAssigner(w),addEventListener(_,"change",()=>{_[assignKey](getValue(_))})},beforeUpdate(_,{value:S,oldValue:w},E){_[assignKey]=getModelAssigner(E),S!==w&&(_.checked=looseEqual(S,E.props.value))}},vModelSelect={deep:!0,created(_,{value:S,modifiers:{number:w}},E){const T=isSet(S);addEventListener(_,"change",()=>{const A=Array.prototype.filter.call(_.options,k=>k.selected).map(k=>w?looseToNumber(getValue(k)):getValue(k));_[assignKey](_.multiple?T?new Set(A):A:A[0]),_._assigning=!0,nextTick(()=>{_._assigning=!1})}),_[assignKey]=getModelAssigner(E)},mounted(_,{value:S}){setSelected(_,S)},beforeUpdate(_,S,w){_[assignKey]=getModelAssigner(w)},updated(_,{value:S}){_._assigning||setSelected(_,S)}};function setSelected(_,S){const w=_.multiple,E=isArray$1(S);if(!(w&&!E&&!isSet(S))){for(let T=0,A=_.options.length;T<A;T++){const k=_.options[T],x=getValue(k);if(w)if(E){const R=typeof x;R==="string"||R==="number"?k.selected=S.some(P=>String(P)===String(x)):k.selected=looseIndexOf(S,x)>-1}else k.selected=S.has(x);else if(looseEqual(getValue(k),S)){_.selectedIndex!==T&&(_.selectedIndex=T);return}}!w&&_.selectedIndex!==-1&&(_.selectedIndex=-1)}}function getValue(_){return"_value"in _?_._value:_.value}function getCheckboxValue(_,S){const w=S?"_trueValue":"_falseValue";return w in _?_[w]:S}const vModelDynamic={created(_,S,w){callModelHook(_,S,w,null,"created")},mounted(_,S,w){callModelHook(_,S,w,null,"mounted")},beforeUpdate(_,S,w,E){callModelHook(_,S,w,E,"beforeUpdate")},updated(_,S,w,E){callModelHook(_,S,w,E,"updated")}};function resolveDynamicModel(_,S){switch(_){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(S){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(_,S,w,E,T){const k=resolveDynamicModel(_.tagName,w.props&&w.props.type)[T];k&&k(_,S,w,E)}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:_=>_.stopPropagation(),prevent:_=>_.preventDefault(),self:_=>_.target!==_.currentTarget,ctrl:_=>!_.ctrlKey,shift:_=>!_.shiftKey,alt:_=>!_.altKey,meta:_=>!_.metaKey,left:_=>"button"in _&&_.button!==0,middle:_=>"button"in _&&_.button!==1,right:_=>"button"in _&&_.button!==2,exact:(_,S)=>systemModifiers.some(w=>_[`${w}Key`]&&!S.includes(w))},withModifiers=(_,S)=>{const w=_._withMods||(_._withMods={}),E=S.join(".");return w[E]||(w[E]=((T,...A)=>{for(let k=0;k<S.length;k++){const x=modifierGuards[S[k]];if(x&&x(T,S))return}return _(T,...A)}))},rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=((..._)=>{const S=ensureRenderer().createApp(..._),{mount:w}=S;return S.mount=E=>{const T=normalizeContainer(E);if(!T)return;const A=S._component;!isFunction(A)&&!A.render&&!A.template&&(A.template=T.innerHTML),T.nodeType===1&&(T.textContent="");const k=w(T,!1,resolveRootNamespace(T));return T instanceof Element&&(T.removeAttribute("v-cloak"),T.setAttribute("data-v-app","")),k},S});function resolveRootNamespace(_){if(_ instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&_ instanceof MathMLElement)return"mathml"}function normalizeContainer(_){return isString$1(_)?document.querySelector(_):_}let activePinia;const setActivePinia=_=>activePinia=_,piniaSymbol=Symbol();function isPlainObject$1(_){return _&&typeof _=="object"&&Object.prototype.toString.call(_)==="[object Object]"&&typeof _.toJSON!="function"}var MutationType;(function(_){_.direct="direct",_.patchObject="patch object",_.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const _=effectScope(!0),S=_.run(()=>ref$1({}));let w=[],E=[];const T=markRaw({install(A){setActivePinia(T),T._a=A,A.provide(piniaSymbol,T),A.config.globalProperties.$pinia=T,E.forEach(k=>w.push(k)),E=[]},use(A){return this._a?w.push(A):E.push(A),this},_p:w,_a:null,_e:_,_s:new Map,state:S});return T}const noop$2=()=>{};function addSubscription(_,S,w,E=noop$2){_.push(S);const T=()=>{const A=_.indexOf(S);A>-1&&(_.splice(A,1),E())};return!w&&getCurrentScope()&&onScopeDispose(T),T}function triggerSubscriptions(_,...S){_.slice().forEach(w=>{w(...S)})}const fallbackRunWithContext=_=>_(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(_,S){_ instanceof Map&&S instanceof Map?S.forEach((w,E)=>_.set(E,w)):_ instanceof Set&&S instanceof Set&&S.forEach(_.add,_);for(const w in S){if(!S.hasOwnProperty(w))continue;const E=S[w],T=_[w];isPlainObject$1(T)&&isPlainObject$1(E)&&_.hasOwnProperty(w)&&!isRef(E)&&!isReactive(E)?_[w]=mergeReactiveObjects(T,E):_[w]=E}return _}const skipHydrateSymbol=Symbol();function shouldHydrate(_){return!isPlainObject$1(_)||!_.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(_){return!!(isRef(_)&&_.effect)}function createOptionsStore(_,S,w,E){const{state:T,actions:A,getters:k}=S,x=w.state.value[_];let R;function P(){x||(w.state.value[_]=T?T():{});const M=toRefs(w.state.value[_]);return assign$1(M,A,Object.keys(k||{}).reduce((N,I)=>(N[I]=markRaw(computed(()=>{setActivePinia(w);const V=w._s.get(_);return k[I].call(V,V)})),N),{}))}return R=createSetupStore(_,P,S,w,E,!0),R}function createSetupStore(_,S,w={},E,T,A){let k;const x=assign$1({actions:{}},w),R={deep:!0};let P,M,N=[],I=[],V;const B=E.state.value[_];!A&&!B&&(E.state.value[_]={}),ref$1({});let D;function z(W){let X;P=M=!1,typeof W=="function"?(W(E.state.value[_]),X={type:MutationType.patchFunction,storeId:_,events:V}):(mergeReactiveObjects(E.state.value[_],W),X={type:MutationType.patchObject,payload:W,storeId:_,events:V});const te=D=Symbol();nextTick().then(()=>{D===te&&(P=!0)}),M=!0,triggerSubscriptions(N,X,E.state.value[_])}const O=A?function(){const{state:X}=w,te=X?X():{};this.$patch(ee=>{assign$1(ee,te)})}:noop$2;function L(){k.stop(),N=[],I=[],E._s.delete(_)}const F=(W,X="")=>{if(ACTION_MARKER in W)return W[ACTION_NAME]=X,W;const te=function(){setActivePinia(E);const ee=Array.from(arguments),G=[],de=[];function le(ie){G.push(ie)}function ae(ie){de.push(ie)}triggerSubscriptions(I,{args:ee,name:te[ACTION_NAME],store:H,after:le,onError:ae});let Q;try{Q=W.apply(this&&this.$id===_?this:H,ee)}catch(ie){throw triggerSubscriptions(de,ie),ie}return Q instanceof Promise?Q.then(ie=>(triggerSubscriptions(G,ie),ie)).catch(ie=>(triggerSubscriptions(de,ie),Promise.reject(ie))):(triggerSubscriptions(G,Q),Q)};return te[ACTION_MARKER]=!0,te[ACTION_NAME]=X,te},$={_p:E,$id:_,$onAction:addSubscription.bind(null,I),$patch:z,$reset:O,$subscribe(W,X={}){const te=addSubscription(N,W,X.detached,()=>ee()),ee=k.run(()=>watch(()=>E.state.value[_],G=>{(X.flush==="sync"?M:P)&&W({storeId:_,type:MutationType.direct,events:V},G)},assign$1({},R,X)));return te},$dispose:L},H=reactive($);E._s.set(_,H);const q=(E._a&&E._a.runWithContext||fallbackRunWithContext)(()=>E._e.run(()=>(k=effectScope()).run(()=>S({action:F}))));for(const W in q){const X=q[W];if(isRef(X)&&!isComputed(X)||isReactive(X))A||(B&&shouldHydrate(X)&&(isRef(X)?X.value=B[W]:mergeReactiveObjects(X,B[W])),E.state.value[_][W]=X);else if(typeof X=="function"){const te=F(X,W);q[W]=te,x.actions[W]=X}}return assign$1(H,q),assign$1(toRaw(H),q),Object.defineProperty(H,"$state",{get:()=>E.state.value[_],set:W=>{z(X=>{assign$1(X,W)})}}),E._p.forEach(W=>{assign$1(H,k.run(()=>W({store:H,app:E._a,pinia:E,options:x})))}),B&&A&&w.hydrate&&w.hydrate(H.$state,B),P=!0,M=!0,H}/*! #__NO_SIDE_EFFECTS__ */function defineStore(_,S,w){let E,T;const A=typeof S=="function";typeof _=="string"?(E=_,T=A?w:S):(T=_,E=_.id);function k(x,R){const P=hasInjectionContext();return x=x||(P?inject(piniaSymbol,null):null),x&&setActivePinia(x),x=activePinia,x._s.has(E)||(A?createSetupStore(E,S,T,x):createOptionsStore(E,T,x)),x._s.get(E)}return k.$id=E,k}const parents$1=new Set,coords=new WeakMap,siblings=new WeakMap,animations=new WeakMap,intersections=new WeakMap,mutationObservers=new WeakMap,intervals=new WeakMap,options=new WeakMap,debounces=new WeakMap,enabled=new WeakSet;let root$1,scrollX=0,scrollY=0;const TGT="__aa_tgt",DEL="__aa_del",NEW="__aa_new",handleMutations=_=>{const S=getElements(_);S&&S.forEach(w=>animate$1(w))},handleResizes=_=>{_.forEach(S=>{S.target===root$1&&updateAllPos(),coords.has(S.target)&&updatePos(S.target)})};function observePosition(_){const S=intersections.get(_);S==null||S.disconnect();let w=coords.get(_),E=0;const T=5;w||(w=getCoords(_),coords.set(_,w));const{offsetWidth:A,offsetHeight:k}=root$1,R=[w.top-T,A-(w.left+T+w.width),k-(w.top+T+w.height),w.left-T].map(M=>`${-1*Math.floor(M)}px`).join(" "),P=new IntersectionObserver(()=>{++E>1&&updatePos(_)},{root:root$1,threshold:1,rootMargin:R});P.observe(_),intersections.set(_,P)}function updatePos(_){clearTimeout(debounces.get(_));const S=getOptions(_),w=isPlugin(S)?500:S.duration;debounces.set(_,setTimeout(async()=>{const E=animations.get(_);try{await(E==null?void 0:E.finished),coords.set(_,getCoords(_)),observePosition(_)}catch{}},w))}function updateAllPos(){clearTimeout(debounces.get(root$1)),debounces.set(root$1,setTimeout(()=>{parents$1.forEach(_=>forEach$1(_,S=>lowPriority(()=>updatePos(S))))},100))}function poll(_){setTimeout(()=>{intervals.set(_,setInterval(()=>lowPriority(updatePos.bind(null,_)),2e3))},Math.round(2e3*Math.random()))}function lowPriority(_){typeof requestIdleCallback=="function"?requestIdleCallback(()=>_()):requestAnimationFrame(()=>_())}let resize;const supportedBrowser=typeof window<"u"&&"ResizeObserver"in window;supportedBrowser&&(root$1=document.documentElement,new MutationObserver(handleMutations),resize=new ResizeObserver(handleResizes),window.addEventListener("scroll",()=>{scrollY=window.scrollY,scrollX=window.scrollX}),resize.observe(root$1));function getElements(_){return _.reduce((E,T)=>[...E,...Array.from(T.addedNodes),...Array.from(T.removedNodes)],[]).every(E=>E.nodeName==="#comment")?!1:_.reduce((E,T)=>{if(E===!1)return!1;if(T.target instanceof Element){if(target(T.target),!E.has(T.target)){E.add(T.target);for(let A=0;A<T.target.children.length;A++){const k=T.target.children.item(A);if(k){if(DEL in k)return!1;target(T.target,k),E.add(k)}}}if(T.removedNodes.length)for(let A=0;A<T.removedNodes.length;A++){const k=T.removedNodes[A];if(DEL in k)return!1;k instanceof Element&&(E.add(k),target(T.target,k),siblings.set(k,[T.previousSibling,T.nextSibling]))}}return E},new Set)}function target(_,S){!S&&!(TGT in _)?Object.defineProperty(_,TGT,{value:_}):S&&!(TGT in S)&&Object.defineProperty(S,TGT,{value:_})}function animate$1(_){var S;const w=_.isConnected,E=coords.has(_);w&&siblings.has(_)&&siblings.delete(_),animations.has(_)&&((S=animations.get(_))===null||S===void 0||S.cancel()),NEW in _?add(_):E&&w?remain(_):E&&!w?remove(_):add(_)}function raw(_){return Number(_.replace(/[^0-9.\-]/g,""))}function getScrollOffset(_){let S=_.parentElement;for(;S;){if(S.scrollLeft||S.scrollTop)return{x:S.scrollLeft,y:S.scrollTop};S=S.parentElement}return{x:0,y:0}}function getCoords(_){const S=_.getBoundingClientRect(),{x:w,y:E}=getScrollOffset(_);return{top:S.top+E,left:S.left+w,width:S.width,height:S.height}}function getTransitionSizes(_,S,w){let E=S.width,T=S.height,A=w.width,k=w.height;const x=getComputedStyle(_);if(x.getPropertyValue("box-sizing")==="content-box"){const P=raw(x.paddingTop)+raw(x.paddingBottom)+raw(x.borderTopWidth)+raw(x.borderBottomWidth),M=raw(x.paddingLeft)+raw(x.paddingRight)+raw(x.borderRightWidth)+raw(x.borderLeftWidth);E-=M,A-=M,T-=P,k-=P}return[E,A,T,k].map(Math.round)}function getOptions(_){return TGT in _&&options.has(_[TGT])?options.get(_[TGT]):{duration:250,easing:"ease-in-out"}}function getTarget(_){if(TGT in _)return _[TGT]}function isEnabled(_){const S=getTarget(_);return S?enabled.has(S):!1}function forEach$1(_,...S){S.forEach(w=>w(_,options.has(_)));for(let w=0;w<_.children.length;w++){const E=_.children.item(w);E&&S.forEach(T=>T(E,options.has(E)))}}function getPluginTuple(_){return Array.isArray(_)?_:[_]}function isPlugin(_){return typeof _=="function"}function remain(_){const S=coords.get(_),w=getCoords(_);if(!isEnabled(_))return coords.set(_,w);let E;if(!S)return;const T=getOptions(_);if(typeof T!="function"){const A=S.left-w.left,k=S.top-w.top,[x,R,P,M]=getTransitionSizes(_,S,w),N={transform:`translate(${A}px, ${k}px)`},I={transform:"translate(0, 0)"};x!==R&&(N.width=`${x}px`,I.width=`${R}px`),P!==M&&(N.height=`${P}px`,I.height=`${M}px`),E=_.animate([N,I],{duration:T.duration,easing:T.easing})}else{const[A]=getPluginTuple(T(_,"remain",S,w));E=new Animation(A),E.play()}animations.set(_,E),coords.set(_,w),E.addEventListener("finish",()=>updatePos(_),{once:!0})}function add(_){NEW in _&&delete _[NEW];const S=getCoords(_);coords.set(_,S);const w=getOptions(_);if(!isEnabled(_))return;let E;if(typeof w!="function")E=_.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:w.duration*1.5,easing:"ease-in"});else{const[T]=getPluginTuple(w(_,"add",S));E=new Animation(T),E.play()}animations.set(_,E),E.addEventListener("finish",()=>updatePos(_),{once:!0})}function cleanUp(_,S){var w;_.remove(),coords.delete(_),siblings.delete(_),animations.delete(_),(w=intersections.get(_))===null||w===void 0||w.disconnect(),setTimeout(()=>{if(DEL in _&&delete _[DEL],Object.defineProperty(_,NEW,{value:!0,configurable:!0}),S&&_ instanceof HTMLElement)for(const E in S)_.style[E]=""},0)}function remove(_){var S;if(!siblings.has(_)||!coords.has(_))return;const[w,E]=siblings.get(_);Object.defineProperty(_,DEL,{value:!0,configurable:!0});const T=window.scrollX,A=window.scrollY;if(E&&E.parentNode&&E.parentNode instanceof Element?E.parentNode.insertBefore(_,E):w&&w.parentNode?w.parentNode.appendChild(_):(S=getTarget(_))===null||S===void 0||S.appendChild(_),!isEnabled(_))return cleanUp(_);const[k,x,R,P]=deletePosition(_),M=getOptions(_),N=coords.get(_);(T!==scrollX||A!==scrollY)&&adjustScroll(_,T,A,M);let I,V={position:"absolute",top:`${k}px`,left:`${x}px`,width:`${R}px`,height:`${P}px`,margin:"0",pointerEvents:"none",transformOrigin:"center",zIndex:"100"};if(!isPlugin(M))Object.assign(_.style,V),I=_.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:M.duration,easing:"ease-out"});else{const[B,D]=getPluginTuple(M(_,"remove",N));(D==null?void 0:D.styleReset)!==!1&&(V=(D==null?void 0:D.styleReset)||V,Object.assign(_.style,V)),I=new Animation(B),I.play()}animations.set(_,I),I.addEventListener("finish",()=>cleanUp(_,V),{once:!0})}function adjustScroll(_,S,w,E){const T=scrollX-S,A=scrollY-w,k=document.documentElement.style.scrollBehavior;if(getComputedStyle(root$1).scrollBehavior==="smooth"&&(document.documentElement.style.scrollBehavior="auto"),window.scrollTo(window.scrollX+T,window.scrollY+A),!_.parentElement)return;const R=_.parentElement;let P=R.clientHeight,M=R.clientWidth;const N=performance.now();function I(){requestAnimationFrame(()=>{if(!isPlugin(E)){const V=P-R.clientHeight,B=M-R.clientWidth;N+E.duration>performance.now()?(window.scrollTo({left:window.scrollX-B,top:window.scrollY-V}),P=R.clientHeight,M=R.clientWidth,I()):document.documentElement.style.scrollBehavior=k}})}I()}function deletePosition(_){const S=coords.get(_),[w,,E]=getTransitionSizes(_,S,getCoords(_));let T=_.parentElement;for(;T&&(getComputedStyle(T).position==="static"||T instanceof HTMLBodyElement);)T=T.parentElement;T||(T=document.body);const A=getComputedStyle(T),k=coords.get(T)||getCoords(T),x=Math.round(S.top-k.top)-raw(A.borderTopWidth),R=Math.round(S.left-k.left)-raw(A.borderLeftWidth);return[x,R,w,E]}function autoAnimate(_,S={}){if(supportedBrowser&&resize&&!(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&!isPlugin(S)&&!S.disrespectUserMotionPreference)){enabled.add(_),getComputedStyle(_).position==="static"&&Object.assign(_.style,{position:"relative"}),forEach$1(_,updatePos,poll,k=>resize==null?void 0:resize.observe(k)),isPlugin(S)?options.set(_,S):options.set(_,{duration:250,easing:"ease-in-out",...S});const A=new MutationObserver(handleMutations);A.observe(_,{childList:!0}),mutationObservers.set(_,A),parents$1.add(_)}return Object.freeze({parent:_,enable:()=>{enabled.add(_)},disable:()=>{enabled.delete(_)},isEnabled:()=>enabled.has(_),destroy:()=>{enabled.delete(_),parents$1.delete(_),options.delete(_);const E=mutationObservers.get(_);E==null||E.disconnect(),mutationObservers.delete(_),forEach$1(_,T=>{resize==null||resize.unobserve(T);const A=animations.get(T);try{A==null||A.cancel()}catch{}animations.delete(T);const k=intersections.get(T);k==null||k.disconnect(),intersections.delete(T);const x=intervals.get(T);x&&clearInterval(x),intervals.delete(T);const R=debounces.get(T);R&&clearTimeout(R),debounces.delete(T),coords.delete(T),siblings.delete(T)})}})}const vAutoAnimate$1={mounted:(_,S)=>{const w=autoAnimate(_,S.value||{});Object.defineProperty(_,"__aa_ctl",{value:w,configurable:!0})},unmounted:_=>{var S;const w=_.__aa_ctl;(S=w==null?void 0:w.destroy)===null||S===void 0||S.call(w);try{delete _.__aa_ctl}catch{}},getSSRProps:()=>({})},vAutoAnimate=vAutoAnimate$1,autoAnimatePlugin={install(_){_.directive("auto-animate",vAutoAnimate)}};function isPlainObject(_){if(_===null||typeof _!="object")return!1;const S=Object.getPrototypeOf(_);return S!==null&&S!==Object.prototype&&Object.getPrototypeOf(S)!==null||Symbol.iterator in _?!1:Symbol.toStringTag in _?Object.prototype.toString.call(_)==="[object Module]":!0}function _defu(_,S,w=".",E){if(!isPlainObject(S))return _defu(_,{},w,E);const T=Object.assign({},S);for(const A in _){if(A==="__proto__"||A==="constructor")continue;const k=_[A];k!=null&&(E&&E(T,A,k,w)||(Array.isArray(k)&&Array.isArray(T[A])?T[A]=[...k,...T[A]]:isPlainObject(k)&&isPlainObject(T[A])?T[A]=_defu(k,T[A],(w?`${w}.`:"")+A.toString(),E):T[A]=k))}return T}function createDefu(_){return(...S)=>S.reduce((w,E)=>_defu(w,E,"",_),{})}const defu=createDefu();function tryOnScopeDispose(_){return getCurrentScope()?(onScopeDispose(_),!0):!1}const isClient=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const notNullish=_=>_!=null,toString$2=Object.prototype.toString,isObject$2=_=>toString$2.call(_)==="[object Object]",noop$1=()=>{};function toArray(_){return Array.isArray(_)?_:[_]}function getLifeCycleTarget(_){return getCurrentInstance()}function tryOnUnmounted(_,S){getLifeCycleTarget()&&onUnmounted(_,S)}function watchImmediate(_,S,w){return watch(_,S,{...w,immediate:!0})}const defaultWindow=isClient?window:void 0;function unrefElement(_){var S;const w=toValue(_);return(S=w==null?void 0:w.$el)!=null?S:w}function useEventListener(..._){const S=[],w=()=>{S.forEach(x=>x()),S.length=0},E=(x,R,P,M)=>(x.addEventListener(R,P,M),()=>x.removeEventListener(R,P,M)),T=computed(()=>{const x=toArray(toValue(_[0])).filter(R=>R!=null);return x.every(R=>typeof R!="string")?x:void 0}),A=watchImmediate(()=>{var x,R;return[(R=(x=T.value)==null?void 0:x.map(P=>unrefElement(P)))!=null?R:[defaultWindow].filter(P=>P!=null),toArray(toValue(T.value?_[1]:_[0])),toArray(unref(T.value?_[2]:_[1])),toValue(T.value?_[3]:_[2])]},([x,R,P,M])=>{if(w(),!(x!=null&&x.length)||!(R!=null&&R.length)||!(P!=null&&P.length))return;const N=isObject$2(M)?{...M}:M;S.push(...x.flatMap(I=>R.flatMap(V=>P.map(B=>E(I,V,B,N)))))},{flush:"post"}),k=()=>{A(),w()};return tryOnScopeDispose(w),k}function useMounted(){const _=shallowRef(!1),S=getCurrentInstance();return S&&onMounted(()=>{_.value=!0},S),_}function useSupported(_){const S=useMounted();return computed(()=>(S.value,!!_()))}function useIntersectionObserver(_,S,w={}){const{root:E,rootMargin:T="0px",threshold:A=0,window:k=defaultWindow,immediate:x=!0}=w,R=useSupported(()=>k&&"IntersectionObserver"in k),P=computed(()=>{const B=toValue(_);return toArray(B).map(unrefElement).filter(notNullish)});let M=noop$1;const N=shallowRef(x),I=R.value?watch(()=>[P.value,unrefElement(E),N.value],([B,D])=>{if(M(),!N.value||!B.length)return;const z=new IntersectionObserver(S,{root:unrefElement(D),rootMargin:T,threshold:A});B.forEach(O=>O&&z.observe(O)),M=()=>{z.disconnect(),M=noop$1}},{immediate:x,flush:"post"}):noop$1,V=()=>{M(),I(),N.value=!1};return tryOnScopeDispose(V),{isSupported:R,isActive:N,pause(){M(),N.value=!1},resume(){N.value=!0},stop:V}}const defaultTimestep=1/60*1e3,getCurrentTime=typeof performance<"u"?()=>performance.now():()=>Date.now(),onNextFrame=typeof window<"u"?_=>window.requestAnimationFrame(_):_=>setTimeout(()=>_(getCurrentTime()),defaultTimestep);function createRenderStep(_){let S=[],w=[],E=0,T=!1,A=!1;const k=new WeakSet,x={schedule:(R,P=!1,M=!1)=>{const N=M&&T,I=N?S:w;return P&&k.add(R),I.indexOf(R)===-1&&(I.push(R),N&&T&&(E=S.length)),R},cancel:R=>{const P=w.indexOf(R);P!==-1&&w.splice(P,1),k.delete(R)},process:R=>{if(T){A=!0;return}if(T=!0,[S,w]=[w,S],w.length=0,E=S.length,E)for(let P=0;P<E;P++){const M=S[P];M(R),k.has(M)&&(x.schedule(M),_())}T=!1,A&&(A=!1,x.process(R))}};return x}const maxElapsed=40;let useDefaultElapsed=!0,runNextFrame=!1,isProcessing=!1;const frame={delta:0,timestamp:0},stepsOrder=["read","update","preRender","render","postRender"],steps=stepsOrder.reduce((_,S)=>(_[S]=createRenderStep(()=>runNextFrame=!0),_),{}),sync=stepsOrder.reduce((_,S)=>{const w=steps[S];return _[S]=(E,T=!1,A=!1)=>(runNextFrame||startLoop(),w.schedule(E,T,A)),_},{}),cancelSync=stepsOrder.reduce((_,S)=>(_[S]=steps[S].cancel,_),{});stepsOrder.reduce((_,S)=>(_[S]=()=>steps[S].process(frame),_),{});const processStep=_=>steps[_].process(frame),processFrame=_=>{runNextFrame=!1,frame.delta=useDefaultElapsed?defaultTimestep:Math.max(Math.min(_-frame.timestamp,maxElapsed),1),frame.timestamp=_,isProcessing=!0,stepsOrder.forEach(processStep),isProcessing=!1,runNextFrame&&(useDefaultElapsed=!1,onNextFrame(processFrame))},startLoop=()=>{runNextFrame=!0,useDefaultElapsed=!0,isProcessing||onNextFrame(processFrame)},getFrameData=()=>frame;function __rest(_,S){var w={};for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&S.indexOf(E)<0&&(w[E]=_[E]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,E=Object.getOwnPropertySymbols(_);T<E.length;T++)S.indexOf(E[T])<0&&Object.prototype.propertyIsEnumerable.call(_,E[T])&&(w[E[T]]=_[E[T]]);return w}var invariant=function(){};const clamp$1=(_,S,w)=>Math.min(Math.max(w,_),S),safeMin=.001,minDuration=.01,maxDuration=10,minDamping=.05,maxDamping=1;function findSpring({duration:_=800,bounce:S=.25,velocity:w=0,mass:E=1}){let T,A,k=1-S;k=clamp$1(minDamping,maxDamping,k),_=clamp$1(minDuration,maxDuration,_/1e3),k<1?(T=P=>{const M=P*k,N=M*_,I=M-w,V=calcAngularFreq(P,k),B=Math.exp(-N);return safeMin-I/V*B},A=P=>{const N=P*k*_,I=N*w+w,V=Math.pow(k,2)*Math.pow(P,2)*_,B=Math.exp(-N),D=calcAngularFreq(Math.pow(P,2),k);return(-T(P)+safeMin>0?-1:1)*((I-V)*B)/D}):(T=P=>{const M=Math.exp(-P*_),N=(P-w)*_+1;return-safeMin+M*N},A=P=>{const M=Math.exp(-P*_),N=(w-P)*(_*_);return M*N});const x=5/_,R=approximateRoot(T,A,x);if(_=_*1e3,isNaN(R))return{stiffness:100,damping:10,duration:_};{const P=Math.pow(R,2)*E;return{stiffness:P,damping:k*2*Math.sqrt(E*P),duration:_}}}const rootIterations=12;function approximateRoot(_,S,w){let E=w;for(let T=1;T<rootIterations;T++)E=E-_(E)/S(E);return E}function calcAngularFreq(_,S){return _*Math.sqrt(1-S*S)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(_,S){return S.some(w=>_[w]!==void 0)}function getSpringOptions(_){let S=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},_);if(!isSpringType(_,physicsKeys)&&isSpringType(_,durationKeys)){const w=findSpring(_);S=Object.assign(Object.assign(Object.assign({},S),w),{velocity:0,mass:1}),S.isResolvedFromDuration=!0}return S}function spring(_){var{from:S=0,to:w=1,restSpeed:E=2,restDelta:T}=_,A=__rest(_,["from","to","restSpeed","restDelta"]);const k={done:!1,value:S};let{stiffness:x,damping:R,mass:P,velocity:M,duration:N,isResolvedFromDuration:I}=getSpringOptions(A),V=zero$2,B=zero$2;function D(){const z=M?-(M/1e3):0,O=w-S,L=R/(2*Math.sqrt(x*P)),F=Math.sqrt(x/P)/1e3;if(T===void 0&&(T=Math.min(Math.abs(w-S)/100,.4)),L<1){const $=calcAngularFreq(F,L);V=H=>{const j=Math.exp(-L*F*H);return w-j*((z+L*F*O)/$*Math.sin($*H)+O*Math.cos($*H))},B=H=>{const j=Math.exp(-L*F*H);return L*F*j*(Math.sin($*H)*(z+L*F*O)/$+O*Math.cos($*H))-j*(Math.cos($*H)*(z+L*F*O)-$*O*Math.sin($*H))}}else if(L===1)V=$=>w-Math.exp(-F*$)*(O+(z+F*O)*$);else{const $=F*Math.sqrt(L*L-1);V=H=>{const j=Math.exp(-L*F*H),q=Math.min($*H,300);return w-j*((z+L*F*O)*Math.sinh(q)+$*O*Math.cosh(q))/$}}}return D(),{next:z=>{const O=V(z);if(I)k.done=z>=N;else{const L=B(z)*1e3,F=Math.abs(L)<=E,$=Math.abs(w-O)<=T;k.done=F&&$}return k.value=k.done?w:O,k},flipTarget:()=>{M=-M,[S,w]=[w,S],D()}}}spring.needsInterpolation=(_,S)=>typeof _=="string"||typeof S=="string";const zero$2=_=>0,progress=(_,S,w)=>{const E=S-_;return E===0?1:(w-_)/E},mix=(_,S,w)=>-w*_+w*S+_,clamp=(_,S)=>w=>Math.max(Math.min(w,S),_),sanitize=_=>_%1?Number(_.toFixed(5)):_,floatRegex=/(-)?([\d]*\.?[\d])+/g,colorRegex=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,singleColorRegex=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function isString(_){return typeof _=="string"}const number={test:_=>typeof _=="number",parse:parseFloat,transform:_=>_},alpha=Object.assign(Object.assign({},number),{transform:clamp(0,1)}),scale=Object.assign(Object.assign({},number),{default:1}),createUnitType=_=>({test:S=>isString(S)&&S.endsWith(_)&&S.split(" ").length===1,parse:parseFloat,transform:S=>`${S}${_}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),progressPercentage=Object.assign(Object.assign({},percent),{parse:_=>percent.parse(_)/100,transform:_=>percent.transform(_*100)}),isColorString=(_,S)=>w=>!!(isString(w)&&singleColorRegex.test(w)&&w.startsWith(_)||S&&Object.prototype.hasOwnProperty.call(w,S)),splitColor=(_,S,w)=>E=>{if(!isString(E))return E;const[T,A,k,x]=E.match(floatRegex);return{[_]:parseFloat(T),[S]:parseFloat(A),[w]:parseFloat(k),alpha:x!==void 0?parseFloat(x):1}},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:_,saturation:S,lightness:w,alpha:E=1})=>"hsla("+Math.round(_)+", "+percent.transform(sanitize(S))+", "+percent.transform(sanitize(w))+", "+sanitize(alpha.transform(E))+")"},clampRgbUnit=clamp(0,255),rgbUnit=Object.assign(Object.assign({},number),{transform:_=>Math.round(clampRgbUnit(_))}),rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:_,green:S,blue:w,alpha:E=1})=>"rgba("+rgbUnit.transform(_)+", "+rgbUnit.transform(S)+", "+rgbUnit.transform(w)+", "+sanitize(alpha.transform(E))+")"};function parseHex(_){let S="",w="",E="",T="";return _.length>5?(S=_.substr(1,2),w=_.substr(3,2),E=_.substr(5,2),T=_.substr(7,2)):(S=_.substr(1,1),w=_.substr(2,1),E=_.substr(3,1),T=_.substr(4,1),S+=S,w+=w,E+=E,T+=T),{red:parseInt(S,16),green:parseInt(w,16),blue:parseInt(E,16),alpha:T?parseInt(T,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},color={test:_=>rgba.test(_)||hex.test(_)||hsla.test(_),parse:_=>rgba.test(_)?rgba.parse(_):hsla.test(_)?hsla.parse(_):hex.parse(_),transform:_=>isString(_)?_:_.hasOwnProperty("red")?rgba.transform(_):hsla.transform(_)},colorToken="${c}",numberToken="${n}";function test(_){var S,w,E,T;return isNaN(_)&&isString(_)&&((w=(S=_.match(floatRegex))===null||S===void 0?void 0:S.length)!==null&&w!==void 0?w:0)+((T=(E=_.match(colorRegex))===null||E===void 0?void 0:E.length)!==null&&T!==void 0?T:0)>0}function analyse$1(_){typeof _=="number"&&(_=`${_}`);const S=[];let w=0;const E=_.match(colorRegex);E&&(w=E.length,_=_.replace(colorRegex,colorToken),S.push(...E.map(color.parse)));const T=_.match(floatRegex);return T&&(_=_.replace(floatRegex,numberToken),S.push(...T.map(number.parse))),{values:S,numColors:w,tokenised:_}}function parse(_){return analyse$1(_).values}function createTransformer(_){const{values:S,numColors:w,tokenised:E}=analyse$1(_),T=S.length;return A=>{let k=E;for(let x=0;x<T;x++)k=k.replace(x<w?colorToken:numberToken,x<w?color.transform(A[x]):sanitize(A[x]));return k}}const convertNumbersToZero=_=>typeof _=="number"?0:_;function getAnimatableNone$1(_){const S=parse(_);return createTransformer(_)(S.map(convertNumbersToZero))}const complex={test,parse,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(_){let[S,w]=_.slice(0,-1).split("(");if(S==="drop-shadow")return _;const[E]=w.match(floatRegex)||[];if(!E)return _;const T=w.replace(E,"");let A=maxDefaults.has(S)?1:0;return E!==w&&(A*=100),S+"("+A+T+")"}const functionRegex=/([a-z-]*)\(.*?\)/g,filter=Object.assign(Object.assign({},complex),{getAnimatableNone:_=>{const S=_.match(functionRegex);return S?S.map(applyDefaultFilter).join(" "):_}});function hueToRgb(_,S,w){return w<0&&(w+=1),w>1&&(w-=1),w<1/6?_+(S-_)*6*w:w<1/2?S:w<2/3?_+(S-_)*(2/3-w)*6:_}function hslaToRgba({hue:_,saturation:S,lightness:w,alpha:E}){_/=360,S/=100,w/=100;let T=0,A=0,k=0;if(!S)T=A=k=w;else{const x=w<.5?w*(1+S):w+S-w*S,R=2*w-x;T=hueToRgb(R,x,_+1/3),A=hueToRgb(R,x,_),k=hueToRgb(R,x,_-1/3)}return{red:Math.round(T*255),green:Math.round(A*255),blue:Math.round(k*255),alpha:E}}const mixLinearColor=(_,S,w)=>{const E=_*_,T=S*S;return Math.sqrt(Math.max(0,w*(T-E)+E))},colorTypes=[hex,rgba,hsla],getColorType=_=>colorTypes.find(S=>S.test(_)),mixColor=(_,S)=>{let w=getColorType(_),E=getColorType(S),T=w.parse(_),A=E.parse(S);w===hsla&&(T=hslaToRgba(T),w=rgba),E===hsla&&(A=hslaToRgba(A),E=rgba);const k=Object.assign({},T);return x=>{for(const R in k)R!=="alpha"&&(k[R]=mixLinearColor(T[R],A[R],x));return k.alpha=mix(T.alpha,A.alpha,x),w.transform(k)}},isNum=_=>typeof _=="number",combineFunctions=(_,S)=>w=>S(_(w)),pipe=(..._)=>_.reduce(combineFunctions);function getMixer(_,S){return isNum(_)?w=>mix(_,S,w):color.test(_)?mixColor(_,S):mixComplex(_,S)}const mixArray=(_,S)=>{const w=[..._],E=w.length,T=_.map((A,k)=>getMixer(A,S[k]));return A=>{for(let k=0;k<E;k++)w[k]=T[k](A);return w}},mixObject=(_,S)=>{const w=Object.assign(Object.assign({},_),S),E={};for(const T in w)_[T]!==void 0&&S[T]!==void 0&&(E[T]=getMixer(_[T],S[T]));return T=>{for(const A in E)w[A]=E[A](T);return w}};function analyse(_){const S=complex.parse(_),w=S.length;let E=0,T=0,A=0;for(let k=0;k<w;k++)E||typeof S[k]=="number"?E++:S[k].hue!==void 0?A++:T++;return{parsed:S,numNumbers:E,numRGB:T,numHSL:A}}const mixComplex=(_,S)=>{const w=complex.createTransformer(S),E=analyse(_),T=analyse(S);return E.numHSL===T.numHSL&&E.numRGB===T.numRGB&&E.numNumbers>=T.numNumbers?pipe(mixArray(E.parsed,T.parsed),w):k=>`${k>0?S:_}`},mixNumber=(_,S)=>w=>mix(_,S,w);function detectMixerFactory(_){if(typeof _=="number")return mixNumber;if(typeof _=="string")return color.test(_)?mixColor:mixComplex;if(Array.isArray(_))return mixArray;if(typeof _=="object")return mixObject}function createMixers(_,S,w){const E=[],T=w||detectMixerFactory(_[0]),A=_.length-1;for(let k=0;k<A;k++){let x=T(_[k],_[k+1]);if(S){const R=Array.isArray(S)?S[k]:S;x=pipe(R,x)}E.push(x)}return E}function fastInterpolate([_,S],[w]){return E=>w(progress(_,S,E))}function slowInterpolate(_,S){const w=_.length,E=w-1;return T=>{let A=0,k=!1;if(T<=_[0]?k=!0:T>=_[E]&&(A=E-1,k=!0),!k){let R=1;for(;R<w&&!(_[R]>T||R===E);R++);A=R-1}const x=progress(_[A],_[A+1],T);return S[A](x)}}function interpolate(_,S,{clamp:w=!0,ease:E,mixer:T}={}){const A=_.length;invariant(A===S.length),invariant(!E||!Array.isArray(E)||E.length===A-1),_[0]>_[A-1]&&(_=[].concat(_),S=[].concat(S),_.reverse(),S.reverse());const k=createMixers(S,E,T),x=A===2?fastInterpolate(_,k):slowInterpolate(_,k);return w?R=>x(clamp$1(_[0],_[A-1],R)):x}const reverseEasing=_=>S=>1-_(1-S),mirrorEasing=_=>S=>S<=.5?_(2*S)/2:(2-_(2*(1-S)))/2,createExpoIn=_=>S=>Math.pow(S,_),createBackIn=_=>S=>S*S*((_+1)*S-_),createAnticipate=_=>{const S=createBackIn(_);return w=>(w*=2)<1?.5*S(w):.5*(2-Math.pow(2,-10*(w-1)))},DEFAULT_OVERSHOOT_STRENGTH=1.525,BOUNCE_FIRST_THRESHOLD=4/11,BOUNCE_SECOND_THRESHOLD=8/11,BOUNCE_THIRD_THRESHOLD=9/10,linear=_=>_,easeIn=createExpoIn(2),easeOut=reverseEasing(easeIn),easeInOut=mirrorEasing(easeIn),circIn=_=>1-Math.sin(Math.acos(_)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circOut),backIn=createBackIn(DEFAULT_OVERSHOOT_STRENGTH),backOut=reverseEasing(backIn),backInOut=mirrorEasing(backIn),anticipate=createAnticipate(DEFAULT_OVERSHOOT_STRENGTH),ca=4356/361,cb=35442/1805,cc=16061/1805,bounceOut=_=>{if(_===1||_===0)return _;const S=_*_;return _<BOUNCE_FIRST_THRESHOLD?7.5625*S:_<BOUNCE_SECOND_THRESHOLD?9.075*S-9.9*_+3.4:_<BOUNCE_THIRD_THRESHOLD?ca*S-cb*_+cc:10.8*_*_-20.52*_+10.72},bounceIn=reverseEasing(bounceOut),bounceInOut=_=>_<.5?.5*(1-bounceOut(1-_*2)):.5*bounceOut(_*2-1)+.5;function defaultEasing(_,S){return _.map(()=>S||easeInOut).splice(0,_.length-1)}function defaultOffset(_){const S=_.length;return _.map((w,E)=>E!==0?E/(S-1):0)}function convertOffsetToTimes(_,S){return _.map(w=>w*S)}function keyframes$1({from:_=0,to:S=1,ease:w,offset:E,duration:T=300}){const A={done:!1,value:_},k=Array.isArray(S)?S:[_,S],x=convertOffsetToTimes(E&&E.length===k.length?E:defaultOffset(k),T);function R(){return interpolate(x,k,{ease:Array.isArray(w)?w:defaultEasing(k,w)})}let P=R();return{next:M=>(A.value=P(M),A.done=M>=T,A),flipTarget:()=>{k.reverse(),P=R()}}}function decay({velocity:_=0,from:S=0,power:w=.8,timeConstant:E=350,restDelta:T=.5,modifyTarget:A}){const k={done:!1,value:S};let x=w*_;const R=S+x,P=A===void 0?R:A(R);return P!==R&&(x=P-S),{next:M=>{const N=-x*Math.exp(-M/E);return k.done=!(N>T||N<-T),k.value=k.done?P:P+N,k},flipTarget:()=>{}}}const types$1={keyframes:keyframes$1,spring,decay};function detectAnimationFromOptions(_){if(Array.isArray(_.to))return keyframes$1;if(types$1[_.type])return types$1[_.type];const S=new Set(Object.keys(_));return S.has("ease")||S.has("duration")&&!S.has("dampingRatio")?keyframes$1:S.has("dampingRatio")||S.has("stiffness")||S.has("mass")||S.has("damping")||S.has("restSpeed")||S.has("restDelta")?spring:keyframes$1}function loopElapsed(_,S,w=0){return _-S-w}function reverseElapsed(_,S,w=0,E=!0){return E?loopElapsed(S+-_,S,w):S-(_-S)+w}function hasRepeatDelayElapsed(_,S,w,E){return E?_>=S+w:_<=-w}const framesync=_=>{const S=({delta:w})=>_(w);return{start:()=>sync.update(S,!0),stop:()=>cancelSync.update(S)}};function animate(_){var S,w,{from:E,autoplay:T=!0,driver:A=framesync,elapsed:k=0,repeat:x=0,repeatType:R="loop",repeatDelay:P=0,onPlay:M,onStop:N,onComplete:I,onRepeat:V,onUpdate:B}=_,D=__rest(_,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let{to:z}=D,O,L=0,F=D.duration,$,H=!1,j=!0,q;const W=detectAnimationFromOptions(D);!((w=(S=W).needsInterpolation)===null||w===void 0)&&w.call(S,E,z)&&(q=interpolate([0,100],[E,z],{clamp:!1}),E=0,z=100);const X=W(Object.assign(Object.assign({},D),{from:E,to:z}));function te(){L++,R==="reverse"?(j=L%2===0,k=reverseElapsed(k,F,P,j)):(k=loopElapsed(k,F,P),R==="mirror"&&X.flipTarget()),H=!1,V&&V()}function ee(){O.stop(),I&&I()}function G(le){if(j||(le=-le),k+=le,!H){const ae=X.next(Math.max(0,k));$=ae.value,q&&($=q($)),H=j?ae.done:k<=0}B==null||B($),H&&(L===0&&(F??(F=k)),L<x?hasRepeatDelayElapsed(k,F,P,j)&&te():ee())}function de(){M==null||M(),O=A(G),O.start()}return T&&de(),{stop:()=>{N==null||N(),O.stop()}}}function velocityPerSecond(_,S){return S?_*(1e3/S):0}function inertia({from:_=0,velocity:S=0,min:w,max:E,power:T=.8,timeConstant:A=750,bounceStiffness:k=500,bounceDamping:x=10,restDelta:R=1,modifyTarget:P,driver:M,onUpdate:N,onComplete:I,onStop:V}){let B;function D(F){return w!==void 0&&F<w||E!==void 0&&F>E}function z(F){return w===void 0?E:E===void 0||Math.abs(w-F)<Math.abs(E-F)?w:E}function O(F){B==null||B.stop(),B=animate(Object.assign(Object.assign({},F),{driver:M,onUpdate:$=>{var H;N==null||N($),(H=F.onUpdate)===null||H===void 0||H.call(F,$)},onComplete:I,onStop:V}))}function L(F){O(Object.assign({type:"spring",stiffness:k,damping:x,restDelta:R},F))}if(D(_))L({from:_,velocity:S,to:z(_)});else{let F=T*S+_;typeof P<"u"&&(F=P(F));const $=z(F),H=$===w?-1:1;let j,q;const W=X=>{j=q,q=X,S=velocityPerSecond(X-j,getFrameData().delta),(H===1&&X>$||H===-1&&X<$)&&L({from:X,to:$,velocity:S})};O({type:"decay",from:_,velocity:S,timeConstant:A,power:T,restDelta:R,modifyTarget:P,onUpdate:D(F)?W:void 0})}return{stop:()=>B==null?void 0:B.stop()}}const a$1=(_,S)=>1-3*S+3*_,b$1=(_,S)=>3*S-6*_,c$1=_=>3*_,calcBezier=(_,S,w)=>((a$1(S,w)*_+b$1(S,w))*_+c$1(S))*_,getSlope=(_,S,w)=>3*a$1(S,w)*_*_+2*b$1(S,w)*_+c$1(S),subdivisionPrecision=1e-7,subdivisionMaxIterations=10;function binarySubdivide(_,S,w,E,T){let A,k,x=0;do k=S+(w-S)/2,A=calcBezier(k,E,T)-_,A>0?w=k:S=k;while(Math.abs(A)>subdivisionPrecision&&++x<subdivisionMaxIterations);return k}const newtonIterations=8,newtonMinSlope=.001;function newtonRaphsonIterate(_,S,w,E){for(let T=0;T<newtonIterations;++T){const A=getSlope(S,w,E);if(A===0)return S;const k=calcBezier(S,w,E)-_;S-=k/A}return S}const kSplineTableSize=11,kSampleStepSize=1/(kSplineTableSize-1);function cubicBezier(_,S,w,E){if(_===S&&w===E)return linear;const T=new Float32Array(kSplineTableSize);for(let k=0;k<kSplineTableSize;++k)T[k]=calcBezier(k*kSampleStepSize,_,w);function A(k){let x=0,R=1;const P=kSplineTableSize-1;for(;R!==P&&T[R]<=k;++R)x+=kSampleStepSize;--R;const M=(k-T[R])/(T[R+1]-T[R]),N=x+M*kSampleStepSize,I=getSlope(N,_,w);return I>=newtonMinSlope?newtonRaphsonIterate(k,N,_,w):I===0?N:binarySubdivide(k,x,x+kSampleStepSize,_,w)}return k=>k===0||k===1?k:calcBezier(A(k),S,E)}const __vite_import_meta_env__={},motionState={};class SubscriptionManager{constructor(){nt(this,"subscriptions",new Set)}add(S){return this.subscriptions.add(S),()=>this.subscriptions.delete(S)}notify(S,w,E){if(this.subscriptions.size)for(const T of this.subscriptions)T(S,w,E)}clear(){this.subscriptions.clear()}}function isFloat(_){return!Number.isNaN(Number.parseFloat(_))}class MotionValue{constructor(S){nt(this,"current");nt(this,"prev");nt(this,"timeDelta",0);nt(this,"lastUpdated",0);nt(this,"updateSubscribers",new SubscriptionManager);nt(this,"stopAnimation");nt(this,"canTrackVelocity",!1);nt(this,"updateAndNotify",S=>{this.prev=this.current,this.current=S;const{delta:w,timestamp:E}=getFrameData();this.lastUpdated!==E&&(this.timeDelta=w,this.lastUpdated=E),sync.postRender(this.scheduleVelocityCheck),this.updateSubscribers.notify(this.current)});nt(this,"scheduleVelocityCheck",()=>sync.postRender(this.velocityCheck));nt(this,"velocityCheck",({timestamp:S})=>{this.canTrackVelocity||(this.canTrackVelocity=isFloat(this.current)),S!==this.lastUpdated&&(this.prev=this.current)});this.prev=this.current=S,this.canTrackVelocity=isFloat(this.current)}onChange(S){return this.updateSubscribers.add(S)}clearListeners(){this.updateSubscribers.clear()}set(S){this.updateAndNotify(S)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?velocityPerSecond(Number.parseFloat(this.current)-Number.parseFloat(this.prev),this.timeDelta):0}start(S){return this.stop(),new Promise(w=>{const{stop:E}=S(w);this.stopAnimation=E}).then(()=>this.clearAnimation())}stop(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()}isAnimating(){return!!this.stopAnimation}clearAnimation(){this.stopAnimation=null}destroy(){this.updateSubscribers.clear(),this.stop()}}function getMotionValue(_){return new MotionValue(_)}const{isArray}=Array;function useMotionValues(){const _=ref$1({}),S=E=>{const T=A=>{_.value[A]&&(_.value[A].stop(),_.value[A].destroy(),delete _.value[A])};E?isArray(E)?E.forEach(T):T(E):Object.keys(_.value).forEach(T)},w=(E,T,A)=>{if(_.value[E])return _.value[E];const k=getMotionValue(T);return k.onChange(x=>A[E]=x),_.value[E]=k,k};return tryOnUnmounted(S),{motionValues:_,get:w,stop:S}}function isKeyframesTarget(_){return Array.isArray(_)}function underDampedSpring(){return{type:"spring",stiffness:500,damping:25,restDelta:.5,restSpeed:10}}function criticallyDampedSpring(_){return{type:"spring",stiffness:550,damping:_===0?2*Math.sqrt(550):30,restDelta:.01,restSpeed:10}}function overDampedSpring(_){return{type:"spring",stiffness:550,damping:_===0?100:30,restDelta:.01,restSpeed:10}}function linearTween(){return{type:"keyframes",ease:"linear",duration:300}}function keyframes(_){return{type:"keyframes",duration:800,values:_}}const defaultTransitions={default:overDampedSpring,x:underDampedSpring,y:underDampedSpring,z:underDampedSpring,rotate:underDampedSpring,rotateX:underDampedSpring,rotateY:underDampedSpring,rotateZ:underDampedSpring,scaleX:criticallyDampedSpring,scaleY:criticallyDampedSpring,scale:criticallyDampedSpring,backgroundColor:linearTween,color:linearTween,opacity:linearTween};function getDefaultTransition(_,S){let w;return isKeyframesTarget(S)?w=keyframes:w=defaultTransitions[_]||defaultTransitions.default,{to:S,...w(S)}}const int={...number,transform:Math.round},valueTypes={color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,size:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px,zIndex:int,filter,WebkitFilter:filter,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},getValueType=_=>valueTypes[_];function getValueAsType(_,S){return S&&typeof _=="number"&&S.transform?S.transform(_):_}function getAnimatableNone(_,S){let w=getValueType(_);return w!==filter&&(w=complex),w.getAnimatableNone?w.getAnimatableNone(S):void 0}const easingLookup={linear,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate,bounceIn,bounceInOut,bounceOut};function easingDefinitionToFunction(_){if(Array.isArray(_)){const[S,w,E,T]=_;return cubicBezier(S,w,E,T)}else if(typeof _=="string")return easingLookup[_];return _}function isEasingArray(_){return Array.isArray(_)&&typeof _[0]!="number"}function isAnimatable(_,S){return _==="zIndex"?!1:!!(typeof S=="number"||Array.isArray(S)||typeof S=="string"&&complex.test(S)&&!S.startsWith("url("))}function hydrateKeyframes(_){return Array.isArray(_.to)&&_.to[0]===null&&(_.to=[..._.to],_.to[0]=_.from),_}function convertTransitionToAnimationOptions({ease:_,times:S,delay:w,...E}){const T={...E};return S&&(T.offset=S),_&&(T.ease=isEasingArray(_)?_.map(easingDefinitionToFunction):easingDefinitionToFunction(_)),w&&(T.elapsed=-w),T}function getPopmotionAnimationOptions(_,S,w){return Array.isArray(S.to)&&(_.duration||(_.duration=800)),hydrateKeyframes(S),isTransitionDefined(_)||(_={..._,...getDefaultTransition(w,S.to)}),{...S,...convertTransitionToAnimationOptions(_)}}function isTransitionDefined({delay:_,repeat:S,repeatType:w,repeatDelay:E,from:T,...A}){return!!Object.keys(A).length}function getValueTransition(_,S){return _[S]||_.default||_}function getAnimation(_,S,w,E,T){const A=getValueTransition(E,_);let k=A.from===null||A.from===void 0?S.get():A.from;const x=isAnimatable(_,w);k==="none"&&x&&typeof w=="string"&&(k=getAnimatableNone(_,w));const R=isAnimatable(_,k);function P(N){const I={from:k,to:w,velocity:E.velocity?E.velocity:S.getVelocity(),onUpdate:V=>S.set(V)};return A.type==="inertia"||A.type==="decay"?inertia({...I,...A}):animate({...getPopmotionAnimationOptions(A,I,_),onUpdate:V=>{I.onUpdate(V),A.onUpdate&&A.onUpdate(V)},onComplete:()=>{T&&T(),N&&N()}})}function M(N){return S.set(w),T&&T(),N&&N(),{stop:()=>{}}}return!R||!x||A.type===!1?M:P}function useMotionTransitions(){const{motionValues:_,stop:S,get:w}=useMotionValues();return{motionValues:_,stop:S,push:(T,A,k,x={},R)=>{const P=k[T],M=w(T,P,k);if(x&&x.immediate){M.set(A);return}const N=getAnimation(T,M,A,x,R);M.start(N)}}}function useMotionControls(_,S={},{motionValues:w,push:E,stop:T}=useMotionTransitions()){const A=unref(S),k=ref$1(!1);watch(w,N=>{k.value=Object.values(N).filter(I=>I.isAnimating()).length>0},{immediate:!0,deep:!0});const x=N=>{if(!A||!A[N])throw new Error(`The variant ${N} does not exist.`);return A[N]},R=N=>{typeof N=="string"&&(N=x(N));const I=Object.entries(N).map(([B,D])=>{if(B!=="transition")return new Promise(z=>E(B,D,_,N.transition||getDefaultTransition(B,N[B]),z))}).filter(Boolean);async function V(){var B,D;await Promise.all(I),(D=(B=N.transition)==null?void 0:B.onComplete)==null||D.call(B)}return Promise.all([V()])};return{isAnimating:k,apply:R,set:N=>{const I=isObject$2(N)?N:x(N);Object.entries(I).forEach(([V,B])=>{V!=="transition"&&E(V,B,_,{immediate:!0})})},leave:async N=>{let I;if(A&&(A.leave&&(I=A.leave),!A.leave&&A.initial&&(I=A.initial)),!I){N();return}await R(I),N()},stop:T}}const isBrowser=typeof window<"u",supportsPointerEvents=()=>isBrowser&&(window.onpointerdown===null||(__vite_import_meta_env__==null?void 0:__vite_import_meta_env__.TEST)),supportsTouchEvents=()=>isBrowser&&(window.ontouchstart===null||(__vite_import_meta_env__==null?void 0:__vite_import_meta_env__.TEST)),supportsMouseEvents=()=>isBrowser&&(window.onmousedown===null||(__vite_import_meta_env__==null?void 0:__vite_import_meta_env__.TEST));function registerEventListeners({target:_,state:S,variants:w,apply:E}){const T=unref(w),A=ref$1(!1),k=ref$1(!1),x=ref$1(!1),R=computed(()=>{let M=[...Object.keys(S.value||{})];return T&&(T.hovered&&(M=[...M,...Object.keys(T.hovered)]),T.tapped&&(M=[...M,...Object.keys(T.tapped)]),T.focused&&(M=[...M,...Object.keys(T.focused)])),M}),P=computed(()=>{const M={};Object.assign(M,S.value),A.value&&T.hovered&&Object.assign(M,T.hovered),k.value&&T.tapped&&Object.assign(M,T.tapped),x.value&&T.focused&&Object.assign(M,T.focused);for(const N in M)R.value.includes(N)||delete M[N];return M});T.hovered&&(useEventListener(_,"mouseenter",()=>A.value=!0),useEventListener(_,"mouseleave",()=>{A.value=!1,k.value=!1})),T.tapped&&(supportsMouseEvents()&&(useEventListener(_,"mousedown",()=>k.value=!0),useEventListener(_,"mouseup",()=>k.value=!1)),supportsPointerEvents()&&(useEventListener(_,"pointerdown",()=>k.value=!0),useEventListener(_,"pointerup",()=>k.value=!1)),supportsTouchEvents()&&(useEventListener(_,"touchstart",()=>k.value=!0),useEventListener(_,"touchend",()=>k.value=!1))),T.focused&&(useEventListener(_,"focus",()=>x.value=!0),useEventListener(_,"blur",()=>x.value=!1)),watch([A,k,x],()=>{E(P.value)})}function registerLifeCycleHooks({set:_,target:S,variants:w,variant:E}){const T=unref(w);watch(()=>S,()=>{T&&(T.initial&&(_("initial"),E.value="initial"),T.enter&&(E.value="enter"))},{immediate:!0,flush:"pre"})}function registerVariantsSync({state:_,apply:S}){watch(_,w=>{w&&S(w)},{immediate:!0})}function registerVisibilityHooks({target:_,variants:S,variant:w}){const E=unref(S);E&&(E.visible||E.visibleOnce)&&useIntersectionObserver(_,([{isIntersecting:T}])=>{E.visible?T?w.value="visible":w.value="initial":E.visibleOnce&&(T&&w.value!=="visibleOnce"?w.value="visibleOnce":w.value||(w.value="initial"))})}function useMotionFeatures(_,S={syncVariants:!0,lifeCycleHooks:!0,visibilityHooks:!0,eventListeners:!0}){S.lifeCycleHooks&&registerLifeCycleHooks(_),S.syncVariants&&registerVariantsSync(_),S.visibilityHooks&&registerVisibilityHooks(_),S.eventListeners&&registerEventListeners(_)}function reactiveStyle(_={}){const S=reactive({..._}),w=ref$1({});return watch(S,()=>{const E={};for(const[T,A]of Object.entries(S)){const k=getValueType(T),x=getValueAsType(A,k);E[T]=x}w.value=E},{immediate:!0,deep:!0}),{state:S,style:w}}function usePermissiveTarget(_,S){watch(()=>unrefElement(_),w=>{w&&S(w)},{immediate:!0})}const translateAlias={x:"translateX",y:"translateY",z:"translateZ"};function reactiveTransform(_={},S=!0){const w=reactive({..._}),E=ref$1("");return watch(w,T=>{let A="",k=!1;if(S&&(T.x||T.y||T.z)){const x=[T.x||0,T.y||0,T.z||0].map(R=>getValueAsType(R,px)).join(",");A+=`translate3d(${x}) `,k=!0}for(const[x,R]of Object.entries(T)){if(S&&(x==="x"||x==="y"||x==="z"))continue;const P=getValueType(x),M=getValueAsType(R,P);A+=`${translateAlias[x]||x}(${M}) `}S&&!k&&(A+="translateZ(0px) "),E.value=A.trim()},{immediate:!0,deep:!0}),{state:w,transform:E}}const transformAxes=["","X","Y","Z"],order=["perspective","translate","scale","rotate","skew"],transformProps=["transformPerspective","x","y","z"];order.forEach(_=>{transformAxes.forEach(S=>{const w=_+S;transformProps.push(w)})});const transformPropSet=new Set(transformProps);function isTransformProp(_){return transformPropSet.has(_)}const transformOriginProps=new Set(["originX","originY","originZ"]);function isTransformOriginProp(_){return transformOriginProps.has(_)}function splitValues(_){const S={},w={};return Object.entries(_).forEach(([E,T])=>{isTransformProp(E)||isTransformOriginProp(E)?S[E]=T:w[E]=T}),{transform:S,style:w}}function variantToStyle(_){const{transform:S,style:w}=splitValues(_),{transform:E}=reactiveTransform(S),{style:T}=reactiveStyle(w);return E.value&&(T.value.transform=E.value),T.value}function useElementStyle(_,S){let w,E;const{state:T,style:A}=reactiveStyle();return usePermissiveTarget(_,k=>{E=k;for(const x of Object.keys(valueTypes))k.style[x]===null||k.style[x]===""||isTransformProp(x)||isTransformOriginProp(x)||(T[x]=k.style[x]);w&&Object.entries(w).forEach(([x,R])=>k.style[x]=R),S&&S(T)}),watch(A,k=>{if(!E){w=k;return}for(const x in k)E.style[x]=k[x]},{immediate:!0}),{style:T}}function parseTransform(_){const S=_.trim().split(/\) |\)/);if(S.length===1)return{};const w=E=>E.endsWith("px")||E.endsWith("deg")?Number.parseFloat(E):Number.isNaN(Number(E))?Number(E):E;return S.reduce((E,T)=>{if(!T)return E;const[A,k]=T.split("("),R=k.split(",").map(M=>w(M.endsWith(")")?M.replace(")",""):M.trim())),P=R.length===1?R[0]:R;return{...E,[A]:P}},{})}function stateFromTransform(_,S){Object.entries(parseTransform(S)).forEach(([w,E])=>{const T=["x","y","z"];if(w==="translate3d"){if(E===0){T.forEach(A=>_[A]=0);return}E.forEach((A,k)=>_[T[k]]=A);return}if(E=Number.parseFloat(`${E}`),w==="translateX"){_.x=E;return}if(w==="translateY"){_.y=E;return}if(w==="translateZ"){_.z=E;return}_[w]=E})}function useElementTransform(_,S){let w,E;const{state:T,transform:A}=reactiveTransform();return usePermissiveTarget(_,k=>{E=k,k.style.transform&&stateFromTransform(T,k.style.transform),w&&(k.style.transform=w),S&&S(T)}),watch(A,k=>{if(!E){w=k;return}E.style.transform=k},{immediate:!0}),{transform:T}}function objectEntries(_){return Object.entries(_)}function useMotionProperties(_,S){const w=reactive({}),E=k=>Object.entries(k).forEach(([x,R])=>w[x]=R),{style:T}=useElementStyle(_,E),{transform:A}=useElementTransform(_,E);return watch(w,k=>{objectEntries(k).forEach(([x,R])=>{const P=isTransformProp(x)?A:T;P[x]&&P[x]===R||(P[x]=R)})},{immediate:!0,deep:!0}),usePermissiveTarget(_,()=>S),{motionProperties:w,style:T,transform:A}}function useMotionVariants(_={}){const S=unref(_),w=ref$1();return{state:computed(()=>{if(w.value)return S[w.value]}),variant:w}}function useMotion(_,S={},w){const{motionProperties:E}=useMotionProperties(_),{variant:T,state:A}=useMotionVariants(S),k=useMotionControls(E,S),x={target:_,variant:T,variants:S,state:A,motionProperties:E,...k};return useMotionFeatures(x,w),x}const transitionKeys=["delay","duration"],directivePropsKeys=["initial","enter","leave","visible","visible-once","visibleOnce","hovered","tapped","focused",...transitionKeys];function isTransitionKey(_){return transitionKeys.includes(_)}function resolveVariants(_,S){const w=_.props?_.props:_.data&&_.data.attrs?_.data.attrs:{};if(w){w.variants&&isObject$2(w.variants)&&(S.value={...S.value,...w.variants});for(let E of directivePropsKeys)if(!(!w||!w[E])){if(isTransitionKey(E)&&typeof w[E]=="number"){for(const T of["enter","visible","visibleOnce"]){const A=S.value[T];A!=null&&(A.transition??(A.transition={}),A.transition[E]=w[E])}continue}if(isObject$2(w[E])){const T=w[E];E==="visible-once"&&(E="visibleOnce"),S.value[E]=T}}}}function directive(_,S=!1){return{created:(T,A,k)=>{const x=A.value&&typeof A.value=="string"?A.value:k.key;x&&motionState[x]&&motionState[x].stop();const R=S?structuredClone(toRaw(_)||{}):_||{},P=ref$1(R);typeof A.value=="object"&&(P.value=A.value),resolveVariants(k,P);const N=useMotion(T,P,{eventListeners:!0,lifeCycleHooks:!0,syncVariants:!0,visibilityHooks:!1});T.motionInstance=N,x&&(motionState[x]=N)},mounted:(T,A,k)=>{T.motionInstance&&registerVisibilityHooks(T.motionInstance)},getSSRProps(T,A){let{initial:k}=T.value||A&&(A==null?void 0:A.props)||{};k=unref(k);const x=defu({},(_==null?void 0:_.initial)||{},k||{});return!x||Object.keys(x).length===0?void 0:{style:variantToStyle(x)}}}}const fade={initial:{opacity:0},enter:{opacity:1}},fadeVisible={initial:{opacity:0},visible:{opacity:1}},fadeVisibleOnce={initial:{opacity:0},visibleOnce:{opacity:1}},pop={initial:{scale:0,opacity:0},enter:{scale:1,opacity:1}},popVisible={initial:{scale:0,opacity:0},visible:{scale:1,opacity:1}},popVisibleOnce={initial:{scale:0,opacity:0},visibleOnce:{scale:1,opacity:1}},rollLeft={initial:{x:-100,rotate:90,opacity:0},enter:{x:0,rotate:0,opacity:1}},rollVisibleLeft={initial:{x:-100,rotate:90,opacity:0},visible:{x:0,rotate:0,opacity:1}},rollVisibleOnceLeft={initial:{x:-100,rotate:90,opacity:0},visibleOnce:{x:0,rotate:0,opacity:1}},rollRight={initial:{x:100,rotate:-90,opacity:0},enter:{x:0,rotate:0,opacity:1}},rollVisibleRight={initial:{x:100,rotate:-90,opacity:0},visible:{x:0,rotate:0,opacity:1}},rollVisibleOnceRight={initial:{x:100,rotate:-90,opacity:0},visibleOnce:{x:0,rotate:0,opacity:1}},rollTop={initial:{y:-100,rotate:-90,opacity:0},enter:{y:0,rotate:0,opacity:1}},rollVisibleTop={initial:{y:-100,rotate:-90,opacity:0},visible:{y:0,rotate:0,opacity:1}},rollVisibleOnceTop={initial:{y:-100,rotate:-90,opacity:0},visibleOnce:{y:0,rotate:0,opacity:1}},rollBottom={initial:{y:100,rotate:90,opacity:0},enter:{y:0,rotate:0,opacity:1}},rollVisibleBottom={initial:{y:100,rotate:90,opacity:0},visible:{y:0,rotate:0,opacity:1}},rollVisibleOnceBottom={initial:{y:100,rotate:90,opacity:0},visibleOnce:{y:0,rotate:0,opacity:1}},slideLeft={initial:{x:-100,opacity:0},enter:{x:0,opacity:1}},slideVisibleLeft={initial:{x:-100,opacity:0},visible:{x:0,opacity:1}},slideVisibleOnceLeft={initial:{x:-100,opacity:0},visibleOnce:{x:0,opacity:1}},slideRight={initial:{x:100,opacity:0},enter:{x:0,opacity:1}},slideVisibleRight={initial:{x:100,opacity:0},visible:{x:0,opacity:1}},slideVisibleOnceRight={initial:{x:100,opacity:0},visibleOnce:{x:0,opacity:1}},slideTop={initial:{y:-100,opacity:0},enter:{y:0,opacity:1}},slideVisibleTop={initial:{y:-100,opacity:0},visible:{y:0,opacity:1}},slideVisibleOnceTop={initial:{y:-100,opacity:0},visibleOnce:{y:0,opacity:1}},slideBottom={initial:{y:100,opacity:0},enter:{y:0,opacity:1}},slideVisibleBottom={initial:{y:100,opacity:0},visible:{y:0,opacity:1}},slideVisibleOnceBottom={initial:{y:100,opacity:0},visibleOnce:{y:0,opacity:1}},presets={__proto__:null,fade,fadeVisible,fadeVisibleOnce,pop,popVisible,popVisibleOnce,rollBottom,rollLeft,rollRight,rollTop,rollVisibleBottom,rollVisibleLeft,rollVisibleOnceBottom,rollVisibleOnceLeft,rollVisibleOnceRight,rollVisibleOnceTop,rollVisibleRight,rollVisibleTop,slideBottom,slideLeft,slideRight,slideTop,slideVisibleBottom,slideVisibleLeft,slideVisibleOnceBottom,slideVisibleOnceLeft,slideVisibleOnceRight,slideVisibleOnceTop,slideVisibleRight,slideVisibleTop};function slugify(_){const S="/_,:;",w="aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------",E=new RegExp(S.split("").join("|"),"g");return _.toString().replace(/[A-Z]/g,T=>`-${T}`).toLowerCase().replace(/\s+/g,"-").replace(E,T=>w.charAt(S.indexOf(T))).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/-{2,}/g,"-").replace(/^-+/,"").replace(/-+$/,"")}const CUSTOM_PRESETS=Symbol(""),MotionComponentProps={preset:{type:String,required:!1},instance:{type:Object,required:!1},variants:{type:Object,required:!1},initial:{type:Object,required:!1},enter:{type:Object,required:!1},leave:{type:Object,required:!1},visible:{type:Object,required:!1},visibleOnce:{type:Object,required:!1},hovered:{type:Object,required:!1},tapped:{type:Object,required:!1},focused:{type:Object,required:!1},delay:{type:[Number,String],required:!1},duration:{type:[Number,String],required:!1}};function isObject$1(_){return Object.prototype.toString.call(_)==="[object Object]"}function clone(_){if(Array.isArray(_))return _.map(clone);if(isObject$1(_)){const S={};for(const w in _)S[w]=clone(_[w]);return S}return _}function setupMotionComponent(_){const S=reactive({}),w=inject(CUSTOM_PRESETS,{}),E=computed(()=>_.preset==null?{}:w!=null&&_.preset in w?structuredClone(toRaw(w)[_.preset]):_.preset in presets?structuredClone(presets[_.preset]):{}),T=computed(()=>({initial:_.initial,enter:_.enter,leave:_.leave,visible:_.visible,visibleOnce:_.visibleOnce,hovered:_.hovered,tapped:_.tapped,focused:_.focused}));function A(R,P){for(const M of["delay","duration"]){if(P[M]==null)continue;const N=Number.parseInt(P[M]);for(const I of["enter","visible","visibleOnce"]){const V=R[I];V!=null&&(V.transition??(V.transition={}),V.transition[M]=N)}}return R}const k=computed(()=>{const R=defu({},T.value,E.value,_.variants||{});return A({...R},_)});function x(R,P,M){var I;R.props??(R.props={}),(I=R.props).style??(I.style={}),R.props.style={...R.props.style,...M};const N=A(clone(k.value),R.props);return R.props.onVnodeMounted=({el:V})=>{S[P]=useMotion(V,N)},R.props.onVnodeUpdated=({el:V})=>{const B=variantToStyle(S[P].state);for(const[D,z]of Object.entries(B))V.style[D]=z},R}return{motionConfig:k,setNodeInstance:x}}const MotionComponent=defineComponent({name:"Motion",props:{...MotionComponentProps,is:{type:[String,Object],default:"div"}},setup(_){const S=useSlots(),{motionConfig:w,setNodeInstance:E}=setupMotionComponent(_);return()=>{const T=variantToStyle(w.value.initial||{}),A=h$1(_.is,void 0,S);return E(A,0,T),A}}}),MotionGroupComponent=defineComponent({name:"MotionGroup",props:{...MotionComponentProps,is:{type:[String,Object],required:!1}},setup(_){const S=useSlots(),{motionConfig:w,setNodeInstance:E}=setupMotionComponent(_);return()=>{var k;const T=variantToStyle(w.value.initial||{}),A=((k=S.default)==null?void 0:k.call(S))||[];for(let x=0;x<A.length;x++){const R=A[x];R.type===Fragment&&Array.isArray(R.children)?R.children.forEach(function P(M,N){if(M!=null){if(Array.isArray(M)){P(M,N);return}typeof M=="object"&&E(M,N,T)}}):E(R,x,T)}return _.is?h$1(_.is,void 0,A):A}}}),MotionPlugin={install(_,S){if(_.directive("motion",directive()),!S||S&&!S.excludePresets)for(const w in presets){const E=presets[w];_.directive(`motion-${slugify(w)}`,directive(E,!0))}if(S&&S.directives)for(const w in S.directives){const E=S.directives[w];E.initial,_.directive(`motion-${w}`,directive(E,!0))}_.provide(CUSTOM_PRESETS,S==null?void 0:S.directives),_.component("Motion",MotionComponent),_.component("MotionGroup",MotionGroupComponent)}},scriptRel="modulepreload",assetsURL=function(_,S){return new URL(_,S).href},seen={},__vitePreload=function(S,w,E){let T=Promise.resolve();if(w&&w.length>0){let k=function(M){return Promise.all(M.map(N=>Promise.resolve(N).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};const x=document.getElementsByTagName("link"),R=document.querySelector("meta[property=csp-nonce]"),P=(R==null?void 0:R.nonce)||(R==null?void 0:R.getAttribute("nonce"));T=k(w.map(M=>{if(M=assetsURL(M,E),M in seen)return;seen[M]=!0;const N=M.endsWith(".css"),I=N?'[rel="stylesheet"]':"";if(!!E)for(let D=x.length-1;D>=0;D--){const z=x[D];if(z.href===M&&(!N||z.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${M}"]${I}`))return;const B=document.createElement("link");if(B.rel=N?"stylesheet":scriptRel,N||(B.as="script"),B.crossOrigin="",B.href=M,P&&B.setAttribute("nonce",P),document.head.appendChild(B),N)return new Promise((D,z)=>{B.addEventListener("load",D),B.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${M}`)))})}))}function A(k){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=k,window.dispatchEvent(x),!x.defaultPrevented)throw k}return T.then(k=>{for(const x of k||[])x.status==="rejected"&&A(x.reason);return S().catch(A)})},AppSettings={logLevel:"DEBUG",logLevels:{DEBUG:0,INFO:1,WARN:2,ERROR:3},reconnect:{maxAttempts:3,delay:3e3,backoffFactor:1.5,websocket:{maxAttempts:5,backoffBase:1e3,maxDelay:1e4}},timeouts:{iceGathering:5e3,connection:5e3,networkCheck:5e3,signalingResponse:5e3,callRequest:3e4,iceChecking:8e3},network:{websocketHeartbeatInterval:25e3,dataChannelHighThreshold:2*1024*1024,dataChannelBufferCheckInterval:200,onlineUserRefreshInterval:12e4},media:{music:"music/call.mp3",chunkSize:256*1024,maxAudioDuration:60,imageCompression:.8,maxFileSize:1024*1024*1024,maxStickerSize:3*1024*1024,audioConstraints:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},qualityPresets:{auto:{maxBitrate:null,resolution:null},"480p":{maxBitrate:700*1e3,resolution:{height:480}},"720p":{maxBitrate:1500*1e3,resolution:{height:720}}},screenSharePresets:{auto:{label:"",resolution:{},frameRate:{ideal:15,max:30}},text:{label:"",resolution:{width:1920,height:1080},frameRate:{ideal:10,max:15}},motion:{label:"",resolution:{width:1280,height:720},frameRate:{ideal:30,max:30}}},abr:{poorNetworkThreshold:{packetLoss:.05,rtt:350},goodNetworkThreshold:{packetLoss:.02,rtt:150},downgradeBitrate:500*1e3,minBitrate:300*1e3,maxBitrate:2e3*1e3}},ui:{messageRetractionWindow:120*1e3,contextMenuAutoHide:3e3,virtualScroll:{batchSize:15,contextLoadSize:10},screenshotEditor:{minCropSize:20,defaultMarkColor:"#FF0000",defaultMarkLineWidth:3}},chat:{maxGroupMembers:20},ai:{sessionTime:600*1e3,groupAiSessionTime:180*1e3,promptSuffix:"1",groupPromptSuffix:"**::1"},server:{signalingServerUrl:"wss://ppmc.club/webchat/signaling",allOnlineUsersApiEndpoint:"https://ppmc.club/webchat/api/v1/monitor/all-online-users",mapLocationsApiEndpoint:"https://ppmc.club/webchat/api/v1/locations",apiEndpoint:"https://ppmc.club/webchat/api/v1/chat/completions",model:"THUDM/GLM-4-32B-0414",api_key:"Bearer sk-xxxx",max_tokens:2048,ttsApiEndpoint:"https://gsv2p.acgnai.top"},peerConnectionConfig:{iceServers:[{urls:"turn:ppmc.club?transport=udp",username:"test",credential:"123456"},{urls:"turn:ppmc.club?transport=tcp",username:"test",credential:"123456"},{urls:"turns:ppmc.club",username:"test",credential:"123456"},{urls:"stun:stun.miwifi.com:3478"},{urls:"stun:stun.chat.bilibili.com:3478"}],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",iceCandidatePoolSize:0,sdpSemantics:"unified-plan"}},log=(_,S="DEBUG")=>{const w=AppSettings.logLevels,E=w[AppSettings.logLevel];if(w[S]>=E){const T=new Date().toLocaleTimeString(),k={DEBUG:"[DBG]",INFO:"[INF]",WARN:"[WRN]",ERROR:"[ERR]"}[S]||"[LOG]",x=`[${T}] ${k} ${_}`;switch(S){case"ERROR":console.error(x);break;case"WARN":console.warn(x);break;case"INFO":console.info(x);break;default:console.log(x);break}}},debounce$1=(_,S=300)=>{let w;return function(...E){clearTimeout(w),w=setTimeout(()=>_.apply(this,E),S)}},generateId=(_=8)=>{const S="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789";let w="";for(let E=0;E<_;E++)w+=S.charAt(Math.floor(Math.random()*S.length));return w},formatDate=_=>{if(!(_ instanceof Date)||isNaN(_))return"";const S=new Date,w=new Date(S.getFullYear(),S.getMonth(),S.getDate()),E=new Date(w);return E.setDate(w.getDate()-1),_>=w?_.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):_>=E?"":_.toLocaleDateString("zh-CN",{month:"short",day:"numeric"})},formatMessageText=_=>{if(typeof _!="string")return"";let w=(T=>T.replace(/[&<>"']/g,A=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"})[A]))(_);w=w.replace(/\n/g,"<br>"),w=w.replace(//g,'<span class="streaming-cursor"></span>');const E=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;return w.replace(E,T=>`<a href="${T}" target="_blank" rel="noopener noreferrer">${T}</a>`)},workerPool={hash:null};function generateFileHashWithWorker(_){return new Promise((S,w)=>{if(!window.Worker)return console.warn("Web Worker not supported. Falling back to main thread hashing."),generateFileHashOnMainThread(_).then(S).catch(w);if(!workerPool.hash)try{workerPool.hash=new Worker("hash.worker.js")}catch(k){return console.error("Failed to create hash worker. Falling back to main thread.",k),generateFileHashOnMainThread(_).then(S).catch(w)}const E=workerPool.hash,T=Date.now()+Math.random(),A=k=>{k.data.id===T&&(E.removeEventListener("message",A),k.data.error?w(new Error(k.data.error)):S(k.data.hash))};E.addEventListener("message",A),E.addEventListener("error",k=>{E.removeEventListener("message",A),w(k)}),E.postMessage({fileBlob:_,id:T})})}async function generateFileHashOnMainThread(_){if(!(_ instanceof Blob))throw new Error("Input must be a Blob object.");try{const S=await _.arrayBuffer(),w=await crypto.subtle.digest("SHA-256",S);return Array.from(new Uint8Array(w)).map(T=>T.toString(16).padStart(2,"0")).join("")}catch(S){throw log(`Failed to generate file hash on main thread: ${S.message}`,"ERROR"),S}}const generateHash=generateFileHashWithWorker;async function fetchApiStream(_,S,w,E,T){var M,N,I;const A=await fetch(_,{method:"POST",headers:w,body:JSON.stringify(S)});if(!A.ok){const V=await A.text();throw new Error(`API request failed: ${A.status} ${V}`)}if(!A.body)throw new Error("Response body is null, cannot process stream.");const k=A.body.getReader(),x=new TextDecoder;let R="",P="";for(;;){const{value:V,done:B}=await k.read();if(B)break;R+=x.decode(V,{stream:!0});let D;for(;(D=R.indexOf(`
`))>=0;){const z=R.substring(0,D).trim();if(R=R.substring(D+1),z.startsWith("data:")){const O=z.substring(5).trim();if(O==="[DONE]"){T&&T(P);return}try{const L=JSON.parse(O),F=(I=(N=(M=L.choices)==null?void 0:M[0])==null?void 0:N.delta)==null?void 0:I.content;F&&(P+=F,E&&E(L))}catch(L){log(`Error parsing stream JSON chunk: "${O}" - ${L.message}`,"WARN")}}}}T&&T(P)}const generateVideoThumbnail=_=>new Promise((S,w)=>{const E=document.createElement("video"),T=document.createElement("canvas"),A=T.getContext("2d"),k=URL.createObjectURL(_);E.style.display="none",E.muted=!0,E.playsInline=!0,E.preload="metadata",E.src=k;const x=()=>{URL.revokeObjectURL(k),E.remove(),T.remove()};E.onloadeddata=()=>{T.width=E.videoWidth,T.height=E.videoHeight,E.currentTime=.1},E.onseeked=()=>{if(!A){x(),w(new Error(" Canvas 2D "));return}A.drawImage(E,0,0,T.width,T.height);const R=T.toDataURL("image/jpeg",.8);x(),S(R)},E.onerror=R=>{x(),w(new Error(""))},document.body.appendChild(E)}),compressImage=async(_,S=100)=>{const w=S*1024,E=(k,x)=>new Promise(R=>_.toBlob(R,x,k));let T=.9,A=await E(T,"image/webp");if(A&&A.size>w)for(let k=.8;k>=.1;k-=.1){const x=await E(k,"image/webp");if(x.size<=w){A=x;break}k<.2&&(A=x)}if((!A||A.size>w)&&(T=.9,A=await E(T,"image/jpeg"),A.size>w))for(let k=.8;k>=.1;k-=.1){const x=await E(k,"image/jpeg");if(x.size<=w){A=x;break}k<.2&&(A=x)}return log(`Image compressed to ${(A.size/1024).toFixed(2)}KB`,"INFO"),A},calculateObjectFitDimensions=(_,S,w,E)=>{if(!_||!S||!w||!E)return{scale:1,renderedWidth:_,renderedHeight:S,offsetX:0,offsetY:0};const T=_/S,A=w/E;let k,x,R,P,M;return T>A?(x=S,k=x*A,M=S/E,R=(_-k)/2,P=0):(k=_,x=k/A,M=_/w,R=0,P=(S-x)/2),{scale:M,renderedWidth:k,renderedHeight:x,offsetX:R,offsetY:P}},DB_NAME="WebChatVueDB",DB_VERSION=2,STORES=["user","contacts","chats","groups","settings","appStateCache","memoryBooks","fileCache","ttsCache"];let dbPromise=null;function getDb(){return dbPromise||(dbPromise=new Promise((_,S)=>{const w=indexedDB.open(DB_NAME,DB_VERSION);w.onerror=E=>{log(`: ${E.target.errorCode}`,"ERROR"),S(E.target.errorCode)},w.onsuccess=E=>{log(` (: ${DB_VERSION})`,"INFO"),_(E.target.result)},w.onupgradeneeded=E=>{const T=E.target.result;log(`... : ${E.oldVersion}, : ${E.newVersion}`,"INFO"),STORES.forEach(A=>{T.objectStoreNames.contains(A)||(T.createObjectStore(A,{keyPath:"id"}),log(` ${A} `,"INFO"))}),log("","INFO")}})),dbPromise}async function performDbOperation(_,S,w){const E=await getDb();return new Promise((T,A)=>{try{const k=E.transaction(_,S),x=k.objectStore(_);k.oncomplete=()=>{},k.onerror=P=>{log(` on ${_}: ${P.target.error}`,"ERROR"),A(P.target.error)};const R=w(x);R.onsuccess=()=>T(R.result),R.onerror=P=>{log(` on ${_}: ${P.target.error}`,"ERROR"),A(P.target.error)}}catch(k){log(` on ${_}: ${k}`,"ERROR"),A(k)}})}const dbService={getItem:(_,S)=>performDbOperation(_,"readonly",w=>w.get(S)),getAllItems:_=>performDbOperation(_,"readonly",S=>S.getAll()),setItem:(_,S)=>{if(["fileCache","ttsCache","appStateCache"].includes(_))return log(`dbService.setItem: Bypassing JSON.stringify for blob store '${_}'.`,"DEBUG"),performDbOperation(_,"readwrite",E=>E.put(S));{const E=JSON.parse(JSON.stringify(S));return performDbOperation(_,"readwrite",T=>T.put(E))}},removeItem:(_,S)=>performDbOperation(_,"readwrite",w=>w.delete(S)),clearStore:_=>performDbOperation(_,"readwrite",S=>S.clear()),async clearAllData(){log("...","WARN");const _=await getDb(),w=Array.from(_.objectStoreNames).map(E=>this.clearStore(E));await Promise.all(w),log("","INFO")}},events$1=new Map,eventBus={on(_,S){events$1.has(_)||events$1.set(_,new Set),events$1.get(_).add(S),log(`Event listener added: ${_}`,"DEBUG")},emit(_,...S){if(events$1.has(_)){const w=S.map(E=>typeof E=="object"&&E!==null&&E.constructor.name==="Blob"?"[Blob]":E);log(`Emitting event: ${_} with args: ${JSON.stringify(w)}`,"DEBUG"),events$1.get(_).forEach(E=>{try{E(...S)}catch(T){log(`Error in event listener for ${_}: ${T.message}
${T.stack}`,"ERROR")}})}},off(_,S){events$1.has(_)&&(S?(events$1.get(_).delete(S),log(`Event listener removed: ${_}`,"DEBUG")):(events$1.delete(_),log(`All listeners removed for event: ${_}`,"DEBUG")))}},THEME_LIST={"-":{name:"",css:"themes//genshin-light.css",dataJs:"data//.json"},"-":{name:"",css:"themes//genshin-dark.css",dataJs:"data//.json"},"-":{name:"",css:"themes//dungeon-meshi-light.css",dataJs:"data//.json"},"-":{name:"",css:"themes//dungeon-meshi-dark.css",dataJs:"data//.json"},"-":{name:"",css:"themes//btth-light.css",dataJs:"data//.json"},"-":{name:"",css:"themes//btth-dark.css",dataJs:"data//.json"},"-":{name:"",css:"themes//shinchan-light.css",dataJs:"data//.json"},"-":{name:"",css:"themes//shinchan-dark.css",dataJs:"data//.json"},"-":{name:"",css:"themes//english-light.css",dataJs:"data//.json"},"-":{name:"",css:"themes//english-dark.css",dataJs:"data//.json"},"-":{name:"",css:"themes//cs-light.css",dataJs:"data//.json"},"-":{name:"",css:"themes//cs-dark.css",dataJs:"data//.json"},"MCP-":{name:"MCP",css:"themes//mcp-light.css",dataJs:"data//MCP.json"},"MCP-":{name:"MCP",css:"themes//mcp-dark.css",dataJs:"data//MCP.json"}},LLMProviders={webchat:{label:"WebChat",defaultEndpoint:"https://ppmc.club/webchat/api/v1/chat/completions",defaultModel:"THUDM/GLM-4-32B-0414",models:[{key:"Qwen/Qwen3-14B",label:"Qwen3 14B"},{key:"Qwen/Qwen3-30B-A3B",label:"Qwen3 30B"},{key:"THUDM/GLM-4-32B-0414",label:"GLM-4 32B"},{key:"THUDM/GLM-Z1-Rumination-32B-0414",label:"GLM-Z1 Rumination 32B"},{key:"deepseek-ai/DeepSeek-R1-0528-Qwen3-8B",label:"DeepSeek-R1 Qwen3 8B"}]},siliconflow:{label:"SiliconFlow",defaultEndpoint:"https://api.siliconflow.cn/v1/chat/completions",defaultModel:"Qwen/Qwen3-14B",models:[{key:"Qwen/Qwen3-14B",label:"Qwen3 14B"},{key:"Qwen/Qwen3-30B-A3B",label:"Qwen3 30B"},{key:"THUDM/GLM-4-32B-0414",label:"GLM-4 32B"},{key:"THUDM/GLM-Z1-Rumination-32B-0414",label:"GLM-Z1 Rumination 32B"},{key:"deepseek-ai/DeepSeek-R1-0528-Qwen3-8B",label:"DeepSeek-R1 Qwen3 8B"}]},dashscope:{label:"",defaultEndpoint:"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",defaultModel:"qwen-turbo",models:[{key:"qwen-turbo",label:"Qwen Turbo"},{key:"qwen-plus",label:"Qwen Plus"},{key:"qwen-max",label:"Qwen Max"},{key:"qwen-long",label:"Qwen Long"},{key:"qwen3-32b",label:"Qwen3 32B"},{key:"qwen3-14b",label:"Qwen3 14B"},{key:"qwen3-8b",label:"Qwen3 8B"},{key:"qwen2-72b-instruct",label:"Qwen2 72B Instruct"},{key:"qwen2-57b-a14b-instruct",label:"Qwen2 57B Instruct"},{key:"qwen2-7b-instruct",label:"Qwen2 7B Instruct"},{key:"qwen1.5-110b-chat",label:"Qwen1.5 110B Chat"},{key:"qwen1.5-72b-chat",label:"Qwen1.5 72B Chat"},{key:"qwen1.5-32b-chat",label:"Qwen1.5 32B Chat"},{key:"qwen-vl-max",label:"Qwen VL Max"},{key:"qwen-vl-plus",label:"Qwen VL Plus"},{key:"deepseek-v3",label:"DeepSeek V3"},{key:"deepseek-r1",label:"DeepSeek R1"}]},deepseek:{label:"DeepSeek",defaultEndpoint:"https://api.deepseek.com/v1/chat/completions",defaultModel:"deepseek-chat",models:[{key:"deepseek-chat",label:"DeepSeek-V3"},{key:"deepseek-reasoner",label:"DeepSeek R1"}]},openai:{label:"OpenAI",defaultEndpoint:"https://api.openai.com/v1/chat/completions",defaultModel:"gpt-4o",models:[{key:"gpt-3.5-turbo",label:"GPT-3.5 Turbo"},{key:"gpt-3.5-turbo-0125",label:"GPT-3.5 Turbo (0125)"},{key:"gpt-4o",label:"GPT-4o"},{key:"gpt-4o-mini-2024-07-18",label:"GPT-4o mini (2024-07-18)"},{key:"gpt-4o-2024-05-13",label:"GPT-4o (2024-05-13)"},{key:"gpt-4o-2024-08-06",label:"GPT-4o (2024-08-06)"},{key:"gpt-4o-2024-11-20",label:"GPT-4o (2024-11-20)"},{key:"gpt-4-turbo",label:"GPT-4 Turbo"},{key:"gpt-4-turbo-2024-04-09",label:"GPT-4 Turbo (2024-04-09)"},{key:"gpt-4-0613",label:"GPT-4 (0613)"},{key:"gpt-4.1-2025-04-14",label:"GPT-4.1 (2025-04-14)"},{key:"o1-2024-12-17",label:"o1 (2024-12-17)"},{key:"o3-mini-2025-01-31",label:"o3-mini (2025-01-31)"},{key:"o4-mini-2025-04-16",label:"o4-mini (2025-04-16)"}]},anthropic:{label:"Anthropic",defaultEndpoint:"https://api.anthropic.com/v1/messages",defaultModel:"claude-3-5-sonnet-latest",models:[{key:"claude-3-opus-20240229",label:"Claude 3 Opus (20240229)"},{key:"claude-3-sonnet-20240229",label:"Claude 3 Sonnet (20240229)"},{key:"claude-3-haiku-20240307",label:"Claude 3 Haiku (20240307)"},{key:"claude-3-5-sonnet-latest",label:"Claude 3.5 Sonnet (Latest)"},{key:"claude-3-5-sonnet-20241022",label:"Claude 3.5 Sonnet (20241022)"},{key:"claude-3-5-sonnet-20240620",label:"Claude 3.5 Sonnet (20240620)"},{key:"claude-3-5-haiku-latest",label:"Claude 3.5 Haiku (Latest)"},{key:"claude-3-5-haiku-20241022",label:"Claude 3.5 Haiku (20241022)"},{key:"claude-3-7-sonnet-latest",label:"Claude 3.7 Sonnet (Latest)"},{key:"claude-3-7-sonnet-20250219",label:"Claude 3.7 Sonnet (20250219)"},{key:"claude-opus-4-latest",label:"Claude Opus 4 (Latest)"},{key:"claude-opus-4-20250514",label:"Claude Opus 4 (20250514)"},{key:"claude-sonnet-4-latest",label:"Claude Sonnet 4 (Latest)"},{key:"claude-sonnet-4-20250514",label:"Claude Sonnet 4 (20250514)"}]},custom:{label:"",defaultEndpoint:"",defaultModel:"",models:[]}},useSettingsStore=defineStore("settings",()=>{const _=ref$1(THEME_LIST),S=ref$1(localStorage.getItem("colorScheme")||"auto"),w=ref$1(localStorage.getItem("currentThemeKey")||"-"),E=ref$1({}),T=ref$1({light:null,dark:null}),A=ref$1(!1),k=ref$1(JSON.parse(localStorage.getItem("isAiNoiseSuppressionEnabled")||"false")),x=ref$1(!0),R=computed(()=>S.value==="light"||S.value==="dark"?S.value:typeof window.matchMedia!="function"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),P=computed(()=>_.value[w.value]),M=computed(()=>{var q;return((q=P.value)==null?void 0:q.specialContacts)||[]});async function N(){const q=new Image;q.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",q.onload=q.onerror=()=>{x.value=q.height===2,log(`WebP support detected: ${x.value}`,"INFO")}}async function I(q){const W=_.value[q];if(W&&W.dataJs&&!W.specialContacts)try{log(`Fetching theme data for ${q} from ${W.dataJs}`,"DEBUG");const X=await fetch(`${W.dataJs}`);if(!X.ok)throw new Error(`HTTP error! status: ${X.status}`);const te=await X.json();_.value[q]={...W,specialContacts:te},log(`Successfully loaded and set special contacts for ${q}. Count: ${te.length}`,"INFO")}catch(X){log(`Failed to load theme data for ${q}: ${X.message}`,"ERROR"),_.value[q]&&(_.value[q].specialContacts=[])}else W&&!W.dataJs&&(log(`Theme ${q} has no dataJs file specified.`,"DEBUG"),_.value[q]&&(_.value[q].specialContacts=[]))}async function V(){await N();const q=await dbService.getItem("settings","apiSettings"),W=(q==null?void 0:q.llmProvider)||"webchat",X=LLMProviders[W]||LLMProviders.webchat;E.value={llmProvider:W,apiEndpoint:(q==null?void 0:q.apiEndpoint)||X.defaultEndpoint,model:(q==null?void 0:q.model)||X.defaultModel,apiKey:(q==null?void 0:q.apiKey)||AppSettings.server.api_key,maxTokens:(q==null?void 0:q.maxTokens)||AppSettings.server.max_tokens,ttsApiEndpoint:(q==null?void 0:q.ttsApiEndpoint)||AppSettings.server.ttsApiEndpoint};try{const[te,ee]=await Promise.all([dbService.getItem("appStateCache","background_image_light"),dbService.getItem("appStateCache","background_image_dark")]);te!=null&&te.imageBlob&&(T.value.light=URL.createObjectURL(te.imageBlob)),ee!=null&&ee.imageBlob&&(T.value.dark=URL.createObjectURL(ee.imageBlob))}catch(te){log(`: ${te.message}`,"ERROR")}await B(!0),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",async()=>{S.value==="auto"&&await B(!0)}),log("Store","INFO")}async function B(q=!1){if((w.value.includes("-")?"dark":"light")!==R.value){const X=w.value.replace(/-|-/,""),te=R.value==="dark"?"-":"-",ee=X+te;_.value[ee]&&await D(ee)}else q&&await I(w.value);eventBus.emit("colorSchemeChanged",R.value)}async function D(q,W=null){if(!_.value[q]||w.value===q){w.value!==q&&log(`Attempted to apply non-existent theme: ${q}`,"WARN");return}A.value=!0,await new Promise(te=>setTimeout(te,100)),await(async()=>{w.value=q,localStorage.setItem("currentThemeKey",q),await I(q),eventBus.emit("themeChanged")})(),await new Promise(te=>setTimeout(te,300)),A.value=!1}async function z(q){q||(q=w.value),await I(q)}async function O(q,W=null){S.value=q,localStorage.setItem("colorScheme",q),await B(!0)}function L(q){typeof q=="boolean"&&(k.value=q,localStorage.setItem("isAiNoiseSuppressionEnabled",JSON.stringify(q)),log(`AI Noise Suppression set to: ${q}`,"INFO"))}async function F(q,W){E.value[q]!==W&&(E.value[q]=W,await dbService.setItem("settings",{id:"apiSettings",...E.value}),log(`API Setting saved: ${q}`,"INFO"),eventBus.emit("apiSettingsChanged"))}async function $(q){const W=LLMProviders[q];W&&(E.value.llmProvider=q,E.value.apiEndpoint=W.defaultEndpoint,E.value.model=W.defaultModel,await dbService.setItem("settings",{id:"apiSettings",...E.value}),log(`LLM Provider changed to ${q}.`,"INFO"),eventBus.emit("apiSettingsChanged"))}async function H(q,W){const X=T.value[W];X&&URL.revokeObjectURL(X),T.value[W]=URL.createObjectURL(q),await dbService.setItem("appStateCache",{id:`background_image_${W}`,imageBlob:q}),log(` ${W} `,"INFO")}async function j(q){const W=T.value[q];W&&URL.revokeObjectURL(W),T.value[q]=null,await dbService.removeItem("appStateCache",`background_image_${q}`),log(` ${q} `,"INFO")}return{themes:_,colorScheme:S,currentThemeKey:w,apiSettings:E,customBackgrounds:T,isThemeTransitioning:A,isAiNoiseSuppressionEnabled:k,isWebPSupported:x,setAiNoiseSuppression:L,effectiveColorScheme:R,currentTheme:P,currentSpecialContacts:M,init:V,applyTheme:D,setColorScheme:O,saveApiSetting:F,handleLlmProviderChange:$,setCustomBackground:H,removeCustomBackground:j,ensureThemeDataIsLoaded:z,_loadThemeData:I}});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}function getDefaultExportFromCjs(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var browser$3={exports:{}},process=browser$3.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(_){if(cachedSetTimeout===setTimeout)return setTimeout(_,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(_,0);try{return cachedSetTimeout(_,0)}catch{try{return cachedSetTimeout.call(null,_,0)}catch{return cachedSetTimeout.call(this,_,0)}}}function runClearTimeout(_){if(cachedClearTimeout===clearTimeout)return clearTimeout(_);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(_);try{return cachedClearTimeout(_)}catch{try{return cachedClearTimeout.call(null,_)}catch{return cachedClearTimeout.call(this,_)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var _=runTimeout(cleanUpNextTick);draining=!0;for(var S=queue.length;S;){for(currentQueue=queue,queue=[];++queueIndex<S;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,S=queue.length}currentQueue=null,draining=!1,runClearTimeout(_)}}process.nextTick=function(_){var S=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)S[w-1]=arguments[w];queue.push(new Item(_,S)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(_,S){this.fun=_,this.array=S}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(_){return[]};process.binding=function(_){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(_){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};var browserExports=browser$3.exports;const process$1=getDefaultExportFromCjs(browserExports);var browser$2={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var _=1e3,S=_*60,w=S*60,E=w*24,T=E*7,A=E*365.25;ms=function(M,N){N=N||{};var I=typeof M;if(I==="string"&&M.length>0)return k(M);if(I==="number"&&isFinite(M))return N.long?R(M):x(M);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(M))};function k(M){if(M=String(M),!(M.length>100)){var N=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(M);if(N){var I=parseFloat(N[1]),V=(N[2]||"ms").toLowerCase();switch(V){case"years":case"year":case"yrs":case"yr":case"y":return I*A;case"weeks":case"week":case"w":return I*T;case"days":case"day":case"d":return I*E;case"hours":case"hour":case"hrs":case"hr":case"h":return I*w;case"minutes":case"minute":case"mins":case"min":case"m":return I*S;case"seconds":case"second":case"secs":case"sec":case"s":return I*_;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return I;default:return}}}}function x(M){var N=Math.abs(M);return N>=E?Math.round(M/E)+"d":N>=w?Math.round(M/w)+"h":N>=S?Math.round(M/S)+"m":N>=_?Math.round(M/_)+"s":M+"ms"}function R(M){var N=Math.abs(M);return N>=E?P(M,N,E,"day"):N>=w?P(M,N,w,"hour"):N>=S?P(M,N,S,"minute"):N>=_?P(M,N,_,"second"):M+" ms"}function P(M,N,I,V){var B=N>=I*1.5;return Math.round(M/I)+" "+V+(B?"s":"")}return ms}var common$1,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common$1;hasRequiredCommon=1;function _(S){E.debug=E,E.default=E,E.coerce=P,E.disable=x,E.enable=A,E.enabled=R,E.humanize=requireMs(),E.destroy=M,Object.keys(S).forEach(N=>{E[N]=S[N]}),E.names=[],E.skips=[],E.formatters={};function w(N){let I=0;for(let V=0;V<N.length;V++)I=(I<<5)-I+N.charCodeAt(V),I|=0;return E.colors[Math.abs(I)%E.colors.length]}E.selectColor=w;function E(N){let I,V=null,B,D;function z(...O){if(!z.enabled)return;const L=z,F=Number(new Date),$=F-(I||F);L.diff=$,L.prev=I,L.curr=F,I=F,O[0]=E.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let H=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(q,W)=>{if(q==="%%")return"%";H++;const X=E.formatters[W];if(typeof X=="function"){const te=O[H];q=X.call(L,te),O.splice(H,1),H--}return q}),E.formatArgs.call(L,O),(L.log||E.log).apply(L,O)}return z.namespace=N,z.useColors=E.useColors(),z.color=E.selectColor(N),z.extend=T,z.destroy=E.destroy,Object.defineProperty(z,"enabled",{enumerable:!0,configurable:!1,get:()=>V!==null?V:(B!==E.namespaces&&(B=E.namespaces,D=E.enabled(N)),D),set:O=>{V=O}}),typeof E.init=="function"&&E.init(z),z}function T(N,I){const V=E(this.namespace+(typeof I>"u"?":":I)+N);return V.log=this.log,V}function A(N){E.save(N),E.namespaces=N,E.names=[],E.skips=[];const I=(typeof N=="string"?N:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const V of I)V[0]==="-"?E.skips.push(V.slice(1)):E.names.push(V)}function k(N,I){let V=0,B=0,D=-1,z=0;for(;V<N.length;)if(B<I.length&&(I[B]===N[V]||I[B]==="*"))I[B]==="*"?(D=B,z=V,B++):(V++,B++);else if(D!==-1)B=D+1,z++,V=z;else return!1;for(;B<I.length&&I[B]==="*";)B++;return B===I.length}function x(){const N=[...E.names,...E.skips.map(I=>"-"+I)].join(",");return E.enable(""),N}function R(N){for(const I of E.skips)if(k(N,I))return!1;for(const I of E.names)if(k(N,I))return!0;return!1}function P(N){return N instanceof Error?N.stack||N.message:N}function M(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return E.enable(E.load()),E}return common$1=_,common$1}var hasRequiredBrowser$2;function requireBrowser$2(){return hasRequiredBrowser$2||(hasRequiredBrowser$2=1,(function(_,S){var w={};S.formatArgs=T,S.save=A,S.load=k,S.useColors=E,S.storage=x(),S.destroy=(()=>{let P=!1;return()=>{P||(P=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),S.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function E(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let P;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(P=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(P[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function T(P){if(P[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+P[0]+(this.useColors?"%c ":" ")+"+"+_.exports.humanize(this.diff),!this.useColors)return;const M="color: "+this.color;P.splice(1,0,M,"color: inherit");let N=0,I=0;P[0].replace(/%[a-zA-Z%]/g,V=>{V!=="%%"&&(N++,V==="%c"&&(I=N))}),P.splice(I,0,M)}S.log=console.debug||console.log||(()=>{});function A(P){try{P?S.storage.setItem("debug",P):S.storage.removeItem("debug")}catch{}}function k(){let P;try{P=S.storage.getItem("debug")||S.storage.getItem("DEBUG")}catch{}return!P&&typeof process$1<"u"&&"env"in process$1&&(P=w.DEBUG),P}function x(){try{return localStorage}catch{}}_.exports=requireCommon()(S);const{formatters:R}=_.exports;R.j=function(P){try{return JSON.stringify(P)}catch(M){return"[UnexpectedJSONParseError]: "+M.message}}})(browser$2,browser$2.exports)),browser$2.exports}var getBrowserRtc,hasRequiredGetBrowserRtc;function requireGetBrowserRtc(){return hasRequiredGetBrowserRtc||(hasRequiredGetBrowserRtc=1,getBrowserRtc=function(){if(typeof globalThis>"u")return null;var S={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return S.RTCPeerConnection?S:null}),getBrowserRtc}var browser$1={exports:{}},safeBuffer={exports:{}},dist={},hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,(function(_){Object.defineProperties(_,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var S={},w={};w.byteLength=M,w.toByteArray=I,w.fromByteArray=D;for(var E=[],T=[],A=typeof Uint8Array<"u"?Uint8Array:Array,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=0,R=k.length;x<R;++x)E[x]=k[x],T[k.charCodeAt(x)]=x;T[45]=62,T[95]=63;function P(L){var F=L.length;if(F%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var $=L.indexOf("=");$===-1&&($=F);var H=$===F?0:4-$%4;return[$,H]}function M(L){var F=P(L),$=F[0],H=F[1];return($+H)*3/4-H}function N(L,F,$){return(F+$)*3/4-$}function I(L){var F,$=P(L),H=$[0],j=$[1],q=new A(N(L,H,j)),W=0,X=j>0?H-4:H,te;for(te=0;te<X;te+=4)F=T[L.charCodeAt(te)]<<18|T[L.charCodeAt(te+1)]<<12|T[L.charCodeAt(te+2)]<<6|T[L.charCodeAt(te+3)],q[W++]=F>>16&255,q[W++]=F>>8&255,q[W++]=F&255;return j===2&&(F=T[L.charCodeAt(te)]<<2|T[L.charCodeAt(te+1)]>>4,q[W++]=F&255),j===1&&(F=T[L.charCodeAt(te)]<<10|T[L.charCodeAt(te+1)]<<4|T[L.charCodeAt(te+2)]>>2,q[W++]=F>>8&255,q[W++]=F&255),q}function V(L){return E[L>>18&63]+E[L>>12&63]+E[L>>6&63]+E[L&63]}function B(L,F,$){for(var H,j=[],q=F;q<$;q+=3)H=(L[q]<<16&16711680)+(L[q+1]<<8&65280)+(L[q+2]&255),j.push(V(H));return j.join("")}function D(L){for(var F,$=L.length,H=$%3,j=[],q=16383,W=0,X=$-H;W<X;W+=q)j.push(B(L,W,W+q>X?X:W+q));return H===1?(F=L[$-1],j.push(E[F>>2]+E[F<<4&63]+"==")):H===2&&(F=(L[$-2]<<8)+L[$-1],j.push(E[F>>10]+E[F>>4&63]+E[F<<2&63]+"=")),j.join("")}var z={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */z.read=function(L,F,$,H,j){var q,W,X=j*8-H-1,te=(1<<X)-1,ee=te>>1,G=-7,de=$?j-1:0,le=$?-1:1,ae=L[F+de];for(de+=le,q=ae&(1<<-G)-1,ae>>=-G,G+=X;G>0;q=q*256+L[F+de],de+=le,G-=8);for(W=q&(1<<-G)-1,q>>=-G,G+=H;G>0;W=W*256+L[F+de],de+=le,G-=8);if(q===0)q=1-ee;else{if(q===te)return W?NaN:(ae?-1:1)*(1/0);W=W+Math.pow(2,H),q=q-ee}return(ae?-1:1)*W*Math.pow(2,q-H)},z.write=function(L,F,$,H,j,q){var W,X,te,ee=q*8-j-1,G=(1<<ee)-1,de=G>>1,le=j===23?Math.pow(2,-24)-Math.pow(2,-77):0,ae=H?0:q-1,Q=H?1:-1,ie=F<0||F===0&&1/F<0?1:0;for(F=Math.abs(F),isNaN(F)||F===1/0?(X=isNaN(F)?1:0,W=G):(W=Math.floor(Math.log(F)/Math.LN2),F*(te=Math.pow(2,-W))<1&&(W--,te*=2),W+de>=1?F+=le/te:F+=le*Math.pow(2,1-de),F*te>=2&&(W++,te/=2),W+de>=G?(X=0,W=G):W+de>=1?(X=(F*te-1)*Math.pow(2,j),W=W+de):(X=F*Math.pow(2,de-1)*Math.pow(2,j),W=0));j>=8;L[$+ae]=X&255,ae+=Q,X/=256,j-=8);for(W=W<<j|X,ee+=j;ee>0;L[$+ae]=W&255,ae+=Q,W/=256,ee-=8);L[$+ae-Q]|=ie*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(L){const F=w,$=z,H=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;L.Buffer=G,L.SlowBuffer=me,L.INSPECT_MAX_BYTES=50;const j=2147483647;L.kMaxLength=j;const{Uint8Array:q,ArrayBuffer:W,SharedArrayBuffer:X}=globalThis;G.TYPED_ARRAY_SUPPORT=te(),!G.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function te(){try{const re=new q(1),U={foo:function(){return 42}};return Object.setPrototypeOf(U,q.prototype),Object.setPrototypeOf(re,U),re.foo()===42}catch{return!1}}Object.defineProperty(G.prototype,"parent",{enumerable:!0,get:function(){if(G.isBuffer(this))return this.buffer}}),Object.defineProperty(G.prototype,"offset",{enumerable:!0,get:function(){if(G.isBuffer(this))return this.byteOffset}});function ee(re){if(re>j)throw new RangeError('The value "'+re+'" is invalid for option "size"');const U=new q(re);return Object.setPrototypeOf(U,G.prototype),U}function G(re,U,Y){if(typeof re=="number"){if(typeof U=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Q(re)}return de(re,U,Y)}G.poolSize=8192;function de(re,U,Y){if(typeof re=="string")return ie(re,U);if(W.isView(re))return J(re);if(re==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re);if(Le(re,W)||re&&Le(re.buffer,W)||typeof X<"u"&&(Le(re,X)||re&&Le(re.buffer,X)))return ue(re,U,Y);if(typeof re=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=re.valueOf&&re.valueOf();if(he!=null&&he!==re)return G.from(he,U,Y);const _e=pe(re);if(_e)return _e;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof re[Symbol.toPrimitive]=="function")return G.from(re[Symbol.toPrimitive]("string"),U,Y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re)}G.from=function(re,U,Y){return de(re,U,Y)},Object.setPrototypeOf(G.prototype,q.prototype),Object.setPrototypeOf(G,q);function le(re){if(typeof re!="number")throw new TypeError('"size" argument must be of type number');if(re<0)throw new RangeError('The value "'+re+'" is invalid for option "size"')}function ae(re,U,Y){return le(re),re<=0?ee(re):U!==void 0?typeof Y=="string"?ee(re).fill(U,Y):ee(re).fill(U):ee(re)}G.alloc=function(re,U,Y){return ae(re,U,Y)};function Q(re){return le(re),ee(re<0?0:Re(re)|0)}G.allocUnsafe=function(re){return Q(re)},G.allocUnsafeSlow=function(re){return Q(re)};function ie(re,U){if((typeof U!="string"||U==="")&&(U="utf8"),!G.isEncoding(U))throw new TypeError("Unknown encoding: "+U);const Y=ge(re,U)|0;let he=ee(Y);const _e=he.write(re,U);return _e!==Y&&(he=he.slice(0,_e)),he}function Z(re){const U=re.length<0?0:Re(re.length)|0,Y=ee(U);for(let he=0;he<U;he+=1)Y[he]=re[he]&255;return Y}function J(re){if(Le(re,q)){const U=new q(re);return ue(U.buffer,U.byteOffset,U.byteLength)}return Z(re)}function ue(re,U,Y){if(U<0||re.byteLength<U)throw new RangeError('"offset" is outside of buffer bounds');if(re.byteLength<U+(Y||0))throw new RangeError('"length" is outside of buffer bounds');let he;return U===void 0&&Y===void 0?he=new q(re):Y===void 0?he=new q(re,U):he=new q(re,U,Y),Object.setPrototypeOf(he,G.prototype),he}function pe(re){if(G.isBuffer(re)){const U=Re(re.length)|0,Y=ee(U);return Y.length===0||re.copy(Y,0,0,U),Y}if(re.length!==void 0)return typeof re.length!="number"||He(re.length)?ee(0):Z(re);if(re.type==="Buffer"&&Array.isArray(re.data))return Z(re.data)}function Re(re){if(re>=j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");return re|0}function me(re){return+re!=re&&(re=0),G.alloc(+re)}G.isBuffer=function(U){return U!=null&&U._isBuffer===!0&&U!==G.prototype},G.compare=function(U,Y){if(Le(U,q)&&(U=G.from(U,U.offset,U.byteLength)),Le(Y,q)&&(Y=G.from(Y,Y.offset,Y.byteLength)),!G.isBuffer(U)||!G.isBuffer(Y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(U===Y)return 0;let he=U.length,_e=Y.length;for(let ke=0,Ie=Math.min(he,_e);ke<Ie;++ke)if(U[ke]!==Y[ke]){he=U[ke],_e=Y[ke];break}return he<_e?-1:_e<he?1:0},G.isEncoding=function(U){switch(String(U).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},G.concat=function(U,Y){if(!Array.isArray(U))throw new TypeError('"list" argument must be an Array of Buffers');if(U.length===0)return G.alloc(0);let he;if(Y===void 0)for(Y=0,he=0;he<U.length;++he)Y+=U[he].length;const _e=G.allocUnsafe(Y);let ke=0;for(he=0;he<U.length;++he){let Ie=U[he];if(Le(Ie,q))ke+Ie.length>_e.length?(G.isBuffer(Ie)||(Ie=G.from(Ie)),Ie.copy(_e,ke)):q.prototype.set.call(_e,Ie,ke);else if(G.isBuffer(Ie))Ie.copy(_e,ke);else throw new TypeError('"list" argument must be an Array of Buffers');ke+=Ie.length}return _e};function ge(re,U){if(G.isBuffer(re))return re.length;if(W.isView(re)||Le(re,W))return re.byteLength;if(typeof re!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof re);const Y=re.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&Y===0)return 0;let _e=!1;for(;;)switch(U){case"ascii":case"latin1":case"binary":return Y;case"utf8":case"utf-8":return ot(re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y*2;case"hex":return Y>>>1;case"base64":return Me(re).length;default:if(_e)return he?-1:ot(re).length;U=(""+U).toLowerCase(),_e=!0}}G.byteLength=ge;function we(re,U,Y){let he=!1;if((U===void 0||U<0)&&(U=0),U>this.length||((Y===void 0||Y>this.length)&&(Y=this.length),Y<=0)||(Y>>>=0,U>>>=0,Y<=U))return"";for(re||(re="utf8");;)switch(re){case"hex":return Oe(this,U,Y);case"utf8":case"utf-8":return Ee(this,U,Y);case"ascii":return Ne(this,U,Y);case"latin1":case"binary":return ve(this,U,Y);case"base64":return fe(this,U,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,U,Y);default:if(he)throw new TypeError("Unknown encoding: "+re);re=(re+"").toLowerCase(),he=!0}}G.prototype._isBuffer=!0;function oe(re,U,Y){const he=re[U];re[U]=re[Y],re[Y]=he}G.prototype.swap16=function(){const U=this.length;if(U%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Y=0;Y<U;Y+=2)oe(this,Y,Y+1);return this},G.prototype.swap32=function(){const U=this.length;if(U%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Y=0;Y<U;Y+=4)oe(this,Y,Y+3),oe(this,Y+1,Y+2);return this},G.prototype.swap64=function(){const U=this.length;if(U%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Y=0;Y<U;Y+=8)oe(this,Y,Y+7),oe(this,Y+1,Y+6),oe(this,Y+2,Y+5),oe(this,Y+3,Y+4);return this},G.prototype.toString=function(){const U=this.length;return U===0?"":arguments.length===0?Ee(this,0,U):we.apply(this,arguments)},G.prototype.toLocaleString=G.prototype.toString,G.prototype.equals=function(U){if(!G.isBuffer(U))throw new TypeError("Argument must be a Buffer");return this===U?!0:G.compare(this,U)===0},G.prototype.inspect=function(){let U="";const Y=L.INSPECT_MAX_BYTES;return U=this.toString("hex",0,Y).replace(/(.{2})/g,"$1 ").trim(),this.length>Y&&(U+=" ... "),"<Buffer "+U+">"},H&&(G.prototype[H]=G.prototype.inspect),G.prototype.compare=function(U,Y,he,_e,ke){if(Le(U,q)&&(U=G.from(U,U.offset,U.byteLength)),!G.isBuffer(U))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof U);if(Y===void 0&&(Y=0),he===void 0&&(he=U?U.length:0),_e===void 0&&(_e=0),ke===void 0&&(ke=this.length),Y<0||he>U.length||_e<0||ke>this.length)throw new RangeError("out of range index");if(_e>=ke&&Y>=he)return 0;if(_e>=ke)return-1;if(Y>=he)return 1;if(Y>>>=0,he>>>=0,_e>>>=0,ke>>>=0,this===U)return 0;let Ie=ke-_e,qe=he-Y;const Xe=Math.min(Ie,qe),Ye=this.slice(_e,ke),Je=U.slice(Y,he);for(let Ke=0;Ke<Xe;++Ke)if(Ye[Ke]!==Je[Ke]){Ie=Ye[Ke],qe=Je[Ke];break}return Ie<qe?-1:qe<Ie?1:0};function ce(re,U,Y,he,_e){if(re.length===0)return-1;if(typeof Y=="string"?(he=Y,Y=0):Y>2147483647?Y=2147483647:Y<-2147483648&&(Y=-2147483648),Y=+Y,He(Y)&&(Y=_e?0:re.length-1),Y<0&&(Y=re.length+Y),Y>=re.length){if(_e)return-1;Y=re.length-1}else if(Y<0)if(_e)Y=0;else return-1;if(typeof U=="string"&&(U=G.from(U,he)),G.isBuffer(U))return U.length===0?-1:ye(re,U,Y,he,_e);if(typeof U=="number")return U=U&255,typeof q.prototype.indexOf=="function"?_e?q.prototype.indexOf.call(re,U,Y):q.prototype.lastIndexOf.call(re,U,Y):ye(re,[U],Y,he,_e);throw new TypeError("val must be string, number or Buffer")}function ye(re,U,Y,he,_e){let ke=1,Ie=re.length,qe=U.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(re.length<2||U.length<2)return-1;ke=2,Ie/=2,qe/=2,Y/=2}function Xe(Je,Ke){return ke===1?Je[Ke]:Je.readUInt16BE(Ke*ke)}let Ye;if(_e){let Je=-1;for(Ye=Y;Ye<Ie;Ye++)if(Xe(re,Ye)===Xe(U,Je===-1?0:Ye-Je)){if(Je===-1&&(Je=Ye),Ye-Je+1===qe)return Je*ke}else Je!==-1&&(Ye-=Ye-Je),Je=-1}else for(Y+qe>Ie&&(Y=Ie-qe),Ye=Y;Ye>=0;Ye--){let Je=!0;for(let Ke=0;Ke<qe;Ke++)if(Xe(re,Ye+Ke)!==Xe(U,Ke)){Je=!1;break}if(Je)return Ye}return-1}G.prototype.includes=function(U,Y,he){return this.indexOf(U,Y,he)!==-1},G.prototype.indexOf=function(U,Y,he){return ce(this,U,Y,he,!0)},G.prototype.lastIndexOf=function(U,Y,he){return ce(this,U,Y,he,!1)};function xe(re,U,Y,he){Y=Number(Y)||0;const _e=re.length-Y;he?(he=Number(he),he>_e&&(he=_e)):he=_e;const ke=U.length;he>ke/2&&(he=ke/2);let Ie;for(Ie=0;Ie<he;++Ie){const qe=parseInt(U.substr(Ie*2,2),16);if(He(qe))return Ie;re[Y+Ie]=qe}return Ie}function Ae(re,U,Y,he){return Be(ot(U,re.length-Y),re,Y,he)}function se(re,U,Y,he){return Be(ct(U),re,Y,he)}function K(re,U,Y,he){return Be(Me(U),re,Y,he)}function ne(re,U,Y,he){return Be(ut(U,re.length-Y),re,Y,he)}G.prototype.write=function(U,Y,he,_e){if(Y===void 0)_e="utf8",he=this.length,Y=0;else if(he===void 0&&typeof Y=="string")_e=Y,he=this.length,Y=0;else if(isFinite(Y))Y=Y>>>0,isFinite(he)?(he=he>>>0,_e===void 0&&(_e="utf8")):(_e=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ke=this.length-Y;if((he===void 0||he>ke)&&(he=ke),U.length>0&&(he<0||Y<0)||Y>this.length)throw new RangeError("Attempt to write outside buffer bounds");_e||(_e="utf8");let Ie=!1;for(;;)switch(_e){case"hex":return xe(this,U,Y,he);case"utf8":case"utf-8":return Ae(this,U,Y,he);case"ascii":case"latin1":case"binary":return se(this,U,Y,he);case"base64":return K(this,U,Y,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,U,Y,he);default:if(Ie)throw new TypeError("Unknown encoding: "+_e);_e=(""+_e).toLowerCase(),Ie=!0}},G.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function fe(re,U,Y){return U===0&&Y===re.length?F.fromByteArray(re):F.fromByteArray(re.slice(U,Y))}function Ee(re,U,Y){Y=Math.min(re.length,Y);const he=[];let _e=U;for(;_e<Y;){const ke=re[_e];let Ie=null,qe=ke>239?4:ke>223?3:ke>191?2:1;if(_e+qe<=Y){let Xe,Ye,Je,Ke;switch(qe){case 1:ke<128&&(Ie=ke);break;case 2:Xe=re[_e+1],(Xe&192)===128&&(Ke=(ke&31)<<6|Xe&63,Ke>127&&(Ie=Ke));break;case 3:Xe=re[_e+1],Ye=re[_e+2],(Xe&192)===128&&(Ye&192)===128&&(Ke=(ke&15)<<12|(Xe&63)<<6|Ye&63,Ke>2047&&(Ke<55296||Ke>57343)&&(Ie=Ke));break;case 4:Xe=re[_e+1],Ye=re[_e+2],Je=re[_e+3],(Xe&192)===128&&(Ye&192)===128&&(Je&192)===128&&(Ke=(ke&15)<<18|(Xe&63)<<12|(Ye&63)<<6|Je&63,Ke>65535&&Ke<1114112&&(Ie=Ke))}}Ie===null?(Ie=65533,qe=1):Ie>65535&&(Ie-=65536,he.push(Ie>>>10&1023|55296),Ie=56320|Ie&1023),he.push(Ie),_e+=qe}return Te(he)}const be=4096;function Te(re){const U=re.length;if(U<=be)return String.fromCharCode.apply(String,re);let Y="",he=0;for(;he<U;)Y+=String.fromCharCode.apply(String,re.slice(he,he+=be));return Y}function Ne(re,U,Y){let he="";Y=Math.min(re.length,Y);for(let _e=U;_e<Y;++_e)he+=String.fromCharCode(re[_e]&127);return he}function ve(re,U,Y){let he="";Y=Math.min(re.length,Y);for(let _e=U;_e<Y;++_e)he+=String.fromCharCode(re[_e]);return he}function Oe(re,U,Y){const he=re.length;(!U||U<0)&&(U=0),(!Y||Y<0||Y>he)&&(Y=he);let _e="";for(let ke=U;ke<Y;++ke)_e+=Ue[re[ke]];return _e}function Pe(re,U,Y){const he=re.slice(U,Y);let _e="";for(let ke=0;ke<he.length-1;ke+=2)_e+=String.fromCharCode(he[ke]+he[ke+1]*256);return _e}G.prototype.slice=function(U,Y){const he=this.length;U=~~U,Y=Y===void 0?he:~~Y,U<0?(U+=he,U<0&&(U=0)):U>he&&(U=he),Y<0?(Y+=he,Y<0&&(Y=0)):Y>he&&(Y=he),Y<U&&(Y=U);const _e=this.subarray(U,Y);return Object.setPrototypeOf(_e,G.prototype),_e};function Se(re,U,Y){if(re%1!==0||re<0)throw new RangeError("offset is not uint");if(re+U>Y)throw new RangeError("Trying to access beyond buffer length")}G.prototype.readUintLE=G.prototype.readUIntLE=function(U,Y,he){U=U>>>0,Y=Y>>>0,he||Se(U,Y,this.length);let _e=this[U],ke=1,Ie=0;for(;++Ie<Y&&(ke*=256);)_e+=this[U+Ie]*ke;return _e},G.prototype.readUintBE=G.prototype.readUIntBE=function(U,Y,he){U=U>>>0,Y=Y>>>0,he||Se(U,Y,this.length);let _e=this[U+--Y],ke=1;for(;Y>0&&(ke*=256);)_e+=this[U+--Y]*ke;return _e},G.prototype.readUint8=G.prototype.readUInt8=function(U,Y){return U=U>>>0,Y||Se(U,1,this.length),this[U]},G.prototype.readUint16LE=G.prototype.readUInt16LE=function(U,Y){return U=U>>>0,Y||Se(U,2,this.length),this[U]|this[U+1]<<8},G.prototype.readUint16BE=G.prototype.readUInt16BE=function(U,Y){return U=U>>>0,Y||Se(U,2,this.length),this[U]<<8|this[U+1]},G.prototype.readUint32LE=G.prototype.readUInt32LE=function(U,Y){return U=U>>>0,Y||Se(U,4,this.length),(this[U]|this[U+1]<<8|this[U+2]<<16)+this[U+3]*16777216},G.prototype.readUint32BE=G.prototype.readUInt32BE=function(U,Y){return U=U>>>0,Y||Se(U,4,this.length),this[U]*16777216+(this[U+1]<<16|this[U+2]<<8|this[U+3])},G.prototype.readBigUInt64LE=je(function(U){U=U>>>0,st(U,"offset");const Y=this[U],he=this[U+7];(Y===void 0||he===void 0)&&Qe(U,this.length-8);const _e=Y+this[++U]*2**8+this[++U]*2**16+this[++U]*2**24,ke=this[++U]+this[++U]*2**8+this[++U]*2**16+he*2**24;return BigInt(_e)+(BigInt(ke)<<BigInt(32))}),G.prototype.readBigUInt64BE=je(function(U){U=U>>>0,st(U,"offset");const Y=this[U],he=this[U+7];(Y===void 0||he===void 0)&&Qe(U,this.length-8);const _e=Y*2**24+this[++U]*2**16+this[++U]*2**8+this[++U],ke=this[++U]*2**24+this[++U]*2**16+this[++U]*2**8+he;return(BigInt(_e)<<BigInt(32))+BigInt(ke)}),G.prototype.readIntLE=function(U,Y,he){U=U>>>0,Y=Y>>>0,he||Se(U,Y,this.length);let _e=this[U],ke=1,Ie=0;for(;++Ie<Y&&(ke*=256);)_e+=this[U+Ie]*ke;return ke*=128,_e>=ke&&(_e-=Math.pow(2,8*Y)),_e},G.prototype.readIntBE=function(U,Y,he){U=U>>>0,Y=Y>>>0,he||Se(U,Y,this.length);let _e=Y,ke=1,Ie=this[U+--_e];for(;_e>0&&(ke*=256);)Ie+=this[U+--_e]*ke;return ke*=128,Ie>=ke&&(Ie-=Math.pow(2,8*Y)),Ie},G.prototype.readInt8=function(U,Y){return U=U>>>0,Y||Se(U,1,this.length),this[U]&128?(255-this[U]+1)*-1:this[U]},G.prototype.readInt16LE=function(U,Y){U=U>>>0,Y||Se(U,2,this.length);const he=this[U]|this[U+1]<<8;return he&32768?he|4294901760:he},G.prototype.readInt16BE=function(U,Y){U=U>>>0,Y||Se(U,2,this.length);const he=this[U+1]|this[U]<<8;return he&32768?he|4294901760:he},G.prototype.readInt32LE=function(U,Y){return U=U>>>0,Y||Se(U,4,this.length),this[U]|this[U+1]<<8|this[U+2]<<16|this[U+3]<<24},G.prototype.readInt32BE=function(U,Y){return U=U>>>0,Y||Se(U,4,this.length),this[U]<<24|this[U+1]<<16|this[U+2]<<8|this[U+3]},G.prototype.readBigInt64LE=je(function(U){U=U>>>0,st(U,"offset");const Y=this[U],he=this[U+7];(Y===void 0||he===void 0)&&Qe(U,this.length-8);const _e=this[U+4]+this[U+5]*2**8+this[U+6]*2**16+(he<<24);return(BigInt(_e)<<BigInt(32))+BigInt(Y+this[++U]*2**8+this[++U]*2**16+this[++U]*2**24)}),G.prototype.readBigInt64BE=je(function(U){U=U>>>0,st(U,"offset");const Y=this[U],he=this[U+7];(Y===void 0||he===void 0)&&Qe(U,this.length-8);const _e=(Y<<24)+this[++U]*2**16+this[++U]*2**8+this[++U];return(BigInt(_e)<<BigInt(32))+BigInt(this[++U]*2**24+this[++U]*2**16+this[++U]*2**8+he)}),G.prototype.readFloatLE=function(U,Y){return U=U>>>0,Y||Se(U,4,this.length),$.read(this,U,!0,23,4)},G.prototype.readFloatBE=function(U,Y){return U=U>>>0,Y||Se(U,4,this.length),$.read(this,U,!1,23,4)},G.prototype.readDoubleLE=function(U,Y){return U=U>>>0,Y||Se(U,8,this.length),$.read(this,U,!0,52,8)},G.prototype.readDoubleBE=function(U,Y){return U=U>>>0,Y||Se(U,8,this.length),$.read(this,U,!1,52,8)};function Ce(re,U,Y,he,_e,ke){if(!G.isBuffer(re))throw new TypeError('"buffer" argument must be a Buffer instance');if(U>_e||U<ke)throw new RangeError('"value" argument is out of bounds');if(Y+he>re.length)throw new RangeError("Index out of range")}G.prototype.writeUintLE=G.prototype.writeUIntLE=function(U,Y,he,_e){if(U=+U,Y=Y>>>0,he=he>>>0,!_e){const qe=Math.pow(2,8*he)-1;Ce(this,U,Y,he,qe,0)}let ke=1,Ie=0;for(this[Y]=U&255;++Ie<he&&(ke*=256);)this[Y+Ie]=U/ke&255;return Y+he},G.prototype.writeUintBE=G.prototype.writeUIntBE=function(U,Y,he,_e){if(U=+U,Y=Y>>>0,he=he>>>0,!_e){const qe=Math.pow(2,8*he)-1;Ce(this,U,Y,he,qe,0)}let ke=he-1,Ie=1;for(this[Y+ke]=U&255;--ke>=0&&(Ie*=256);)this[Y+ke]=U/Ie&255;return Y+he},G.prototype.writeUint8=G.prototype.writeUInt8=function(U,Y,he){return U=+U,Y=Y>>>0,he||Ce(this,U,Y,1,255,0),this[Y]=U&255,Y+1},G.prototype.writeUint16LE=G.prototype.writeUInt16LE=function(U,Y,he){return U=+U,Y=Y>>>0,he||Ce(this,U,Y,2,65535,0),this[Y]=U&255,this[Y+1]=U>>>8,Y+2},G.prototype.writeUint16BE=G.prototype.writeUInt16BE=function(U,Y,he){return U=+U,Y=Y>>>0,he||Ce(this,U,Y,2,65535,0),this[Y]=U>>>8,this[Y+1]=U&255,Y+2},G.prototype.writeUint32LE=G.prototype.writeUInt32LE=function(U,Y,he){return U=+U,Y=Y>>>0,he||Ce(this,U,Y,4,4294967295,0),this[Y+3]=U>>>24,this[Y+2]=U>>>16,this[Y+1]=U>>>8,this[Y]=U&255,Y+4},G.prototype.writeUint32BE=G.prototype.writeUInt32BE=function(U,Y,he){return U=+U,Y=Y>>>0,he||Ce(this,U,Y,4,4294967295,0),this[Y]=U>>>24,this[Y+1]=U>>>16,this[Y+2]=U>>>8,this[Y+3]=U&255,Y+4};function Fe(re,U,Y,he,_e){at(U,he,_e,re,Y,7);let ke=Number(U&BigInt(4294967295));re[Y++]=ke,ke=ke>>8,re[Y++]=ke,ke=ke>>8,re[Y++]=ke,ke=ke>>8,re[Y++]=ke;let Ie=Number(U>>BigInt(32)&BigInt(4294967295));return re[Y++]=Ie,Ie=Ie>>8,re[Y++]=Ie,Ie=Ie>>8,re[Y++]=Ie,Ie=Ie>>8,re[Y++]=Ie,Y}function $e(re,U,Y,he,_e){at(U,he,_e,re,Y,7);let ke=Number(U&BigInt(4294967295));re[Y+7]=ke,ke=ke>>8,re[Y+6]=ke,ke=ke>>8,re[Y+5]=ke,ke=ke>>8,re[Y+4]=ke;let Ie=Number(U>>BigInt(32)&BigInt(4294967295));return re[Y+3]=Ie,Ie=Ie>>8,re[Y+2]=Ie,Ie=Ie>>8,re[Y+1]=Ie,Ie=Ie>>8,re[Y]=Ie,Y+8}G.prototype.writeBigUInt64LE=je(function(U,Y=0){return Fe(this,U,Y,BigInt(0),BigInt("0xffffffffffffffff"))}),G.prototype.writeBigUInt64BE=je(function(U,Y=0){return $e(this,U,Y,BigInt(0),BigInt("0xffffffffffffffff"))}),G.prototype.writeIntLE=function(U,Y,he,_e){if(U=+U,Y=Y>>>0,!_e){const Xe=Math.pow(2,8*he-1);Ce(this,U,Y,he,Xe-1,-Xe)}let ke=0,Ie=1,qe=0;for(this[Y]=U&255;++ke<he&&(Ie*=256);)U<0&&qe===0&&this[Y+ke-1]!==0&&(qe=1),this[Y+ke]=(U/Ie>>0)-qe&255;return Y+he},G.prototype.writeIntBE=function(U,Y,he,_e){if(U=+U,Y=Y>>>0,!_e){const Xe=Math.pow(2,8*he-1);Ce(this,U,Y,he,Xe-1,-Xe)}let ke=he-1,Ie=1,qe=0;for(this[Y+ke]=U&255;--ke>=0&&(Ie*=256);)U<0&&qe===0&&this[Y+ke+1]!==0&&(qe=1),this[Y+ke]=(U/Ie>>0)-qe&255;return Y+he},G.prototype.writeInt8=function(U,Y,he){return U=+U,Y=Y>>>0,he||Ce(this,U,Y,1,127,-128),U<0&&(U=255+U+1),this[Y]=U&255,Y+1},G.prototype.writeInt16LE=function(U,Y,he){return U=+U,Y=Y>>>0,he||Ce(this,U,Y,2,32767,-32768),this[Y]=U&255,this[Y+1]=U>>>8,Y+2},G.prototype.writeInt16BE=function(U,Y,he){return U=+U,Y=Y>>>0,he||Ce(this,U,Y,2,32767,-32768),this[Y]=U>>>8,this[Y+1]=U&255,Y+2},G.prototype.writeInt32LE=function(U,Y,he){return U=+U,Y=Y>>>0,he||Ce(this,U,Y,4,2147483647,-2147483648),this[Y]=U&255,this[Y+1]=U>>>8,this[Y+2]=U>>>16,this[Y+3]=U>>>24,Y+4},G.prototype.writeInt32BE=function(U,Y,he){return U=+U,Y=Y>>>0,he||Ce(this,U,Y,4,2147483647,-2147483648),U<0&&(U=4294967295+U+1),this[Y]=U>>>24,this[Y+1]=U>>>16,this[Y+2]=U>>>8,this[Y+3]=U&255,Y+4},G.prototype.writeBigInt64LE=je(function(U,Y=0){return Fe(this,U,Y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),G.prototype.writeBigInt64BE=je(function(U,Y=0){return $e(this,U,Y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function De(re,U,Y,he,_e,ke){if(Y+he>re.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("Index out of range")}function ze(re,U,Y,he,_e){return U=+U,Y=Y>>>0,_e||De(re,U,Y,4),$.write(re,U,Y,he,23,4),Y+4}G.prototype.writeFloatLE=function(U,Y,he){return ze(this,U,Y,!0,he)},G.prototype.writeFloatBE=function(U,Y,he){return ze(this,U,Y,!1,he)};function Ve(re,U,Y,he,_e){return U=+U,Y=Y>>>0,_e||De(re,U,Y,8),$.write(re,U,Y,he,52,8),Y+8}G.prototype.writeDoubleLE=function(U,Y,he){return Ve(this,U,Y,!0,he)},G.prototype.writeDoubleBE=function(U,Y,he){return Ve(this,U,Y,!1,he)},G.prototype.copy=function(U,Y,he,_e){if(!G.isBuffer(U))throw new TypeError("argument should be a Buffer");if(he||(he=0),!_e&&_e!==0&&(_e=this.length),Y>=U.length&&(Y=U.length),Y||(Y=0),_e>0&&_e<he&&(_e=he),_e===he||U.length===0||this.length===0)return 0;if(Y<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(_e<0)throw new RangeError("sourceEnd out of bounds");_e>this.length&&(_e=this.length),U.length-Y<_e-he&&(_e=U.length-Y+he);const ke=_e-he;return this===U&&typeof q.prototype.copyWithin=="function"?this.copyWithin(Y,he,_e):q.prototype.set.call(U,this.subarray(he,_e),Y),ke},G.prototype.fill=function(U,Y,he,_e){if(typeof U=="string"){if(typeof Y=="string"?(_e=Y,Y=0,he=this.length):typeof he=="string"&&(_e=he,he=this.length),_e!==void 0&&typeof _e!="string")throw new TypeError("encoding must be a string");if(typeof _e=="string"&&!G.isEncoding(_e))throw new TypeError("Unknown encoding: "+_e);if(U.length===1){const Ie=U.charCodeAt(0);(_e==="utf8"&&Ie<128||_e==="latin1")&&(U=Ie)}}else typeof U=="number"?U=U&255:typeof U=="boolean"&&(U=Number(U));if(Y<0||this.length<Y||this.length<he)throw new RangeError("Out of range index");if(he<=Y)return this;Y=Y>>>0,he=he===void 0?this.length:he>>>0,U||(U=0);let ke;if(typeof U=="number")for(ke=Y;ke<he;++ke)this[ke]=U;else{const Ie=G.isBuffer(U)?U:G.from(U,_e),qe=Ie.length;if(qe===0)throw new TypeError('The value "'+U+'" is invalid for argument "value"');for(ke=0;ke<he-Y;++ke)this[ke+Y]=Ie[ke%qe]}return this};const We={};function Ze(re,U,Y){We[re]=class extends Y{constructor(){super(),Object.defineProperty(this,"message",{value:U.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${re}]`,this.stack,delete this.name}get code(){return re}set code(_e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_e,writable:!0})}toString(){return`${this.name} [${re}]: ${this.message}`}}}Ze("ERR_BUFFER_OUT_OF_BOUNDS",function(re){return re?`${re} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ze("ERR_INVALID_ARG_TYPE",function(re,U){return`The "${re}" argument must be of type number. Received type ${typeof U}`},TypeError),Ze("ERR_OUT_OF_RANGE",function(re,U,Y){let he=`The value of "${re}" is out of range.`,_e=Y;return Number.isInteger(Y)&&Math.abs(Y)>2**32?_e=et(String(Y)):typeof Y=="bigint"&&(_e=String(Y),(Y>BigInt(2)**BigInt(32)||Y<-(BigInt(2)**BigInt(32)))&&(_e=et(_e)),_e+="n"),he+=` It must be ${U}. Received ${_e}`,he},RangeError);function et(re){let U="",Y=re.length;const he=re[0]==="-"?1:0;for(;Y>=he+4;Y-=3)U=`_${re.slice(Y-3,Y)}${U}`;return`${re.slice(0,Y)}${U}`}function rt(re,U,Y){st(U,"offset"),(re[U]===void 0||re[U+Y]===void 0)&&Qe(U,re.length-(Y+1))}function at(re,U,Y,he,_e,ke){if(re>Y||re<U){const Ie=typeof U=="bigint"?"n":"";let qe;throw U===0||U===BigInt(0)?qe=`>= 0${Ie} and < 2${Ie} ** ${(ke+1)*8}${Ie}`:qe=`>= -(2${Ie} ** ${(ke+1)*8-1}${Ie}) and < 2 ** ${(ke+1)*8-1}${Ie}`,new We.ERR_OUT_OF_RANGE("value",qe,re)}rt(he,_e,ke)}function st(re,U){if(typeof re!="number")throw new We.ERR_INVALID_ARG_TYPE(U,"number",re)}function Qe(re,U,Y){throw Math.floor(re)!==re?(st(re,Y),new We.ERR_OUT_OF_RANGE("offset","an integer",re)):U<0?new We.ERR_BUFFER_OUT_OF_BOUNDS:new We.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${U}`,re)}const it=/[^+/0-9A-Za-z-_]/g;function lt(re){if(re=re.split("=")[0],re=re.trim().replace(it,""),re.length<2)return"";for(;re.length%4!==0;)re=re+"=";return re}function ot(re,U){U=U||1/0;let Y;const he=re.length;let _e=null;const ke=[];for(let Ie=0;Ie<he;++Ie){if(Y=re.charCodeAt(Ie),Y>55295&&Y<57344){if(!_e){if(Y>56319){(U-=3)>-1&&ke.push(239,191,189);continue}else if(Ie+1===he){(U-=3)>-1&&ke.push(239,191,189);continue}_e=Y;continue}if(Y<56320){(U-=3)>-1&&ke.push(239,191,189),_e=Y;continue}Y=(_e-55296<<10|Y-56320)+65536}else _e&&(U-=3)>-1&&ke.push(239,191,189);if(_e=null,Y<128){if((U-=1)<0)break;ke.push(Y)}else if(Y<2048){if((U-=2)<0)break;ke.push(Y>>6|192,Y&63|128)}else if(Y<65536){if((U-=3)<0)break;ke.push(Y>>12|224,Y>>6&63|128,Y&63|128)}else if(Y<1114112){if((U-=4)<0)break;ke.push(Y>>18|240,Y>>12&63|128,Y>>6&63|128,Y&63|128)}else throw new Error("Invalid code point")}return ke}function ct(re){const U=[];for(let Y=0;Y<re.length;++Y)U.push(re.charCodeAt(Y)&255);return U}function ut(re,U){let Y,he,_e;const ke=[];for(let Ie=0;Ie<re.length&&!((U-=2)<0);++Ie)Y=re.charCodeAt(Ie),he=Y>>8,_e=Y%256,ke.push(_e),ke.push(he);return ke}function Me(re){return F.toByteArray(lt(re))}function Be(re,U,Y,he){let _e;for(_e=0;_e<he&&!(_e+Y>=U.length||_e>=re.length);++_e)U[_e+Y]=re[_e];return _e}function Le(re,U){return re instanceof U||re!=null&&re.constructor!=null&&re.constructor.name!=null&&re.constructor.name===U.name}function He(re){return re!==re}const Ue=(function(){const re="0123456789abcdef",U=new Array(256);for(let Y=0;Y<16;++Y){const he=Y*16;for(let _e=0;_e<16;++_e)U[he+_e]=re[Y]+re[_e]}return U})();function je(re){return typeof BigInt>"u"?Ge:re}function Ge(){throw new Error("BigInt not supported")}})(S);const O=S.Buffer;_.Blob=S.Blob,_.BlobOptions=S.BlobOptions,_.Buffer=S.Buffer,_.File=S.File,_.FileOptions=S.FileOptions,_.INSPECT_MAX_BYTES=S.INSPECT_MAX_BYTES,_.SlowBuffer=S.SlowBuffer,_.TranscodeEncoding=S.TranscodeEncoding,_.atob=S.atob,_.btoa=S.btoa,_.constants=S.constants,_.default=O,_.isAscii=S.isAscii,_.isUtf8=S.isUtf8,_.kMaxLength=S.kMaxLength,_.kStringMaxLength=S.kStringMaxLength,_.resolveObjectURL=S.resolveObjectURL,_.transcode=S.transcode})(dist)),dist}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,(function(_,S){var w=requireDist(),E=w.Buffer;function T(k,x){for(var R in k)x[R]=k[R]}E.from&&E.alloc&&E.allocUnsafe&&E.allocUnsafeSlow?_.exports=w:(T(w,S),S.Buffer=A);function A(k,x,R){return E(k,x,R)}A.prototype=Object.create(E.prototype),T(E,A),A.from=function(k,x,R){if(typeof k=="number")throw new TypeError("Argument must not be a number");return E(k,x,R)},A.alloc=function(k,x,R){if(typeof k!="number")throw new TypeError("Argument must be a number");var P=E(k);return x!==void 0?typeof R=="string"?P.fill(x,R):P.fill(x):P.fill(0),P},A.allocUnsafe=function(k){if(typeof k!="number")throw new TypeError("Argument must be a number");return E(k)},A.allocUnsafeSlow=function(k){if(typeof k!="number")throw new TypeError("Argument must be a number");return w.SlowBuffer(k)}})(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser$1.exports;hasRequiredBrowser$1=1;var _=65536,S=4294967295;function w(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var E=requireSafeBuffer().Buffer,T=commonjsGlobal.crypto||commonjsGlobal.msCrypto;T&&T.getRandomValues?browser$1.exports=A:browser$1.exports=w;function A(k,x){if(k>S)throw new RangeError("requested too many random bytes");var R=E.allocUnsafe(k);if(k>0)if(k>_)for(var P=0;P<k;P+=_)T.getRandomValues(R.slice(P,P+_));else T.getRandomValues(R);return typeof x=="function"?process$1.nextTick(function(){x(null,R)}):R}return browser$1.exports}var readableBrowser={exports:{}},events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var _=typeof Reflect=="object"?Reflect:null,S=_&&typeof _.apply=="function"?_.apply:function(H,j,q){return Function.prototype.apply.call(H,j,q)},w;_&&typeof _.ownKeys=="function"?w=_.ownKeys:Object.getOwnPropertySymbols?w=function(H){return Object.getOwnPropertyNames(H).concat(Object.getOwnPropertySymbols(H))}:w=function(H){return Object.getOwnPropertyNames(H)};function E($){console&&console.warn&&console.warn($)}var T=Number.isNaN||function(H){return H!==H};function A(){A.init.call(this)}events.exports=A,events.exports.once=O,A.EventEmitter=A,A.prototype._events=void 0,A.prototype._eventsCount=0,A.prototype._maxListeners=void 0;var k=10;function x($){if(typeof $!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof $)}Object.defineProperty(A,"defaultMaxListeners",{enumerable:!0,get:function(){return k},set:function($){if(typeof $!="number"||$<0||T($))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+$+".");k=$}}),A.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},A.prototype.setMaxListeners=function(H){if(typeof H!="number"||H<0||T(H))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+H+".");return this._maxListeners=H,this};function R($){return $._maxListeners===void 0?A.defaultMaxListeners:$._maxListeners}A.prototype.getMaxListeners=function(){return R(this)},A.prototype.emit=function(H){for(var j=[],q=1;q<arguments.length;q++)j.push(arguments[q]);var W=H==="error",X=this._events;if(X!==void 0)W=W&&X.error===void 0;else if(!W)return!1;if(W){var te;if(j.length>0&&(te=j[0]),te instanceof Error)throw te;var ee=new Error("Unhandled error."+(te?" ("+te.message+")":""));throw ee.context=te,ee}var G=X[H];if(G===void 0)return!1;if(typeof G=="function")S(G,this,j);else for(var de=G.length,le=B(G,de),q=0;q<de;++q)S(le[q],this,j);return!0};function P($,H,j,q){var W,X,te;if(x(j),X=$._events,X===void 0?(X=$._events=Object.create(null),$._eventsCount=0):(X.newListener!==void 0&&($.emit("newListener",H,j.listener?j.listener:j),X=$._events),te=X[H]),te===void 0)te=X[H]=j,++$._eventsCount;else if(typeof te=="function"?te=X[H]=q?[j,te]:[te,j]:q?te.unshift(j):te.push(j),W=R($),W>0&&te.length>W&&!te.warned){te.warned=!0;var ee=new Error("Possible EventEmitter memory leak detected. "+te.length+" "+String(H)+" listeners added. Use emitter.setMaxListeners() to increase limit");ee.name="MaxListenersExceededWarning",ee.emitter=$,ee.type=H,ee.count=te.length,E(ee)}return $}A.prototype.addListener=function(H,j){return P(this,H,j,!1)},A.prototype.on=A.prototype.addListener,A.prototype.prependListener=function(H,j){return P(this,H,j,!0)};function M(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function N($,H,j){var q={fired:!1,wrapFn:void 0,target:$,type:H,listener:j},W=M.bind(q);return W.listener=j,q.wrapFn=W,W}A.prototype.once=function(H,j){return x(j),this.on(H,N(this,H,j)),this},A.prototype.prependOnceListener=function(H,j){return x(j),this.prependListener(H,N(this,H,j)),this},A.prototype.removeListener=function(H,j){var q,W,X,te,ee;if(x(j),W=this._events,W===void 0)return this;if(q=W[H],q===void 0)return this;if(q===j||q.listener===j)--this._eventsCount===0?this._events=Object.create(null):(delete W[H],W.removeListener&&this.emit("removeListener",H,q.listener||j));else if(typeof q!="function"){for(X=-1,te=q.length-1;te>=0;te--)if(q[te]===j||q[te].listener===j){ee=q[te].listener,X=te;break}if(X<0)return this;X===0?q.shift():D(q,X),q.length===1&&(W[H]=q[0]),W.removeListener!==void 0&&this.emit("removeListener",H,ee||j)}return this},A.prototype.off=A.prototype.removeListener,A.prototype.removeAllListeners=function(H){var j,q,W;if(q=this._events,q===void 0)return this;if(q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):q[H]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete q[H]),this;if(arguments.length===0){var X=Object.keys(q),te;for(W=0;W<X.length;++W)te=X[W],te!=="removeListener"&&this.removeAllListeners(te);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(j=q[H],typeof j=="function")this.removeListener(H,j);else if(j!==void 0)for(W=j.length-1;W>=0;W--)this.removeListener(H,j[W]);return this};function I($,H,j){var q=$._events;if(q===void 0)return[];var W=q[H];return W===void 0?[]:typeof W=="function"?j?[W.listener||W]:[W]:j?z(W):B(W,W.length)}A.prototype.listeners=function(H){return I(this,H,!0)},A.prototype.rawListeners=function(H){return I(this,H,!1)},A.listenerCount=function($,H){return typeof $.listenerCount=="function"?$.listenerCount(H):V.call($,H)},A.prototype.listenerCount=V;function V($){var H=this._events;if(H!==void 0){var j=H[$];if(typeof j=="function")return 1;if(j!==void 0)return j.length}return 0}A.prototype.eventNames=function(){return this._eventsCount>0?w(this._events):[]};function B($,H){for(var j=new Array(H),q=0;q<H;++q)j[q]=$[q];return j}function D($,H){for(;H+1<$.length;H++)$[H]=$[H+1];$.pop()}function z($){for(var H=new Array($.length),j=0;j<H.length;++j)H[j]=$[j].listener||$[j];return H}function O($,H){return new Promise(function(j,q){function W(te){$.removeListener(H,X),q(te)}function X(){typeof $.removeListener=="function"&&$.removeListener("error",W),j([].slice.call(arguments))}F($,H,X,{once:!0}),H!=="error"&&L($,W,{once:!0})})}function L($,H,j){typeof $.on=="function"&&F($,"error",H,j)}function F($,H,j,q){if(typeof $.on=="function")q.once?$.once(H,j):$.on(H,j);else if(typeof $.addEventListener=="function")$.addEventListener(H,function W(X){q.once&&$.removeEventListener(H,W),j(X)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof $)}return events.exports}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter),streamBrowser}var util={},types={},shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var S={},w=Symbol("test"),E=Object(w);if(typeof w=="string"||Object.prototype.toString.call(w)!=="[object Symbol]"||Object.prototype.toString.call(E)!=="[object Symbol]")return!1;var T=42;S[w]=T;for(var A in S)return!1;if(typeof Object.keys=="function"&&Object.keys(S).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(S).length!==0)return!1;var k=Object.getOwnPropertySymbols(S);if(k.length!==1||k[0]!==w||!Object.prototype.propertyIsEnumerable.call(S,w))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var x=Object.getOwnPropertyDescriptor(S,w);if(x.value!==T||x.enumerable!==!0)return!1}return!0}),shams$1}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var _=requireShams$1();return shams=function(){return _()&&!!Symbol.toStringTag},shams}var esObjectAtoms,hasRequiredEsObjectAtoms;function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms||(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object),esObjectAtoms}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range=RangeError),range}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var type,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type=TypeError),type}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var abs,hasRequiredAbs;function requireAbs(){return hasRequiredAbs||(hasRequiredAbs=1,abs=Math.abs),abs}var floor,hasRequiredFloor;function requireFloor(){return hasRequiredFloor||(hasRequiredFloor=1,floor=Math.floor),floor}var max,hasRequiredMax;function requireMax(){return hasRequiredMax||(hasRequiredMax=1,max=Math.max),max}var min,hasRequiredMin;function requireMin(){return hasRequiredMin||(hasRequiredMin=1,min=Math.min),min}var pow,hasRequiredPow;function requirePow(){return hasRequiredPow||(hasRequiredPow=1,pow=Math.pow),pow}var round,hasRequiredRound;function requireRound(){return hasRequiredRound||(hasRequiredRound=1,round=Math.round),round}var _isNaN,hasRequired_isNaN;function require_isNaN(){return hasRequired_isNaN||(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(S){return S!==S}),_isNaN}var sign,hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign;hasRequiredSign=1;var _=require_isNaN();return sign=function(w){return _(w)||w===0?w:w<0?-1:1},sign}var gOPD,hasRequiredGOPD;function requireGOPD(){return hasRequiredGOPD||(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor),gOPD}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var _=requireGOPD();if(_)try{_([],"length")}catch{_=null}return gopd=_,gopd}var esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var _=Object.defineProperty||!1;if(_)try{_({},"a",{value:1})}catch{_=!1}return esDefineProperty=_,esDefineProperty}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var _=typeof Symbol<"u"&&Symbol,S=requireShams$1();return hasSymbols=function(){return typeof _!="function"||typeof Symbol!="function"||typeof _("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:S()},hasSymbols}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var _=requireEsObjectAtoms();return Object_getPrototypeOf=_.getPrototypeOf||null,Object_getPrototypeOf}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var _="Function.prototype.bind called on incompatible ",S=Object.prototype.toString,w=Math.max,E="[object Function]",T=function(R,P){for(var M=[],N=0;N<R.length;N+=1)M[N]=R[N];for(var I=0;I<P.length;I+=1)M[I+R.length]=P[I];return M},A=function(R,P){for(var M=[],N=P,I=0;N<R.length;N+=1,I+=1)M[I]=R[N];return M},k=function(x,R){for(var P="",M=0;M<x.length;M+=1)P+=x[M],M+1<x.length&&(P+=R);return P};return implementation=function(R){var P=this;if(typeof P!="function"||S.apply(P)!==E)throw new TypeError(_+P);for(var M=A(arguments,1),N,I=function(){if(this instanceof N){var O=P.apply(this,T(M,arguments));return Object(O)===O?O:this}return P.apply(R,T(M,arguments))},V=w(0,P.length-M.length),B=[],D=0;D<V;D++)B[D]="$"+D;if(N=Function("binder","return function ("+k(B,",")+"){ return binder.apply(this,arguments); }")(I),P.prototype){var z=function(){};z.prototype=P.prototype,N.prototype=new z,z.prototype=null}return N},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var _=requireImplementation();return functionBind=Function.prototype.bind||_,functionBind}var functionCall,hasRequiredFunctionCall;function requireFunctionCall(){return hasRequiredFunctionCall||(hasRequiredFunctionCall=1,functionCall=Function.prototype.call),functionCall}var functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply,hasRequiredReflectApply;function requireReflectApply(){return hasRequiredReflectApply||(hasRequiredReflectApply=1,reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply),reflectApply}var actualApply,hasRequiredActualApply;function requireActualApply(){if(hasRequiredActualApply)return actualApply;hasRequiredActualApply=1;var _=requireFunctionBind(),S=requireFunctionApply(),w=requireFunctionCall(),E=requireReflectApply();return actualApply=E||_.call(w,S),actualApply}var callBindApplyHelpers,hasRequiredCallBindApplyHelpers;function requireCallBindApplyHelpers(){if(hasRequiredCallBindApplyHelpers)return callBindApplyHelpers;hasRequiredCallBindApplyHelpers=1;var _=requireFunctionBind(),S=requireType(),w=requireFunctionCall(),E=requireActualApply();return callBindApplyHelpers=function(A){if(A.length<1||typeof A[0]!="function")throw new S("a function is required");return E(_,w,A)},callBindApplyHelpers}var get,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var _=requireCallBindApplyHelpers(),S=requireGopd(),w;try{w=[].__proto__===Array.prototype}catch(k){if(!k||typeof k!="object"||!("code"in k)||k.code!=="ERR_PROTO_ACCESS")throw k}var E=!!w&&S&&S(Object.prototype,"__proto__"),T=Object,A=T.getPrototypeOf;return get=E&&typeof E.get=="function"?_([E.get]):typeof A=="function"?function(x){return A(x==null?x:T(x))}:!1,get}var getProto,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var _=requireReflect_getPrototypeOf(),S=requireObject_getPrototypeOf(),w=requireGet();return getProto=_?function(T){return _(T)}:S?function(T){if(!T||typeof T!="object"&&typeof T!="function")throw new TypeError("getProto: not an object");return S(T)}:w?function(T){return w(T)}:null,getProto}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var _=Function.prototype.call,S=Object.prototype.hasOwnProperty,w=requireFunctionBind();return hasown=w.call(_,S),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var _,S=requireEsObjectAtoms(),w=requireEsErrors(),E=require_eval(),T=requireRange(),A=requireRef(),k=requireSyntax(),x=requireType(),R=requireUri(),P=requireAbs(),M=requireFloor(),N=requireMax(),I=requireMin(),V=requirePow(),B=requireRound(),D=requireSign(),z=Function,O=function(xe){try{return z('"use strict"; return ('+xe+").constructor;")()}catch{}},L=requireGopd(),F=requireEsDefineProperty(),$=function(){throw new x},H=L?(function(){try{return arguments.callee,$}catch{try{return L(arguments,"callee").get}catch{return $}}})():$,j=requireHasSymbols()(),q=requireGetProto(),W=requireObject_getPrototypeOf(),X=requireReflect_getPrototypeOf(),te=requireFunctionApply(),ee=requireFunctionCall(),G={},de=typeof Uint8Array>"u"||!q?_:q(Uint8Array),le={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?_:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?_:ArrayBuffer,"%ArrayIteratorPrototype%":j&&q?q([][Symbol.iterator]()):_,"%AsyncFromSyncIteratorPrototype%":_,"%AsyncFunction%":G,"%AsyncGenerator%":G,"%AsyncGeneratorFunction%":G,"%AsyncIteratorPrototype%":G,"%Atomics%":typeof Atomics>"u"?_:Atomics,"%BigInt%":typeof BigInt>"u"?_:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?_:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?_:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?_:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":w,"%eval%":eval,"%EvalError%":E,"%Float16Array%":typeof Float16Array>"u"?_:Float16Array,"%Float32Array%":typeof Float32Array>"u"?_:Float32Array,"%Float64Array%":typeof Float64Array>"u"?_:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?_:FinalizationRegistry,"%Function%":z,"%GeneratorFunction%":G,"%Int8Array%":typeof Int8Array>"u"?_:Int8Array,"%Int16Array%":typeof Int16Array>"u"?_:Int16Array,"%Int32Array%":typeof Int32Array>"u"?_:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":j&&q?q(q([][Symbol.iterator]())):_,"%JSON%":typeof JSON=="object"?JSON:_,"%Map%":typeof Map>"u"?_:Map,"%MapIteratorPrototype%":typeof Map>"u"||!j||!q?_:q(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":S,"%Object.getOwnPropertyDescriptor%":L,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?_:Promise,"%Proxy%":typeof Proxy>"u"?_:Proxy,"%RangeError%":T,"%ReferenceError%":A,"%Reflect%":typeof Reflect>"u"?_:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?_:Set,"%SetIteratorPrototype%":typeof Set>"u"||!j||!q?_:q(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?_:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":j&&q?q(""[Symbol.iterator]()):_,"%Symbol%":j?Symbol:_,"%SyntaxError%":k,"%ThrowTypeError%":H,"%TypedArray%":de,"%TypeError%":x,"%Uint8Array%":typeof Uint8Array>"u"?_:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?_:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?_:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?_:Uint32Array,"%URIError%":R,"%WeakMap%":typeof WeakMap>"u"?_:WeakMap,"%WeakRef%":typeof WeakRef>"u"?_:WeakRef,"%WeakSet%":typeof WeakSet>"u"?_:WeakSet,"%Function.prototype.call%":ee,"%Function.prototype.apply%":te,"%Object.defineProperty%":F,"%Object.getPrototypeOf%":W,"%Math.abs%":P,"%Math.floor%":M,"%Math.max%":N,"%Math.min%":I,"%Math.pow%":V,"%Math.round%":B,"%Math.sign%":D,"%Reflect.getPrototypeOf%":X};if(q)try{null.error}catch(xe){var ae=q(q(xe));le["%Error.prototype%"]=ae}var Q=function xe(Ae){var se;if(Ae==="%AsyncFunction%")se=O("async function () {}");else if(Ae==="%GeneratorFunction%")se=O("function* () {}");else if(Ae==="%AsyncGeneratorFunction%")se=O("async function* () {}");else if(Ae==="%AsyncGenerator%"){var K=xe("%AsyncGeneratorFunction%");K&&(se=K.prototype)}else if(Ae==="%AsyncIteratorPrototype%"){var ne=xe("%AsyncGenerator%");ne&&q&&(se=q(ne.prototype))}return le[Ae]=se,se},ie={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Z=requireFunctionBind(),J=requireHasown(),ue=Z.call(ee,Array.prototype.concat),pe=Z.call(te,Array.prototype.splice),Re=Z.call(ee,String.prototype.replace),me=Z.call(ee,String.prototype.slice),ge=Z.call(ee,RegExp.prototype.exec),we=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,oe=/\\(\\)?/g,ce=function(Ae){var se=me(Ae,0,1),K=me(Ae,-1);if(se==="%"&&K!=="%")throw new k("invalid intrinsic syntax, expected closing `%`");if(K==="%"&&se!=="%")throw new k("invalid intrinsic syntax, expected opening `%`");var ne=[];return Re(Ae,we,function(fe,Ee,be,Te){ne[ne.length]=be?Re(Te,oe,"$1"):Ee||fe}),ne},ye=function(Ae,se){var K=Ae,ne;if(J(ie,K)&&(ne=ie[K],K="%"+ne[0]+"%"),J(le,K)){var fe=le[K];if(fe===G&&(fe=Q(K)),typeof fe>"u"&&!se)throw new x("intrinsic "+Ae+" exists, but is not available. Please file an issue!");return{alias:ne,name:K,value:fe}}throw new k("intrinsic "+Ae+" does not exist!")};return getIntrinsic=function(Ae,se){if(typeof Ae!="string"||Ae.length===0)throw new x("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof se!="boolean")throw new x('"allowMissing" argument must be a boolean');if(ge(/^%?[^%]*%?$/,Ae)===null)throw new k("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var K=ce(Ae),ne=K.length>0?K[0]:"",fe=ye("%"+ne+"%",se),Ee=fe.name,be=fe.value,Te=!1,Ne=fe.alias;Ne&&(ne=Ne[0],pe(K,ue([0,1],Ne)));for(var ve=1,Oe=!0;ve<K.length;ve+=1){var Pe=K[ve],Se=me(Pe,0,1),Ce=me(Pe,-1);if((Se==='"'||Se==="'"||Se==="`"||Ce==='"'||Ce==="'"||Ce==="`")&&Se!==Ce)throw new k("property names with quotes must have matching quotes");if((Pe==="constructor"||!Oe)&&(Te=!0),ne+="."+Pe,Ee="%"+ne+"%",J(le,Ee))be=le[Ee];else if(be!=null){if(!(Pe in be)){if(!se)throw new x("base intrinsic for "+Ae+" exists, but the property is not available.");return}if(L&&ve+1>=K.length){var Fe=L(be,Pe);Oe=!!Fe,Oe&&"get"in Fe&&!("originalValue"in Fe.get)?be=Fe.get:be=be[Pe]}else Oe=J(be,Pe),be=be[Pe];Oe&&!Te&&(le[Ee]=be)}}return be},getIntrinsic}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var _=requireGetIntrinsic(),S=requireCallBindApplyHelpers(),w=S([_("%String.prototype.indexOf%")]);return callBound=function(T,A){var k=_(T,!!A);return typeof k=="function"&&w(T,".prototype.")>-1?S([k]):k},callBound}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var _=requireShams()(),S=requireCallBound(),w=S("Object.prototype.toString"),E=function(x){return _&&x&&typeof x=="object"&&Symbol.toStringTag in x?!1:w(x)==="[object Arguments]"},T=function(x){return E(x)?!0:x!==null&&typeof x=="object"&&"length"in x&&typeof x.length=="number"&&x.length>=0&&w(x)!=="[object Array]"&&"callee"in x&&w(x.callee)==="[object Function]"},A=(function(){return E(arguments)})();return E.isLegacyArguments=T,isArguments=A?E:T,isArguments}var isRegex,hasRequiredIsRegex;function requireIsRegex(){if(hasRequiredIsRegex)return isRegex;hasRequiredIsRegex=1;var _=requireCallBound(),S=requireShams()(),w=requireHasown(),E=requireGopd(),T;if(S){var A=_("RegExp.prototype.exec"),k={},x=function(){throw k},R={toString:x,valueOf:x};typeof Symbol.toPrimitive=="symbol"&&(R[Symbol.toPrimitive]=x),T=function(I){if(!I||typeof I!="object")return!1;var V=E(I,"lastIndex"),B=V&&w(V,"value");if(!B)return!1;try{A(I,R)}catch(D){return D===k}}}else{var P=_("Object.prototype.toString"),M="[object RegExp]";T=function(I){return!I||typeof I!="object"&&typeof I!="function"?!1:P(I)===M}}return isRegex=T,isRegex}var safeRegexTest,hasRequiredSafeRegexTest;function requireSafeRegexTest(){if(hasRequiredSafeRegexTest)return safeRegexTest;hasRequiredSafeRegexTest=1;var _=requireCallBound(),S=requireIsRegex(),w=_("RegExp.prototype.exec"),E=requireType();return safeRegexTest=function(A){if(!S(A))throw new E("`regex` must be a RegExp");return function(x){return w(A,x)!==null}},safeRegexTest}var generatorFunction,hasRequiredGeneratorFunction;function requireGeneratorFunction(){if(hasRequiredGeneratorFunction)return generatorFunction;hasRequiredGeneratorFunction=1;const _=(function*(){}).constructor;return generatorFunction=()=>_,generatorFunction}var isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var _=requireCallBound(),S=requireSafeRegexTest(),w=S(/^\s*(?:function)?\*/),E=requireShams()(),T=requireGetProto(),A=_("Object.prototype.toString"),k=_("Function.prototype.toString"),x=requireGeneratorFunction();return isGeneratorFunction=function(P){if(typeof P!="function")return!1;if(w(k(P)))return!0;if(!E){var M=A(P);return M==="[object GeneratorFunction]"}if(!T)return!1;var N=x();return N&&T(P)===N.prototype},isGeneratorFunction}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var _=Function.prototype.toString,S=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,w,E;if(typeof S=="function"&&typeof Object.defineProperty=="function")try{w=Object.defineProperty({},"length",{get:function(){throw E}}),E={},S(function(){throw 42},null,w)}catch(L){L!==E&&(S=null)}else S=null;var T=/^\s*class\b/,A=function(F){try{var $=_.call(F);return T.test($)}catch{return!1}},k=function(F){try{return A(F)?!1:(_.call(F),!0)}catch{return!1}},x=Object.prototype.toString,R="[object Object]",P="[object Function]",M="[object GeneratorFunction]",N="[object HTMLAllCollection]",I="[object HTML document.all class]",V="[object HTMLCollection]",B=typeof Symbol=="function"&&!!Symbol.toStringTag,D=!(0 in[,]),z=function(){return!1};if(typeof document=="object"){var O=document.all;x.call(O)===x.call(document.all)&&(z=function(F){if((D||!F)&&(typeof F>"u"||typeof F=="object"))try{var $=x.call(F);return($===N||$===I||$===V||$===R)&&F("")==null}catch{}return!1})}return isCallable=S?function(F){if(z(F))return!0;if(!F||typeof F!="function"&&typeof F!="object")return!1;try{S(F,null,w)}catch($){if($!==E)return!1}return!A(F)&&k(F)}:function(F){if(z(F))return!0;if(!F||typeof F!="function"&&typeof F!="object")return!1;if(B)return k(F);if(A(F))return!1;var $=x.call(F);return $!==P&&$!==M&&!/^\[object HTML/.test($)?!1:k(F)},isCallable}var forEach,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach;hasRequiredForEach=1;var _=requireIsCallable(),S=Object.prototype.toString,w=Object.prototype.hasOwnProperty,E=function(R,P,M){for(var N=0,I=R.length;N<I;N++)w.call(R,N)&&(M==null?P(R[N],N,R):P.call(M,R[N],N,R))},T=function(R,P,M){for(var N=0,I=R.length;N<I;N++)M==null?P(R.charAt(N),N,R):P.call(M,R.charAt(N),N,R)},A=function(R,P,M){for(var N in R)w.call(R,N)&&(M==null?P(R[N],N,R):P.call(M,R[N],N,R))};function k(x){return S.call(x)==="[object Array]"}return forEach=function(R,P,M){if(!_(P))throw new TypeError("iterator must be a function");var N;arguments.length>=3&&(N=M),k(R)?E(R,P,N):typeof R=="string"?T(R,P,N):A(R,P,N)},forEach}var possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames;function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames||(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),possibleTypedArrayNames}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var _=requirePossibleTypedArrayNames(),S=typeof globalThis>"u"?commonjsGlobal:globalThis;return availableTypedArrays=function(){for(var E=[],T=0;T<_.length;T++)typeof S[_[T]]=="function"&&(E[E.length]=_[T]);return E},availableTypedArrays}var callBind={exports:{}},defineDataProperty,hasRequiredDefineDataProperty;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var _=requireEsDefineProperty(),S=requireSyntax(),w=requireType(),E=requireGopd();return defineDataProperty=function(A,k,x){if(!A||typeof A!="object"&&typeof A!="function")throw new w("`obj` must be an object or a function`");if(typeof k!="string"&&typeof k!="symbol")throw new w("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new w("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new w("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new w("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new w("`loose`, if provided, must be a boolean");var R=arguments.length>3?arguments[3]:null,P=arguments.length>4?arguments[4]:null,M=arguments.length>5?arguments[5]:null,N=arguments.length>6?arguments[6]:!1,I=!!E&&E(A,k);if(_)_(A,k,{configurable:M===null&&I?I.configurable:!M,enumerable:R===null&&I?I.enumerable:!R,value:x,writable:P===null&&I?I.writable:!P});else if(N||!R&&!P&&!M)A[k]=x;else throw new S("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},defineDataProperty}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var _=requireEsDefineProperty(),S=function(){return!!_};return S.hasArrayLengthDefineBug=function(){if(!_)return null;try{return _([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=S,hasPropertyDescriptors_1}var setFunctionLength,hasRequiredSetFunctionLength;function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var _=requireGetIntrinsic(),S=requireDefineDataProperty(),w=requireHasPropertyDescriptors()(),E=requireGopd(),T=requireType(),A=_("%Math.floor%");return setFunctionLength=function(x,R){if(typeof x!="function")throw new T("`fn` is not a function");if(typeof R!="number"||R<0||R>4294967295||A(R)!==R)throw new T("`length` must be a positive 32-bit integer");var P=arguments.length>2&&!!arguments[2],M=!0,N=!0;if("length"in x&&E){var I=E(x,"length");I&&!I.configurable&&(M=!1),I&&!I.writable&&(N=!1)}return(M||N||!P)&&(w?S(x,"length",R,!0,!0):S(x,"length",R)),x},setFunctionLength}var applyBind,hasRequiredApplyBind;function requireApplyBind(){if(hasRequiredApplyBind)return applyBind;hasRequiredApplyBind=1;var _=requireFunctionBind(),S=requireFunctionApply(),w=requireActualApply();return applyBind=function(){return w(_,S,arguments)},applyBind}var hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,(function(_){var S=requireSetFunctionLength(),w=requireEsDefineProperty(),E=requireCallBindApplyHelpers(),T=requireApplyBind();_.exports=function(k){var x=E(arguments),R=k.length-(arguments.length-1);return S(x,1+(R>0?R:0),!0)},w?w(_.exports,"apply",{value:T}):_.exports.apply=T})(callBind)),callBind.exports}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var _=requireForEach(),S=requireAvailableTypedArrays(),w=requireCallBind(),E=requireCallBound(),T=requireGopd(),A=requireGetProto(),k=E("Object.prototype.toString"),x=requireShams()(),R=typeof globalThis>"u"?commonjsGlobal:globalThis,P=S(),M=E("String.prototype.slice"),N=E("Array.prototype.indexOf",!0)||function(z,O){for(var L=0;L<z.length;L+=1)if(z[L]===O)return L;return-1},I={__proto__:null};x&&T&&A?_(P,function(D){var z=new R[D];if(Symbol.toStringTag in z&&A){var O=A(z),L=T(O,Symbol.toStringTag);if(!L&&O){var F=A(O);L=T(F,Symbol.toStringTag)}I["$"+D]=w(L.get)}}):_(P,function(D){var z=new R[D],O=z.slice||z.set;O&&(I["$"+D]=w(O))});var V=function(z){var O=!1;return _(I,function(L,F){if(!O)try{"$"+L(z)===F&&(O=M(F,1))}catch{}}),O},B=function(z){var O=!1;return _(I,function(L,F){if(!O)try{L(z),O=M(F,1)}catch{}}),O};return whichTypedArray=function(z){if(!z||typeof z!="object")return!1;if(!x){var O=M(k(z),8,-1);return N(P,O)>-1?O:O!=="Object"?!1:B(z)}return T?V(z):null},whichTypedArray}var isTypedArray,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray;hasRequiredIsTypedArray=1;var _=requireWhichTypedArray();return isTypedArray=function(w){return!!_(w)},isTypedArray}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,(function(_){var S=requireIsArguments(),w=requireIsGeneratorFunction(),E=requireWhichTypedArray(),T=requireIsTypedArray();function A(ve){return ve.call.bind(ve)}var k=typeof BigInt<"u",x=typeof Symbol<"u",R=A(Object.prototype.toString),P=A(Number.prototype.valueOf),M=A(String.prototype.valueOf),N=A(Boolean.prototype.valueOf);if(k)var I=A(BigInt.prototype.valueOf);if(x)var V=A(Symbol.prototype.valueOf);function B(ve,Oe){if(typeof ve!="object")return!1;try{return Oe(ve),!0}catch{return!1}}_.isArgumentsObject=S,_.isGeneratorFunction=w,_.isTypedArray=T;function D(ve){return typeof Promise<"u"&&ve instanceof Promise||ve!==null&&typeof ve=="object"&&typeof ve.then=="function"&&typeof ve.catch=="function"}_.isPromise=D;function z(ve){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ve):T(ve)||me(ve)}_.isArrayBufferView=z;function O(ve){return E(ve)==="Uint8Array"}_.isUint8Array=O;function L(ve){return E(ve)==="Uint8ClampedArray"}_.isUint8ClampedArray=L;function F(ve){return E(ve)==="Uint16Array"}_.isUint16Array=F;function $(ve){return E(ve)==="Uint32Array"}_.isUint32Array=$;function H(ve){return E(ve)==="Int8Array"}_.isInt8Array=H;function j(ve){return E(ve)==="Int16Array"}_.isInt16Array=j;function q(ve){return E(ve)==="Int32Array"}_.isInt32Array=q;function W(ve){return E(ve)==="Float32Array"}_.isFloat32Array=W;function X(ve){return E(ve)==="Float64Array"}_.isFloat64Array=X;function te(ve){return E(ve)==="BigInt64Array"}_.isBigInt64Array=te;function ee(ve){return E(ve)==="BigUint64Array"}_.isBigUint64Array=ee;function G(ve){return R(ve)==="[object Map]"}G.working=typeof Map<"u"&&G(new Map);function de(ve){return typeof Map>"u"?!1:G.working?G(ve):ve instanceof Map}_.isMap=de;function le(ve){return R(ve)==="[object Set]"}le.working=typeof Set<"u"&&le(new Set);function ae(ve){return typeof Set>"u"?!1:le.working?le(ve):ve instanceof Set}_.isSet=ae;function Q(ve){return R(ve)==="[object WeakMap]"}Q.working=typeof WeakMap<"u"&&Q(new WeakMap);function ie(ve){return typeof WeakMap>"u"?!1:Q.working?Q(ve):ve instanceof WeakMap}_.isWeakMap=ie;function Z(ve){return R(ve)==="[object WeakSet]"}Z.working=typeof WeakSet<"u"&&Z(new WeakSet);function J(ve){return Z(ve)}_.isWeakSet=J;function ue(ve){return R(ve)==="[object ArrayBuffer]"}ue.working=typeof ArrayBuffer<"u"&&ue(new ArrayBuffer);function pe(ve){return typeof ArrayBuffer>"u"?!1:ue.working?ue(ve):ve instanceof ArrayBuffer}_.isArrayBuffer=pe;function Re(ve){return R(ve)==="[object DataView]"}Re.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Re(new DataView(new ArrayBuffer(1),0,1));function me(ve){return typeof DataView>"u"?!1:Re.working?Re(ve):ve instanceof DataView}_.isDataView=me;var ge=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function we(ve){return R(ve)==="[object SharedArrayBuffer]"}function oe(ve){return typeof ge>"u"?!1:(typeof we.working>"u"&&(we.working=we(new ge)),we.working?we(ve):ve instanceof ge)}_.isSharedArrayBuffer=oe;function ce(ve){return R(ve)==="[object AsyncFunction]"}_.isAsyncFunction=ce;function ye(ve){return R(ve)==="[object Map Iterator]"}_.isMapIterator=ye;function xe(ve){return R(ve)==="[object Set Iterator]"}_.isSetIterator=xe;function Ae(ve){return R(ve)==="[object Generator]"}_.isGeneratorObject=Ae;function se(ve){return R(ve)==="[object WebAssembly.Module]"}_.isWebAssemblyCompiledModule=se;function K(ve){return B(ve,P)}_.isNumberObject=K;function ne(ve){return B(ve,M)}_.isStringObject=ne;function fe(ve){return B(ve,N)}_.isBooleanObject=fe;function Ee(ve){return k&&B(ve,I)}_.isBigIntObject=Ee;function be(ve){return x&&B(ve,V)}_.isSymbolObject=be;function Te(ve){return K(ve)||ne(ve)||fe(ve)||Ee(ve)||be(ve)}_.isBoxedPrimitive=Te;function Ne(ve){return typeof Uint8Array<"u"&&(pe(ve)||oe(ve))}_.isAnyArrayBuffer=Ne,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ve){Object.defineProperty(_,ve,{enumerable:!1,value:function(){throw new Error(ve+" is not supported in userland")}})})})(types)),types}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(S){return S&&typeof S=="object"&&typeof S.copy=="function"&&typeof S.fill=="function"&&typeof S.readUInt8=="function"}),isBufferBrowser}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(S,w){w&&(S.super_=w,S.prototype=Object.create(w.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(S,w){if(w){S.super_=w;var E=function(){};E.prototype=w.prototype,S.prototype=new E,S.prototype.constructor=S}}),inherits_browser.exports}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,(function(_){var S={},w=Object.getOwnPropertyDescriptors||function(ge){for(var we=Object.keys(ge),oe={},ce=0;ce<we.length;ce++)oe[we[ce]]=Object.getOwnPropertyDescriptor(ge,we[ce]);return oe},E=/%[sdj%]/g;_.format=function(me){if(!j(me)){for(var ge=[],we=0;we<arguments.length;we++)ge.push(x(arguments[we]));return ge.join(" ")}for(var we=1,oe=arguments,ce=oe.length,ye=String(me).replace(E,function(Ae){if(Ae==="%%")return"%";if(we>=ce)return Ae;switch(Ae){case"%s":return String(oe[we++]);case"%d":return Number(oe[we++]);case"%j":try{return JSON.stringify(oe[we++])}catch{return"[Circular]"}default:return Ae}}),xe=oe[we];we<ce;xe=oe[++we])F(xe)||!te(xe)?ye+=" "+xe:ye+=" "+x(xe);return ye},_.deprecate=function(me,ge){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return me;if(typeof process$1>"u")return function(){return _.deprecate(me,ge).apply(this,arguments)};var we=!1;function oe(){if(!we){if(process$1.throwDeprecation)throw new Error(ge);process$1.traceDeprecation?console.trace(ge):console.error(ge),we=!0}return me.apply(this,arguments)}return oe};var T={},A=/^$/;if(S.NODE_DEBUG){var k=S.NODE_DEBUG;k=k.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),A=new RegExp("^"+k+"$","i")}_.debuglog=function(me){if(me=me.toUpperCase(),!T[me])if(A.test(me)){var ge=process$1.pid;T[me]=function(){var we=_.format.apply(_,arguments);console.error("%s %d: %s",me,ge,we)}}else T[me]=function(){};return T[me]};function x(me,ge){var we={seen:[],stylize:P};return arguments.length>=3&&(we.depth=arguments[2]),arguments.length>=4&&(we.colors=arguments[3]),L(ge)?we.showHidden=ge:ge&&_._extend(we,ge),W(we.showHidden)&&(we.showHidden=!1),W(we.depth)&&(we.depth=2),W(we.colors)&&(we.colors=!1),W(we.customInspect)&&(we.customInspect=!0),we.colors&&(we.stylize=R),N(we,me,we.depth)}_.inspect=x,x.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},x.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function R(me,ge){var we=x.styles[ge];return we?"\x1B["+x.colors[we][0]+"m"+me+"\x1B["+x.colors[we][1]+"m":me}function P(me,ge){return me}function M(me){var ge={};return me.forEach(function(we,oe){ge[we]=!0}),ge}function N(me,ge,we){if(me.customInspect&&ge&&de(ge.inspect)&&ge.inspect!==_.inspect&&!(ge.constructor&&ge.constructor.prototype===ge)){var oe=ge.inspect(we,me);return j(oe)||(oe=N(me,oe,we)),oe}var ce=I(me,ge);if(ce)return ce;var ye=Object.keys(ge),xe=M(ye);if(me.showHidden&&(ye=Object.getOwnPropertyNames(ge)),G(ge)&&(ye.indexOf("message")>=0||ye.indexOf("description")>=0))return V(ge);if(ye.length===0){if(de(ge)){var Ae=ge.name?": "+ge.name:"";return me.stylize("[Function"+Ae+"]","special")}if(X(ge))return me.stylize(RegExp.prototype.toString.call(ge),"regexp");if(ee(ge))return me.stylize(Date.prototype.toString.call(ge),"date");if(G(ge))return V(ge)}var se="",K=!1,ne=["{","}"];if(O(ge)&&(K=!0,ne=["[","]"]),de(ge)){var fe=ge.name?": "+ge.name:"";se=" [Function"+fe+"]"}if(X(ge)&&(se=" "+RegExp.prototype.toString.call(ge)),ee(ge)&&(se=" "+Date.prototype.toUTCString.call(ge)),G(ge)&&(se=" "+V(ge)),ye.length===0&&(!K||ge.length==0))return ne[0]+se+ne[1];if(we<0)return X(ge)?me.stylize(RegExp.prototype.toString.call(ge),"regexp"):me.stylize("[Object]","special");me.seen.push(ge);var Ee;return K?Ee=B(me,ge,we,xe,ye):Ee=ye.map(function(be){return D(me,ge,we,xe,be,K)}),me.seen.pop(),z(Ee,se,ne)}function I(me,ge){if(W(ge))return me.stylize("undefined","undefined");if(j(ge)){var we="'"+JSON.stringify(ge).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return me.stylize(we,"string")}if(H(ge))return me.stylize(""+ge,"number");if(L(ge))return me.stylize(""+ge,"boolean");if(F(ge))return me.stylize("null","null")}function V(me){return"["+Error.prototype.toString.call(me)+"]"}function B(me,ge,we,oe,ce){for(var ye=[],xe=0,Ae=ge.length;xe<Ae;++xe)J(ge,String(xe))?ye.push(D(me,ge,we,oe,String(xe),!0)):ye.push("");return ce.forEach(function(se){se.match(/^\d+$/)||ye.push(D(me,ge,we,oe,se,!0))}),ye}function D(me,ge,we,oe,ce,ye){var xe,Ae,se;if(se=Object.getOwnPropertyDescriptor(ge,ce)||{value:ge[ce]},se.get?se.set?Ae=me.stylize("[Getter/Setter]","special"):Ae=me.stylize("[Getter]","special"):se.set&&(Ae=me.stylize("[Setter]","special")),J(oe,ce)||(xe="["+ce+"]"),Ae||(me.seen.indexOf(se.value)<0?(F(we)?Ae=N(me,se.value,null):Ae=N(me,se.value,we-1),Ae.indexOf(`
`)>-1&&(ye?Ae=Ae.split(`
`).map(function(K){return"  "+K}).join(`
`).slice(2):Ae=`
`+Ae.split(`
`).map(function(K){return"   "+K}).join(`
`))):Ae=me.stylize("[Circular]","special")),W(xe)){if(ye&&ce.match(/^\d+$/))return Ae;xe=JSON.stringify(""+ce),xe.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(xe=xe.slice(1,-1),xe=me.stylize(xe,"name")):(xe=xe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),xe=me.stylize(xe,"string"))}return xe+": "+Ae}function z(me,ge,we){var oe=me.reduce(function(ce,ye){return ye.indexOf(`
`)>=0,ce+ye.replace(/\u001b\[\d\d?m/g,"").length+1},0);return oe>60?we[0]+(ge===""?"":ge+`
 `)+" "+me.join(`,
  `)+" "+we[1]:we[0]+ge+" "+me.join(", ")+" "+we[1]}_.types=requireTypes();function O(me){return Array.isArray(me)}_.isArray=O;function L(me){return typeof me=="boolean"}_.isBoolean=L;function F(me){return me===null}_.isNull=F;function $(me){return me==null}_.isNullOrUndefined=$;function H(me){return typeof me=="number"}_.isNumber=H;function j(me){return typeof me=="string"}_.isString=j;function q(me){return typeof me=="symbol"}_.isSymbol=q;function W(me){return me===void 0}_.isUndefined=W;function X(me){return te(me)&&ae(me)==="[object RegExp]"}_.isRegExp=X,_.types.isRegExp=X;function te(me){return typeof me=="object"&&me!==null}_.isObject=te;function ee(me){return te(me)&&ae(me)==="[object Date]"}_.isDate=ee,_.types.isDate=ee;function G(me){return te(me)&&(ae(me)==="[object Error]"||me instanceof Error)}_.isError=G,_.types.isNativeError=G;function de(me){return typeof me=="function"}_.isFunction=de;function le(me){return me===null||typeof me=="boolean"||typeof me=="number"||typeof me=="string"||typeof me=="symbol"||typeof me>"u"}_.isPrimitive=le,_.isBuffer=requireIsBufferBrowser();function ae(me){return Object.prototype.toString.call(me)}function Q(me){return me<10?"0"+me.toString(10):me.toString(10)}var ie=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Z(){var me=new Date,ge=[Q(me.getHours()),Q(me.getMinutes()),Q(me.getSeconds())].join(":");return[me.getDate(),ie[me.getMonth()],ge].join(" ")}_.log=function(){console.log("%s - %s",Z(),_.format.apply(_,arguments))},_.inherits=requireInherits_browser(),_._extend=function(me,ge){if(!ge||!te(ge))return me;for(var we=Object.keys(ge),oe=we.length;oe--;)me[we[oe]]=ge[we[oe]];return me};function J(me,ge){return Object.prototype.hasOwnProperty.call(me,ge)}var ue=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;_.promisify=function(ge){if(typeof ge!="function")throw new TypeError('The "original" argument must be of type Function');if(ue&&ge[ue]){var we=ge[ue];if(typeof we!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(we,ue,{value:we,enumerable:!1,writable:!1,configurable:!0}),we}function we(){for(var oe,ce,ye=new Promise(function(se,K){oe=se,ce=K}),xe=[],Ae=0;Ae<arguments.length;Ae++)xe.push(arguments[Ae]);xe.push(function(se,K){se?ce(se):oe(K)});try{ge.apply(this,xe)}catch(se){ce(se)}return ye}return Object.setPrototypeOf(we,Object.getPrototypeOf(ge)),ue&&Object.defineProperty(we,ue,{value:we,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(we,w(ge))},_.promisify.custom=ue;function pe(me,ge){if(!me){var we=new Error("Promise was rejected with a falsy value");we.reason=me,me=we}return ge(me)}function Re(me){if(typeof me!="function")throw new TypeError('The "original" argument must be of type Function');function ge(){for(var we=[],oe=0;oe<arguments.length;oe++)we.push(arguments[oe]);var ce=we.pop();if(typeof ce!="function")throw new TypeError("The last argument must be of type Function");var ye=this,xe=function(){return ce.apply(ye,arguments)};me.apply(this,we).then(function(Ae){process$1.nextTick(xe.bind(null,null,Ae))},function(Ae){process$1.nextTick(pe.bind(null,Ae,xe))})}return Object.setPrototypeOf(ge,Object.getPrototypeOf(me)),Object.defineProperties(ge,w(me)),ge}_.callbackify=Re})(util)),util}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function _(B,D){var z=Object.keys(B);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(B);D&&(O=O.filter(function(L){return Object.getOwnPropertyDescriptor(B,L).enumerable})),z.push.apply(z,O)}return z}function S(B){for(var D=1;D<arguments.length;D++){var z=arguments[D]!=null?arguments[D]:{};D%2?_(Object(z),!0).forEach(function(O){w(B,O,z[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(z)):_(Object(z)).forEach(function(O){Object.defineProperty(B,O,Object.getOwnPropertyDescriptor(z,O))})}return B}function w(B,D,z){return D=k(D),D in B?Object.defineProperty(B,D,{value:z,enumerable:!0,configurable:!0,writable:!0}):B[D]=z,B}function E(B,D){if(!(B instanceof D))throw new TypeError("Cannot call a class as a function")}function T(B,D){for(var z=0;z<D.length;z++){var O=D[z];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(B,k(O.key),O)}}function A(B,D,z){return D&&T(B.prototype,D),Object.defineProperty(B,"prototype",{writable:!1}),B}function k(B){var D=x(B,"string");return typeof D=="symbol"?D:String(D)}function x(B,D){if(typeof B!="object"||B===null)return B;var z=B[Symbol.toPrimitive];if(z!==void 0){var O=z.call(B,D);if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)}var R=requireDist(),P=R.Buffer,M=requireUtil(),N=M.inspect,I=N&&N.custom||"inspect";function V(B,D,z){P.prototype.copy.call(B,D,z)}return buffer_list=(function(){function B(){E(this,B),this.head=null,this.tail=null,this.length=0}return A(B,[{key:"push",value:function(z){var O={data:z,next:null};this.length>0?this.tail.next=O:this.head=O,this.tail=O,++this.length}},{key:"unshift",value:function(z){var O={data:z,next:this.head};this.length===0&&(this.tail=O),this.head=O,++this.length}},{key:"shift",value:function(){if(this.length!==0){var z=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,z}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(z){if(this.length===0)return"";for(var O=this.head,L=""+O.data;O=O.next;)L+=z+O.data;return L}},{key:"concat",value:function(z){if(this.length===0)return P.alloc(0);for(var O=P.allocUnsafe(z>>>0),L=this.head,F=0;L;)V(L.data,O,F),F+=L.data.length,L=L.next;return O}},{key:"consume",value:function(z,O){var L;return z<this.head.data.length?(L=this.head.data.slice(0,z),this.head.data=this.head.data.slice(z)):z===this.head.data.length?L=this.shift():L=O?this._getString(z):this._getBuffer(z),L}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(z){var O=this.head,L=1,F=O.data;for(z-=F.length;O=O.next;){var $=O.data,H=z>$.length?$.length:z;if(H===$.length?F+=$:F+=$.slice(0,z),z-=H,z===0){H===$.length?(++L,O.next?this.head=O.next:this.head=this.tail=null):(this.head=O,O.data=$.slice(H));break}++L}return this.length-=L,F}},{key:"_getBuffer",value:function(z){var O=P.allocUnsafe(z),L=this.head,F=1;for(L.data.copy(O),z-=L.data.length;L=L.next;){var $=L.data,H=z>$.length?$.length:z;if($.copy(O,O.length-z,0,H),z-=H,z===0){H===$.length?(++F,L.next?this.head=L.next:this.head=this.tail=null):(this.head=L,L.data=$.slice(H));break}++F}return this.length-=F,O}},{key:I,value:function(z,O){return N(this,S(S({},O),{},{depth:0,customInspect:!1}))}}]),B})(),buffer_list}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;function _(k,x){var R=this,P=this._readableState&&this._readableState.destroyed,M=this._writableState&&this._writableState.destroyed;return P||M?(x?x(k):k&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(T,this,k)):process$1.nextTick(T,this,k)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(k||null,function(N){!x&&N?R._writableState?R._writableState.errorEmitted?process$1.nextTick(w,R):(R._writableState.errorEmitted=!0,process$1.nextTick(S,R,N)):process$1.nextTick(S,R,N):x?(process$1.nextTick(w,R),x(N)):process$1.nextTick(w,R)}),this)}function S(k,x){T(k,x),w(k)}function w(k){k._writableState&&!k._writableState.emitClose||k._readableState&&!k._readableState.emitClose||k.emit("close")}function E(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function T(k,x){k.emit("error",x)}function A(k,x){var R=k._readableState,P=k._writableState;R&&R.autoDestroy||P&&P.autoDestroy?k.destroy(x):k.emit("error",x)}return destroy_1={destroy:_,undestroy:E,errorOrDestroy:A},destroy_1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function _(x,R){x.prototype=Object.create(R.prototype),x.prototype.constructor=x,x.__proto__=R}var S={};function w(x,R,P){P||(P=Error);function M(I,V,B){return typeof R=="string"?R:R(I,V,B)}var N=(function(I){_(V,I);function V(B,D,z){return I.call(this,M(B,D,z))||this}return V})(P);N.prototype.name=P.name,N.prototype.code=x,S[x]=N}function E(x,R){if(Array.isArray(x)){var P=x.length;return x=x.map(function(M){return String(M)}),P>2?"one of ".concat(R," ").concat(x.slice(0,P-1).join(", "),", or ")+x[P-1]:P===2?"one of ".concat(R," ").concat(x[0]," or ").concat(x[1]):"of ".concat(R," ").concat(x[0])}else return"of ".concat(R," ").concat(String(x))}function T(x,R,P){return x.substr(0,R.length)===R}function A(x,R,P){return(P===void 0||P>x.length)&&(P=x.length),x.substring(P-R.length,P)===R}function k(x,R,P){return typeof P!="number"&&(P=0),P+R.length>x.length?!1:x.indexOf(R,P)!==-1}return w("ERR_INVALID_OPT_VALUE",function(x,R){return'The value "'+R+'" is invalid for option "'+x+'"'},TypeError),w("ERR_INVALID_ARG_TYPE",function(x,R,P){var M;typeof R=="string"&&T(R,"not ")?(M="must not be",R=R.replace(/^not /,"")):M="must be";var N;if(A(x," argument"))N="The ".concat(x," ").concat(M," ").concat(E(R,"type"));else{var I=k(x,".")?"property":"argument";N='The "'.concat(x,'" ').concat(I," ").concat(M," ").concat(E(R,"type"))}return N+=". Received type ".concat(typeof P),N},TypeError),w("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),w("ERR_METHOD_NOT_IMPLEMENTED",function(x){return"The "+x+" method is not implemented"}),w("ERR_STREAM_PREMATURE_CLOSE","Premature close"),w("ERR_STREAM_DESTROYED",function(x){return"Cannot call "+x+" after a stream was destroyed"}),w("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),w("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),w("ERR_STREAM_WRITE_AFTER_END","write after end"),w("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),w("ERR_UNKNOWN_ENCODING",function(x){return"Unknown encoding: "+x},TypeError),w("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=S,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var _=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function S(E,T,A){return E.highWaterMark!=null?E.highWaterMark:T?E[A]:null}function w(E,T,A,k){var x=S(T,k,A);if(x!=null){if(!(isFinite(x)&&Math.floor(x)===x)||x<0){var R=k?A:"highWaterMark";throw new _(R,x)}return Math.floor(x)}return E.objectMode?16:16*1024}return state={getHighWaterMark:w},state}var browser,hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser;hasRequiredBrowser=1,browser=_;function _(w,E){if(S("noDeprecation"))return w;var T=!1;function A(){if(!T){if(S("throwDeprecation"))throw new Error(E);S("traceDeprecation")?console.trace(E):console.warn(E),T=!0}return w.apply(this,arguments)}return A}function S(w){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var E=commonjsGlobal.localStorage[w];return E==null?!1:String(E).toLowerCase()==="true"}return browser}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=W;function _(oe){var ce=this;this.next=null,this.entry=null,this.finish=function(){we(ce,oe)}}var S;W.WritableState=j;var w={deprecate:requireBrowser()},E=requireStreamBrowser(),T=requireDist().Buffer,A=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function k(oe){return T.from(oe)}function x(oe){return T.isBuffer(oe)||oe instanceof A}var R=requireDestroy(),P=requireState(),M=P.getHighWaterMark,N=requireErrorsBrowser().codes,I=N.ERR_INVALID_ARG_TYPE,V=N.ERR_METHOD_NOT_IMPLEMENTED,B=N.ERR_MULTIPLE_CALLBACK,D=N.ERR_STREAM_CANNOT_PIPE,z=N.ERR_STREAM_DESTROYED,O=N.ERR_STREAM_NULL_VALUES,L=N.ERR_STREAM_WRITE_AFTER_END,F=N.ERR_UNKNOWN_ENCODING,$=R.errorOrDestroy;requireInherits_browser()(W,E);function H(){}function j(oe,ce,ye){S=S||require_stream_duplex(),oe=oe||{},typeof ye!="boolean"&&(ye=ce instanceof S),this.objectMode=!!oe.objectMode,ye&&(this.objectMode=this.objectMode||!!oe.writableObjectMode),this.highWaterMark=M(this,oe,"writableHighWaterMark",ye),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var xe=oe.decodeStrings===!1;this.decodeStrings=!xe,this.defaultEncoding=oe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ae){Q(ce,Ae)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=oe.emitClose!==!1,this.autoDestroy=!!oe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new _(this)}j.prototype.getBuffer=function(){for(var ce=this.bufferedRequest,ye=[];ce;)ye.push(ce),ce=ce.next;return ye},(function(){try{Object.defineProperty(j.prototype,"buffer",{get:w.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var q;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(q=Function.prototype[Symbol.hasInstance],Object.defineProperty(W,Symbol.hasInstance,{value:function(ce){return q.call(this,ce)?!0:this!==W?!1:ce&&ce._writableState instanceof j}})):q=function(ce){return ce instanceof this};function W(oe){S=S||require_stream_duplex();var ce=this instanceof S;if(!ce&&!q.call(W,this))return new W(oe);this._writableState=new j(oe,this,ce),this.writable=!0,oe&&(typeof oe.write=="function"&&(this._write=oe.write),typeof oe.writev=="function"&&(this._writev=oe.writev),typeof oe.destroy=="function"&&(this._destroy=oe.destroy),typeof oe.final=="function"&&(this._final=oe.final)),E.call(this)}W.prototype.pipe=function(){$(this,new D)};function X(oe,ce){var ye=new L;$(oe,ye),process$1.nextTick(ce,ye)}function te(oe,ce,ye,xe){var Ae;return ye===null?Ae=new O:typeof ye!="string"&&!ce.objectMode&&(Ae=new I("chunk",["string","Buffer"],ye)),Ae?($(oe,Ae),process$1.nextTick(xe,Ae),!1):!0}W.prototype.write=function(oe,ce,ye){var xe=this._writableState,Ae=!1,se=!xe.objectMode&&x(oe);return se&&!T.isBuffer(oe)&&(oe=k(oe)),typeof ce=="function"&&(ye=ce,ce=null),se?ce="buffer":ce||(ce=xe.defaultEncoding),typeof ye!="function"&&(ye=H),xe.ending?X(this,ye):(se||te(this,xe,oe,ye))&&(xe.pendingcb++,Ae=G(this,xe,se,oe,ce,ye)),Ae},W.prototype.cork=function(){this._writableState.corked++},W.prototype.uncork=function(){var oe=this._writableState;oe.corked&&(oe.corked--,!oe.writing&&!oe.corked&&!oe.bufferProcessing&&oe.bufferedRequest&&J(this,oe))},W.prototype.setDefaultEncoding=function(ce){if(typeof ce=="string"&&(ce=ce.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ce+"").toLowerCase())>-1))throw new F(ce);return this._writableState.defaultEncoding=ce,this},Object.defineProperty(W.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ee(oe,ce,ye){return!oe.objectMode&&oe.decodeStrings!==!1&&typeof ce=="string"&&(ce=T.from(ce,ye)),ce}Object.defineProperty(W.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function G(oe,ce,ye,xe,Ae,se){if(!ye){var K=ee(ce,xe,Ae);xe!==K&&(ye=!0,Ae="buffer",xe=K)}var ne=ce.objectMode?1:xe.length;ce.length+=ne;var fe=ce.length<ce.highWaterMark;if(fe||(ce.needDrain=!0),ce.writing||ce.corked){var Ee=ce.lastBufferedRequest;ce.lastBufferedRequest={chunk:xe,encoding:Ae,isBuf:ye,callback:se,next:null},Ee?Ee.next=ce.lastBufferedRequest:ce.bufferedRequest=ce.lastBufferedRequest,ce.bufferedRequestCount+=1}else de(oe,ce,!1,ne,xe,Ae,se);return fe}function de(oe,ce,ye,xe,Ae,se,K){ce.writelen=xe,ce.writecb=K,ce.writing=!0,ce.sync=!0,ce.destroyed?ce.onwrite(new z("write")):ye?oe._writev(Ae,ce.onwrite):oe._write(Ae,se,ce.onwrite),ce.sync=!1}function le(oe,ce,ye,xe,Ae){--ce.pendingcb,ye?(process$1.nextTick(Ae,xe),process$1.nextTick(me,oe,ce),oe._writableState.errorEmitted=!0,$(oe,xe)):(Ae(xe),oe._writableState.errorEmitted=!0,$(oe,xe),me(oe,ce))}function ae(oe){oe.writing=!1,oe.writecb=null,oe.length-=oe.writelen,oe.writelen=0}function Q(oe,ce){var ye=oe._writableState,xe=ye.sync,Ae=ye.writecb;if(typeof Ae!="function")throw new B;if(ae(ye),ce)le(oe,ye,xe,ce,Ae);else{var se=ue(ye)||oe.destroyed;!se&&!ye.corked&&!ye.bufferProcessing&&ye.bufferedRequest&&J(oe,ye),xe?process$1.nextTick(ie,oe,ye,se,Ae):ie(oe,ye,se,Ae)}}function ie(oe,ce,ye,xe){ye||Z(oe,ce),ce.pendingcb--,xe(),me(oe,ce)}function Z(oe,ce){ce.length===0&&ce.needDrain&&(ce.needDrain=!1,oe.emit("drain"))}function J(oe,ce){ce.bufferProcessing=!0;var ye=ce.bufferedRequest;if(oe._writev&&ye&&ye.next){var xe=ce.bufferedRequestCount,Ae=new Array(xe),se=ce.corkedRequestsFree;se.entry=ye;for(var K=0,ne=!0;ye;)Ae[K]=ye,ye.isBuf||(ne=!1),ye=ye.next,K+=1;Ae.allBuffers=ne,de(oe,ce,!0,ce.length,Ae,"",se.finish),ce.pendingcb++,ce.lastBufferedRequest=null,se.next?(ce.corkedRequestsFree=se.next,se.next=null):ce.corkedRequestsFree=new _(ce),ce.bufferedRequestCount=0}else{for(;ye;){var fe=ye.chunk,Ee=ye.encoding,be=ye.callback,Te=ce.objectMode?1:fe.length;if(de(oe,ce,!1,Te,fe,Ee,be),ye=ye.next,ce.bufferedRequestCount--,ce.writing)break}ye===null&&(ce.lastBufferedRequest=null)}ce.bufferedRequest=ye,ce.bufferProcessing=!1}W.prototype._write=function(oe,ce,ye){ye(new V("_write()"))},W.prototype._writev=null,W.prototype.end=function(oe,ce,ye){var xe=this._writableState;return typeof oe=="function"?(ye=oe,oe=null,ce=null):typeof ce=="function"&&(ye=ce,ce=null),oe!=null&&this.write(oe,ce),xe.corked&&(xe.corked=1,this.uncork()),xe.ending||ge(this,xe,ye),this},Object.defineProperty(W.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ue(oe){return oe.ending&&oe.length===0&&oe.bufferedRequest===null&&!oe.finished&&!oe.writing}function pe(oe,ce){oe._final(function(ye){ce.pendingcb--,ye&&$(oe,ye),ce.prefinished=!0,oe.emit("prefinish"),me(oe,ce)})}function Re(oe,ce){!ce.prefinished&&!ce.finalCalled&&(typeof oe._final=="function"&&!ce.destroyed?(ce.pendingcb++,ce.finalCalled=!0,process$1.nextTick(pe,oe,ce)):(ce.prefinished=!0,oe.emit("prefinish")))}function me(oe,ce){var ye=ue(ce);if(ye&&(Re(oe,ce),ce.pendingcb===0&&(ce.finished=!0,oe.emit("finish"),ce.autoDestroy))){var xe=oe._readableState;(!xe||xe.autoDestroy&&xe.endEmitted)&&oe.destroy()}return ye}function ge(oe,ce,ye){ce.ending=!0,me(oe,ce),ye&&(ce.finished?process$1.nextTick(ye):oe.once("finish",ye)),ce.ended=!0,oe.writable=!1}function we(oe,ce,ye){var xe=oe.entry;for(oe.entry=null;xe;){var Ae=xe.callback;ce.pendingcb--,Ae(ye),xe=xe.next}ce.corkedRequestsFree.next=oe}return Object.defineProperty(W.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(ce){this._writableState&&(this._writableState.destroyed=ce)}}),W.prototype.destroy=R.destroy,W.prototype._undestroy=R.undestroy,W.prototype._destroy=function(oe,ce){ce(oe)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var _=Object.keys||function(P){var M=[];for(var N in P)M.push(N);return M};_stream_duplex=k;var S=require_stream_readable(),w=require_stream_writable();requireInherits_browser()(k,S);for(var E=_(w.prototype),T=0;T<E.length;T++){var A=E[T];k.prototype[A]||(k.prototype[A]=w.prototype[A])}function k(P){if(!(this instanceof k))return new k(P);S.call(this,P),w.call(this,P),this.allowHalfOpen=!0,P&&(P.readable===!1&&(this.readable=!1),P.writable===!1&&(this.writable=!1),P.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",x)))}Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function x(){this._writableState.ended||process$1.nextTick(R,this)}function R(P){P.end()}return Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(M){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=M,this._writableState.destroyed=M)}}),_stream_duplex}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var _=requireSafeBuffer().Buffer,S=_.isEncoding||function(O){switch(O=""+O,O&&O.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function w(O){if(!O)return"utf8";for(var L;;)switch(O){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return O;default:if(L)return;O=(""+O).toLowerCase(),L=!0}}function E(O){var L=w(O);if(typeof L!="string"&&(_.isEncoding===S||!S(O)))throw new Error("Unknown encoding: "+O);return L||O}string_decoder.StringDecoder=T;function T(O){this.encoding=E(O);var L;switch(this.encoding){case"utf16le":this.text=N,this.end=I,L=4;break;case"utf8":this.fillLast=R,L=4;break;case"base64":this.text=V,this.end=B,L=3;break;default:this.write=D,this.end=z;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(L)}T.prototype.write=function(O){if(O.length===0)return"";var L,F;if(this.lastNeed){if(L=this.fillLast(O),L===void 0)return"";F=this.lastNeed,this.lastNeed=0}else F=0;return F<O.length?L?L+this.text(O,F):this.text(O,F):L||""},T.prototype.end=M,T.prototype.text=P,T.prototype.fillLast=function(O){if(this.lastNeed<=O.length)return O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,O.length),this.lastNeed-=O.length};function A(O){return O<=127?0:O>>5===6?2:O>>4===14?3:O>>3===30?4:O>>6===2?-1:-2}function k(O,L,F){var $=L.length-1;if($<F)return 0;var H=A(L[$]);return H>=0?(H>0&&(O.lastNeed=H-1),H):--$<F||H===-2?0:(H=A(L[$]),H>=0?(H>0&&(O.lastNeed=H-2),H):--$<F||H===-2?0:(H=A(L[$]),H>=0?(H>0&&(H===2?H=0:O.lastNeed=H-3),H):0))}function x(O,L,F){if((L[0]&192)!==128)return O.lastNeed=0,"";if(O.lastNeed>1&&L.length>1){if((L[1]&192)!==128)return O.lastNeed=1,"";if(O.lastNeed>2&&L.length>2&&(L[2]&192)!==128)return O.lastNeed=2,""}}function R(O){var L=this.lastTotal-this.lastNeed,F=x(this,O);if(F!==void 0)return F;if(this.lastNeed<=O.length)return O.copy(this.lastChar,L,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);O.copy(this.lastChar,L,0,O.length),this.lastNeed-=O.length}function P(O,L){var F=k(this,O,L);if(!this.lastNeed)return O.toString("utf8",L);this.lastTotal=F;var $=O.length-(F-this.lastNeed);return O.copy(this.lastChar,0,$),O.toString("utf8",L,$)}function M(O){var L=O&&O.length?this.write(O):"";return this.lastNeed?L+"":L}function N(O,L){if((O.length-L)%2===0){var F=O.toString("utf16le",L);if(F){var $=F.charCodeAt(F.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1],F.slice(0,-1)}return F}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=O[O.length-1],O.toString("utf16le",L,O.length-1)}function I(O){var L=O&&O.length?this.write(O):"";if(this.lastNeed){var F=this.lastTotal-this.lastNeed;return L+this.lastChar.toString("utf16le",0,F)}return L}function V(O,L){var F=(O.length-L)%3;return F===0?O.toString("base64",L):(this.lastNeed=3-F,this.lastTotal=3,F===1?this.lastChar[0]=O[O.length-1]:(this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1]),O.toString("base64",L,O.length-F))}function B(O){var L=O&&O.length?this.write(O):"";return this.lastNeed?L+this.lastChar.toString("base64",0,3-this.lastNeed):L}function D(O){return O.toString(this.encoding)}function z(O){return O&&O.length?this.write(O):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var _=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function S(A){var k=!1;return function(){if(!k){k=!0;for(var x=arguments.length,R=new Array(x),P=0;P<x;P++)R[P]=arguments[P];A.apply(this,R)}}}function w(){}function E(A){return A.setHeader&&typeof A.abort=="function"}function T(A,k,x){if(typeof k=="function")return T(A,null,k);k||(k={}),x=S(x||w);var R=k.readable||k.readable!==!1&&A.readable,P=k.writable||k.writable!==!1&&A.writable,M=function(){A.writable||I()},N=A._writableState&&A._writableState.finished,I=function(){P=!1,N=!0,R||x.call(A)},V=A._readableState&&A._readableState.endEmitted,B=function(){R=!1,V=!0,P||x.call(A)},D=function(F){x.call(A,F)},z=function(){var F;if(R&&!V)return(!A._readableState||!A._readableState.ended)&&(F=new _),x.call(A,F);if(P&&!N)return(!A._writableState||!A._writableState.ended)&&(F=new _),x.call(A,F)},O=function(){A.req.on("finish",I)};return E(A)?(A.on("complete",I),A.on("abort",z),A.req?O():A.on("request",O)):P&&!A._writableState&&(A.on("end",M),A.on("close",M)),A.on("end",B),A.on("finish",I),k.error!==!1&&A.on("error",D),A.on("close",z),function(){A.removeListener("complete",I),A.removeListener("abort",z),A.removeListener("request",O),A.req&&A.req.removeListener("finish",I),A.removeListener("end",M),A.removeListener("close",M),A.removeListener("finish",I),A.removeListener("end",B),A.removeListener("error",D),A.removeListener("close",z)}}return endOfStream=T,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var _;function S(F,$,H){return $=w($),$ in F?Object.defineProperty(F,$,{value:H,enumerable:!0,configurable:!0,writable:!0}):F[$]=H,F}function w(F){var $=E(F,"string");return typeof $=="symbol"?$:String($)}function E(F,$){if(typeof F!="object"||F===null)return F;var H=F[Symbol.toPrimitive];if(H!==void 0){var j=H.call(F,$);if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(F)}var T=requireEndOfStream(),A=Symbol("lastResolve"),k=Symbol("lastReject"),x=Symbol("error"),R=Symbol("ended"),P=Symbol("lastPromise"),M=Symbol("handlePromise"),N=Symbol("stream");function I(F,$){return{value:F,done:$}}function V(F){var $=F[A];if($!==null){var H=F[N].read();H!==null&&(F[P]=null,F[A]=null,F[k]=null,$(I(H,!1)))}}function B(F){process$1.nextTick(V,F)}function D(F,$){return function(H,j){F.then(function(){if($[R]){H(I(void 0,!0));return}$[M](H,j)},j)}}var z=Object.getPrototypeOf(function(){}),O=Object.setPrototypeOf((_={get stream(){return this[N]},next:function(){var $=this,H=this[x];if(H!==null)return Promise.reject(H);if(this[R])return Promise.resolve(I(void 0,!0));if(this[N].destroyed)return new Promise(function(X,te){process$1.nextTick(function(){$[x]?te($[x]):X(I(void 0,!0))})});var j=this[P],q;if(j)q=new Promise(D(j,this));else{var W=this[N].read();if(W!==null)return Promise.resolve(I(W,!1));q=new Promise(this[M])}return this[P]=q,q}},S(_,Symbol.asyncIterator,function(){return this}),S(_,"return",function(){var $=this;return new Promise(function(H,j){$[N].destroy(null,function(q){if(q){j(q);return}H(I(void 0,!0))})})}),_),z),L=function($){var H,j=Object.create(O,(H={},S(H,N,{value:$,writable:!0}),S(H,A,{value:null,writable:!0}),S(H,k,{value:null,writable:!0}),S(H,x,{value:null,writable:!0}),S(H,R,{value:$._readableState.endEmitted,writable:!0}),S(H,M,{value:function(W,X){var te=j[N].read();te?(j[P]=null,j[A]=null,j[k]=null,W(I(te,!1))):(j[A]=W,j[k]=X)},writable:!0}),H));return j[P]=null,T($,function(q){if(q&&q.code!=="ERR_STREAM_PREMATURE_CLOSE"){var W=j[k];W!==null&&(j[P]=null,j[A]=null,j[k]=null,W(q)),j[x]=q;return}var X=j[A];X!==null&&(j[P]=null,j[A]=null,j[k]=null,X(I(void 0,!0))),j[R]=!0}),$.on("readable",B.bind(null,j)),j};return async_iterator=L,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=X;var _;X.ReadableState=W,requireEvents().EventEmitter;var S=function(K,ne){return K.listeners(ne).length},w=requireStreamBrowser(),E=requireDist().Buffer,T=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function A(se){return E.from(se)}function k(se){return E.isBuffer(se)||se instanceof T}var x=requireUtil(),R;x&&x.debuglog?R=x.debuglog("stream"):R=function(){};var P=requireBuffer_list(),M=requireDestroy(),N=requireState(),I=N.getHighWaterMark,V=requireErrorsBrowser().codes,B=V.ERR_INVALID_ARG_TYPE,D=V.ERR_STREAM_PUSH_AFTER_EOF,z=V.ERR_METHOD_NOT_IMPLEMENTED,O=V.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,L,F,$;requireInherits_browser()(X,w);var H=M.errorOrDestroy,j=["error","close","destroy","pause","resume"];function q(se,K,ne){if(typeof se.prependListener=="function")return se.prependListener(K,ne);!se._events||!se._events[K]?se.on(K,ne):Array.isArray(se._events[K])?se._events[K].unshift(ne):se._events[K]=[ne,se._events[K]]}function W(se,K,ne){_=_||require_stream_duplex(),se=se||{},typeof ne!="boolean"&&(ne=K instanceof _),this.objectMode=!!se.objectMode,ne&&(this.objectMode=this.objectMode||!!se.readableObjectMode),this.highWaterMark=I(this,se,"readableHighWaterMark",ne),this.buffer=new P,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=se.emitClose!==!1,this.autoDestroy=!!se.autoDestroy,this.destroyed=!1,this.defaultEncoding=se.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,se.encoding&&(L||(L=requireString_decoder().StringDecoder),this.decoder=new L(se.encoding),this.encoding=se.encoding)}function X(se){if(_=_||require_stream_duplex(),!(this instanceof X))return new X(se);var K=this instanceof _;this._readableState=new W(se,this,K),this.readable=!0,se&&(typeof se.read=="function"&&(this._read=se.read),typeof se.destroy=="function"&&(this._destroy=se.destroy)),w.call(this)}Object.defineProperty(X.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(K){this._readableState&&(this._readableState.destroyed=K)}}),X.prototype.destroy=M.destroy,X.prototype._undestroy=M.undestroy,X.prototype._destroy=function(se,K){K(se)},X.prototype.push=function(se,K){var ne=this._readableState,fe;return ne.objectMode?fe=!0:typeof se=="string"&&(K=K||ne.defaultEncoding,K!==ne.encoding&&(se=E.from(se,K),K=""),fe=!0),te(this,se,K,!1,fe)},X.prototype.unshift=function(se){return te(this,se,null,!0,!1)};function te(se,K,ne,fe,Ee){R("readableAddChunk",K);var be=se._readableState;if(K===null)be.reading=!1,Q(se,be);else{var Te;if(Ee||(Te=G(be,K)),Te)H(se,Te);else if(be.objectMode||K&&K.length>0)if(typeof K!="string"&&!be.objectMode&&Object.getPrototypeOf(K)!==E.prototype&&(K=A(K)),fe)be.endEmitted?H(se,new O):ee(se,be,K,!0);else if(be.ended)H(se,new D);else{if(be.destroyed)return!1;be.reading=!1,be.decoder&&!ne?(K=be.decoder.write(K),be.objectMode||K.length!==0?ee(se,be,K,!1):J(se,be)):ee(se,be,K,!1)}else fe||(be.reading=!1,J(se,be))}return!be.ended&&(be.length<be.highWaterMark||be.length===0)}function ee(se,K,ne,fe){K.flowing&&K.length===0&&!K.sync?(K.awaitDrain=0,se.emit("data",ne)):(K.length+=K.objectMode?1:ne.length,fe?K.buffer.unshift(ne):K.buffer.push(ne),K.needReadable&&ie(se)),J(se,K)}function G(se,K){var ne;return!k(K)&&typeof K!="string"&&K!==void 0&&!se.objectMode&&(ne=new B("chunk",["string","Buffer","Uint8Array"],K)),ne}X.prototype.isPaused=function(){return this._readableState.flowing===!1},X.prototype.setEncoding=function(se){L||(L=requireString_decoder().StringDecoder);var K=new L(se);this._readableState.decoder=K,this._readableState.encoding=this._readableState.decoder.encoding;for(var ne=this._readableState.buffer.head,fe="";ne!==null;)fe+=K.write(ne.data),ne=ne.next;return this._readableState.buffer.clear(),fe!==""&&this._readableState.buffer.push(fe),this._readableState.length=fe.length,this};var de=1073741824;function le(se){return se>=de?se=de:(se--,se|=se>>>1,se|=se>>>2,se|=se>>>4,se|=se>>>8,se|=se>>>16,se++),se}function ae(se,K){return se<=0||K.length===0&&K.ended?0:K.objectMode?1:se!==se?K.flowing&&K.length?K.buffer.head.data.length:K.length:(se>K.highWaterMark&&(K.highWaterMark=le(se)),se<=K.length?se:K.ended?K.length:(K.needReadable=!0,0))}X.prototype.read=function(se){R("read",se),se=parseInt(se,10);var K=this._readableState,ne=se;if(se!==0&&(K.emittedReadable=!1),se===0&&K.needReadable&&((K.highWaterMark!==0?K.length>=K.highWaterMark:K.length>0)||K.ended))return R("read: emitReadable",K.length,K.ended),K.length===0&&K.ended?ye(this):ie(this),null;if(se=ae(se,K),se===0&&K.ended)return K.length===0&&ye(this),null;var fe=K.needReadable;R("need readable",fe),(K.length===0||K.length-se<K.highWaterMark)&&(fe=!0,R("length less than watermark",fe)),K.ended||K.reading?(fe=!1,R("reading or ended",fe)):fe&&(R("do read"),K.reading=!0,K.sync=!0,K.length===0&&(K.needReadable=!0),this._read(K.highWaterMark),K.sync=!1,K.reading||(se=ae(ne,K)));var Ee;return se>0?Ee=ce(se,K):Ee=null,Ee===null?(K.needReadable=K.length<=K.highWaterMark,se=0):(K.length-=se,K.awaitDrain=0),K.length===0&&(K.ended||(K.needReadable=!0),ne!==se&&K.ended&&ye(this)),Ee!==null&&this.emit("data",Ee),Ee};function Q(se,K){if(R("onEofChunk"),!K.ended){if(K.decoder){var ne=K.decoder.end();ne&&ne.length&&(K.buffer.push(ne),K.length+=K.objectMode?1:ne.length)}K.ended=!0,K.sync?ie(se):(K.needReadable=!1,K.emittedReadable||(K.emittedReadable=!0,Z(se)))}}function ie(se){var K=se._readableState;R("emitReadable",K.needReadable,K.emittedReadable),K.needReadable=!1,K.emittedReadable||(R("emitReadable",K.flowing),K.emittedReadable=!0,process$1.nextTick(Z,se))}function Z(se){var K=se._readableState;R("emitReadable_",K.destroyed,K.length,K.ended),!K.destroyed&&(K.length||K.ended)&&(se.emit("readable"),K.emittedReadable=!1),K.needReadable=!K.flowing&&!K.ended&&K.length<=K.highWaterMark,oe(se)}function J(se,K){K.readingMore||(K.readingMore=!0,process$1.nextTick(ue,se,K))}function ue(se,K){for(;!K.reading&&!K.ended&&(K.length<K.highWaterMark||K.flowing&&K.length===0);){var ne=K.length;if(R("maybeReadMore read 0"),se.read(0),ne===K.length)break}K.readingMore=!1}X.prototype._read=function(se){H(this,new z("_read()"))},X.prototype.pipe=function(se,K){var ne=this,fe=this._readableState;switch(fe.pipesCount){case 0:fe.pipes=se;break;case 1:fe.pipes=[fe.pipes,se];break;default:fe.pipes.push(se);break}fe.pipesCount+=1,R("pipe count=%d opts=%j",fe.pipesCount,K);var Ee=(!K||K.end!==!1)&&se!==process$1.stdout&&se!==process$1.stderr,be=Ee?Ne:De;fe.endEmitted?process$1.nextTick(be):ne.once("end",be),se.on("unpipe",Te);function Te(ze,Ve){R("onunpipe"),ze===ne&&Ve&&Ve.hasUnpiped===!1&&(Ve.hasUnpiped=!0,Pe())}function Ne(){R("onend"),se.end()}var ve=pe(ne);se.on("drain",ve);var Oe=!1;function Pe(){R("cleanup"),se.removeListener("close",Fe),se.removeListener("finish",$e),se.removeListener("drain",ve),se.removeListener("error",Ce),se.removeListener("unpipe",Te),ne.removeListener("end",Ne),ne.removeListener("end",De),ne.removeListener("data",Se),Oe=!0,fe.awaitDrain&&(!se._writableState||se._writableState.needDrain)&&ve()}ne.on("data",Se);function Se(ze){R("ondata");var Ve=se.write(ze);R("dest.write",Ve),Ve===!1&&((fe.pipesCount===1&&fe.pipes===se||fe.pipesCount>1&&Ae(fe.pipes,se)!==-1)&&!Oe&&(R("false write response, pause",fe.awaitDrain),fe.awaitDrain++),ne.pause())}function Ce(ze){R("onerror",ze),De(),se.removeListener("error",Ce),S(se,"error")===0&&H(se,ze)}q(se,"error",Ce);function Fe(){se.removeListener("finish",$e),De()}se.once("close",Fe);function $e(){R("onfinish"),se.removeListener("close",Fe),De()}se.once("finish",$e);function De(){R("unpipe"),ne.unpipe(se)}return se.emit("pipe",ne),fe.flowing||(R("pipe resume"),ne.resume()),se};function pe(se){return function(){var ne=se._readableState;R("pipeOnDrain",ne.awaitDrain),ne.awaitDrain&&ne.awaitDrain--,ne.awaitDrain===0&&S(se,"data")&&(ne.flowing=!0,oe(se))}}X.prototype.unpipe=function(se){var K=this._readableState,ne={hasUnpiped:!1};if(K.pipesCount===0)return this;if(K.pipesCount===1)return se&&se!==K.pipes?this:(se||(se=K.pipes),K.pipes=null,K.pipesCount=0,K.flowing=!1,se&&se.emit("unpipe",this,ne),this);if(!se){var fe=K.pipes,Ee=K.pipesCount;K.pipes=null,K.pipesCount=0,K.flowing=!1;for(var be=0;be<Ee;be++)fe[be].emit("unpipe",this,{hasUnpiped:!1});return this}var Te=Ae(K.pipes,se);return Te===-1?this:(K.pipes.splice(Te,1),K.pipesCount-=1,K.pipesCount===1&&(K.pipes=K.pipes[0]),se.emit("unpipe",this,ne),this)},X.prototype.on=function(se,K){var ne=w.prototype.on.call(this,se,K),fe=this._readableState;return se==="data"?(fe.readableListening=this.listenerCount("readable")>0,fe.flowing!==!1&&this.resume()):se==="readable"&&!fe.endEmitted&&!fe.readableListening&&(fe.readableListening=fe.needReadable=!0,fe.flowing=!1,fe.emittedReadable=!1,R("on readable",fe.length,fe.reading),fe.length?ie(this):fe.reading||process$1.nextTick(me,this)),ne},X.prototype.addListener=X.prototype.on,X.prototype.removeListener=function(se,K){var ne=w.prototype.removeListener.call(this,se,K);return se==="readable"&&process$1.nextTick(Re,this),ne},X.prototype.removeAllListeners=function(se){var K=w.prototype.removeAllListeners.apply(this,arguments);return(se==="readable"||se===void 0)&&process$1.nextTick(Re,this),K};function Re(se){var K=se._readableState;K.readableListening=se.listenerCount("readable")>0,K.resumeScheduled&&!K.paused?K.flowing=!0:se.listenerCount("data")>0&&se.resume()}function me(se){R("readable nexttick read 0"),se.read(0)}X.prototype.resume=function(){var se=this._readableState;return se.flowing||(R("resume"),se.flowing=!se.readableListening,ge(this,se)),se.paused=!1,this};function ge(se,K){K.resumeScheduled||(K.resumeScheduled=!0,process$1.nextTick(we,se,K))}function we(se,K){R("resume",K.reading),K.reading||se.read(0),K.resumeScheduled=!1,se.emit("resume"),oe(se),K.flowing&&!K.reading&&se.read(0)}X.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function oe(se){var K=se._readableState;for(R("flow",K.flowing);K.flowing&&se.read()!==null;);}X.prototype.wrap=function(se){var K=this,ne=this._readableState,fe=!1;se.on("end",function(){if(R("wrapped end"),ne.decoder&&!ne.ended){var Te=ne.decoder.end();Te&&Te.length&&K.push(Te)}K.push(null)}),se.on("data",function(Te){if(R("wrapped data"),ne.decoder&&(Te=ne.decoder.write(Te)),!(ne.objectMode&&Te==null)&&!(!ne.objectMode&&(!Te||!Te.length))){var Ne=K.push(Te);Ne||(fe=!0,se.pause())}});for(var Ee in se)this[Ee]===void 0&&typeof se[Ee]=="function"&&(this[Ee]=(function(Ne){return function(){return se[Ne].apply(se,arguments)}})(Ee));for(var be=0;be<j.length;be++)se.on(j[be],this.emit.bind(this,j[be]));return this._read=function(Te){R("wrapped _read",Te),fe&&(fe=!1,se.resume())},this},typeof Symbol=="function"&&(X.prototype[Symbol.asyncIterator]=function(){return F===void 0&&(F=requireAsync_iterator()),F(this)}),Object.defineProperty(X.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(X.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(X.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(K){this._readableState&&(this._readableState.flowing=K)}}),X._fromList=ce,Object.defineProperty(X.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function ce(se,K){if(K.length===0)return null;var ne;return K.objectMode?ne=K.buffer.shift():!se||se>=K.length?(K.decoder?ne=K.buffer.join(""):K.buffer.length===1?ne=K.buffer.first():ne=K.buffer.concat(K.length),K.buffer.clear()):ne=K.buffer.consume(se,K.decoder),ne}function ye(se){var K=se._readableState;R("endReadable",K.endEmitted),K.endEmitted||(K.ended=!0,process$1.nextTick(xe,K,se))}function xe(se,K){if(R("endReadableNT",se.endEmitted,se.length),!se.endEmitted&&se.length===0&&(se.endEmitted=!0,K.readable=!1,K.emit("end"),se.autoDestroy)){var ne=K._writableState;(!ne||ne.autoDestroy&&ne.finished)&&K.destroy()}}typeof Symbol=="function"&&(X.from=function(se,K){return $===void 0&&($=requireFromBrowser()),$(X,se,K)});function Ae(se,K){for(var ne=0,fe=se.length;ne<fe;ne++)if(se[ne]===K)return ne;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=x;var _=requireErrorsBrowser().codes,S=_.ERR_METHOD_NOT_IMPLEMENTED,w=_.ERR_MULTIPLE_CALLBACK,E=_.ERR_TRANSFORM_ALREADY_TRANSFORMING,T=_.ERR_TRANSFORM_WITH_LENGTH_0,A=require_stream_duplex();requireInherits_browser()(x,A);function k(M,N){var I=this._transformState;I.transforming=!1;var V=I.writecb;if(V===null)return this.emit("error",new w);I.writechunk=null,I.writecb=null,N!=null&&this.push(N),V(M);var B=this._readableState;B.reading=!1,(B.needReadable||B.length<B.highWaterMark)&&this._read(B.highWaterMark)}function x(M){if(!(this instanceof x))return new x(M);A.call(this,M),this._transformState={afterTransform:k.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,M&&(typeof M.transform=="function"&&(this._transform=M.transform),typeof M.flush=="function"&&(this._flush=M.flush)),this.on("prefinish",R)}function R(){var M=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(N,I){P(M,N,I)}):P(this,null,null)}x.prototype.push=function(M,N){return this._transformState.needTransform=!1,A.prototype.push.call(this,M,N)},x.prototype._transform=function(M,N,I){I(new S("_transform()"))},x.prototype._write=function(M,N,I){var V=this._transformState;if(V.writecb=I,V.writechunk=M,V.writeencoding=N,!V.transforming){var B=this._readableState;(V.needTransform||B.needReadable||B.length<B.highWaterMark)&&this._read(B.highWaterMark)}},x.prototype._read=function(M){var N=this._transformState;N.writechunk!==null&&!N.transforming?(N.transforming=!0,this._transform(N.writechunk,N.writeencoding,N.afterTransform)):N.needTransform=!0},x.prototype._destroy=function(M,N){A.prototype._destroy.call(this,M,function(I){N(I)})};function P(M,N,I){if(N)return M.emit("error",N);if(I!=null&&M.push(I),M._writableState.length)throw new T;if(M._transformState.transforming)throw new E;return M.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=S;var _=require_stream_transform();requireInherits_browser()(S,_);function S(w){if(!(this instanceof S))return new S(w);_.call(this,w)}return S.prototype._transform=function(w,E,T){T(null,w)},_stream_passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var _;function S(I){var V=!1;return function(){V||(V=!0,I.apply(void 0,arguments))}}var w=requireErrorsBrowser().codes,E=w.ERR_MISSING_ARGS,T=w.ERR_STREAM_DESTROYED;function A(I){if(I)throw I}function k(I){return I.setHeader&&typeof I.abort=="function"}function x(I,V,B,D){D=S(D);var z=!1;I.on("close",function(){z=!0}),_===void 0&&(_=requireEndOfStream()),_(I,{readable:V,writable:B},function(L){if(L)return D(L);z=!0,D()});var O=!1;return function(L){if(!z&&!O){if(O=!0,k(I))return I.abort();if(typeof I.destroy=="function")return I.destroy();D(L||new T("pipe"))}}}function R(I){I()}function P(I,V){return I.pipe(V)}function M(I){return!I.length||typeof I[I.length-1]!="function"?A:I.pop()}function N(){for(var I=arguments.length,V=new Array(I),B=0;B<I;B++)V[B]=arguments[B];var D=M(V);if(Array.isArray(V[0])&&(V=V[0]),V.length<2)throw new E("streams");var z,O=V.map(function(L,F){var $=F<V.length-1,H=F>0;return x(L,$,H,function(j){z||(z=j),j&&O.forEach(R),!$&&(O.forEach(R),D(z))})});return V.reduce(P)}return pipeline_1=N,pipeline_1}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,(function(_,S){S=_.exports=require_stream_readable(),S.Stream=S,S.Readable=S,S.Writable=require_stream_writable(),S.Duplex=require_stream_duplex(),S.Transform=require_stream_transform(),S.PassThrough=require_stream_passthrough(),S.finished=requireEndOfStream(),S.pipeline=requirePipeline()})(readableBrowser,readableBrowser.exports)),readableBrowser.exports}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var queueMicrotask_1,hasRequiredQueueMicrotask;function requireQueueMicrotask(){if(hasRequiredQueueMicrotask)return queueMicrotask_1;hasRequiredQueueMicrotask=1;let _;return queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:commonjsGlobal):S=>(_||(_=Promise.resolve())).then(S).catch(w=>setTimeout(()=>{throw w},0)),queueMicrotask_1}var errCode,hasRequiredErrCode;function requireErrCode(){if(hasRequiredErrCode)return errCode;hasRequiredErrCode=1;function _(w,E){for(const T in E)Object.defineProperty(w,T,{value:E[T],enumerable:!0,configurable:!0});return w}function S(w,E,T){if(!w||typeof w=="string")throw new TypeError("Please pass an Error to err-code");T||(T={}),typeof E=="object"&&(T=E,E=""),E&&(T.code=E);try{return _(w,T)}catch{T.message=w.message,T.stack=w.stack;const k=function(){};return k.prototype=Object.create(Object.getPrototypeOf(w)),_(new k,T)}}return errCode=S,errCode}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var simplePeer,hasRequiredSimplePeer;function requireSimplePeer(){if(hasRequiredSimplePeer)return simplePeer;hasRequiredSimplePeer=1;const _=requireBrowser$2()("simple-peer"),S=requireGetBrowserRtc(),w=requireBrowser$1(),E=requireReadableBrowser(),T=requireQueueMicrotask(),A=requireErrCode(),{Buffer:k}=requireDist(),x=64*1024,R=5*1e3,P=5*1e3;function M(V){return V.replace(/a=ice-options:trickle\s\n/g,"")}function N(V){console.warn(V)}class I extends E.Duplex{constructor(B){if(B=Object.assign({allowHalfOpen:!1},B),super(B),this._id=w(4).toString("hex").slice(0,7),this._debug("new peer %o",B),this.channelName=B.initiator?B.channelName||w(20).toString("hex"):null,this.initiator=B.initiator||!1,this.channelConfig=B.channelConfig||I.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},I.config,B.config),this.offerOptions=B.offerOptions||{},this.answerOptions=B.answerOptions||{},this.sdpTransform=B.sdpTransform||(D=>D),this.streams=B.streams||(B.stream?[B.stream]:[]),this.trickle=B.trickle!==void 0?B.trickle:!0,this.allowHalfTrickle=B.allowHalfTrickle!==void 0?B.allowHalfTrickle:!1,this.iceCompleteTimeout=B.iceCompleteTimeout||R,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=B.wrtc&&typeof B.wrtc=="object"?B.wrtc:S(),!this._wrtc)throw A(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(D){this.destroy(A(D,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=D=>{this._onIceCandidate(D)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(D=>{this.destroy(A(D,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=D=>{this._setupData(D)},this.streams&&this.streams.forEach(D=>{this.addStream(D)}),this._pc.ontrack=D=>{this._onTrack(D)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(B){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof B=="string")try{B=JSON.parse(B)}catch{B={}}this._debug("signal()"),B.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),B.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(B.transceiverRequest.kind,B.transceiverRequest.init)),B.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(B.candidate):this._pendingCandidates.push(B.candidate)),B.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(B)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(D=>{this._addIceCandidate(D)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(D=>{this.destroy(A(D,"ERR_SET_REMOTE_DESCRIPTION"))}),!B.sdp&&!B.candidate&&!B.renegotiate&&!B.transceiverRequest&&this.destroy(A(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(B){const D=new this._wrtc.RTCIceCandidate(B);this._pc.addIceCandidate(D).catch(z=>{!D.address||D.address.endsWith(".local")?N("Ignoring unsupported ICE candidate."):this.destroy(A(z,"ERR_ADD_ICE_CANDIDATE"))})}send(B){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(B)}}addTransceiver(B,D){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(B,D),this._needsNegotiation()}catch(z){this.destroy(A(z,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:B,init:D}})}}addStream(B){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),B.getTracks().forEach(D=>{this.addTrack(D,B)})}}addTrack(B,D){if(this.destroying)return;if(this.destroyed)throw A(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const z=this._senderMap.get(B)||new Map;let O=z.get(D);if(!O)O=this._pc.addTrack(B,D),z.set(D,O),this._senderMap.set(B,z),this._needsNegotiation();else throw O.removed?A(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):A(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(B,D,z){if(this.destroying)return;if(this.destroyed)throw A(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const O=this._senderMap.get(B),L=O?O.get(z):null;if(!L)throw A(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");D&&this._senderMap.set(D,O),L.replaceTrack!=null?L.replaceTrack(D):this.destroy(A(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(B,D){if(this.destroying)return;if(this.destroyed)throw A(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const z=this._senderMap.get(B),O=z?z.get(D):null;if(!O)throw A(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{O.removed=!0,this._pc.removeTrack(O)}catch(L){L.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(O):this.destroy(A(L,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(B){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),B.getTracks().forEach(D=>{this.removeTrack(D,B)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,T(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(B){this._destroy(B,()=>{})}_destroy(B,D){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",B&&(B.message||B)),T(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",B&&(B.message||B)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,B&&this.emit("error",B),this.emit("close"),D()}))}_setupData(B){if(!B.channel)return this.destroy(A(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=B.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=x),this.channelName=this._channel.label,this._channel.onmessage=z=>{this._onChannelMessage(z)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=z=>{const O=z.error instanceof Error?z.error:new Error(`Datachannel error: ${z.message} ${z.filename}:${z.lineno}:${z.colno}`);this.destroy(A(O,"ERR_DATA_CHANNEL"))};let D=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(D&&this._onChannelClose(),D=!0):D=!1},P)}_read(){}_write(B,D,z){if(this.destroyed)return z(A(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(B)}catch(O){return this.destroy(A(O,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>x?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=z):z(null)}else this._debug("write before connect"),this._chunk=B,this._cb=z}_onFinish(){if(this.destroyed)return;const B=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?B():this.once("connect",B)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(B=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(B.sdp=M(B.sdp)),B.sdp=this.sdpTransform(B.sdp);const D=()=>{if(this.destroyed)return;const L=this._pc.localDescription||B;this._debug("signal"),this.emit("signal",{type:L.type,sdp:L.sdp})},z=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?D():this.once("_iceComplete",D))},O=L=>{this.destroy(A(L,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(B).then(z).catch(O)}).catch(B=>{this.destroy(A(B,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(B=>{!B.mid&&B.sender.track&&!B.requested&&(B.requested=!0,this.addTransceiver(B.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(B=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(B.sdp=M(B.sdp)),B.sdp=this.sdpTransform(B.sdp);const D=()=>{if(this.destroyed)return;const L=this._pc.localDescription||B;this._debug("signal"),this.emit("signal",{type:L.type,sdp:L.sdp}),this.initiator||this._requestMissingTransceivers()},z=()=>{this.destroyed||(this.trickle||this._iceComplete?D():this.once("_iceComplete",D))},O=L=>{this.destroy(A(L,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(B).then(z).catch(O)}).catch(B=>{this.destroy(A(B,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(A(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const B=this._pc.iceConnectionState,D=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",B,D),this.emit("iceStateChange",B,D),(B==="connected"||B==="completed")&&(this._pcReady=!0,this._maybeReady()),B==="failed"&&this.destroy(A(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),B==="closed"&&this.destroy(A(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(B){const D=z=>(Object.prototype.toString.call(z.values)==="[object Array]"&&z.values.forEach(O=>{Object.assign(z,O)}),z);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(z=>{const O=[];z.forEach(L=>{O.push(D(L))}),B(null,O)},z=>B(z)):this._pc.getStats.length>0?this._pc.getStats(z=>{if(this.destroyed)return;const O=[];z.result().forEach(L=>{const F={};L.names().forEach($=>{F[$]=L.stat($)}),F.id=L.id,F.type=L.type,F.timestamp=L.timestamp,O.push(D(F))}),B(null,O)},z=>B(z)):B(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const B=()=>{this.destroyed||this.getStats((D,z)=>{if(this.destroyed)return;D&&(z=[]);const O={},L={},F={};let $=!1;z.forEach(j=>{(j.type==="remotecandidate"||j.type==="remote-candidate")&&(O[j.id]=j),(j.type==="localcandidate"||j.type==="local-candidate")&&(L[j.id]=j),(j.type==="candidatepair"||j.type==="candidate-pair")&&(F[j.id]=j)});const H=j=>{$=!0;let q=L[j.localCandidateId];q&&(q.ip||q.address)?(this.localAddress=q.ip||q.address,this.localPort=Number(q.port)):q&&q.ipAddress?(this.localAddress=q.ipAddress,this.localPort=Number(q.portNumber)):typeof j.googLocalAddress=="string"&&(q=j.googLocalAddress.split(":"),this.localAddress=q[0],this.localPort=Number(q[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let W=O[j.remoteCandidateId];W&&(W.ip||W.address)?(this.remoteAddress=W.ip||W.address,this.remotePort=Number(W.port)):W&&W.ipAddress?(this.remoteAddress=W.ipAddress,this.remotePort=Number(W.portNumber)):typeof j.googRemoteAddress=="string"&&(W=j.googRemoteAddress.split(":"),this.remoteAddress=W[0],this.remotePort=Number(W[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(z.forEach(j=>{j.type==="transport"&&j.selectedCandidatePairId&&H(F[j.selectedCandidatePairId]),(j.type==="googCandidatePair"&&j.googActiveConnection==="true"||(j.type==="candidatepair"||j.type==="candidate-pair")&&j.selected)&&H(j)}),!$&&(!Object.keys(F).length||Object.keys(L).length)){setTimeout(B,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(q){return this.destroy(A(q,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const j=this._cb;this._cb=null,j(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};B()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>x||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(B=>{this._pc.removeTrack(B),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(B){this.destroyed||(B.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:B.candidate.candidate,sdpMLineIndex:B.candidate.sdpMLineIndex,sdpMid:B.candidate.sdpMid}}):!B.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),B.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(B){if(this.destroyed)return;let D=B.data;D instanceof ArrayBuffer&&(D=k.from(D)),this.push(D)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const B=this._cb;this._cb=null,B(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(B){this.destroyed||B.streams.forEach(D=>{this._debug("on track"),this.emit("track",B.track,D),this._remoteTracks.push({track:B.track,stream:D}),!this._remoteStreams.some(z=>z.id===D.id)&&(this._remoteStreams.push(D),T(()=>{this._debug("on stream"),this.emit("stream",D)}))})}_debug(){const B=[].slice.call(arguments);B[0]="["+this._id+"] "+B[0],_.apply(null,B)}}return I.WEBRTC_SUPPORT=!!S(),I.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},I.channelConfig={},simplePeer=I,simplePeer}var simplePeerExports=requireSimplePeer();const SimplePeer=getDefaultExportFromCjs$1(simplePeerExports),useTransferStore=defineStore("transfer",()=>{const _=reactive({});function S(x,R,P){if(_[x]){log(`Transfer for ${x} already started. Ignoring duplicate start signal.`,"WARN");return}_[x]={peerId:R,receivedBytes:0,totalBytes:P,speedBps:0,etaSeconds:1/0,startTime:Date.now(),status:"receiving"},log(`Started tracking transfer for ${x} from ${R}`,"DEBUG")}function w(x,R){const P=_[x];P&&(P.receivedBytes+=R)}function E(){const x=Date.now();for(const R in _){const P=_[R];if(P.status!=="receiving")continue;const M=(x-P.startTime)/1e3;if(M>0){P.speedBps=P.receivedBytes/M;const N=P.totalBytes-P.receivedBytes;P.etaSeconds=P.speedBps>0?N/P.speedBps:1/0}}}function T(x){const R=_[x];R&&(R.status="completed",R.etaSeconds=0,setTimeout(()=>{delete _[x]},2e3),log(`Ended tracking transfer for ${x}`,"DEBUG"))}function A(x){let R=0;for(const P in _)_[P].peerId===x&&_[P].status==="receiving"&&(_[P].status="failed",R++);R>0&&log(`Marked ${R} transfers as failed for disconnected peer ${x}`,"WARN")}function k(x){let R=0;for(const P in _)_[P].peerId===x&&_[P].status==="receiving"&&R++;return R}return{transfers:_,startTransfer:S,updateProgress:w,calculateStats:E,endTransfer:T,failTransfersForPeer:A,countActiveTransfersForPeer:k}});var freeGlobal=typeof global$1=="object"&&global$1&&global$1.Object===Object&&global$1,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$1=Object.prototype,hasOwnProperty=objectProto$1.hasOwnProperty,nativeObjectToString$1=objectProto$1.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(_){var S=hasOwnProperty.call(_,symToStringTag$1),w=_[symToStringTag$1];try{_[symToStringTag$1]=void 0;var E=!0}catch{}var T=nativeObjectToString$1.call(_);return E&&(S?_[symToStringTag$1]=w:delete _[symToStringTag$1]),T}var objectProto=Object.prototype,nativeObjectToString=objectProto.toString;function objectToString(_){return nativeObjectToString.call(_)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(_){return _==null?_===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(_)?getRawTag(_):objectToString(_)}function isObjectLike(_){return _!=null&&typeof _=="object"}var symbolTag="[object Symbol]";function isSymbol(_){return typeof _=="symbol"||isObjectLike(_)&&baseGetTag(_)==symbolTag}var reWhitespace=/\s/;function trimmedEndIndex(_){for(var S=_.length;S--&&reWhitespace.test(_.charAt(S)););return S}var reTrimStart=/^\s+/;function baseTrim(_){return _&&_.slice(0,trimmedEndIndex(_)+1).replace(reTrimStart,"")}function isObject(_){var S=typeof _;return _!=null&&(S=="object"||S=="function")}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(_){if(typeof _=="number")return _;if(isSymbol(_))return NAN;if(isObject(_)){var S=typeof _.valueOf=="function"?_.valueOf():_;_=isObject(S)?S+"":S}if(typeof _!="string")return _===0?_:+_;_=baseTrim(_);var w=reIsBinary.test(_);return w||reIsOctal.test(_)?freeParseInt(_.slice(2),w?2:8):reIsBadHex.test(_)?NAN:+_}var now=function(){return root.Date.now()},FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(_,S,w){var E,T,A,k,x,R,P=0,M=!1,N=!1,I=!0;if(typeof _!="function")throw new TypeError(FUNC_ERROR_TEXT$1);S=toNumber(S)||0,isObject(w)&&(M=!!w.leading,N="maxWait"in w,A=N?nativeMax(toNumber(w.maxWait)||0,S):A,I="trailing"in w?!!w.trailing:I);function V(j){var q=E,W=T;return E=T=void 0,P=j,k=_.apply(W,q),k}function B(j){return P=j,x=setTimeout(O,S),M?V(j):k}function D(j){var q=j-R,W=j-P,X=S-q;return N?nativeMin(X,A-W):X}function z(j){var q=j-R,W=j-P;return R===void 0||q>=S||q<0||N&&W>=A}function O(){var j=now();if(z(j))return L(j);x=setTimeout(O,D(j))}function L(j){return x=void 0,I&&E?V(j):(E=T=void 0,k)}function F(){x!==void 0&&clearTimeout(x),P=0,E=R=T=x=void 0}function $(){return x===void 0?k:L(now())}function H(){var j=now(),q=z(j);if(E=arguments,T=this,R=j,q){if(x===void 0)return B(R);if(N)return clearTimeout(x),x=setTimeout(O,S),V(R)}return x===void 0&&(x=setTimeout(O,S)),k}return H.cancel=F,H.flush=$,H}var FUNC_ERROR_TEXT="Expected a function";function throttle$1(_,S,w){var E=!0,T=!0;if(typeof _!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject(w)&&(E="leading"in w?!!w.leading:E,T="trailing"in w?!!w.trailing:T),debounce(_,S,{leading:E,maxWait:S,trailing:T})}let _transferInProgressCount=0,_wsSendFunc=null,_dcSendFunc=null,_connectionsRef=null,_wsHeartbeatInterval=null,_dcHeartbeatInterval=null;const _startWsHeartbeat=()=>{_wsHeartbeatInterval&&clearInterval(_wsHeartbeatInterval),_wsHeartbeatInterval=setInterval(()=>{_transferInProgressCount===0&&typeof _wsSendFunc=="function"&&_wsSendFunc({type:"PING"})&&log("WebSocket: Sent PING heartbeat","DEBUG")},AppSettings.network.websocketHeartbeatInterval)},_stopWsHeartbeat=()=>{_wsHeartbeatInterval&&(clearInterval(_wsHeartbeatInterval),_wsHeartbeatInterval=null)},_startDcHeartbeat=()=>{_dcHeartbeatInterval&&clearInterval(_dcHeartbeatInterval),_dcHeartbeatInterval=setInterval(()=>{_transferInProgressCount===0&&(_connectionsRef!=null&&_connectionsRef.value)&&typeof _dcSendFunc=="function"&&Object.keys(_connectionsRef.value).forEach(_=>{var w,E,T;const S=_connectionsRef.value[_];if((w=S==null?void 0:S.peer)!=null&&w.connected&&((T=(E=S.peer)==null?void 0:E._channel)==null?void 0:T.readyState)==="open")try{if(S.lastPingSent=Date.now(),_dcSendFunc(_,{type:"datachannel-ping"},!0),S.lastPongReceived&&Date.now()-S.lastPongReceived>35e3){log(`DataChannel to ${_} seems unresponsive. Triggering ICE restart.`,"WARN");const{webrtcService:A}=require("@/services/webrtcService");A.restartIce(_)}}catch(A){log(`Failed to send DataChannel ping to ${_}: ${A.message}`,"WARN")}})},15e3)},_stopDcHeartbeat=()=>{_dcHeartbeatInterval&&(clearInterval(_dcHeartbeatInterval),_dcHeartbeatInterval=null)},heartbeatService={init(_,S,w){_wsSendFunc=_,_dcSendFunc=S,_connectionsRef=w,this.resumeAll(),log("Heartbeat service initialized and started.","INFO")},pause(){_transferInProgressCount++,log(`Heartbeats paused. Active transfers: ${_transferInProgressCount}`,"DEBUG")},resume(){_transferInProgressCount=Math.max(0,_transferInProgressCount-1),log(`Heartbeats resumed. Active transfers: ${_transferInProgressCount}`,"DEBUG")},resumeAll(){_startWsHeartbeat(),_startDcHeartbeat()},shutdown(){_stopWsHeartbeat(),_stopDcHeartbeat(),_transferInProgressCount=0,log("Heartbeat service shut down.","INFO")},notifyPeerDisconnected(_){const w=useTransferStore().countActiveTransfersForPeer(_);w>0&&(_transferInProgressCount=Math.max(0,_transferInProgressCount-w),log(`Peer ${_} disconnected with ${w} active transfer(s). Heartbeat count adjusted to ${_transferInProgressCount}.`,"WARN"))}};let currentUserId=null;const connections=ref$1({}),isWebSocketConnected=ref$1(!1);let websocket=null,reconnectAttempts=0,autoRefreshInterval=null;const pendingReceivedChunks={},chunkMetaBuffer={},statsIntervals=new Map,_throttledCalculateStats=throttle$1(()=>{useTransferStore().calculateStats()},500,{leading:!1,trailing:!0});function _sendWsMessage(_){return websocket&&websocket.readyState===WebSocket.OPEN?(websocket.send(JSON.stringify(_)),!0):(log("WebSocket ","WARN"),!1)}async function proactivelyConnectToOnlineContacts(){const _=useUserStore();await _.fetchAllOnlineUsers(),_.allOnlineUsers.forEach(S=>{const w=S.userId,E=_.contacts[w],T=connections.value[w],A=E&&!E.isAI&&!E.isSpecial,k=!(T!=null&&T.isConnected);A&&k&&!T&&(log(`:  ${w}`,"INFO"),webrtcService.createOffer(w,{isSilent:!0}))})}function _connectWebSocket(){return new Promise((_,S)=>{if(websocket&&websocket.readyState===WebSocket.OPEN)return _();if(window.location.protocol==="file:")return log(" file:// WebSocket ","WARN"),S(new Error(" file:// "));websocket=new WebSocket(AppSettings.server.signalingServerUrl),websocket.onopen=async()=>{log("WebSocket: ","INFO"),isWebSocketConnected.value=!0,reconnectAttempts=0,_sendWsMessage({type:"REGISTER",userId:currentUserId}),heartbeatService.resumeAll(),eventBus.emit("websocket:status",!0),await webrtcService.proactivelyConnectToOnlineContacts(),_()},websocket.onmessage=w=>{const E=JSON.parse(w.data);E.type!=="PONG"&&(log(`WebSocket:  ${E.type}  ${E.fromUserId||""}`,"DEBUG"),E.type==="SIGNAL"?eventBus.emit("websocket:signal",E):E.type==="APP_MESSAGE"?(log(` ${E.fromUserId}  APP_MESSAGE: ${E.payload.type}`,"DEBUG"),eventBus.emit("webrtc:message",{peerId:E.fromUserId,message:E.payload})):eventBus.emit("websocket:message",E))},websocket.onclose=()=>{if(isWebSocketConnected.value=!1,heartbeatService.shutdown(),eventBus.emit("websocket:status",!1),reconnectAttempts<AppSettings.reconnect.websocket.maxAttempts){const w=Math.min(AppSettings.reconnect.websocket.backoffBase*Math.pow(2,reconnectAttempts),AppSettings.reconnect.websocket.maxDelay),E=w*.2*Math.random();reconnectAttempts++,log(`WebSocket  ${(w+E)/1e3}  ${reconnectAttempts} `,"WARN"),setTimeout(()=>_connectWebSocket().catch(()=>{}),w+E)}else log("WebSocket ","ERROR"),eventBus.emit("showNotification",{message:"",type:"error",duration:1e4})},websocket.onerror=w=>{log("WebSocket: ","ERROR"),websocket.close(),S(w)}})}function _cleanupConnection(_){var w;statsIntervals.has(_)&&(clearInterval(statsIntervals.get(_)),statsIntervals.delete(_));const S=connections.value[_];S&&(S.iceCheckingTimeout&&clearTimeout(S.iceCheckingTimeout),S.reconnectTimeout&&clearTimeout(S.reconnectTimeout),heartbeatService.notifyPeerDisconnected(_),(w=S.peer)==null||w.destroy(),delete connections.value[_],delete pendingReceivedChunks[_],delete chunkMetaBuffer[_],useTransferStore().failTransfersForPeer(_),useUserStore().updateContactConnectionDetails(_,{isConnected:!1,connectionType:null}),eventBus.emit("webrtc:disconnected",_),log(`WebRTC:  ${_} `,"INFO"))}function _handlePeerData(_,S){var E;const w=chunkMetaBuffer[S];if(w){const T=useTransferStore();T.updateProgress(w.chunkId,_.byteLength),_throttledCalculateStats();const A=(E=pendingReceivedChunks[S])==null?void 0:E[w.chunkId];if(A&&(A.chunks[A.received]=_,A.received++,A.received===A.total)){heartbeatService.resume();const k=new Blob(A.chunks,{type:w.fileType}),x={...w};delete pendingReceivedChunks[S][w.chunkId],delete chunkMetaBuffer[S],T.endTransfer(x.chunkId),log(` "${x.fileName}"  ${S} `,"INFO"),dbService.setItem("fileCache",{id:x.chunkId,fileBlob:k,metadata:{name:x.fileName,type:x.fileType,size:x.fileSize}}).then(()=>{eventBus.emit("file:ready",{fileHash:x.chunkId,messageId:x.messageId}),x.messageId&&webrtcService.sendMessage(S,{type:"file-transfer-complete",ackId:x.messageId},!0)})}}else try{const T=JSON.parse(new TextDecoder().decode(_));if(T.type==="datachannel-ping"){webrtcService.sendMessage(S,{type:"datachannel-pong"},!0);return}if(T.type==="datachannel-pong"){const A=connections.value[S];A&&(A.lastPongReceived=Date.now());return}if(T.type==="whiteboard_action"){eventBus.emit("webrtc:whiteboard-action",{peerId:S,action:T.payload});return}if(T.type==="retract-message-request"){eventBus.emit("message:retracted",{chatId:T.groupId||S,messageId:T.messageId,retractedByName:T.retractedByName}),webrtcService.sendMessage(S,{type:"retract-message-ack",messageId:T.messageId},!0);return}if(T.type==="retract-message-ack"){eventBus.emit("message:retracted-ack",{messageId:T.messageId});return}if(T.type==="message-ack"){eventBus.emit("message:delivered",{messageId:T.ackId,peerId:S});return}if(T.type==="file-transfer-complete"){eventBus.emit("message:file-delivered",{messageId:T.ackId,peerId:S});return}if(T.id&&(T.type==="text"||T.type.startsWith("call-")||T.type==="typing")&&webrtcService.sendMessage(S,{type:"message-ack",ackId:T.id},!0),T.type==="typing"){eventBus.emit("webrtc:typing",{peerId:S});return}T.type==="chunk-meta"?(heartbeatService.pause(),chunkMetaBuffer[S]=T,pendingReceivedChunks[S]||(pendingReceivedChunks[S]={}),pendingReceivedChunks[S][T.chunkId]={id:T.chunkId,total:T.totalChunks,received:0,chunks:new Array(T.totalChunks)},eventBus.emit("file:transfer-initiated",{peerId:S,groupId:T.groupId,messageId:T.messageId,fileHash:T.chunkId,fileName:T.fileName,fileSize:T.fileSize,fileType:T.fileType,duration:T.duration,messageType:T.messageType})):eventBus.emit("webrtc:message",{peerId:S,message:T})}catch{log(`WebRTC:  ${S} JSON`,"WARN")}}function _startStatsPolling(_,S){statsIntervals.has(S)&&clearInterval(statsIntervals.get(S));const w=setInterval(()=>{if(!_||!_.connected){clearInterval(statsIntervals.get(S)),statsIntervals.delete(S);return}_.getStats((E,T)=>{if(E){log(` ${S}  WebRTC : ${E.message}`,"WARN");return}if(!Array.isArray(T)){log(` ${S} `,"WARN");return}let A=null,k=null,x=0,R=0;const P={};T.forEach(I=>{I.type==="remote-inbound-rtp"&&(P[I.id]=I)}),T.forEach(I=>{if(I.type==="remote-inbound-rtp"&&(I.kind==="video"||I.kind==="audio")&&(I.roundTripTime!==void 0&&(A===null||I.roundTripTime<A)&&(A=I.roundTripTime*1e3),I.jitter!==void 0&&(k===null||I.jitter<k)&&(k=I.jitter*1e3)),I.type==="outbound-rtp"&&(I.kind==="video"||I.kind==="audio")){R+=I.packetsSent||0;const V=P[I.remoteId];V&&V.packetsLost&&(x+=V.packetsLost)}});const M=R+x,N=M>0?x/M:0;(A!==null||k!==null)&&eventBus.emit("webrtc:stats-updated",{peerId:S,stats:{rtt:A,jitter:k,packetLoss:N}})})},5e3);statsIntervals.set(S,w)}async function _diagnoseConnectionType(_,S){const w=useUserStore();try{const E=await new Promise((k,x)=>{_.getStats((R,P)=>{if(R)return x(R);k(P)})});let T="unknown";const A=E.filter(k=>k.type==="candidate-pair"&&k.state==="succeeded");if(A.length>0){const k=A[0],x=E.find(P=>P.id===k.localCandidateId),R=E.find(P=>P.id===k.remoteCandidateId);if(x&&R){const P=x.candidateType,M=R.candidateType;log(`[DIAGNOSTIC] Connection to ${S}: Local=${P} -> Remote=${M}`,"INFO"),P==="relay"||M==="relay"?T="relay":P==="srflx"||M==="srflx"?T="p2p":P==="host"&&M==="host"&&(T="p2p-lan")}}T!=="unknown"?(log(`[DIAGNOSTIC] Final connection type for ${S} is: ${T.toUpperCase()}`,"INFO"),w.updateContactConnectionDetails(S,{connectionType:T})):(log(`[DIAGNOSTIC] Could not determine final connection type for ${S}.`,"WARN"),w.updateContactConnectionDetails(S,{connectionType:"unknown"}))}catch(E){log(`[DIAGNOSTIC] Failed to get stats for peer ${S}: ${E.message}`,"ERROR"),w.updateContactConnectionDetails(S,{connectionType:"error"})}}function _setupPeerListeners(_,S){_.on("signal",w=>{_sendWsMessage({type:"SIGNAL",targetUserId:S,payload:w,userId:currentUserId})}),_.on("connect",async()=>{var T;log(`WebRTC:  ${S}  DataChannel `,"INFO");const w=connections.value[S];w&&(w.iceCheckingTimeout&&clearTimeout(w.iceCheckingTimeout),w.isConnected=!0,w.lastPongReceived=Date.now()),_startStatsPolling(_,S),_diagnoseConnectionType(_,S);const E=useUserStore();E.contacts[S]||await E.addContact({id:S}),eventBus.emit("webrtc:connected",S),w!=null&&w.isSilent||eventBus.emit("showNotification",{message:` ${((T=E.contacts[S])==null?void 0:T.name)||S}`,type:"success"})}),_.on("data",w=>_handlePeerData(w,S)),_.on("stream",w=>{if(w instanceof MediaStream){if(!w.active){log(`WebRTC:  ${S} (inactive)`,"WARN");return}log(`WebRTC:  ${S} `,"INFO"),eventBus.emit("webrtc:stream",{peerId:S,stream:w})}else log(`WebRTC:  ${S} null`,"WARN")}),_.on("iceStateChange",w=>{log(`WebRTC: ${S} ICE state changed to ${w}`,"DEBUG");const E=connections.value[S];E&&(E.iceCheckingTimeout&&clearTimeout(E.iceCheckingTimeout),E.reconnectTimeout&&(clearTimeout(E.reconnectTimeout),E.reconnectTimeout=null),w==="checking"?E.iceCheckingTimeout=setTimeout(()=>{log(`WebRTC: ${S} ICE checking timed out. Cleaning up.`,"WARN"),_cleanupConnection(S)},AppSettings.timeouts.iceChecking):w==="disconnected"?(log(`WebRTC: Connection to ${S} is disconnected. Waiting for auto-reconnect...`,"WARN"),E.reconnectTimeout=setTimeout(()=>{log(`WebRTC: Auto-reconnect for ${S} failed. Triggering ICE restart.`,"ERROR"),webrtcService.restartIce(S)},4e3)):w==="connected"||w==="completed"?E.reconnectTimeout&&(clearTimeout(E.reconnectTimeout),E.reconnectTimeout=null,log(`WebRTC: Connection to ${S} re-established automatically.`,"INFO")):w==="failed"&&(log(`WebRTC: Connection to ${S} failed. Attempting ICE restart.`,"WARN"),webrtcService.restartIce(S)))}),_.on("close",()=>{_cleanupConnection(S)}),_.on("error",w=>{log(`WebRTC:  ${S} : ${w.message}`,"ERROR"),_cleanupConnection(S)})}const webrtcService={connections,isWebSocketConnected,init(_){if(!_){log("webrtcService init:  userId","ERROR");return}currentUserId=_,eventBus.on("websocket:signal",({fromUserId:S,payload:w})=>{this.handleIncomingSignal(S,w)}),heartbeatService.init(_sendWsMessage,this.sendMessage,connections),_connectWebSocket().catch(S=>{log("WebSocket","ERROR")}),this.startAutoRefresh()},sendViaSignaling(_,S){return isWebSocketConnected.value?(log(` WebSocket  ${_} : ${S.type}`,"INFO"),_sendWsMessage({type:"APP_MESSAGE",userId:currentUserId,targetUserId:_,payload:S})):(log(` ${_}: WebSocket `,"ERROR"),eventBus.emit("showNotification",{message:"",type:"error"}),!1)},startAutoRefresh(){autoRefreshInterval&&clearInterval(autoRefreshInterval),autoRefreshInterval=setInterval(proactivelyConnectToOnlineContacts,AppSettings.network.onlineUserRefreshInterval),log("WebRTC : ","INFO")},stopAutoRefresh(){autoRefreshInterval&&(clearInterval(autoRefreshInterval),autoRefreshInterval=null)},proactivelyConnectToOnlineContacts,createOffer(_,S={}){var E;if((E=connections.value[_])!=null&&E.isConnected){log(`WebRTC:  ${_} `,"DEBUG");return}if(connections.value[_]&&!connections.value[_].isConnected){log(`WebRTC:  ${_} `,"DEBUG"),S.stream&&connections.value[_].peer.streams[0]!==S.stream&&(log(`WebRTC:  ${_} `,"DEBUG"),this.addStreamToConnection(_,S.stream));return}log(`WebRTC:  ${_} `,"INFO");const w=new SimplePeer({initiator:!0,config:AppSettings.peerConnectionConfig,trickle:!0,stream:S.stream||!1});connections.value[_]={peer:w,isConnected:!1,iceCheckingTimeout:null,isSilent:!!S.isSilent},_setupPeerListeners(w,_)},addStreamToConnection(_,S){const w=connections.value[_];if(!S||!S.active||S.getTracks().every(E=>E.readyState==="ended")){log(`Attempted to add an invalid or ended stream to connection ${_}. Aborting.`,"ERROR"),eventBus.emit("showNotification",{message:"",type:"error"});return}w!=null&&w.peer?(log(`WebRTC:  ${_} `,"INFO"),w.peer.streams&&w.peer.streams.length>0&&w.peer.removeStream(w.peer.streams[0]),w.peer.addStream(S)):(log(`WebRTC:  ${_} `,"INFO"),this.createOffer(_,{stream:S}))},removeStreamFromConnection(_,S){var E;const w=connections.value[_];if((E=w==null?void 0:w.peer)!=null&&E.connected&&S)try{w.peer.removeStream(S),log(`WebRTC:  ${_} `,"INFO")}catch(T){log(`WebRTC:  ${_} : ${T.message}`,"ERROR")}},async handleIncomingSignal(_,S){let w=connections.value[_];if(!w){log(`WebRTC:  ${_} `,"INFO");const E=useUserStore();E.contacts[_]||await E.addContact({id:_});const T=new SimplePeer({initiator:!1,config:AppSettings.peerConnectionConfig,trickle:!0});connections.value[_]={peer:T,isConnected:!1,iceCheckingTimeout:null},_setupPeerListeners(T,_),w=connections.value[_]}w.peer.signal(S)},sendMessage(_,S,w=!1){var T;const E=connections.value[_];if(!((T=E==null?void 0:E.peer)!=null&&T.connected))throw log(`WebRTC:  ${_} `,"WARN"),new Error("not connected");try{const A=JSON.stringify(S);return E.peer.send(A),!0}catch(A){throw log(`WebRTC:  ${_} : ${A.message}`,"ERROR"),A}},sendTyping(_){var w;const S=connections.value[_];if((w=S==null?void 0:S.peer)!=null&&w.connected)try{S.peer.send(JSON.stringify({type:"typing"}))}catch(E){log(` ${_} : ${E.message}`,"WARN")}},async sendFile(_,S){var x;const w=connections.value[_];if(!((x=w==null?void 0:w.peer)!=null&&x.connected))return!1;heartbeatService.pause();const E=w.peer,T=E._channel,A=AppSettings.media.chunkSize,k=AppSettings.network.dataChannelHighThreshold;try{this.sendMessage(_,{type:"chunk-meta",messageId:S.messageId,messageType:S.messageType,chunkId:S.hash,fileName:S.name,fileType:S.fileType,fileSize:S.size,totalChunks:Math.ceil(S.blob.size/A),duration:S.duration,groupId:S.groupId});let R=0;for(;R<S.blob.size;){T.bufferedAmount>k&&await new Promise(M=>{const N=()=>{T.removeEventListener("bufferedamountlow",N),M()};T.addEventListener("bufferedamountlow",N)});const P=S.blob.slice(R,R+A);E.send(P),R+=P.size}return!0}catch(R){return log(`WebRTC:  ${_} : ${R.message}`,"ERROR"),!1}finally{heartbeatService.resume()}},closeConnection(_){_cleanupConnection(_)},restartIce(_){const S=connections.value[_];S&&S.peer?(log(`WebRTC: Manually restarting ICE for peer ${_}`,"INFO"),S.peer.destroy(),delete connections.value[_],this.createOffer(_)):S||(log(`WebRTC: No existing connection for ${_}. Creating a new one.`,"INFO"),this.createOffer(_))},async adjustPeerBitrate(_,{maxBitrate:S,resolution:w}){const E=connections.value[_];if(!E||!E.peer||!E.peer.connected)return;const T=E.peer._pc.getSenders().find(k=>{var x;return((x=k.track)==null?void 0:x.kind)==="video"});if(!T){log(`Cannot adjust bitrate: No active video sender found for peer ${_}. (This is expected for audio-only calls)`,"DEBUG");return}const A=T.getParameters();if((!A.encodings||A.encodings.length===0)&&(A.encodings=[{}]),S?A.encodings[0].maxBitrate=S:delete A.encodings[0].maxBitrate,await T.setParameters(A),log(`WebRTC: Adjusted bitrate for ${_} to ${S?S/1e3+"kbps":"auto"}.`,"INFO"),w&&T.track)try{await T.track.applyConstraints({height:{ideal:w.height}}),log(`WebRTC: Adjusted resolution for ${_} to ideal height ${w.height}p.`,"INFO")}catch(k){log(`WebRTC: Failed to apply resolution constraint for ${_}: ${k.message}`,"ERROR")}},async adjustScreenShareParameters(_,{resolution:S,frameRate:w}){const E=connections.value[_];if(!E||!E.peer||!E.peer.connected)return;const T=E.peer._pc.getSenders().find(A=>{var k;return((k=A.track)==null?void 0:k.kind)==="video"});if(!T||!T.track){log(`Cannot adjust screen share parameters: No active video sender found for peer ${_}.`,"WARN");return}try{await T.track.applyConstraints({...S,frameRate:w}),log(`WebRTC: Adjusted screen share for ${_} to resolution ${JSON.stringify(S)} and frameRate ${JSON.stringify(w)}.`,"INFO")}catch(A){log(`WebRTC: Failed to apply screen share constraints for ${_}: ${A.message}`,"ERROR"),eventBus.emit("showNotification",{message:"",type:"warning"})}},async _testIceServer(_){return new Promise(S=>{const w=new RTCPeerConnection({iceServers:[_]}),E=[],T=setTimeout(()=>{w.close(),S(E)},AppSettings.timeouts.iceGathering);w.onicecandidate=A=>{A.candidate?E.push(A.candidate):(clearTimeout(T),w.close(),S(E))},w.createDataChannel("test"),w.createOffer().then(A=>w.setLocalDescription(A))})},async testNetwork(){const _={stun:"Testing...",turnUdp:"Testing...",turnTcp:"Testing...",turnTls:"Testing..."},S=AppSettings.peerConnectionConfig.iceServers.filter(P=>P.urls.startsWith("stun:")),w=AppSettings.peerConnectionConfig.iceServers.find(P=>P.urls.startsWith("turn:")&&P.urls.includes("transport=udp")),E=AppSettings.peerConnectionConfig.iceServers.find(P=>P.urls.startsWith("turn:")&&P.urls.includes("transport=tcp")),T=AppSettings.peerConnectionConfig.iceServers.find(P=>P.urls.startsWith("turns:")),[A,k,x,R]=await Promise.all([S.length>0?this._testIceServer({urls:S.map(P=>P.urls)}):Promise.resolve([]),w?this._testIceServer(w):Promise.resolve([]),E?this._testIceServer(E):Promise.resolve([]),T?this._testIceServer(T):Promise.resolve([])]);return _.stun=A.some(P=>P.type==="srflx")?"OK":"Failed",_.turnUdp=k.some(P=>P.type==="relay")?"OK":"Failed",_.turnTcp=x.some(P=>P.type==="relay")?"OK":"Failed",_.turnTls=R.some(P=>P.type==="relay")?"OK":"Failed",log(`: STUN=${_.stun}, TURN/UDP=${_.turnUdp}, TURN/TCP=${_.turnTcp}, TURN/TLS=${_.turnTls}`,"INFO"),_}},useGroupStore=defineStore("group",()=>{const _=ref$1({});async function S(){const B=await dbService.getAllItems("groups"),D={};B.forEach(z=>{D[z.id]={type:"group",aiPrompts:{},...z}}),_.value=D,log("Store","INFO"),eventBus.on("webrtc:message",P)}async function w(B,D,z){const O=_.value[B],L=useUserStore();O&&O.owner===L.userId&&(O.aiPrompts||(O.aiPrompts={}),O.aiPrompts[D]=z,await dbService.setItem("groups",O),R(B,{type:"group-ai-prompt-updated",aiMemberId:D,newPrompt:z}),eventBus.emit("showNotification",{message:"AI ",type:"success"}))}async function E(B,D=null){const z=useUserStore(),O=D?`group_${D}`:`group_${generateId()}`;if(_.value[O])return _.value[O].owner===z.userId?(_.value[O].name=B,await dbService.setItem("groups",_.value[O]),R(O,{type:"group-name-changed",newName:B}),eventBus.emit("showNotification",{message:"",type:"success"}),O):(eventBus.emit("showNotification",{message:"",type:"error"}),null);const L={id:O,name:B,owner:z.userId,members:[z.userId],lastTime:new Date().toISOString(),unread:0,aiPrompts:{},type:"group"};return _.value[O]=L,await dbService.setItem("groups",L),O}async function T(B,D){const z=_.value[B],O=useUserStore();if(!z||z.owner!==O.userId)return!1;if(z.members.length>=AppSettings.chat.maxGroupMembers)return eventBus.emit("showNotification",{message:` ( ${AppSettings.chat.maxGroupMembers} )`,type:"warning"}),!1;if(z.members.includes(D))return!0;const L=O.contacts[D];if(!(L!=null&&L.isAI)){await O.fetchAllOnlineUsers();const F=O.getContactCombinedStatus(D),$=(L==null?void 0:L.name)||` ${D.substring(0,4)}`;if(!F.isGloballyOnline)return eventBus.emit("showNotification",{message:`${$} `,type:"error"}),!1;if(!F.isConnected)return eventBus.emit("showNotification",{message:` ${$} ...`,type:"info"}),webrtcService.createOffer(D,{isSilent:!1}),!1}return z.members.push(D),R(B,{type:"group-member-added",addedMemberId:D,addedMemberDetails:JSON.parse(JSON.stringify(L)),allMembers:z.members},{excludeIds:[D]}),L!=null&&L.isAI||webrtcService.sendMessage(D,{type:"group-join",group:JSON.parse(JSON.stringify(_.value[B]))}),await dbService.setItem("groups",z),eventBus.emit("showNotification",{message:`${L.name} `,type:"success"}),!0}async function A(B,D){var F,$;const z=_.value[B],O=useUserStore();if(!z||z.owner!==O.userId||D===O.userId)return!1;const L=z.members.indexOf(D);if(L>-1){const H=[...z.members],j=((F=O.contacts[D])==null?void 0:F.name)||` ${D.substring(0,4)}`;return z.members.splice(L,1),($=z.aiPrompts)!=null&&$[D]&&delete z.aiPrompts[D],R(B,{type:"group-member-removed",removedMemberId:D,removedMemberName:j,allMembers:z.members},{customRecipientList:H}),await dbService.setItem("groups",z),eventBus.emit("showNotification",{message:`${j} `,type:"success"}),!0}return!1}async function k(B){const D=_.value[B],z=useUserStore(),O=z.userId;if(!D||!D.members.includes(O)||D.owner===O)return!1;const L=D.members.filter(F=>F!==O);return R(B,{type:"group-member-left",memberId:O,memberName:z.userName,allMembers:L},{excludeIds:[O]}),delete _.value[B],await dbService.removeItem("groups",B),await useChatStore().deleteChatHistory(B),useChatStore().currentChatId===B&&useChatStore().openChat(null),!0}async function x(B){const D=_.value[B],z=useUserStore().userId;if(!D||D.owner!==z)return!1;const O=[...D.members];return R(B,{type:"group-dissolved",groupName:D.name},{customRecipientList:O,excludeIds:[z]}),delete _.value[B],await dbService.removeItem("groups",B),await useChatStore().deleteChatHistory(B),useChatStore().currentChatId===B&&useChatStore().openChat(null),!0}function R(B,D,{excludeIds:z=[],file:O=null,customRecipientList:L=null}={}){const F=_.value[B],$=useUserStore();if(!F)return;(L||F.members).forEach(j=>{var q;if(j!==$.userId&&!((q=$.contacts[j])!=null&&q.isAI)&&!z.includes(j))try{if(webrtcService.sendMessage(j,{...D,groupId:B}),O){const W={...O,groupId:B};webrtcService.sendFile(j,W)}}catch(W){log(` ${j}  (): ${W.message}`,"WARN")}})}async function P({peerId:B,message:D}){var F,$;const z=D.groupId||((F=D.group)==null?void 0:F.id);if(!z)return;const O=useUserStore(),L=useChatStore();switch(D.type){case"group-join":if(_.value[z])_.value[z]={..._.value[z],...D.group},await dbService.setItem("groups",_.value[z]);else{const H={type:"group",...D.group};_.value[z]=H,await dbService.setItem("groups",H),eventBus.emit("showNotification",{message:`: ${D.group.name}`,type:"success"}),webrtcService.proactivelyConnectToOnlineContacts()}break;case"group-member-added":_.value[z]&&(_.value[z].members=D.allMembers,D.addedMemberDetails&&!O.contacts[D.addedMemberId]&&await O.addContact(D.addedMemberDetails),await dbService.setItem("groups",_.value[z]));break;case"group-ai-prompt-updated":_.value[z]&&(_.value[z].aiPrompts||(_.value[z].aiPrompts={}),_.value[z].aiPrompts[D.aiMemberId]=D.newPrompt,await dbService.setItem("groups",_.value[z]),log(`Group prompt updated for AI ${D.aiMemberId} from peer.`,"INFO"));break;case"group-member-removed":if(_.value[z]&&D.removedMemberId)if(D.removedMemberId===O.userId){const H=_.value[z].name;delete _.value[z],await dbService.removeItem("groups",z),L.currentChatId===z&&L.openChat(null),eventBus.emit("showNotification",{message:` "${H}"`,type:"warning"})}else _.value[z].members=D.allMembers,($=_.value[z].aiPrompts)!=null&&$[D.removedMemberId]&&delete _.value[z].aiPrompts[D.removedMemberId],await dbService.setItem("groups",_.value[z]),eventBus.emit("showNotification",{message:` "${D.removedMemberName}" `,type:"info"});break;case"group-member-left":_.value[z]&&D.memberId&&(_.value[z].members=D.allMembers,await dbService.setItem("groups",_.value[z]));break;case"group-dissolved":if(_.value[z]){const H=D.groupName||_.value[z].name;delete _.value[z],await dbService.removeItem("groups",z),L.currentChatId===z&&L.openChat(null),eventBus.emit("showNotification",{message:` "${H}" `,type:"warning"})}break}}async function M(B,D){_.value[B]&&(_.value[B].lastMessage=D,_.value[B].lastTime=new Date().toISOString(),await dbService.setItem("groups",_.value[B]))}async function N(B){_.value[B]&&(_.value[B].unread=(_.value[B].unread||0)+1,await dbService.setItem("groups",_.value[B]))}async function I(B){_.value[B]&&(_.value[B].unread=0,await dbService.setItem("groups",_.value[B]))}async function V(B){const D=[];for(const z in _.value){const O=_.value[z],L=O.members.indexOf(B);L>-1&&(O.members.splice(L,1),D.push(dbService.setItem("groups",O)),log(` ${B}  ${z} `,"INFO"))}await Promise.all(D)}return{groups:_,init:S,createGroup:E,addMemberToGroup:T,removeMemberFromGroup:A,leaveGroup:k,dissolveGroup:x,broadcastMessage:R,updateGroupAiPrompt:w,updateGroupLastMessage:M,incrementUnread:N,clearUnread:I,removeMemberFromAllGroups:V,handleIncomingGroupMessage:P}}),useMemoryStore=defineStore("memory",()=>{const _=ref$1([]);async function S(){_.value=await dbService.getAllItems("memoryBooks"),log("Store","INFO")}async function w(P,M){if(!P||!Array.isArray(M)||M.length===0)return eventBus.emit("showNotification",{message:"",type:"error"}),!1;const N={id:`mem_set_${generateId(12)}`,name:P,elements:M,books:{}};return _.value.push(N),await dbService.setItem("memoryBooks",N),eventBus.emit("showNotification",{message:` "${P}" `,type:"success"}),!0}async function E(P){const M=_.value.findIndex(N=>N.id===P);if(M>-1){const N=_.value[M].name;_.value.splice(M,1),await dbService.removeItem("memoryBooks",P),eventBus.emit("showNotification",{message:` "${N}" `,type:"success"})}}async function T(P,M,N){const I=_.value.find(V=>V.id===P);return I?(I.name=M,I.elements=N,await dbService.setItem("memoryBooks",I),eventBus.emit("showNotification",{message:` "${M}" `,type:"success"}),!0):!1}async function A(P,M){var B;const N=_.value.find(D=>D.id===P),V=useChatStore().chats[M];if(!N||!(V!=null&&V.length)){eventBus.emit("showNotification",{message:"",type:"info"});return}eventBus.emit("showNotification",{message:` "${N.name}" ...`,type:"info"});try{const D=useUserStore(),z=V.filter(L=>L.type==="text"&&!L.isRetracted&&!L.isThinking).map(L=>{var $;return`${L.sender===D.userId?D.userName:(($=D.contacts[L.sender])==null?void 0:$.name)||""}: ${L.content}`}).join(`
`),O=await apiService.extractMemoryElements(N.elements,z);N.books||(N.books={}),N.books[M]={content:O.trim(),enabled:((B=N.books[M])==null?void 0:B.enabled)||!1},await dbService.setItem("memoryBooks",N),eventBus.emit("showNotification",{message:"",type:"success"})}catch(D){log(`: ${D}`,"ERROR"),eventBus.emit("showNotification",{message:`: ${D.message}`,type:"error"})}}async function k(P,M,N){var V;const I=_.value.find(B=>B.id===P);(V=I==null?void 0:I.books)!=null&&V[M]&&I.books[M].content!==N&&(I.books[M].content=N,await dbService.setItem("memoryBooks",I),eventBus.emit("showNotification",{message:"",type:"success"}))}async function x(P,M,N){const I=[];_.value.forEach(V=>{V.books||(V.books={}),V.books[M]||(V.books[M]={content:"",enabled:!1});let B=!1;V.id===P?V.books[M].enabled!==N&&(V.books[M].enabled=N,B=!0):N&&V.books[M].enabled&&(V.books[M].enabled=!1,B=!0),B&&I.push(dbService.setItem("memoryBooks",V))}),await Promise.all(I),log(` (Chat: ${M})`,"INFO")}function R(P){let M="";return _.value.forEach(N=>{var I,V;(V=(I=N.books)==null?void 0:I[P])!=null&&V.enabled&&N.books[P].content&&(M+=`--- ${N.name} ---
${N.books[P].content}

`)}),M.trim()}return{elementSets:_,init:S,addElementSet:w,deleteElementSet:E,updateElementSet:T,generateMemoryBook:A,saveMemoryBookContent:k,setMemoryBookEnabled:x,getEnabledMemoryForChat:R}}),MCP_TOOLS={get_weather:{name:"get_weather",description:"",url_template:"https://wttr.in/{city}?format=j1",parameters:{type:"object",properties:{city:{type:"string",description:""}},required:["city"]}},duckduckgo_search:{name:"duckduckgo_search",description:" DuckDuckGo ",url_template:"https://api.duckduckgo.com/?q={query}&format=json&pretty=1",parameters:{type:"object",properties:{query:{type:"string",description:""}},required:["query"]}},get_current_ip_info:{name:"get_current_ip_info",description:"IP",url_template:"http://ip-api.com/json/",parameters:{type:"object",properties:{},required:[]}},get_github_user_info:{name:"get_github_user_info",description:" GitHub ",url_template:"https://api.github.com/users/{username}",parameters:{type:"object",properties:{username:{type:"string",description:" GitHub 'torvalds'"}},required:["username"]}}},audioUrlCache=new Map,useTtsStore=defineStore("tts",()=>{const _=ref$1({});async function S(A){if(!(!A||!A.id||!A.senderContact)&&!["loading","ready","playing"].includes(_.value[A.id])){_.value[A.id]="loading";try{const k=await apiService.requestTtsForMessage(A.senderContact,A.content);if(k){audioUrlCache.has(A.id)&&URL.revokeObjectURL(audioUrlCache.get(A.id));const x=URL.createObjectURL(k);audioUrlCache.set(A.id,x),_.value[A.id]="ready",log(`TTS audio is ready for message ${A.id}`,"INFO")}else throw new Error("Received null or empty blob from TTS service.")}catch(k){log(`TTS request failed for message ${A.id}: ${k.message}`,"ERROR"),_.value[A.id]="error"}}}function w(A){if(!audioUrlCache.get(A)){log(`No audio URL found for message ${A} to play.`,"WARN"),_.value[A]="error";return}Object.keys(_.value).forEach(x=>{x!==A&&_.value[x]==="playing"&&(_.value[x]="ready")}),_.value[A]==="playing"?_.value[A]="ready":_.value[A]==="ready"&&(_.value[A]="playing")}function E(A){_.value[A]==="playing"&&(_.value[A]="ready")}function T(){log(`Cleaning up ${audioUrlCache.size} cached TTS audio URLs.`,"INFO"),audioUrlCache.forEach(A=>URL.revokeObjectURL(A)),audioUrlCache.clear()}return window.addEventListener("beforeunload",T),{messageTtsState:_,audioUrlCache,requestTtsForMessage:S,togglePlay:w,setPlaybackFinished:E}}),_ttsDynamicDataCache={};function _getEffectiveAiConfig(){var S,w,E,T,A;const _=useSettingsStore();return{apiEndpoint:((S=_.apiSettings)==null?void 0:S.apiEndpoint)||AppSettings.server.apiEndpoint,model:((w=_.apiSettings)==null?void 0:w.model)||AppSettings.server.model,apiKey:((E=_.apiSettings)==null?void 0:E.apiKey)||AppSettings.server.api_key,maxTokens:((T=_.apiSettings)==null?void 0:T.maxTokens)||AppSettings.server.max_tokens,ttsApiEndpoint:((A=_.apiSettings)==null?void 0:A.ttsApiEndpoint)||AppSettings.server.ttsApiEndpoint}}function _buildMcpAnalysisPrompt(_,S){const w=[];let E=`
`;return E+=" (JSON):\n```json\n"+JSON.stringify(Object.values(MCP_TOOLS).map(({name:T,description:A,parameters:k})=>({name:T,description:A,parameters:k})),null,2)+"\n```\n",E+=`JSON: {"tool_call": {"name": "", "arguments": {"1": "1"}}}. 
`,E+="",w.push({role:"system",content:E}),w.push(..._),w.push({role:"user",content:S}),w}function _buildMcpFinalPrompt(_,S,w,E){const T=[];T.push({role:"system",content:_});const A=`${S}

[${w.name}]
: ${E}`;return T.push({role:"user",content:A}),T}async function _executeMcpTool(_,S){const w=MCP_TOOLS[_];if(!w)return{error:`: ${_}`};let E=w.url_template;for(const T in S)E=E.replace(`{${T}}`,encodeURIComponent(S[T]));log(`MCP:  "${_}"URL: ${E}`,"INFO");try{const T=await fetch(E);return T.ok?{data:await T.text()}:{error:`API: ${T.status}`}}catch(T){return{error:`: ${T.message}`}}}async function _generateTtsCacheKey(_){try{const S=JSON.stringify(_),E=new TextEncoder().encode(S),T=await crypto.subtle.digest("SHA-256",E);return Array.from(new Uint8Array(T)).map(k=>k.toString(16).padStart(2,"0")).join("")}catch(S){return log(` TTS : ${S}`,"ERROR"),`tts_fallback_${encodeURIComponent(_.text)}_${encodeURIComponent(_.model_name||"default_model")}`}}const apiService={async sendAiMessage(_,S,w=[]){var M,N,I;const E=useChatStore(),T=useUserStore(),A=useMemoryStore(),k=T.contacts[_];if(!k){log(`sendAiMessage: Contact with ID ${_} not found. Aborting.`,"ERROR");return}const x=_getEffectiveAiConfig(),R=`ai_response_${Date.now()}`,P=new Date().toISOString();E.addTemporaryMessage(_,{id:R,type:"system",content:"...",sender:_,isThinking:!0,timestamp:P});try{const V=w.filter(F=>F.type==="text"&&F.content&&typeof F.content=="string").map(F=>({role:F.sender===T.userId?"user":"assistant",content:F.content}));let B=((M=k.aiConfig)==null?void 0:M.systemPrompt)||"You are a helpful assistant.";const D=A.getEnabledMemoryForChat(_);D&&(B=`[]
${D}

[]
${B}`);const z=k.selectedChapterId;if(z&&k.chapters){const F=k.chapters.find($=>$.id===z);F!=null&&F.promptModifier&&(B+=`

[: ${F.name}]
${F.promptModifier}`)}B+=AppSettings.ai.promptSuffix;let O,L=!0;if((N=k.aiConfig)!=null&&N.mcp_enabled&&typeof MCP_TOOLS<"u"){const F=_buildMcpAnalysisPrompt(V,S),$={model:x.model,messages:F,stream:!1,temperature:0,max_tokens:512};try{const H=await fetch(x.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json",authorization:x.apiKey},body:JSON.stringify($)});if(!H.ok)throw new Error(`MCP: ${H.status}`);const j=await H.text(),q=((I=j.trim().match(/\{.*\}/s))==null?void 0:I[0])||j,X=JSON.parse(q).choices[0].message.content;let te;try{const ee=JSON.parse(X);ee.tool_call&&(te=ee.tool_call)}catch{}if(te){E.updateTemporaryMessage(_,R,{content:`: ${te.name}...`,isThinking:!0,isStreaming:!1,type:"system",toolCallInfo:{name:te.name}});const ee=await _executeMcpTool(te.name,te.arguments);if(ee.error)throw new Error(`: ${ee.error}`);const G=_buildMcpFinalPrompt(B,S,te,ee.data);O={model:x.model,messages:G,stream:!0,max_tokens:x.maxTokens}}else{L=!1,E.removeTemporaryMessage(_,R);const ee={id:R,type:"text",content:X,timestamp:P,sender:_,isNewlyCompletedAIResponse:!0};await E.addMessage(_,ee)}}catch(H){log(`MCP analysis or tool execution failed: ${H.message}. Falling back to normal response.`,"WARN"),O={model:x.model,messages:[{role:"system",content:B},...V,{role:"user",content:S}],stream:!0,max_tokens:x.maxTokens}}}else O={model:x.model,messages:[{role:"system",content:B},...V,{role:"user",content:S}],stream:!0,max_tokens:x.maxTokens};if(L){let F="";E.updateTemporaryMessage(_,R,{content:"",isThinking:!1,isStreaming:!0,type:"text"}),await fetchApiStream(x.apiEndpoint,O,{"Content-Type":"application/json",Authorization:x.apiKey},$=>{var j,q;const H=(q=(j=$.choices[0])==null?void 0:j.delta)==null?void 0:q.content;H&&(F+=H,E.updateTemporaryMessage(_,R,{content:F+""}))},async $=>{var q,W;E.removeTemporaryMessage(_,R);const H={id:R,type:"text",content:$,sender:_,timestamp:P,isNewlyCompletedAIResponse:!0};await E.addMessage(_,H);const j=useUserStore().contacts[_];(W=(q=j==null?void 0:j.aiConfig)==null?void 0:q.tts)!=null&&W.enabled&&$&&useTtsStore().requestTtsForMessage({...H,senderContact:j})})}}catch(V){log(` AI : ${V}`,"ERROR"),E.removeTemporaryMessage(_,R);const B={id:R,type:"text",content:`: ${V.message}`,sender:_,timestamp:P,status:"failed"};await E.addMessage(_,B)}},async sendGroupAiMessage(_,S,w,E){var I,V,B,D,z,O,L;const T=useChatStore(),A=useUserStore(),k=useGroupStore(),x=A.contacts[S];if(!x||!x.isAI){log(`sendGroupAiMessage: Target ${S} is not a valid AI contact.`,"WARN");return}const R=_getEffectiveAiConfig(),P=k.groups[_];if(!P)return;const M=`group_ai_response_${x.id}_${Date.now()}`,N=new Date().toISOString();T.addTemporaryMessage(_,{id:M,type:"system",sender:x.id,content:"...",isThinking:!0,timestamp:N});try{const $=(T.chats[_]||[]).slice(-10).filter(X=>X.type==="text"&&!X.isRetracted&&!X.isThinking).map(X=>{var te;return{role:X.sender===x.id?"assistant":"user",content:`${((te=A.contacts[X.sender])==null?void 0:te.name)||""}: ${X.content}`}}),j=`${((I=A.contacts[E])==null?void 0:I.name)||A.userName}: ${w}`;let q,W=!0;if((V=x.aiConfig)!=null&&V.mcp_enabled&&typeof MCP_TOOLS<"u"){const X=_buildMcpAnalysisPrompt($,j),te={model:R.model,messages:X,stream:!1,temperature:0,max_tokens:512};try{const ee=await fetch(R.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json",authorization:R.apiKey},body:JSON.stringify(te)});if(!ee.ok)throw new Error(`MCP: ${ee.status}`);const G=await ee.text(),de=((B=G.trim().match(/\{.*\}/s))==null?void 0:B[0])||G,ae=JSON.parse(de).choices[0].message.content;let Q;try{const ie=JSON.parse(ae);ie.tool_call&&(Q=ie.tool_call)}catch{}if(Q){T.updateTemporaryMessage(_,M,{content:`: ${Q.name}...`,isThinking:!0,isStreaming:!1,type:"system",toolCallInfo:{name:Q.name}});const ie=await _executeMcpTool(Q.name,Q.arguments);if(ie.error)throw new Error(`: ${ie.error}`);const Z=_buildMcpFinalPrompt(((D=P.aiPrompts)==null?void 0:D[x.id])||((z=x.aiConfig)==null?void 0:z.systemPrompt)||"",j,Q,ie.data);q={model:R.model,messages:Z,stream:!0,max_tokens:R.maxTokens}}else{W=!1,T.removeTemporaryMessage(_,M);const ie={id:M,type:"text",content:ae,timestamp:N,sender:x.id,groupId:_};await T.addMessage(_,ie),k.broadcastMessage(_,ie)}}catch(ee){log(`Group MCP failed: ${ee.message}. Falling back.`,"WARN")}}if(W&&!q){let X=((O=P.aiPrompts)==null?void 0:O[x.id])||((L=x.aiConfig)==null?void 0:L.systemPrompt)||"You are a helpful assistant.";X+=AppSettings.ai.groupPromptSuffix;const te=[{role:"system",content:X},...$,{role:"user",content:j}];q={model:R.model,messages:te,stream:!0,max_tokens:R.maxTokens}}if(W){let X="";T.updateTemporaryMessage(_,M,{content:"",isThinking:!1,isStreaming:!0,type:"text"}),await fetchApiStream(R.apiEndpoint,q,{"Content-Type":"application/json",Authorization:R.apiKey},te=>{var G,de;const ee=(de=(G=te.choices[0])==null?void 0:G.delta)==null?void 0:de.content;ee&&(X+=ee,T.updateTemporaryMessage(_,M,{content:X+""}))},async te=>{var le,ae;T.removeTemporaryMessage(_,M);const ee={id:M,type:"text",content:te,timestamp:N,sender:x.id,groupId:_,isStreaming:!1,isNewlyCompletedAIResponse:!0};await T.addMessage(_,ee);const G={...ee,isNewlyCompletedAIResponse:void 0};k.broadcastMessage(_,G);const de=useUserStore().contacts[x.id];(ae=(le=de==null?void 0:de.aiConfig)==null?void 0:le.tts)!=null&&ae.enabled&&te&&useTtsStore().requestTtsForMessage({...ee,senderContact:de})})}}catch(F){log(` AI : ${F}`,"ERROR"),T.removeTemporaryMessage(_,M);const $={id:M,type:"system",content:`${x.name} : ${F.message}`,sender:x.id};await T.addMessage(_,$)}},async extractMemoryElements(_,S){const w=_getEffectiveAiConfig(),E=`

:
${_.map(A=>`- ${A}`).join(`
`)}

:
---
${S}
---

`,T={model:w.model,messages:[{role:"user",content:E}],stream:!0,temperature:.1,max_tokens:1024};return new Promise(async(A,k)=>{try{await fetchApiStream(w.apiEndpoint,T,{"Content-Type":"application/json",authorization:w.apiKey},()=>{},x=>A(x))}catch(x){k(x)}})},async checkAiServiceHealth(){const _=_getEffectiveAiConfig();try{return(await fetch(_.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:_.apiKey},body:JSON.stringify({model:_.model,messages:[{role:"user",content:"Health check"}],max_tokens:1,stream:!1})})).ok}catch(S){return log(`AI service health check failed: ${S}`,"ERROR"),!1}},async getTtsModels(_){if(_ttsDynamicDataCache[_])return Object.keys(_ttsDynamicDataCache[_].models||{});const w=`${_getEffectiveAiConfig().ttsApiEndpoint.replace(/\/$/,"")}/models/${_}`;log(`Fetching TTS models from ${w}`,"DEBUG");const E=await fetch(w,{method:"GET",headers:{Authorization:"Bearer guest"}});if(!E.ok){const A=await E.text();throw new Error(`Failed to fetch TTS models: ${E.status} ${A}`)}const T=await E.json();if(!T||typeof T.models!="object")throw new Error("Invalid response format from TTS models API.");return _ttsDynamicDataCache[_]={models:T.models},Object.keys(T.models)},getTtsModelData(_){var S;return((S=_ttsDynamicDataCache[_])==null?void 0:S.models)||{}},async requestTtsForMessage(_,S){var V;const w=_getEffectiveAiConfig(),E=((V=_.aiConfig)==null?void 0:V.tts)||{},T=S.replace(/[*\[(].*?[*\])]/g,"").replace(/[!?"#$%&'()*+\-\/:;<=>@[\\\]^_`{|}~]/g,"").trim();if(!T)return null;const A={version:E.version||"v4",sample_steps:E.sample_steps??16,if_sr:E.if_sr??!1,model_name:E.model_name,speaker_name:E.speaker_name,prompt_text_lang:E.prompt_text_lang||"",emotion:E.emotion||"",text:T,text_lang:E.text_lang||"",top_k:E.top_k??10,top_p:E.top_p??1,temperature:E.temperature??1,text_split_method:E.text_split_method||"",batch_size:E.batch_size??10,batch_threshold:E.batch_threshold??.75,split_bucket:E.split_bucket??!0,speed_facter:E.speed_facter??1,fragment_interval:E.fragment_interval??.3,media_type:E.media_type||"wav",parallel_infer:E.parallel_infer??!0,repetition_penalty:E.repetition_penalty??1.35,seed:E.seed??-1},k=await _generateTtsCacheKey(A),x=await dbService.getItem("ttsCache",k);if(x!=null&&x.audioBlob)return log(`TTS Cache HIT for key ${k}`,"INFO"),x.audioBlob;log(`TTS Cache MISS for key ${k}. Fetching from API.`,"DEBUG");const R=`${w.ttsApiEndpoint.replace(/\/$/,"")}/infer_single`,P=await fetch(R,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer guest"},body:JSON.stringify(A)});if(!P.ok)throw new Error(`TTS API request failed with status ${P.status}`);const M=await P.json();if(!M.audio_url)throw new Error("TTS API response did not contain an audio_url.");const N=await fetch(M.audio_url);if(!N.ok)throw new Error(`Failed to fetch TTS audio file from ${M.audio_url}`);const I=await N.blob();return await dbService.setItem("ttsCache",{id:k,audioBlob:I}),I},async getCommentsForLocation(_){const S=useUserStore(),w=`${AppSettings.server.mapLocationsApiEndpoint}/${_}/comments?userId=${S.userId}`;try{const E=await fetch(w);if(!E.ok)throw new Error(`: ${E.status}`);return await E.json()}catch(E){return log(E.message,"ERROR"),eventBus.emit("showNotification",{message:"",type:"error"}),[]}},async addCommentForLocation(_,S){const w=useUserStore(),E=`${AppSettings.server.mapLocationsApiEndpoint}/${_}/comments`;try{const T=await fetch(E,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:S,userId:w.userId})});if(!T.ok)throw new Error(`: ${T.status}`);return await T.json()}catch(T){return log(T.message,"ERROR"),eventBus.emit("showNotification",{message:"",type:"error"}),null}},async toggleCommentLike(_){const S=useUserStore(),E=`${AppSettings.server.mapLocationsApiEndpoint.replace("/locations","")}/comments/${_}/like?userId=${S.userId}`;try{const T=await fetch(E,{method:"POST"});if(!T.ok)throw new Error(`: ${T.status}`);return await T.json()}catch(T){return log(T.message,"ERROR"),eventBus.emit("showNotification",{message:"",type:"error"}),null}},async getMapLocations(){const _=AppSettings.server.mapLocationsApiEndpoint;try{const S=await fetch(_);if(!S.ok)throw new Error(`: ${S.status} ${S.statusText}`);return await S.json()}catch(S){return log(S.message,"ERROR"),eventBus.emit("showNotification",{message:"",type:"error"}),[]}},async createMapLocation(_){const S=AppSettings.server.mapLocationsApiEndpoint,w=useUserStore(),E=new FormData;E.append("latitude",_.latitude),E.append("longitude",_.longitude),E.append("tag",_.tag),E.append("description",_.description),E.append("image",_.imageFile),E.append("createdBy",w.userId);try{const T=await fetch(S,{method:"POST",body:E});if(!T.ok){const A=await T.json();throw new Error(A.message||`: ${T.status}`)}return await T.json()}catch(T){return log(T.message,"ERROR"),eventBus.emit("showNotification",{message:T.message||"",type:"error"}),null}}},saveSidebarWidthDebounced=debounce$1(_=>{localStorage.setItem("sidebarWidth",_.toString())},500),useUiStore=defineStore("ui",()=>{const _=ref$1(parseInt(localStorage.getItem("sidebarWidth")||"320",10)),S=ref$1(!1),w=ref$1("info"),E=ref$1(null),T=ref$1(null),A=ref$1(!0),k=ref$1("all"),x=ref$1(""),R=ref$1(!1),P=ref$1(!1),M=ref$1({x:0,y:0}),N=ref$1([]),I=ref$1(null),V=ref$1(null),B=ref$1(null),D=ref$1(null),z=ref$1(null),O=ref$1({}),L=ref$1(!1),F=ref$1(!1);function $(Z){const pe=Math.max(200,Math.min(Z,600));_.value!==pe&&(_.value=pe,saveSidebarWidthDebounced(pe))}function H(Z,J="info"){typeof Z=="boolean"?S.value=Z:S.value=!(S.value&&w.value===J),S.value&&(w.value=J)}function j(Z){typeof Z=="boolean"?F.value=Z:F.value=!F.value}function q(Z,J={}){O.value=J,E.value=Z}function W(){F.value&&(F.value=!1),E.value=null,T.value=null,O.value={},V.value&&(V.value=null),B.value&&(B.value=null),D.value&&(D.value=null),z.value&&(z.value=null)}function X(Z,J){Z==="imageCropper"?z.value=J:Z==="mediaViewer"?B.value=J:Z==="locationViewer"?D.value=J:Z==="screenshotEditor"&&(O.value=J),T.value=Z}function te(){T.value=null,z.value&&(z.value=null),B.value&&(B.value=null),D.value&&(D.value=null)}function ee(Z){A.value=Z}function G({event:Z,items:J,target:ue}){M.value={x:Z.clientX,y:Z.clientY},N.value=J,I.value=ue,P.value=!0}function de(){P.value=!1,N.value=[],I.value=null}function le(Z){V.value=Z,q("confirmation")}function ae(Z){X("mediaViewer",Z)}function Q(Z){X("locationViewer",Z)}function ie(Z){X("imageCropper",Z)}return{sidebarWidth:_,isDetailsPanelOpen:S,detailsPanelContent:w,activeModal:E,activeOverlayModal:T,isAppLoading:A,chatListFilter:k,chatListSearchTerm:x,isChatViewActiveOnMobile:R,modalPrefillData:O,isContextMenuOpen:P,contextMenuPos:M,contextMenuItems:N,contextMenuTarget:I,confirmationOptions:V,mediaViewerContent:B,locationViewerContent:D,isPerformingDangerousAction:L,imageCropperContent:z,isEmojiPickerVisible:F,setSidebarWidth:$,toggleDetailsPanel:H,showModal:q,hideModal:W,showOverlayModal:X,hideOverlayModal:te,setAppLoading:ee,showContextMenu:G,hideContextMenu:de,showConfirmationModal:le,showMediaViewer:ae,showLocationViewer:Q,showImageCropperOverlay:ie,toggleEmojiPicker:j}}),useChatStore=defineStore("chat",()=>{const _=ref$1({}),S=ref$1(null),w=ref$1({}),E=computed(()=>{const ee=useUserStore(),G=useGroupStore();return[...Object.values(ee.contacts),...Object.values(G.groups)].map(le=>{const ae=_.value[le.id];let Q=le.initialMessage||(le.type==="group"?"":""),ie=le.lastTime||new Date(0).toISOString(),Z=le.unread||0;if((ae==null?void 0:ae.length)>0){const J=ae[ae.length-1];J&&(Q=I(J),ie=J.timestamp)}return{...le,lastMessage:Q,lastTime:ie,unread:Z}}).sort((le,ae)=>new Date(ae.lastTime)-new Date(le.lastTime))}),T=computed(()=>{const ee=useUiStore(),G=ee.chatListSearchTerm.toLowerCase().trim();return E.value.filter(de=>{const le=ee.chatListFilter==="all"?!0:de.type===ee.chatListFilter,ae=!G||de.name.toLowerCase().includes(G);return le&&ae})}),A=computed(()=>{const ee=_.value[S.value]||[],G=w.value[S.value]||[];return[...ee,...G].filter(le=>le&&le.id).sort((le,ae)=>new Date(le.timestamp)-new Date(ae.timestamp)).map((le,ae,Q)=>{if(ae===0)return{...le,isConsecutive:!1};const ie=Q[ae-1],Z=le&&ie&&le.sender===ie.sender&&le.type!=="system"&&!le.isRetracted&&ie.type!=="system"&&!ie.isRetracted;return{...le,isConsecutive:Z}})}),k=computed(()=>ee=>{const G=Object.keys(_.value).find(ae=>_.value[ae].some(Q=>Q.id===ee));if(!G)return!1;const de=_.value[G].find(ae=>ae.id===ee),le=useUserStore();return!de||de.sender!==le.userId||de.isRetracted||de.type==="system"?!1:Date.now()-new Date(de.timestamp).getTime()<AppSettings.ui.messageRetractionWindow}),x=computed(()=>(ee,G)=>{const de=_.value[ee]||[],le=useUserStore();return de.filter(ae=>{if(ae.isRetracted||ae.isThinking||ae.isStreaming||ae.toolCallInfo)return!1;switch(G){case"imagery":return["image","video","sticker"].includes(ae.type);case"text":return ae.type==="text";case"other":return["file","audio"].includes(ae.type);case"location":return ae.type==="location";default:return!1}}).map(ae=>{var Q;return{...ae,originalSenderName:((Q=le.contacts[ae.sender])==null?void 0:Q.name)||(ae.sender===le.userId?le.userName:` ${String(ae.sender).substring(0,4)}`)}}).sort((ae,Q)=>new Date(Q.timestamp)-new Date(ae.timestamp))}),R=computed(()=>ee=>{if(!_.value[ee])return[];const G=new Set;return _.value[ee].forEach(de=>{if(de.timestamp&&!de.isThinking&&!de.isRetracted&&!de.isStreaming&&!de.toolCallInfo){const le=new Date(de.timestamp),ae=le.getUTCFullYear(),Q=String(le.getUTCMonth()+1).padStart(2,"0"),ie=String(le.getUTCDate()).padStart(2,"0");G.add(`${ae}-${Q}-${ie}`)}}),Array.from(G).sort((de,le)=>new Date(le).getTime()-new Date(de).getTime())});async function P(){const ee=await dbService.getAllItems("chats"),G={},de=[];ee.forEach(le=>{if(le.messages&&Array.isArray(le.messages)){const ae=le.messages.filter(Q=>Q&&Q.id&&!Q.isThinking&&!Q.isStreaming&&!Q.toolCallInfo&&Q.status!=="receiving");if(ae.length<le.messages.length){log(`ChatStore Init: Cleaned ${le.messages.length-ae.length} temporary messages from chat ${le.id}.`,"INFO");const Q={...le,messages:ae};de.push(dbService.setItem("chats",Q))}G[le.id]=ae}else G[le.id]=[]}),_.value=G,de.length>0&&Promise.all(de).catch(le=>log(`Error cleaning up DB messages: ${le}`,"ERROR")),log("Chat Store initialized","INFO"),eventBus.on("webrtc:message",O),eventBus.on("message:delivered",({messageId:le,peerId:ae})=>{V(ae,le,{status:"delivered"})}),eventBus.on("message:file-delivered",({messageId:le,peerId:ae})=>{V(ae,le,{status:"delivered"})}),eventBus.on("message:retracted",({chatId:le,messageId:ae,retractedByName:Q})=>{q(ae,le,Q)}),eventBus.on("file:transfer-initiated",M),eventBus.on("file:ready",N)}async function M({peerId:ee,groupId:G,messageId:de,fileHash:le,fileName:ae,fileSize:Q,fileType:ie,duration:Z,messageType:J}){const ue=G||ee,pe=useUserStore();useTransferStore().startTransfer(le,ee,Q);let me=J;me||(me="file",ie!=null&&ie.startsWith("audio/")&&ae.endsWith("webm")?me="audio":ie!=null&&ie.startsWith("image/")?me="image":ie!=null&&ie.startsWith("video/")&&(me="video"));const ge={id:de,sender:ee,timestamp:new Date().toISOString(),status:"receiving",type:me,fileHash:le,fileName:ae,fileSize:Q,fileType:ie,...Z&&{duration:Z},...G&&{groupId:G}};await B(ue,ge),(S.value!==ue||!document.hasFocus())&&(G?useGroupStore().incrementUnread(ue):pe.incrementUnread(ue))}async function N({fileHash:ee,messageId:G}){for(const de in _.value)if(_.value[de].findIndex(ae=>ae.id===G&&ae.fileHash===ee&&ae.status==="receiving")>-1){await V(de,G,{status:"delivered"}),log(`File transfer message ${G} completed and status updated.`,"INFO");break}}function I(ee){var Q;if(!ee)return"";if(ee.type==="system"&&ee.subType==="call-log")return ee.content;if(ee.isRetracted)return"";if(ee.toolCallInfo)return`: ${ee.toolCallInfo.name}`;if(ee.isThinking)return"...";if(ee.isStreaming)return"...";if(ee.status==="receiving")return`[] ${ee.fileName||""}`;let G="";const de=useUserStore();ee.groupId&&ee.sender!==de.userId&&(G=`${((Q=de.contacts[ee.sender])==null?void 0:Q.name)||""}: `);let le="";switch(ee.type){case"text":le=ee.content;break;case"image":le="[]";break;case"sticker":le="[]";break;case"video":le="[]";break;case"audio":le="[]";break;case"file":le=`[] ${ee.fileName||""}`;break;case"location":le="[]";break;case"system":return ee.content;default:le=""}const ae=`${G}${le}`;return ae.length>30?ae.slice(0,27)+"...":ae}async function V(ee,G,de){if(!_.value[ee])return;const le=_.value[ee].findIndex(ae=>ae.id===G);if(le>-1){Object.assign(_.value[ee][le],de);const ae=JSON.parse(JSON.stringify(_.value[ee]));await dbService.setItem("chats",{id:ee,messages:ae})}}async function B(ee,G){_.value[ee]||(_.value[ee]=[]);const de=_.value[ee].findIndex(le=>le.id===G.id);if(de>-1?Object.assign(_.value[ee][de],G):_.value[ee].push(G),!G.isThinking&&!G.isStreaming&&!G.toolCallInfo&&G.status!=="receiving"){const le=JSON.parse(JSON.stringify(_.value[ee]));await dbService.setItem("chats",{id:ee,messages:le})}}async function D({content:ee=null,file:G=null,stickerId:de=null,location:le=null},ae=!1){var we,oe;if(!S.value)return;const Q=S.value,ie=useUserStore(),Z=useGroupStore(),J=ie.contacts[Q],ue=Q.startsWith("group_");let pe,Re=null;const me=generateId(16);if(de)pe={type:"sticker",stickerId:de};else if(G){const ce=G,ye=ce.blob,xe=ce.hash;let Ae="file";ce.type==="audio"?Ae="audio":(we=ce.fileType)!=null&&we.startsWith("image/")?Ae="image":(oe=ce.fileType)!=null&&oe.startsWith("video/")&&(Ae="video"),await dbService.setItem("fileCache",{id:xe,fileBlob:ye,metadata:{name:ce.name,type:ce.fileType||ye.type,size:ce.size||ye.size}}),pe={type:Ae,fileHash:xe,fileName:ce.name,fileType:ce.fileType||ye.type,size:ce.size||ye.size,...Ae==="audio"&&{duration:ce.duration}},Re={blob:ye,hash:xe,name:ce.name,fileType:ce.fileType||ye.type,size:ce.size||ye.size,messageId:me,messageType:Ae,...Ae==="audio"&&{duration:ce.duration}}}else if(ee)pe={type:"text",content:ee};else if(le)pe={type:"location",latitude:le.latitude,longitude:le.longitude,accuracy:le.accuracy};else return;const ge={id:me,sender:ie.userId,timestamp:new Date().toISOString(),status:"sending",...pe};if(await B(Q,ge),J!=null&&J.isAI){const ce=(_.value[Q]||[]).slice(0,-1);await apiService.sendAiMessage(Q,ee,ce.slice(-15)),V(Q,ge.id,{status:"sent"})}else if(ue){Z.broadcastMessage(Q,ge,{file:Re}),V(Q,ge.id,{status:"sent"});const ce=Z.groups[Q];ce&&ee&&ce.members.forEach(ye=>{var Ae;const xe=ie.contacts[ye];if(xe!=null&&xe.isAI&&ee.includes(`@${xe.name}`)){const se=((Ae=_.value[Q])==null?void 0:Ae.filter(K=>K.id!==ge.id).slice(-15))||[];apiService.sendGroupAiMessage(Q,ye,ee,ie.userId,se)}})}else try{webrtcService.sendMessage(Q,ge),Re&&await webrtcService.sendFile(Q,Re),await V(Q,ge.id,{status:"sent"}),log(`Message ${ge.id} sent to ${Q}`,"INFO")}catch(ce){await V(Q,ge.id,{status:"failed"}),log(`Message ${ge.id} failed to send to ${Q}: ${ce.message}`,"ERROR"),ae||eventBus.emit("showNotification",{message:"",type:"error"})}}async function z(ee){var de,le;if(!_.value[ee])return;const G=_.value[ee].filter(ae=>ae.status==="failed"&&ae.sender===useUserStore().userId);if(G.length!==0){log(`Found ${G.length} failed messages for ${ee}. Resending...`,"INFO"),eventBus.emit("showNotification",{message:` ${((de=useUserStore().contacts[ee])==null?void 0:de.name)||""}  ${G.length} ...`,type:"info"}),_.value[ee]=_.value[ee].filter(ae=>ae.status!=="failed"||ae.sender!==useUserStore().userId);for(const ae of G){const Q=ae.fileHash?(le=await dbService.getItem("fileCache",ae.fileHash))==null?void 0:le.fileBlob:null,ie={content:ae.content,file:ae.fileHash&&(ae.type==="file"||ae.type==="image"||ae.type==="video"||ae.type==="audio")?{hash:ae.fileHash,name:ae.fileName,fileType:ae.fileType,size:ae.size,blob:Q,...ae.type==="audio"&&{duration:ae.duration}}:null};if(ie.file&&!ie.file.blob){log(`Cannot resend file message ${ae.id} as blob is missing from cache.`,"ERROR"),await B(ee,{...ae,status:"failed"});continue}await D(ie,!0)}}}async function O({peerId:ee,message:G}){var Q,ie,Z;if(G.type==="retract-message-ack"){log(`Retraction confirmed for message ${G.messageId}`,"DEBUG");return}if(G.type==="group-join")return;const de=G.groupId||ee;G.type==="file"||G.type==="image"||G.type==="video"||G.type==="audio"?log(`Received file message meta for ${G.id}. Placeholder should exist.`,"DEBUG"):await B(de,{...G,status:"delivered"}),(S.value!==de||!document.hasFocus())&&(G.groupId?useGroupStore().incrementUnread(de):useUserStore().incrementUnread(de));const ae=useUserStore().contacts[G.sender];G.isNewlyCompletedAIResponse&&(ae!=null&&ae.isAI)&&((ie=(Q=ae.aiConfig)==null?void 0:Q.tts)!=null&&ie.enabled)&&G.type==="text"&&((Z=G.content)!=null&&Z.trim())&&useTtsStore().requestTtsForMessage({...G,senderContact:ae})}function L(ee){S.value!==ee&&(S.value&&w.value[S.value]&&(w.value[S.value]=[]),S.value=ee,useUiStore().toggleDetailsPanel(!1),ee!=null&&ee.startsWith("group_")?useGroupStore().clearUnread(ee):ee&&useUserStore().clearUnread(ee),log(`Opening chat: ${ee}`,"INFO"))}async function F(ee){_.value[ee]&&(_.value[ee]=[],await dbService.setItem("chats",{id:ee,messages:[]}),ee.startsWith("group_")?useGroupStore().updateGroupLastMessage(ee,""):useUserStore().updateContactLastMessage(ee,""))}async function $(){if(Object.keys(_.value).length===0){eventBus.emit("showNotification",{message:"",type:"info"});return}const ee=useUiStore();ee.isPerformingDangerousAction=!0;try{_.value={},await dbService.clearStore("chats"),Object.keys(useUserStore().contacts).forEach(G=>useUserStore().updateContactLastMessage(G,"")),Object.keys(useGroupStore().groups).forEach(G=>useGroupStore().updateGroupLastMessage(G,"")),eventBus.emit("showNotification",{message:"",type:"success"})}finally{ee.isPerformingDangerousAction=!1}}async function H(ee){var le;const G=Object.keys(_.value).find(ae=>_.value[ae].some(Q=>Q.id===ee));if(!G)return;const de=(le=_.value[G])==null?void 0:le.findIndex(ae=>ae.id===ee);de>-1&&(_.value[G].splice(de,1),await dbService.setItem("chats",{id:G,messages:_.value[G]}))}async function j(ee){const G=S.value;if(!k.value(ee)||!G){k.value(ee)===!1&&eventBus.emit("showNotification",{message:"",type:"warning"});return}const de=useUserStore(),le={type:"retract-message-request",messageId:ee,retractedByName:de.userName};try{G.startsWith("group_")?useGroupStore().broadcastMessage(G,le):webrtcService.sendMessage(G,le),await q(ee,G,"")}catch(ae){log(`Failed to send retract command for message ${ee}: ${ae.message}`,"ERROR"),eventBus.emit("showNotification",{message:"",type:"error"})}}async function q(ee,G,de){if(!_.value[G])return;const le=_.value[G].findIndex(ae=>ae.id===ee);if(le>-1){const Q={..._.value[G][le],type:"system",isRetracted:!0,content:`${de} `};_.value[G][le]=Q,await dbService.setItem("chats",{id:G,messages:JSON.parse(JSON.stringify(_.value[G]))})}}function W(ee,G){w.value[ee]||(w.value[ee]=[]),w.value[ee].push(G)}function X(ee,G,de){const le=w.value[ee];if(le){const ae=le.find(Q=>Q.id===G);ae&&Object.assign(ae,de)}}function te(ee,G){w.value[ee]&&(w.value[ee]=w.value[ee].filter(de=>de.id!==G))}return{chats:_,currentChatId:S,filteredChatList:T,currentChatMessages:A,isMessageRetractable:k,getMessagesWithResources:x,getDatesWithMessages:R,init:P,addMessage:B,sendMessage:D,openChat:L,deleteChatHistory:F,clearAllChats:$,formatPreview:I,deleteMessage:H,retractMessage:j,addTemporaryMessage:W,updateTemporaryMessage:X,removeTemporaryMessage:te,resendFailedMessages:z,_updateMessageToRetractedState:q}}),DEFAULT_TTS_CONFIG={tts_mode:"Dynamic",version:"v4",enabled:!1,model_name:"",prompt_text_lang:"",emotion:"",text_lang:"",text_split_method:"",seed:-1,media_type:"wav",fragment_interval:.3,speed_facter:1,parallel_infer:!0,batch_threshold:.75,split_bucket:!0,batch_size:10,top_k:10,top_p:1,temperature:1,repetition_penalty:1.35,sample_steps:16,if_sr:!1,speaker_name:void 0},useUserStore=defineStore("user",()=>{const _=ref$1(null),S=ref$1(""),w=ref$1({}),E=ref$1(!1),T=ref$1("..."),A=ref$1([]),k=ref$1({}),x=ref$1(""),R=computed(()=>j=>{var de,le,ae;const q=w.value[j],W=(q==null?void 0:q.connectionDetails)||{},{connectionType:X}=W,te=webrtcService.connections.value[j],ee=((de=te==null?void 0:te.peer)==null?void 0:de.connected)&&((ae=(le=te.peer)==null?void 0:le._channel)==null?void 0:ae.readyState)==="open",G=A.value.some(Q=>Q.userId===j);if(k.value[j])return{...W,isConnected:ee,isOnlineDisplay:!0,isGloballyOnline:!0,isAi:!1,statusText:"...",statusClass:"online"};if(q!=null&&q.isAI)return{...W,isConnected:!1,isOnlineDisplay:E.value,isGloballyOnline:E.value,isAi:!0,statusText:T.value,statusClass:E.value?"online":"offline"};if(q!=null&&q.isSpecial)return{...W,isConnected:!1,isOnlineDisplay:!0,isGloballyOnline:!0,isAi:!1,statusText:"",statusClass:"online"};if(ee){let Q="";return X==="p2p"||X==="p2p-lan"?Q+=" ()":X==="relay"?Q+=" ()":Q+=" ()",{...W,isConnected:!0,isOnlineDisplay:!0,isGloballyOnline:!0,isAi:!1,statusText:Q,statusClass:"online"}}return te!=null&&te.peer?{...W,isConnected:!1,isOnlineDisplay:!0,isGloballyOnline:!0,isAi:!1,statusText:"...",statusClass:"warning"}:G?{...W,isConnected:!1,isOnlineDisplay:!0,isGloballyOnline:!0,isAi:!1,statusText:" ()",statusClass:"warning"}:{...W,isConnected:!1,isOnlineDisplay:!1,isGloballyOnline:!1,isAi:!1,statusText:"",statusClass:"offline"}});async function P(){let j=await dbService.getItem("user","currentUser");j!=null&&j.userId?(_.value=j.userId,S.value=j.userName||` ${_.value.substring(0,4)}`):(_.value=generateId(8),S.value=` ${_.value.substring(0,4)}`,await dbService.setItem("user",{id:"currentUser",userId:_.value,userName:S.value}));try{const X=new URL(AppSettings.server.allOnlineUsersApiEndpoint),ee="/"+X.pathname.split("/").filter(Boolean).slice(0,-3).join("/");x.value=X.origin+(ee==="/"?"":ee),log(`URL: ${x.value}`,"INFO")}catch(X){log(` allOnlineUsersApiEndpoint URL: ${X}`,"ERROR")}const q=await dbService.getAllItems("contacts"),W={};q.forEach(X=>{X.isAI&&(X.aiConfig=X.aiConfig||{},X.aiConfig.tts={...DEFAULT_TTS_CONFIG,...X.aiConfig.tts||{}}),W[X.id]={type:"contact",...X,connectionDetails:{isConnected:!1,connectionType:null}}}),w.value=W,await M(),eventBus.on("themeChanged",M),eventBus.on("apiSettingsChanged",()=>apiService.checkAiServiceHealth().then(I)),eventBus.on("webrtc:connected",X=>{useChatStore().resendFailedMessages(X)}),eventBus.on("webrtc:typing",({peerId:X})=>{k.value[X]&&clearTimeout(k.value[X].timer);const te=setTimeout(()=>{delete k.value[X]},3e3);k.value[X]={timer:te}}),log(`StoreID: ${_.value}`,"INFO")}async function M(){var G,de;const j=useSettingsStore();if(useChatStore(),!j.currentTheme||!j.currentSpecialContacts)return;const q=j.currentSpecialContacts,W=new Set(q.map(le=>le.id)),X={},te=[],ee=[];for(const le in w.value){const ae=w.value[le];(!ae.isSpecial||ae.isImported)&&(X[le]=ae)}for(const le of q){const ae=w.value[le.id],Q={...le,isSpecial:!0,type:"contact"};if(le.chaptersFilePath)try{const ie=await fetch(le.chaptersFilePath);if(!ie.ok)throw new Error(`HTTP error! status: ${ie.status}`);Q.chapters=await ie.json(),log(` "${le.name}" `,"INFO")}catch(ie){log(` "${le.name}"  (${le.chaptersFilePath}): ${ie.message}`,"ERROR"),Q.chapters=[]}X[le.id]={...Q,lastMessage:(ae==null?void 0:ae.lastMessage)||le.initialMessage||"",lastTime:(ae==null?void 0:ae.lastTime)||new Date(0).toISOString(),unread:(ae==null?void 0:ae.unread)||0,selectedChapterId:(ae==null?void 0:ae.selectedChapterId)??null,connectionDetails:(ae==null?void 0:ae.connectionDetails)||{isConnected:!1,connectionType:null},aiConfig:{...le.aiConfig||{},...(ae==null?void 0:ae.aiConfig)||{},tts:{...DEFAULT_TTS_CONFIG,...((G=le.aiConfig)==null?void 0:G.tts)||{},...((de=ae==null?void 0:ae.aiConfig)==null?void 0:de.tts)||{}}}},te.push(dbService.setItem("contacts",X[le.id]))}for(const le in w.value){const ae=w.value[le];ae.isSpecial&&!ae.isImported&&!W.has(le)&&ee.push(le)}if(ee.length>0)for(const le of ee)te.push(dbService.removeItem("contacts",le));w.value=X,await Promise.all(te)}async function N(j){var ee;if(!j||!j.id||j.id===_.value)return eventBus.emit("showNotification",{message:"ID",type:"warning"}),!1;if(useSettingsStore().currentSpecialContacts.some(G=>G.id===j.id)&&!j.isImported)return eventBus.emit("showNotification",{message:"",type:"warning"}),!1;const W=w.value[j.id],X=((ee=j.name)==null?void 0:ee.trim())||(W==null?void 0:W.name)||` ${j.id.substring(0,4)}`,te=()=>{webrtcService.proactivelyConnectToOnlineContacts()};if(W)W.name!==X?(W.name=X,await dbService.setItem("contacts",W),te()):eventBus.emit("showNotification",{message:`${X} `,type:"info"});else{const G={id:j.id,name:X,lastMessage:"",lastTime:new Date().toISOString(),unread:0,type:"contact",avatarText:X.charAt(0).toUpperCase(),connectionDetails:{isConnected:!1,connectionType:null}};w.value[j.id]=G,await dbService.setItem("contacts",G),te()}return!0}function I(j){E.value=j,T.value=j?"AI ":"AI "}async function V(){try{const j=await fetch(AppSettings.server.allOnlineUsersApiEndpoint);if(!j.ok)throw new Error(` ${j.status}`);const q=await j.json(),W=(Array.isArray(q)?q:[]).filter(X=>X.userId!==_.value).map(X=>({...X,isLocal:X.originServer===x.value}));return JSON.stringify(A.value.map(X=>X.userId).sort())!==JSON.stringify(W.map(X=>X.userId).sort())&&(A.value=W,log(`: ${A.value.length} users online.`,"INFO"),webrtcService.proactivelyConnectToOnlineContacts()),!0}catch(j){return log(`: ${j}`,"ERROR"),A.value=[],!1}}async function B(j){if(!w.value[j])return!1;if(useSettingsStore().currentSpecialContacts.some(X=>X.id===j)&&!w.value[j].isImported)return eventBus.emit("showNotification",{message:"",type:"warning"}),!1;await useGroupStore().removeMemberFromAllGroups(j),webrtcService.closeConnection(j),delete w.value[j],await dbService.removeItem("contacts",j);const W=useChatStore();return await W.deleteChatHistory(j),W.currentChatId===j&&W.openChat(null),eventBus.emit("showNotification",{message:"",type:"success"}),!0}async function D(j){w.value[j]&&w.value[j].unread>0&&(w.value[j].unread=0,await dbService.setItem("contacts",w.value[j]))}async function z(j){w.value[j]&&(w.value[j].unread=(w.value[j].unread||0)+1,await dbService.setItem("contacts",w.value[j]))}async function O(j,q){w.value[j]&&(w.value[j].lastMessage=q,w.value[j].lastTime=new Date().toISOString(),await dbService.setItem("contacts",w.value[j]))}async function L(){const j=useUiStore();j.isPerformingDangerousAction=!0;try{const q=useSettingsStore(),W=new Set(q.currentSpecialContacts.map(te=>te.id)),X=Object.keys(w.value).filter(te=>!W.has(te));if(X.length===0){eventBus.emit("showNotification",{message:"",type:"info"});return}for(const te of X)await B(te);eventBus.emit("showNotification",{message:"",type:"success"})}finally{j.isPerformingDangerousAction=!1}}async function F(j,q){const W=w.value[j];W!=null&&W.isAI&&(W.selectedChapterId=q,await dbService.setItem("contacts",W))}async function $(j,q){const W=w.value[j];W!=null&&W.isAI&&(W.aiConfig||(W.aiConfig={}),W.aiConfig.tts={...DEFAULT_TTS_CONFIG,...W.aiConfig.tts||{},...q},await dbService.setItem("contacts",W),eventBus.emit("showNotification",{message:"TTS ",type:"success"}))}function H(j,{isConnected:q,connectionType:W}){const X=w.value[j];X&&(X.connectionDetails||(X.connectionDetails={}),q!==void 0&&(X.connectionDetails.isConnected=q),W!==void 0&&(X.connectionDetails.connectionType=W),log(`Connection details updated for ${j}: isConnected=${X.connectionDetails.isConnected}, type=${X.connectionDetails.connectionType}`,"DEBUG"))}return{userId:_,userName:S,contacts:w,isAiServiceHealthy:E,aiServiceStatusMessage:T,allOnlineUsers:A,getContactCombinedStatus:R,typingContacts:k,init:P,fetchAllOnlineUsers:V,addContact:N,removeContact:B,updateAiServiceStatus:I,updateContactConnectionDetails:H,clearUnread:D,incrementUnread:z,updateContactLastMessage:O,removeAllContacts:L,setSelectedChapterForAI:F,saveTtsSettings:$,ensureSpecialContacts:M}}),useCallStore=defineStore("call",()=>{const _=ref$1(null),S=ref$1(null),w=ref$1(null),E=ref$1(!1),T=ref$1(!1),A=ref$1(!1),k=ref$1(!1),x=ref$1(!0),R=ref$1(!1),P=ref$1(!1),M=ref$1(null),N=ref$1(!1),I=ref$1(0),V=ref$1({}),B=ref$1("auto"),D=ref$1("auto"),z=ref$1(!1),O=ref$1(null),L=ref$1(null),F=ref$1(null),$=ref$1(null),H=ref$1(!1),j=ref$1(!1),q=ref$1(!1),W=ref$1(1),X=ref$1(!1),te=ref$1("pen"),ee=ref$1("#FF0000"),G=ref$1([]);let de=null,le=null,ae=!1,Q=null,ie=null,Z=null,J=null,ue=null,pe=null;const Re=computed(()=>{var Le;const Me=useUserStore(),Be=w.value||((Le=M.value)==null?void 0:Le.peerId);return Be?Me.contacts[Be]:null}),me=computed(()=>{const Me=Math.floor(I.value/60).toString().padStart(2,"0"),Be=(I.value%60).toString().padStart(2,"0");return`${Me}:${Be}`}),ge=computed(()=>V.value[w.value]||{audio:"N/A",video:"N/A"});function we(){if(!le)try{le=new Audio(AppSettings.media.music),le.loop=!0}catch(Me){log(`: ${Me.message}`,"ERROR")}}async function oe(Me=!1){if(we(),le&&!ae)try{await le.play(),ae=!0,Q&&(document.body.removeEventListener("click",Q),Q=null)}catch(Be){log(`: ${Be.name} - ${Be.message}`,"WARN"),ae=!1,Be.name==="NotAllowedError"&&!Me&&(eventBus.emit("showNotification",{message:"",type:"warning"}),Q=()=>oe(!0),document.body.addEventListener("click",Q,{once:!0}))}}function ce(){le&&ae&&(le.pause(),le.currentTime=0,ae=!1),Q&&(document.body.removeEventListener("click",Q),Q=null)}function ye(){de&&clearInterval(de),Z=Date.now(),I.value=0,de=setInterval(()=>{I.value=Math.round((Date.now()-Z)/1e3)},1e3)}function xe(){de&&clearInterval(de),de=null}function Ae(){if(!_.value||pe)return;const Me=_.value.getAudioTracks();if(Me.length!==0)try{J=new(window.AudioContext||window.webkitAudioContext);const Be=J.createMediaStreamSource(new MediaStream([Me[0]]));ue=J.createAnalyser(),ue.fftSize=512,ue.smoothingTimeConstant=.5,Be.connect(ue);const Le=ue.frequencyBinCount,He=new Uint8Array(Le);pe=setInterval(()=>{ue.getByteFrequencyData(He);const je=He.reduce((Ge,re)=>Ge+re,0)/Le;z.value=je>5},100),log("Voice Activity Detector started.","INFO")}catch(Be){log(`Failed to start VAD: ${Be.message}`,"ERROR")}}function se(){pe&&clearInterval(pe),pe=null,J&&J.state!=="closed"&&J.close(),J=null,ue=null,z.value=!1,log("Voice Activity Detector stopped.","INFO")}function K(){if(!_.value)return;const Me=_.value.getAudioTracks();if(Me.length===0)return;const Be=!k.value;Me.forEach(Le=>{Le.enabled!==Be&&(Le.enabled=Be)})}function ne(Me=!1){se(),_.value&&_.value.getTracks().forEach(Be=>Be.stop()),_.value=null,O.value&&(O.value.getTracks().forEach(Be=>Be.stop()),O.value=null),S.value=null,Me||(w.value=null),E.value=!1,A.value=!1,k.value=!1,x.value=!0,R.value=!1,P.value=!1,M.value=null,N.value=!1,ce(),xe(),ie&&clearTimeout(ie),ie=null,Z=null,B.value="auto",D.value="auto",F.value=null,$.value=null,H.value=!1,j.value=!1,q.value=!1,W.value=1,X.value=!1,G.value=[],L.value&&(L.value.srcObject=null)}async function fe(Me={video:!0,audio:!0}){const Be=useSettingsStore(),Le=Ue=>{log(`Media track ended: ${Ue.target.kind}`,"WARN"),Ue.target.kind==="video"&&!R.value&&(x.value=!1,eventBus.emit("showNotification",{message:"",type:"warning"}))};let He=null;try{const Ue=await navigator.mediaDevices.getUserMedia({video:Me.video,audio:Me.audio?AppSettings.media.audioConstraints:!1});Ue.getTracks().forEach(je=>je.onended=Le),He={stream:Ue,videoEnabled:Me.video,audioEnabled:Me.audio}}catch(Ue){if(Ue.name!=="NotFoundError"&&Ue.name!=="DevicesNotFoundError")return log(`Failed to get media stream: ${Ue.message}`,"ERROR"),eventBus.emit("showNotification",{message:`: ${Ue.message}`,type:"error"}),null;log(`Initial media request failed (${Ue.name}). Trying fallbacks without prompts.`,"WARN");try{const je=await navigator.mediaDevices.getUserMedia({video:!1,audio:AppSettings.media.audioConstraints});je.getTracks().forEach(Ge=>Ge.onended=Le),He={stream:je,videoEnabled:!1,audioEnabled:!0},log("Camera failed, proceeding with audio-only stream for video call.","INFO")}catch(je){log(`Audio-only fallback also failed: ${je.message}`,"WARN")}if(!He)try{const je=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});je.getTracks().forEach(Ge=>Ge.onended=Le),He={stream:je,videoEnabled:!0,audioEnabled:!1},log("Microphone failed, proceeding with video-only stream for video call.","INFO")}catch(je){log(`Video-only fallback also failed: ${je.message}`,"WARN")}if(!He)return eventBus.emit("showNotification",{message:"",type:"error",duration:8e3}),null}return He&&He.stream&&Be.isAiNoiseSuppressionEnabled&&(log("AI Noise Suppression is enabled. Processing stream...","INFO"),eventBus.emit("showNotification",{message:"AI ",type:"info"})),He}async function Ee(Me,Be){var he;const Le=useUserStore(),Ue={video:"",audio:"",screenshare:""}[Be.callType]||"",je=((he=Le.contacts[Me])==null?void 0:he.name)||"",Ge=Le.userName;let re="";const U=Be.callerId===Le.userId;switch(Be.type){case"start":re=`${U?Ge:je} ${Ue}`;break;case"end":const _e=Math.floor(Be.duration/60),ke=Be.duration%60,Ie=_e>0?`${_e}${ke}`:`${ke}`;re=`${Ue} ${Ie}`;break;case"missed":re=U?`${Ge} ${Ue}`:` ${je} ${Ue}`;break;case"declined":re=Be.by==="self"?`${Ue}`:`${je} ${Ue}`;break;case"cancelled":re=U?`${Ge} ${Ue}`:`${je} ${Ue}`;break;default:return}const Y={id:`log_${generateId(12)}`,type:"system",subType:"call-log",content:re,timestamp:new Date().toISOString(),callData:Be};await useChatStore().addMessage(Me,Y)}function be(Me,Be={isScreenShare:!1,audioOnly:!1}){var je,Ge,re;if(E.value||A.value){eventBus.emit("showNotification",{message:"",type:"warning"});return}const Le=webrtcService.connections.value[Me];if(!Be.isScreenShare&&(!((je=Le==null?void 0:Le.peer)!=null&&je.connected)||((re=(Ge=Le.peer)==null?void 0:Ge._channel)==null?void 0:re.readyState)!=="open")){eventBus.emit("showNotification",{message:"...",type:"warning"}),webrtcService.restartIce(Me);return}const He=useUserStore();w.value=Me,T.value=!0,A.value=!0,R.value=Be.isScreenShare,P.value=Be.isScreenShare,x.value=!Be.isScreenShare&&!Be.audioOnly;const Ue=Be.isScreenShare?"screenshare-request":"call-request";webrtcService.sendMessage(Me,{type:Ue,from:He.userId,audioOnly:Be.audioOnly}),useUiStore().showModal("calling"),oe(),ie=setTimeout(()=>{if(A.value){eventBus.emit("showNotification",{message:"",type:"info"}),webrtcService.sendMessage(Me,{type:"call-cancel",from:He.userId});const U=R.value?"screenshare":x.value?"video":"audio";Ee(Me,{type:"missed",callType:U,callerId:He.userId}),ne(),useUiStore().hideModal()}},AppSettings.timeouts.callRequest)}function Te(){const Me=useChatStore().currentChatId;Me&&be(Me,{isScreenShare:!1,audioOnly:!1})}function Ne(){const Me=useChatStore().currentChatId;Me&&be(Me,{isScreenShare:!1,audioOnly:!0})}function ve(){if(useChatStore().currentChatId){if(E.value||A.value){eventBus.emit("showNotification",{message:"",type:"warning"});return}useUiStore().showModal("screenshotGuide")}}function Oe(Me){const Be=useChatStore().currentChatId;!Be||!Me||(O.value=Me,be(Be,{isScreenShare:!0,audioOnly:!1}))}async function Pe(){if(!M.value)return;const Me=useUiStore(),{peerId:Be,audioOnly:Le,isScreenShare:He}=M.value;ce(),Me.hideModal();const je=await fe({video:He?!1:!Le,audio:!0});if(!je||!je.stream||!je.stream.active){log("","ERROR"),Se(!0);return}const{stream:Ge,videoEnabled:re,audioEnabled:U}=je;w.value=Be,E.value=!0,N.value=!0,A.value=!1,R.value=He,x.value=re,k.value=!U,_.value=Ge,F.value=Ge.getAudioTracks()[0]||null,He&&($.value=null),webrtcService.sendMessage(Be,{type:"call-accepted",from:useUserStore().userId}),webrtcService.addStreamToConnection(Be,Ge),M.value=null,ye(),Ae(),K(),Ee(Be,{type:"start",callerId:Be,callType:He?"screenshare":Le?"audio":"video"})}function Se(Me=!1){let Be,Le="video";const He=useUserStore();T.value&&A.value?(Be=w.value,Le=R.value?"screenshare":x.value?"video":"audio",Me||(webrtcService.sendMessage(Be,{type:"call-cancel",from:He.userId}),Ee(Be,{type:"cancelled",by:"self",callType:Le,callerId:He.userId}))):M.value&&(Be=M.value.peerId,Le=M.value.isScreenShare?"screenshare":M.value.audioOnly?"audio":"video",Me||(webrtcService.sendMessage(Be,{type:"call-rejected",from:He.userId}),Ee(Be,{type:"declined",by:"self",callType:Le,callerId:Be}))),ne(),useUiStore().hideModal()}function Ce(Me=!0){const Be=w.value;if(!(!E.value&&!A.value||!Be)){if(log(`Hanging up media for peer ${Be}. Notify: ${Me}`,"INFO"),xe(),E.value){const Le=R.value?"screenshare":x.value?"video":"audio";Ee(Be,{type:"end",duration:I.value,callType:Le})}Me&&webrtcService.sendMessage(Be,{type:"call-end",from:useUserStore().userId}),_.value&&webrtcService.removeStreamFromConnection(Be,_.value),ne(!0)}}function Fe(){_.value&&(k.value=!k.value,K())}function $e(){F.value&&(H.value=!H.value,F.value.enabled=!H.value,log(`Microphone toggled. Muted: ${H.value}`,"INFO"))}function De(){$.value&&(j.value=!j.value,$.value.enabled=!j.value,log(`System audio toggled. Muted: ${j.value}`,"INFO"))}function ze(){q.value=!q.value,log(`Remote stream audio toggled. Muted: ${q.value}`,"INFO")}function Ve(Me){const Be=Math.max(0,Math.min(1,parseFloat(Me)));isNaN(Be)||(W.value=Be,Be>0&&q.value&&(q.value=!1))}function We(){!_.value||R.value||_.value.getVideoTracks().forEach(Me=>{Me.enabled=!Me.enabled,x.value=Me.enabled})}function Ze(){N.value=!1}function et(){N.value=!0}function rt(Me){if(!w.value||!AppSettings.media.qualityPresets[Me])return;B.value=Me;const Be=AppSettings.media.qualityPresets[Me];webrtcService.adjustPeerBitrate(w.value,{maxBitrate:Be.maxBitrate,resolution:Be.resolution}),log(`Manual quality preset applied: ${Me}`,"INFO")}function at(Me){if(!w.value||!R.value||!P.value||!AppSettings.media.screenSharePresets[Me])return;D.value=Me;const Be=AppSettings.media.screenSharePresets[Me];webrtcService.adjustScreenShareParameters(w.value,{resolution:Be.resolution,frameRate:Be.frameRate}),log(`Screen share quality preset applied: ${Me}`,"INFO")}function st(Me){L.value=Me,Me&&(Me.muted=q.value,Me.volume=W.value)}watch([q,W],([Me,Be])=>{L.value&&(L.value.muted=Me,L.value.volume=Be)});function Qe(Me){typeof Me!="boolean"?X.value=!X.value:X.value=Me,E.value&&w.value&&webrtcService.sendMessage(w.value,{type:"whiteboard_action",payload:{type:"state_change",isActive:X.value}}),X.value||(G.value=[])}function it(Me){te.value=Me}function lt(Me){ee.value=Me}function ot(Me){X.value&&(G.value.push(Me),webrtcService.sendMessage(w.value,{type:"whiteboard_action",payload:Me}))}function ct(){if(!X.value)return;let Me=-1;for(let Be=G.value.length-1;Be>=0;Be--)if(G.value[Be].type==="draw_start"||G.value[Be].type==="draw_rect"){Me=Be;break}Me>-1&&(G.value.splice(Me),webrtcService.sendMessage(w.value,{type:"whiteboard_action",payload:{type:"undo"}}))}function ut(){X.value&&(G.value=[],webrtcService.sendMessage(w.value,{type:"whiteboard_action",payload:{type:"clear"}}))}return eventBus.on("webrtc:whiteboard-action",({peerId:Me,action:Be})=>{if(E.value&&w.value===Me)switch(Be.type){case"state_change":X.value=Be.isActive,Be.isActive||(G.value=[]);break;case"undo":let Le=-1;for(let He=G.value.length-1;He>=0;He--)if(G.value[He].type==="draw_start"||G.value[He].type==="draw_rect"){Le=He;break}Le>-1&&G.value.splice(Le);break;case"clear":G.value=[];break;default:G.value.push(Be);break}}),eventBus.on("webrtc:stats-updated",({peerId:Me,stats:Be})=>{V.value[Me]||(V.value[Me]={});let Le="unknown",He="unknown";if(Be.packetLoss<.02&&Be.rtt<150&&Be.jitter<30?Le="good":Be.packetLoss<.05&&Be.rtt<400&&Be.jitter<60?Le="medium":Le="poor",!R.value&&x.value&&(Be.packetLoss<.03&&Be.rtt<250?He="good":Be.packetLoss<.07&&Be.rtt<500?He="medium":He="poor"),V.value[Me]={audio:Le,video:He},B.value==="auto"&&Me===w.value&&!R.value&&x.value){const{poorNetworkThreshold:Ue,goodNetworkThreshold:je,downgradeBitrate:Ge}=AppSettings.media.abr;Be.packetLoss>Ue.packetLoss||Be.rtt>Ue.rtt?(webrtcService.adjustPeerBitrate(Me,{maxBitrate:Ge}),log(`ABR: Poor network detected. Downgrading bitrate for ${Me}.`,"INFO")):Be.packetLoss<je.packetLoss&&Be.rtt<je.rtt&&(webrtcService.adjustPeerBitrate(Me,{maxBitrate:null}),log(`ABR: Network condition improved. Restoring auto bitrate for ${Me}.`,"INFO"))}}),eventBus.on("webrtc:message",({peerId:Me,message:Be})=>{var Ue,je;const Le=useUserStore(),He=Be.isScreenShare?"screenshare":Be.audioOnly?"audio":"video";switch(Be.type){case"call-request":case"screenshare-request":if(E.value||A.value){webrtcService.sendMessage(Me,{type:"call-rejected",reason:"busy",from:Le.userId});return}M.value={peerId:Me,name:((Ue=Le.contacts[Me])==null?void 0:Ue.name)||` ${Me.substring(0,4)}`,isScreenShare:Be.type==="screenshare-request",audioOnly:Be.audioOnly||!1},A.value=!0,oe(),useUiStore().showModal("incomingCall");break;case"call-accepted":T.value&&A.value&&w.value===Me&&(clearTimeout(ie),ce(),A.value=!1,E.value=!0,N.value=!0,useUiStore().hideModal(),R.value&&O.value?(_.value=O.value,O.value=null,F.value=_.value.getAudioTracks().find(Ge=>Ge.label.toLowerCase().includes("microphone"))||_.value.getAudioTracks()[0]||null,$.value=_.value.getAudioTracks().find(Ge=>Ge.label.toLowerCase().includes("system"))||null,webrtcService.addStreamToConnection(Me,_.value),ye(),Ae(),Ee(Me,{type:"start",callerId:Le.userId,callType:He})):fe({video:x.value,audio:!0}).then(Ge=>{Ge&&Ge.stream&&Ge.stream.active?(_.value=Ge.stream,F.value=_.value.getAudioTracks()[0]||null,webrtcService.addStreamToConnection(Me,Ge.stream),ye(),Ae(),K(),Ee(Me,{type:"start",callerId:Le.userId,callType:He})):Ce()}));break;case"call-end":E.value&&w.value===Me&&(log(`Received call-end from ${Me}. Ending media session locally.`,"INFO"),Ce(!1),eventBus.emit("showNotification",{message:"",type:"info"}));break;case"call-rejected":T.value&&A.value&&w.value===Me&&(Ee(Me,{type:"declined",by:"peer",callType:He,callerId:Le.userId}),ne(),useUiStore().hideModal(),eventBus.emit("showNotification",{message:"",type:"info"}));break;case"call-cancel":!T.value&&A.value&&((je=M.value)==null?void 0:je.peerId)===Me&&(Ee(Me,{type:"cancelled",by:"peer",callType:He,callerId:Me}),ne(),useUiStore().hideModal(),eventBus.emit("showNotification",{message:"",type:"info"}));break}}),eventBus.on("webrtc:stream",({peerId:Me,stream:Be})=>{w.value===Me&&(Be instanceof MediaStream?(S.value=Be,L.value&&(L.value.srcObject=Be)):log(`Received invalid stream from peer ${Me}.`,"WARN"))}),eventBus.on("webrtc:disconnected",Me=>{w.value===Me&&(log(`Call with ${Me} ended due to connection loss.`,"WARN"),eventBus.emit("showNotification",{message:"",type:"warning"}),ne())}),{localStream:_,remoteStream:S,currentPeerId:w,isCallActive:E,isCallPending:A,isAudioMuted:k,isVideoEnabled:x,isScreenSharing:R,incomingCallInfo:M,isFullScreenCallViewVisible:N,callDurationFormatted:me,peerContact:Re,currentCallQuality:ge,currentQualityPreset:B,currentScreenShareQualityPreset:D,amISharingScreen:P,isSpeaking:z,microphoneAudioTrack:F,systemAudioTrack:$,isMicrophoneMuted:H,isSystemAudioMuted:j,isRemoteStreamMuted:q,remoteStreamVolume:W,toggleMicrophone:$e,toggleSystemAudio:De,toggleRemoteMute:ze,setRemoteVolume:Ve,isWhiteboardActive:X,currentDrawingTool:te,currentDrawingColor:ee,drawingHistory:G,toggleWhiteboard:Qe,setDrawingTool:it,setDrawingColor:lt,addDrawingAction:ot,undoLastAction:ct,clearWhiteboard:ut,startVideoCall:Te,startAudioCall:Ne,startScreenShare:ve,acceptCall:Pe,rejectCall:Se,hangUp:Ce,toggleAudio:Fe,toggleVideo:We,minimizeCallView:Ze,maximizeCallView:et,setCallQualityPreset:rt,setScreenShareQualityPreset:at,initiateScreenShareWithStream:Oe,setGlobalAudioElement:st}}),_export_sfc=(_,S)=>{const w=_.__vccOpts||_;for(const[E,T]of S)w[E]=T;return w},_hoisted_1$p={class:"skeleton-root-wrapper"},_hoisted_2$k={class:"sidebar-container-skeleton"},_hoisted_3$i={class:"list-skeleton"},_sfc_main$q={__name:"AppSkeletonLoader",setup(_){const w={gridTemplateColumns:`${ref$1(localStorage.getItem("sidebarWidth")||"320").value}px 1fr`};return(E,T)=>(openBlock(),createElementBlock("div",_hoisted_1$p,[T[3]||(T[3]=createBaseVNode("div",{class:"mobile-header-skeleton"},[createBaseVNode("div",{class:"shimmer-bg circle small"}),createBaseVNode("div",{class:"shimmer-bg line long"}),createBaseVNode("div",{class:"shimmer-bg circle small"})],-1)),createBaseVNode("div",{class:"app-container-skeleton",style:w},[createBaseVNode("aside",_hoisted_2$k,[T[1]||(T[1]=createStaticVNode('<div class="header-skeleton" data-v-0212469d><div class="shimmer-bg circle" data-v-0212469d></div><div class="shimmer-bg line long" data-v-0212469d></div></div><div class="tabs-skeleton" data-v-0212469d><div class="shimmer-bg line short" data-v-0212469d></div><div class="shimmer-bg line short" data-v-0212469d></div><div class="shimmer-bg line short" data-v-0212469d></div></div>',2)),createBaseVNode("div",_hoisted_3$i,[(openBlock(),createElementBlock(Fragment,null,renderList(7,A=>createBaseVNode("div",{key:A,class:"list-item-skeleton"},[...T[0]||(T[0]=[createBaseVNode("div",{class:"shimmer-bg circle"},null,-1),createBaseVNode("div",{class:"text-group"},[createBaseVNode("div",{class:"shimmer-bg line"}),createBaseVNode("div",{class:"shimmer-bg line short"})],-1)])])),64))])]),T[2]||(T[2]=createStaticVNode('<main class="main-view-container-skeleton" data-v-0212469d><div class="header-skeleton" data-v-0212469d><div class="shimmer-bg circle" data-v-0212469d></div><div class="text-group" data-v-0212469d><div class="shimmer-bg line" data-v-0212469d></div><div class="shimmer-bg line short" data-v-0212469d></div></div><div class="actions-skeleton" data-v-0212469d><div class="shimmer-bg circle small" data-v-0212469d></div><div class="shimmer-bg circle small" data-v-0212469d></div><div class="shimmer-bg circle small" data-v-0212469d></div></div></div><div class="message-area-skeleton" data-v-0212469d><div class="bubble-skeleton sent" data-v-0212469d></div><div class="bubble-skeleton sent short" data-v-0212469d></div></div><div class="input-area-skeleton" data-v-0212469d><div class="shimmer-bg line full" data-v-0212469d></div></div></main>',1))])]))}},AppSkeletonLoader=_export_sfc(_sfc_main$q,[["__scopeId","data-v-0212469d"]]),_hoisted_1$o=["src","alt"],_hoisted_2$j={key:1,class:"avatar-text"},_hoisted_3$h={key:2,class:"online-dot"},_sfc_main$p={__name:"Avatar",props:{entity:{type:Object,required:!0},size:{type:String,default:"medium"},isOnline:{type:Boolean,default:!1},isSpeaking:{type:Boolean,default:!1}},setup(_){const S=_,w=useSettingsStore(),E=computed(()=>`avatar-${S.size}`),T=computed(()=>{var k;return S.entity.avatarText||((k=S.entity.name)==null?void 0:k.charAt(0).toUpperCase())||"?"}),A=computed(()=>S.entity.avatarUrl?w.isWebPSupported||!S.entity.avatarUrl.endsWith(".webp")?S.entity.avatarUrl:S.entity.avatarUrl.replace(/\.webp$/,".png"):null);return(k,x)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["avatar",[E.value,{"is-special":_.entity.isSpecial,"speaking-indicator":_.isSpeaking},_.entity.id]])},[A.value?(openBlock(),createElementBlock("img",{key:0,src:A.value,alt:T.value,class:"avatar-image"},null,8,_hoisted_1$o)):(openBlock(),createElementBlock("span",_hoisted_2$j,toDisplayString(T.value),1)),_.isOnline?(openBlock(),createElementBlock("span",_hoisted_3$h)):createCommentVNode("",!0)],2))}},Avatar=_export_sfc(_sfc_main$p,[["__scopeId","data-v-db3fa410"]]),_hoisted_1$n={class:"chat-info"},_hoisted_2$i={class:"info-top"},_hoisted_3$g={class:"name"},_hoisted_4$a={class:"timestamp"},_hoisted_5$9={class:"info-bottom"},_hoisted_6$7={class:"preview"},_hoisted_7$6={key:0,class:"unread-badge"},_sfc_main$o={__name:"ChatListItem",props:{item:{type:Object,required:!0},isActive:{type:Boolean,default:!1}},setup(_){const S=_,w=useUserStore(),E=ref$1(!1),T=computed(()=>w.getContactCombinedStatus(S.item.id)),A=computed(()=>S.item.type==="group"?null:T.value.isOnlineDisplay),k=computed(()=>S.item.lastTime?formatDate(new Date(S.item.lastTime)):""),x=computed(()=>S.item.unread>99?"99+":S.item.unread);return watch(()=>S.item.unread,(R,P)=>{R>P&&!S.isActive&&(E.value=!0,setTimeout(()=>{E.value=!1},600))}),(R,P)=>{const M=resolveDirective("motion");return openBlock(),createElementBlock("div",{class:normalizeClass(["chat-list-item",{active:_.isActive,"special-contact":_.item.isSpecial,[_.item.id]:_.item.isSpecial,"highlight-new-message":E.value}])},[withDirectives(createVNode(Avatar,{entity:_.item,"is-online":A.value,hovered:{scale:1.1},tapped:{scale:.9}},null,8,["entity","is-online"]),[[M]]),createBaseVNode("div",_hoisted_1$n,[createBaseVNode("div",_hoisted_2$i,[createBaseVNode("span",_hoisted_3$g,toDisplayString(_.item.name),1),createBaseVNode("span",_hoisted_4$a,toDisplayString(k.value),1)]),createBaseVNode("div",_hoisted_5$9,[createBaseVNode("p",_hoisted_6$7,toDisplayString(_.item.lastMessage),1),_.item.unread>0?(openBlock(),createElementBlock("span",_hoisted_7$6,toDisplayString(x.value),1)):createCommentVNode("",!0)])])],2)}}},ChatListItem=_export_sfc(_sfc_main$o,[["__scopeId","data-v-baf62718"]]),_hoisted_1$m=["title","disabled"],_hoisted_2$h=["src","alt"],_hoisted_3$f={key:1,class:"icon"},_sfc_main$n={__name:"IconButton",props:{icon:String,title:String,disabled:Boolean},setup(_){return(S,w)=>(openBlock(),createElementBlock("button",{class:"icon-button",title:_.title,disabled:_.disabled},[_.icon&&_.icon.endsWith(".svg")?(openBlock(),createElementBlock("img",{key:0,src:_.icon,alt:_.title,class:"icon"},null,8,_hoisted_2$h)):(openBlock(),createElementBlock("span",_hoisted_3$f,toDisplayString(_.icon),1))],8,_hoisted_1$m))}},IconButton=_export_sfc(_sfc_main$n,[["__scopeId","data-v-ceaaaa8a"]]);function getInternetExplorerVersion(){var _=window.navigator.userAgent,S=_.indexOf("MSIE ");if(S>0)return parseInt(_.substring(S+5,_.indexOf(".",S)),10);var w=_.indexOf("Trident/");if(w>0){var E=_.indexOf("rv:");return parseInt(_.substring(E+3,_.indexOf(".",E)),10)}var T=_.indexOf("Edge/");return T>0?parseInt(_.substring(T+5,_.indexOf(".",T)),10):-1}let isIE;function initCompat(){initCompat.init||(initCompat.init=!0,isIE=getInternetExplorerVersion()!==-1)}var script$3={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){initCompat(),nextTick(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const _=document.createElement("object");this._resizeObject=_,_.setAttribute("aria-hidden","true"),_.setAttribute("tabindex",-1),_.onload=this.addResizeHandlers,_.type="text/html",isIE&&this.$el.appendChild(_),_.data="about:blank",isIE||this.$el.appendChild(_)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!isIE&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const _withId=withScopeId();pushScopeId("data-v-b329ee4c");const _hoisted_1$l={class:"resize-observer",tabindex:"-1"};popScopeId();const render$2=_withId((_,S,w,E,T,A)=>(openBlock(),createBlock("div",_hoisted_1$l)));script$3.render=render$2;script$3.__scopeId="data-v-b329ee4c";script$3.__file="src/components/ResizeObserver.vue";function _typeof$1(_){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(S){return typeof S}:_typeof$1=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof$1(_)}function _classCallCheck(_,S){if(!(_ instanceof S))throw new TypeError("Cannot call a class as a function")}function _defineProperties(_,S){for(var w=0;w<S.length;w++){var E=S[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}function _createClass(_,S,w){return S&&_defineProperties(_.prototype,S),_}function _toConsumableArray(_){return _arrayWithoutHoles(_)||_iterableToArray(_)||_unsupportedIterableToArray(_)||_nonIterableSpread()}function _arrayWithoutHoles(_){if(Array.isArray(_))return _arrayLikeToArray(_)}function _iterableToArray(_){if(typeof Symbol<"u"&&Symbol.iterator in Object(_))return Array.from(_)}function _unsupportedIterableToArray(_,S){if(_){if(typeof _=="string")return _arrayLikeToArray(_,S);var w=Object.prototype.toString.call(_).slice(8,-1);if(w==="Object"&&_.constructor&&(w=_.constructor.name),w==="Map"||w==="Set")return Array.from(_);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return _arrayLikeToArray(_,S)}}function _arrayLikeToArray(_,S){(S==null||S>_.length)&&(S=_.length);for(var w=0,E=new Array(S);w<S;w++)E[w]=_[w];return E}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function processOptions(_){var S;return typeof _=="function"?S={callback:_}:S=_,S}function throttle(_,S){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E,T,A,k=function(R){for(var P=arguments.length,M=new Array(P>1?P-1:0),N=1;N<P;N++)M[N-1]=arguments[N];if(A=M,!(E&&R===T)){var I=w.leading;typeof I=="function"&&(I=I(R,T)),(!E||R!==T)&&I&&_.apply(void 0,[R].concat(_toConsumableArray(A))),T=R,clearTimeout(E),E=setTimeout(function(){_.apply(void 0,[R].concat(_toConsumableArray(A))),E=0},S)}};return k._clear=function(){clearTimeout(E),E=null},k}function deepEqual(_,S){if(_===S)return!0;if(_typeof$1(_)==="object"){for(var w in _)if(!deepEqual(_[w],S[w]))return!1;return!0}return!1}var VisibilityState=(function(){function _(S,w,E){_classCallCheck(this,_),this.el=S,this.observer=null,this.frozen=!1,this.createObserver(w,E)}return _createClass(_,[{key:"createObserver",value:function(w,E){var T=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=processOptions(w),this.callback=function(x,R){T.options.callback(x,R),x&&T.options.once&&(T.frozen=!0,T.destroyObserver())},this.callback&&this.options.throttle){var A=this.options.throttleOptions||{},k=A.leading;this.callback=throttle(this.callback,this.options.throttle,{leading:function(R){return k==="both"||k==="visible"&&R||k==="hidden"&&!R}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(x){var R=x[0];if(x.length>1){var P=x.find(function(N){return N.isIntersecting});P&&(R=P)}if(T.callback){var M=R.isIntersecting&&R.intersectionRatio>=T.threshold;if(M===T.oldResult)return;T.oldResult=M,T.callback(M,R)}},this.options.intersection),nextTick(function(){T.observer&&T.observer.observe(T.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),_})();function beforeMount(_,S,w){var E=S.value;if(E)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var T=new VisibilityState(_,E,w);_._vue_visibilityState=T}}function updated(_,S,w){var E=S.value,T=S.oldValue;if(!deepEqual(E,T)){var A=_._vue_visibilityState;if(!E){unmounted(_);return}A?A.createObserver(E,w):beforeMount(_,{value:E},w)}}function unmounted(_){var S=_._vue_visibilityState;S&&(S.destroyObserver(),delete _._vue_visibilityState)}var ObserveVisibility={beforeMount,updated,unmounted};function mitt(_){return{all:_=_||new Map,on:function(S,w){var E=_.get(S);E&&E.push(w)||_.set(S,[w])},off:function(S,w){var E=_.get(S);E&&E.splice(E.indexOf(w)>>>0,1)},emit:function(S,w){(_.get(S)||[]).slice().map(function(E){E(w)}),(_.get("*")||[]).slice().map(function(E){E(S,w)})}}}var config={itemsLimit:1e3},regex=/(auto|scroll)/;function parents(_,S){return _.parentNode===null?S:parents(_.parentNode,S.concat([_]))}var style=function(S,w){return getComputedStyle(S,null).getPropertyValue(w)},overflow=function(S){return style(S,"overflow")+style(S,"overflow-y")+style(S,"overflow-x")},scroll=function(S){return regex.test(overflow(S))};function getScrollParent(_){if(_ instanceof HTMLElement||_ instanceof SVGElement){for(var S=parents(_.parentNode,[]),w=0;w<S.length;w+=1)if(scroll(S[w]))return S[w];return document.scrollingElement||document.documentElement}}function _typeof(_){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof(_)}var props={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(S){return["vertical","horizontal"].includes(S)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function simpleArray(){return this.items.length&&_typeof(this.items[0])!=="object"}var supportsPassive=!1;if(typeof window<"u"){supportsPassive=!1;try{var opts=Object.defineProperty({},"passive",{get:function(){supportsPassive=!0}});window.addEventListener("test",null,opts)}catch{}}let uid=0;var script$2={name:"RecycleScroller",components:{ResizeObserver:script$3},directives:{ObserveVisibility},props:{...props,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const _={"-1":{accumulator:0}},S=this.items,w=this.sizeField,E=this.minItemSize;let T=1e4,A=0,k;for(let x=0,R=S.length;x<R;x++)k=S[x][w]||E,k<T&&(T=k),A+=k,_[x]={accumulator:A,size:k};return this.$_computedMinItemSize=T,_}return[]},simpleArray,itemIndexByKey(){const{keyField:_,items:S}=this,w={};for(let E=0,T=S.length;E<T;E++)w[S[E][_]]=E;return w}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const _=this.$_lastUpdateScrollPosition;typeof _=="number"&&this.$nextTick(()=>{this.scrollToPosition(_)})},beforeUnmount(){this.removeListeners()},methods:{addView(_,S,w,E,T){const A=markRaw({id:uid++,index:S,used:!0,key:E,type:T}),k=shallowReactive({item:w,position:0,nr:A});return _.push(k),k},unuseView(_,S=!1){const w=this.$_unusedViews,E=_.nr.type;let T=w.get(E);T||(T=[],w.set(E,T)),T.push(_),S||(_.nr.used=!1,_.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(_){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const S=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:w}=this.updateVisibleItems(!1,!0);w||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});S(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&S()},this.updateInterval))}},handleVisibilityChange(_,S){this.ready&&(_||S.boundingClientRect.width!==0||S.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(_,S=!1){const w=this.itemSize,E=this.gridItems||1,T=this.itemSecondarySize||w,A=this.$_computedMinItemSize,k=this.typeField,x=this.simpleArray?null:this.keyField,R=this.items,P=R.length,M=this.sizes,N=this.$_views,I=this.$_unusedViews,V=this.pool,B=this.itemIndexByKey;let D,z,O,L,F;if(!P)D=z=L=F=O=0;else if(this.$_prerender)D=L=0,z=F=Math.min(this.prerender,R.length),O=null;else{const te=this.getScroll();if(S){let de=te.start-this.$_lastUpdateScrollPosition;if(de<0&&(de=-de),w===null&&de<A||de<w)return{continuous:!0}}this.$_lastUpdateScrollPosition=te.start;const ee=this.buffer;te.start-=ee,te.end+=ee;let G=0;if(this.$refs.before&&(G=this.$refs.before.scrollHeight,te.start-=G),this.$refs.after){const de=this.$refs.after.scrollHeight;te.end+=de}if(w===null){let de,le=0,ae=P-1,Q=~~(P/2),ie;do ie=Q,de=M[Q].accumulator,de<te.start?le=Q:Q<P-1&&M[Q+1].accumulator>te.start&&(ae=Q),Q=~~((le+ae)/2);while(Q!==ie);for(Q<0&&(Q=0),D=Q,O=M[P-1].accumulator,z=Q;z<P&&M[z].accumulator<te.end;z++);for(z===-1?z=R.length-1:(z++,z>P&&(z=P)),L=D;L<P&&G+M[L].accumulator<te.start;L++);for(F=L;F<P&&G+M[F].accumulator<te.end;F++);}else{D=~~(te.start/w*E);const de=D%E;D-=de,z=Math.ceil(te.end/w*E),L=Math.max(0,Math.floor((te.start-G)/w*E)),F=Math.floor((te.end-G)/w*E),D<0&&(D=0),z>P&&(z=P),L<0&&(L=0),F>P&&(F=P),O=Math.ceil(P/E)*w}}z-D>config.itemsLimit&&this.itemsLimitError(),this.totalSize=O;let $;const H=D<=this.$_endIndex&&z>=this.$_startIndex;if(H)for(let te=0,ee=V.length;te<ee;te++)$=V[te],$.nr.used&&(_&&($.nr.index=B[$.item[x]]),($.nr.index==null||$.nr.index<D||$.nr.index>=z)&&this.unuseView($));const j=H?null:new Map;let q,W,X;for(let te=D;te<z;te++){q=R[te];const ee=x?q[x]:q;if(ee==null)throw new Error(`Key is ${ee} on item (keyField is '${x}')`);if($=N.get(ee),!w&&!M[te].size){$&&this.unuseView($);continue}W=q[k];let G=I.get(W),de=!1;if(!$)H?G&&G.length?$=G.pop():$=this.addView(V,te,q,ee,W):(X=j.get(W)||0,(!G||X>=G.length)&&($=this.addView(V,te,q,ee,W),this.unuseView($,!0),G=I.get(W)),$=G[X],j.set(W,X+1)),N.delete($.nr.key),$.nr.used=!0,$.nr.index=te,$.nr.key=ee,$.nr.type=W,N.set(ee,$),de=!0;else if(!$.nr.used&&($.nr.used=!0,de=!0,G)){const le=G.indexOf($);le!==-1&&G.splice(le,1)}$.item=q,de&&(te===R.length-1&&this.$emit("scroll-end"),te===0&&this.$emit("scroll-start")),w===null?($.position=M[te-1].accumulator,$.offset=0):($.position=Math.floor(te/E)*w,$.offset=te%E*T)}return this.$_startIndex=D,this.$_endIndex=z,this.emitUpdate&&this.$emit("update",D,z,L,F),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:H}},getListenerTarget(){let _=getScrollParent(this.$el);return window.document&&(_===window.document.documentElement||_===window.document.body)&&(_=window),_},getScroll(){const{$el:_,direction:S}=this,w=S==="vertical";let E;if(this.pageMode){const T=_.getBoundingClientRect(),A=w?T.height:T.width;let k=-(w?T.top:T.left),x=w?window.innerHeight:window.innerWidth;k<0&&(x+=k,k=0),k+x>A&&(x=A-k),E={start:k,end:k+x}}else w?E={start:_.scrollTop,end:_.scrollTop+_.clientHeight}:E={start:_.scrollLeft,end:_.scrollLeft+_.clientWidth};return E},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,supportsPassive?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(_){let S;const w=this.gridItems||1;this.itemSize===null?S=_>0?this.sizes[_-1].accumulator:0:S=Math.floor(_/w)*this.itemSize,this.scrollToPosition(S)},scrollToPosition(_){const S=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let w,E,T;if(this.pageMode){const A=getScrollParent(this.$el),k=A.tagName==="HTML"?0:A[S.scroll],x=A.getBoundingClientRect(),P=this.$el.getBoundingClientRect()[S.start]-x[S.start];w=A,E=S.scroll,T=_+k+P}else w=this.$el,E=S.scroll,T=_;w[E]=T},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((_,S)=>_.nr.index-S.nr.index)}}};const _hoisted_1$k={key:0,ref:"before",class:"vue-recycle-scroller__slot"},_hoisted_2$g={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function render$1(_,S,w,E,T,A){const k=resolveComponent("ResizeObserver"),x=resolveDirective("observe-visibility");return withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass(["vue-recycle-scroller",{ready:T.ready,"page-mode":w.pageMode,[`direction-${_.direction}`]:!0}]),onScrollPassive:S[0]||(S[0]=(...R)=>A.handleScroll&&A.handleScroll(...R))},[_.$slots.before?(openBlock(),createElementBlock("div",_hoisted_1$k,[renderSlot(_.$slots,"before")],512)):createCommentVNode("v-if",!0),(openBlock(),createBlock(resolveDynamicComponent(w.listTag),{ref:"wrapper",style:normalizeStyle({[_.direction==="vertical"?"minHeight":"minWidth"]:T.totalSize+"px"}),class:normalizeClass(["vue-recycle-scroller__item-wrapper",w.listClass])},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(T.pool,R=>(openBlock(),createBlock(resolveDynamicComponent(w.itemTag),mergeProps({key:R.nr.id,style:T.ready?{transform:`translate${_.direction==="vertical"?"Y":"X"}(${R.position}px) translate${_.direction==="vertical"?"X":"Y"}(${R.offset}px)`,width:w.gridItems?`${_.direction==="vertical"&&w.itemSecondarySize||w.itemSize}px`:void 0,height:w.gridItems?`${_.direction==="horizontal"&&w.itemSecondarySize||w.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[w.itemClass,{hover:!w.skipHover&&T.hoverKey===R.nr.key}]]},toHandlers(w.skipHover?{}:{mouseenter:()=>{T.hoverKey=R.nr.key},mouseleave:()=>{T.hoverKey=null}})),{default:withCtx(()=>[renderSlot(_.$slots,"default",{item:R.item,index:R.nr.index,active:R.nr.used})]),_:2},1040,["style","class"]))),128)),renderSlot(_.$slots,"empty")]),_:3},8,["style","class"])),_.$slots.after?(openBlock(),createElementBlock("div",_hoisted_2$g,[renderSlot(_.$slots,"after")],512)):createCommentVNode("v-if",!0),createVNode(k,{onNotify:A.handleResize},null,8,["onNotify"])],34)),[[x,A.handleVisibilityChange]])}script$2.render=render$1;script$2.__file="src/components/RecycleScroller.vue";var script$1={name:"DynamicScroller",components:{RecycleScroller:script$2},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(_=>{requestAnimationFrame(()=>{if(Array.isArray(_)){for(const S of _)if(S.target&&S.target.$_vs_onResize){let w,E;if(S.borderBoxSize){const T=S.borderBoxSize[0];w=T.inlineSize,E=T.blockSize}else w=S.contentRect.width,E=S.contentRect.height;S.target.$_vs_onResize(S.target.$_vs_id,w,E)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...props,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray,itemsWithSize(){const _=[],{items:S,keyField:w,simpleArray:E}=this,T=this.vscrollData.sizes,A=S.length;for(let k=0;k<A;k++){const x=S[k],R=E?k:x[w];let P=T[R];typeof P>"u"&&!this.$_undefinedMap[R]&&(P=0),_.push({item:x,id:R,size:P})}return _}},watch:{items(){this.forceUpdate()},simpleArray:{handler(_){this.vscrollData.simpleArray=_},immediate:!0},direction(_){this.forceUpdate(!0)},itemsWithSize(_,S){const w=this.$el.scrollTop;let E=0,T=0;const A=Math.min(_.length,S.length);for(let x=0;x<A&&!(E>=w);x++)E+=S[x].size||this.minItemSize,T+=_[x].size||this.minItemSize;const k=T-E;k!==0&&(this.$el.scrollTop+=k)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=mitt()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(_=!1){(_||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(_){const S=this.$refs.scroller;S&&S.scrollToItem(_)},getItemSize(_,S=void 0){const w=this.simpleArray?S??this.items.indexOf(_):_[this.keyField];return this.vscrollData.sizes[w]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const _=this.$el;this.$nextTick(()=>{_.scrollTop=_.scrollHeight+5e3;const S=()=>{_.scrollTop=_.scrollHeight+5e3,requestAnimationFrame(()=>{_.scrollTop=_.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(S)})};requestAnimationFrame(S)})}}};function render(_,S,w,E,T,A){const k=resolveComponent("RecycleScroller");return openBlock(),createBlock(k,mergeProps({ref:"scroller",items:A.itemsWithSize,"min-item-size":w.minItemSize,direction:_.direction,"key-field":"id","list-tag":_.listTag,"item-tag":_.itemTag},_.$attrs,{onResize:A.onScrollerResize,onVisible:A.onScrollerVisible}),{default:withCtx(({item:x,index:R,active:P})=>[renderSlot(_.$slots,"default",normalizeProps(guardReactiveProps({item:x.item,index:R,active:P,itemWithSize:x})))]),before:withCtx(()=>[renderSlot(_.$slots,"before")]),after:withCtx(()=>[renderSlot(_.$slots,"after")]),empty:withCtx(()=>[renderSlot(_.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}script$1.render=render;script$1.__file="src/components/DynamicScroller.vue";var script={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(_,S){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const w=this.vscrollData.sizes[S],E=this.vscrollData.sizes[_];w!=null&&w!==E&&this.applySize(w)}},finalActive(_){this.size||(_?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?_?this.observeSize():this.unobserveSize():_&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const _ in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[_],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:_}){!this.finalActive&&_&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||_||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(_){this.$nextTick(()=>{if(this.id===_){const S=this.$el.offsetWidth,w=this.$el.offsetHeight;this.applyWidthHeight(S,w)}this.$_pendingSizeUpdate=null})},applyWidthHeight(_,S){const w=~~(this.vscrollParent.direction==="vertical"?S:_);w&&this.size!==w&&this.applySize(w)},applySize(_){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=_,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(_,S,w){this.id===_&&this.applyWidthHeight(S,w)}},render(){return h$1(this.tag,this.$slots.default())}};script.__file="src/components/DynamicScrollerItem.vue";function registerComponents(_,S){_.component("".concat(S,"recycle-scroller"),script$2),_.component("".concat(S,"RecycleScroller"),script$2),_.component("".concat(S,"dynamic-scroller"),script$1),_.component("".concat(S,"DynamicScroller"),script$1),_.component("".concat(S,"dynamic-scroller-item"),script),_.component("".concat(S,"DynamicScrollerItem"),script)}var plugin={version:"2.0.0-beta.8",install:function(S,w){var E=Object.assign({},{installComponents:!0,componentsPrefix:""},w);for(var T in E)typeof E[T]<"u"&&(config[T]=E[T]);E.installComponents&&registerComponents(S,E.componentsPrefix)}};const _hoisted_1$j={class:"chat-list-root"},_hoisted_2$f={class:"chat-list-header"},_hoisted_3$e={class:"search-bar-wrapper"},_hoisted_4$9=["value"],_hoisted_5$8={class:"chat-list-tabs"},_hoisted_6$6={class:"chat-items-wrapper"},_hoisted_7$5={key:0,class:"empty-list"},_sfc_main$m={__name:"ChatList",setup(_){const S=useChatStore(),w=useUiStore(),E=useUserStore(),T=useGroupStore(),A=debounce$1(R=>{w.chatListSearchTerm=R.target.value},250),k=R=>{S.openChat(R.id),window.innerWidth<=768&&(w.isChatViewActiveOnMobile=!0)},x=(R,P)=>{if(P.type==="contact"&&!P.isSpecial)w.showContextMenu({event:R,target:{type:"contact",id:P.id},items:[{label:` "${P.name}"`,action:()=>{w.showConfirmationModal({message:` "${P.name}" `,onConfirm:()=>E.removeContact(P.id)})},class:"danger"}]});else if(P.type==="group"){const M=T.groups[P.id];if(!M)return;const N=M.owner===E.userId,I=N?"":"",V=N?` "${P.name}" `:` "${P.name}" `;w.showContextMenu({event:R,target:{type:"group",id:P.id},items:[{label:I,action:()=>{w.showConfirmationModal({message:V,onConfirm:()=>{N?T.dissolveGroup(P.id):T.leaveGroup(P.id)}})},class:"danger"}]})}};return(R,P)=>{const M=resolveDirective("auto-animate");return openBlock(),createElementBlock("div",_hoisted_1$j,[createBaseVNode("header",_hoisted_2$f,[createVNode(IconButton,{icon:"",title:"",onClick:P[0]||(P[0]=N=>unref(w).showModal("settings"))}),createBaseVNode("div",_hoisted_3$e,[P[6]||(P[6]=createBaseVNode("span",{class:"search-icon"},"",-1)),createBaseVNode("input",{type:"search",id:"chat-list-search",value:unref(S).chatListSearchTerm,onInput:P[1]||(P[1]=(...N)=>unref(A)&&unref(A)(...N)),placeholder:"...",class:"search-bar","aria-label":""},null,40,_hoisted_4$9)])]),createBaseVNode("nav",_hoisted_5$8,[createBaseVNode("button",{class:normalizeClass({active:unref(w).chatListFilter==="all"}),onClick:P[2]||(P[2]=N=>unref(w).chatListFilter="all")},"",2),createBaseVNode("button",{class:normalizeClass({active:unref(w).chatListFilter==="contact"}),onClick:P[3]||(P[3]=N=>unref(w).chatListFilter="contact")},"",2),createBaseVNode("button",{class:normalizeClass({active:unref(w).chatListFilter==="group"}),onClick:P[4]||(P[4]=N=>unref(w).chatListFilter="group")},"",2)]),withDirectives((openBlock(),createElementBlock("div",_hoisted_6$6,[unref(S).filteredChatList.length===0?(openBlock(),createElementBlock("div",_hoisted_7$5,[...P[7]||(P[7]=[createBaseVNode("svg",{class:"empty-list-icon",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})],-1),createBaseVNode("p",null,"...",-1),createBaseVNode("p",null,' "+" ',-1)])])):(openBlock(),createBlock(unref(script$2),{key:1,class:"scroller",items:unref(S).filteredChatList,"item-size":72,"key-field":"id"},{default:withCtx(({item:N})=>[createVNode(ChatListItem,{item:N,"is-active":N.id===unref(S).currentChatId,onClick:I=>k(N),onContextmenu:withModifiers(I=>x(I,N),["prevent"])},null,8,["item","is-active","onClick","onContextmenu"])]),_:1},8,["items"]))])),[[M,{duration:300,easing:"ease-in-out"}]]),createVNode(IconButton,{icon:"icons/plus.svg",class:"new-chat-fab",title:"/",onClick:P[5]||(P[5]=N=>unref(w).showModal("newContact"))})])}}},ChatList=_export_sfc(_sfc_main$m,[["__scopeId","data-v-c72d9930"]]),_hoisted_1$i={class:"chat-details"},_hoisted_2$e={class:"chat-title"},_hoisted_3$d={class:"chat-actions"},_sfc_main$l={__name:"ChatHeader",setup(_){const S=useChatStore(),w=useUserStore(),E=useGroupStore(),T=useUiStore(),A=useCallStore(),k=computed(()=>{const D=S.currentChatId;return D?w.contacts[D]||E.groups[D]:null}),x=computed(()=>k.value?w.getContactCombinedStatus(k.value.id):{}),R=computed(()=>!k.value||k.value.type==="group"?!1:x.value.isOnlineDisplay),P=computed(()=>k.value&&k.value.type!=="group"&&!k.value.isAI&&!k.value.isSpecial&&x.value.isConnected),M=computed(()=>k.value?k.value.type==="group"?`${k.value.members.length} `:x.value.statusText:""),N=computed(()=>k.value?k.value.type==="group"?"online":x.value.statusClass:"offline"),I=()=>{P.value&&A.startVideoCall()},V=()=>{P.value&&A.startAudioCall()},B=()=>{P.value&&A.startScreenShare()};return(D,z)=>k.value?(openBlock(),createElementBlock("header",{key:0,class:normalizeClass(["chat-header",{"character-active":k.value.isSpecial}])},[createVNode(IconButton,{icon:"",title:"",class:"back-button",onClick:z[0]||(z[0]=O=>unref(T).isChatViewActiveOnMobile=!1)}),createBaseVNode("div",{class:"chat-info",onClick:z[1]||(z[1]=O=>unref(T).toggleDetailsPanel(!0,"info"))},[createVNode(Avatar,{entity:k.value,"is-online":R.value},null,8,["entity","is-online"]),createBaseVNode("div",_hoisted_1$i,[createBaseVNode("h1",_hoisted_2$e,toDisplayString(k.value.name),1),createBaseVNode("p",{class:normalizeClass(["chat-status",N.value])},toDisplayString(M.value),3)])]),createBaseVNode("div",_hoisted_3$d,[createVNode(IconButton,{icon:"",title:"",disabled:!P.value,onClick:I},null,8,["disabled"]),createVNode(IconButton,{icon:"",title:"",disabled:!P.value,onClick:V},null,8,["disabled"]),createVNode(IconButton,{class:"screenshare-button",icon:"",title:"",disabled:!P.value||unref(A).isScreenSharing,onClick:B},null,8,["disabled"]),createVNode(IconButton,{class:"screenshare-button",icon:"",title:"",onClick:z[2]||(z[2]=O=>unref(T).showOverlayModal("worldMap"))}),createVNode(IconButton,{class:"lobby-button",icon:"",title:"-",onClick:z[3]||(z[3]=O=>unref(T).toggleDetailsPanel(!0,"lobby"))})])],2)):createCommentVNode("",!0)}},ChatHeader=_export_sfc(_sfc_main$l,[["__scopeId","data-v-da8bdccf"]]),_sfc_main$k={__name:"Spinner",props:{size:{type:String,default:"",validator:_=>["","small","x-small","large"].includes(_)}},setup(_){const S=_,w=computed(()=>S.size?`spinner-${S.size}`:"");return(E,T)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["spinner",w.value])},null,2))}},Spinner=_export_sfc(_sfc_main$k,[["__scopeId","data-v-202608e3"]]),_hoisted_1$h={key:0,class:"skeleton-list-item"},_hoisted_2$d={key:1,class:"skeleton-profile"},_hoisted_3$c={key:2,class:"skeleton-grid"},_hoisted_4$8={key:3,class:"skeleton-grid-item-single"},_hoisted_5$7={key:4,class:"skeleton-generic"},_sfc_main$j={__name:"SkeletonLoader",props:{type:{type:String,default:"generic"},baseColor:{type:String,default:"var(--color-background-hover)"},highlightColor:{type:String,default:"var(--color-background-elevated)"},shimmer:{type:Boolean,default:!0}},setup(_){return(S,w)=>(openBlock(),createElementBlock("div",{class:"skeleton-wrapper",style:normalizeStyle({"--base-color":_.baseColor,"--highlight-color":_.highlightColor})},[_.type==="list-item"?(openBlock(),createElementBlock("div",_hoisted_1$h,[...w[0]||(w[0]=[createBaseVNode("div",{class:"skeleton-avatar"},null,-1),createBaseVNode("div",{class:"skeleton-text-group"},[createBaseVNode("div",{class:"skeleton-line",style:{width:"50%"}}),createBaseVNode("div",{class:"skeleton-line",style:{width:"80%"}})],-1)])])):_.type==="profile"?(openBlock(),createElementBlock("div",_hoisted_2$d,[...w[1]||(w[1]=[createBaseVNode("div",{class:"skeleton-avatar-xl"},null,-1),createBaseVNode("div",{class:"skeleton-line",style:{width:"40%",height:"1.5rem","margin-top":"1rem"}},null,-1),createBaseVNode("div",{class:"skeleton-line",style:{width:"60%","margin-top":"0.5rem"}},null,-1),createBaseVNode("div",{class:"skeleton-line",style:{width:"30%","margin-top":"0.5rem"}},null,-1)])])):_.type==="grid"?(openBlock(),createElementBlock("div",_hoisted_3$c,[(openBlock(),createElementBlock(Fragment,null,renderList(9,E=>createBaseVNode("div",{key:E,class:"skeleton-grid-item"})),64))])):_.type==="grid-item"?(openBlock(),createElementBlock("div",_hoisted_4$8)):(openBlock(),createElementBlock("div",_hoisted_5$7,[(openBlock(),createElementBlock(Fragment,null,renderList(3,E=>createBaseVNode("div",{key:E,class:"skeleton-line",style:normalizeStyle({width:`${Math.random()*40+50}%`})},null,4)),64))]))],4))}},SkeletonLoader=_export_sfc(_sfc_main$j,[["__scopeId","data-v-eb99a0bc"]]),urlCache=new Map,mediaCacheService={async getUrl(_,S=!1){if(!_)return null;const w=S?`${_}_thumb`:_;if(urlCache.has(w))return urlCache.get(w);try{const E=await dbService.getItem("fileCache",_);if(!(E!=null&&E.fileBlob))return log(`Media blob not found in DB for hash: ${_}`,"WARN"),null;if(S&&E.fileBlob.type.startsWith("video/")){if(E.thumbnailBlob instanceof Blob){const A=URL.createObjectURL(E.thumbnailBlob);return urlCache.set(w,A),A}log(`Generating thumbnail for video hash: ${_}`,"DEBUG");try{const A=await generateVideoThumbnail(E.fileBlob),x=await(await fetch(A)).blob(),R={...E,thumbnailBlob:x};await dbService.setItem("fileCache",R);const P=URL.createObjectURL(x);return urlCache.set(w,P),P}catch(A){return log(`Failed to generate/cache thumbnail for ${_}: ${A}`,"ERROR"),null}}const T=URL.createObjectURL(E.fileBlob);return urlCache.set(_,T),T}catch(E){return log(`Error fetching media from DB in mediaCacheService: ${E}`,"ERROR"),null}},cleanup(){log(`Cleaning up ${urlCache.size} cached media URLs.`,"INFO"),urlCache.forEach(_=>URL.revokeObjectURL(_)),urlCache.clear()}};window.addEventListener("pagehide",()=>{mediaCacheService.cleanup()});function t(_,S,w,E){return new(w||(w=Promise))((function(T,A){function k(P){try{R(E.next(P))}catch(M){A(M)}}function x(P){try{R(E.throw(P))}catch(M){A(M)}}function R(P){var M;P.done?T(P.value):(M=P.value,M instanceof w?M:new w((function(N){N(M)}))).then(k,x)}R((E=E.apply(_,S||[])).next())}))}class e{constructor(){this.listeners={}}on(S,w,E){if(this.listeners[S]||(this.listeners[S]=new Set),E==null?void 0:E.once){const T=(...A)=>{this.un(S,T),w(...A)};return this.listeners[S].add(T),()=>this.un(S,T)}return this.listeners[S].add(w),()=>this.un(S,w)}un(S,w){var E;(E=this.listeners[S])===null||E===void 0||E.delete(w)}once(S,w){return this.on(S,w,{once:!0})}unAll(){this.listeners={}}emit(S,...w){this.listeners[S]&&this.listeners[S].forEach((E=>E(...w)))}}const i={decode:function(_,S){return t(this,void 0,void 0,(function*(){const w=new AudioContext({sampleRate:S});try{return yield w.decodeAudioData(_)}finally{w.close()}}))},createBuffer:function(_,S){if(!_||_.length===0)throw new Error("channelData must be a non-empty array");if(S<=0)throw new Error("duration must be greater than 0");if(typeof _[0]=="number"&&(_=[_]),!_[0]||_[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(E){const T=E[0];if(T.some((A=>A>1||A<-1))){const A=T.length;let k=0;for(let x=0;x<A;x++){const R=Math.abs(T[x]);R>k&&(k=R)}for(const x of E)for(let R=0;R<A;R++)x[R]/=k}})(_);const w=_.map((E=>E instanceof Float32Array?E:Float32Array.from(E)));return{duration:S,length:w[0].length,sampleRate:w[0].length/S,numberOfChannels:w.length,getChannelData:E=>{const T=w[E];if(!T)throw new Error(`Channel ${E} not found`);return T},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function n(_,S){const w=S.xmlns?document.createElementNS(S.xmlns,_):document.createElement(_);for(const[E,T]of Object.entries(S))if(E==="children"&&T)for(const[A,k]of Object.entries(T))k instanceof Node?w.appendChild(k):typeof k=="string"?w.appendChild(document.createTextNode(k)):w.appendChild(n(A,k));else E==="style"?Object.assign(w.style,T):E==="textContent"?w.textContent=T:w.setAttribute(E,T.toString());return w}function s(_,S,w){const E=n(_,S||{});return w==null||w.appendChild(E),E}var r=Object.freeze({__proto__:null,createElement:s,default:s});const o={fetchBlob:function(_,S,w){return t(this,void 0,void 0,(function*(){const E=yield fetch(_,w);if(E.status>=400)throw new Error(`Failed to fetch ${_}: ${E.status} (${E.statusText})`);return(function(T,A){t(this,void 0,void 0,(function*(){if(!T.body||!T.headers)return;const k=T.body.getReader(),x=Number(T.headers.get("Content-Length"))||0;let R=0;const P=M=>{R+=(M==null?void 0:M.length)||0;const N=Math.round(R/x*100);A(N)};try{for(;;){const M=yield k.read();if(M.done)break;P(M.value)}}catch(M){console.warn("Progress tracking error:",M)}}))})(E.clone(),S),E.blob()}))}};class a extends e{constructor(S){super(),this.isExternalMedia=!1,S.media?(this.media=S.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),S.mediaControls&&(this.media.controls=!0),S.autoplay&&(this.media.autoplay=!0),S.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{S.playbackRate!=null&&(this.media.playbackRate=S.playbackRate)}),{once:!0})}onMediaEvent(S,w,E){return this.media.addEventListener(S,w,E),()=>this.media.removeEventListener(S,w,E)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const S=this.getSrc();S.startsWith("blob:")&&URL.revokeObjectURL(S)}canPlayType(S){return this.media.canPlayType(S)!==""}setSrc(S,w){const E=this.getSrc();if(S&&E===S)return;this.revokeSrc();const T=w instanceof Blob&&(this.canPlayType(w.type)||!S)?URL.createObjectURL(w):S;if(E&&this.media.removeAttribute("src"),T||S)try{this.media.src=T}catch{this.media.src=S}}destroy(){this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(S){this.media=S}play(){return t(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(S){if(S instanceof DOMException&&S.name==="AbortError")return;throw S}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(S){this.media.currentTime=Math.max(0,Math.min(S,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(S){this.media.volume=S}getMuted(){return this.media.muted}setMuted(S){this.media.muted=S}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(S,w){w!=null&&(this.media.preservesPitch=w),this.media.playbackRate=S}getMediaElement(){return this.media}setSinkId(S){return this.media.setSinkId(S)}}function h(_){return _<0?0:_>1?1:_}function l({maxTop:_,maxBottom:S,halfHeight:w,vScale:E}){const T=Math.round(_*w*E);return{topHeight:T,totalHeight:T+Math.round(S*w*E)||1}}function c({barAlign:_,halfHeight:S,topHeight:w,totalHeight:E,canvasHeight:T}){return _==="top"?0:_==="bottom"?T-E:S-w}function d(_,S,w){const E=S-_.left,T=w-_.top;return[E/_.width,T/_.height]}function u(_){return!!(_.barWidth||_.barGap||_.barAlign)}function p(_,S){if(!u(S))return _;const w=S.barWidth||.5,E=w+(S.barGap||w/2);return E===0?_:Math.floor(_/E)*E}function m({scrollLeft:_,totalWidth:S,numCanvases:w}){if(S===0)return[0];const E=_/S,T=Math.floor(E*w);return[T-1,T,T+1]}function f({scrollLeft:_,clientWidth:S,scrollWidth:w}){return w===0?{startX:0,endX:0}:{startX:_/w,endX:(_+S)/w}}class g extends e{constructor(S,w){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragUnsubscribe=null,this.subscriptions=[],this.options=S;const E=this.parentFromOptionsContainer(S.container);this.parent=E;const[T,A]=this.initHtml();E.appendChild(T),this.container=T,this.scrollContainer=A.querySelector(".scroll"),this.wrapper=A.querySelector(".wrapper"),this.canvasWrapper=A.querySelector(".canvases"),this.progressWrapper=A.querySelector(".progress"),this.cursor=A.querySelector(".cursor"),w&&A.appendChild(w),this.initEvents()}parentFromOptionsContainer(S){let w;if(typeof S=="string"?w=document.querySelector(S):S instanceof HTMLElement&&(w=S),!w)throw new Error("Container not found");return w}initEvents(){if(this.wrapper.addEventListener("click",(S=>{const w=this.wrapper.getBoundingClientRect(),[E,T]=d(w,S.clientX,S.clientY);this.emit("click",E,T)})),this.wrapper.addEventListener("dblclick",(S=>{const w=this.wrapper.getBoundingClientRect(),[E,T]=d(w,S.clientX,S.clientY);this.emit("dblclick",E,T)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",(()=>{const{scrollLeft:S,scrollWidth:w,clientWidth:E}=this.scrollContainer,{startX:T,endX:A}=f({scrollLeft:S,scrollWidth:w,clientWidth:E});this.emit("scroll",T,A,S,S+E)})),typeof ResizeObserver=="function"){const S=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{S().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const S=this.parent.clientWidth;S===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=S,this.reRender(),this.emit("resize"))}initDrag(){this.dragUnsubscribe||(this.dragUnsubscribe=(function(S,w,E,T,A=3,k=0,x=100){if(!S)return()=>{};const R=new Map,P=matchMedia("(pointer: coarse)").matches;let M=()=>{};const N=I=>{if(I.button!==k||(R.set(I.pointerId,I),R.size>1))return;let V=I.clientX,B=I.clientY,D=!1;const z=Date.now(),O=j=>{if(j.defaultPrevented||R.size>1||P&&Date.now()-z<x)return;const q=j.clientX,W=j.clientY,X=q-V,te=W-B;if(D||Math.abs(X)>A||Math.abs(te)>A){j.preventDefault(),j.stopPropagation();const ee=S.getBoundingClientRect(),{left:G,top:de}=ee;D||(E==null||E(V-G,B-de),D=!0),w(X,te,q-G,W-de),V=q,B=W}},L=j=>{if(R.delete(j.pointerId),D){const q=j.clientX,W=j.clientY,X=S.getBoundingClientRect(),{left:te,top:ee}=X;T==null||T(q-te,W-ee)}M()},F=j=>{R.delete(j.pointerId),j.relatedTarget&&j.relatedTarget!==document.documentElement||L(j)},$=j=>{D&&(j.stopPropagation(),j.preventDefault())},H=j=>{j.defaultPrevented||R.size>1||D&&j.preventDefault()};document.addEventListener("pointermove",O),document.addEventListener("pointerup",L),document.addEventListener("pointerout",F),document.addEventListener("pointercancel",F),document.addEventListener("touchmove",H,{passive:!1}),document.addEventListener("click",$,{capture:!0}),M=()=>{document.removeEventListener("pointermove",O),document.removeEventListener("pointerup",L),document.removeEventListener("pointerout",F),document.removeEventListener("pointercancel",F),document.removeEventListener("touchmove",H),setTimeout((()=>{document.removeEventListener("click",$,{capture:!0})}),10)}};return S.addEventListener("pointerdown",N),()=>{M(),S.removeEventListener("pointerdown",N),R.clear()}})(this.wrapper,((S,w,E)=>{const T=this.wrapper.getBoundingClientRect().width;this.emit("drag",h(E/T))}),(S=>{this.isDragging=!0;const w=this.wrapper.getBoundingClientRect().width;this.emit("dragstart",h(S/w))}),(S=>{this.isDragging=!1;const w=this.wrapper.getBoundingClientRect().width;this.emit("dragend",h(S/w))})),this.subscriptions.push(this.dragUnsubscribe))}initHtml(){const S=document.createElement("div"),w=S.attachShadow({mode:"open"}),E=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return w.innerHTML=`
      <style${E?` nonce="${E}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[S,w]}setOptions(S){if(this.options.container!==S.container){const w=this.parentFromOptionsContainer(S.container);w.appendChild(this.container),this.parent=w}S.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=S,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(S){this.scrollContainer.scrollLeft=S}setScrollPercentage(S){const{scrollWidth:w}=this.scrollContainer,E=w*S;this.setScroll(E)}destroy(){var S;this.subscriptions.forEach((w=>w())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(S=this.unsubscribeOnScroll)===null||S===void 0||S.forEach((w=>w())),this.unsubscribeOnScroll=[]}createDelay(S=10){let w,E;const T=()=>{w&&(clearTimeout(w),w=void 0),E&&(E(),E=void 0)};return this.timeouts.push(T),()=>new Promise(((A,k)=>{T(),E=k,w=setTimeout((()=>{w=void 0,E=void 0,A()}),S)}))}getHeight(S,w){var E;const T=((E=this.audioData)===null||E===void 0?void 0:E.numberOfChannels)||1;return(function({optionsHeight:A,optionsSplitChannels:k,parentHeight:x,numberOfChannels:R,defaultHeight:P=128}){if(A==null)return P;const M=Number(A);if(!isNaN(M))return M;if(A==="auto"){const N=x||P;return k!=null&&k.every((I=>!I.overlay))?N/R:N}return P})({optionsHeight:S,optionsSplitChannels:w,parentHeight:this.parent.clientHeight,numberOfChannels:T,defaultHeight:128})}convertColorValues(S){return(function(w,E){if(!Array.isArray(w))return w||"";if(w.length===0)return"#999";if(w.length<2)return w[0]||"";const T=document.createElement("canvas"),A=T.getContext("2d"),k=T.height*E,x=A.createLinearGradient(0,0,0,k||E),R=1/(w.length-1);return w.forEach(((P,M)=>{x.addColorStop(M*R,P)})),x})(S,this.getPixelRatio())}getPixelRatio(){return S=window.devicePixelRatio,Math.max(1,S||1);var S}renderBarWaveform(S,w,E,T){const{width:A,height:k}=E.canvas,{halfHeight:x,barWidth:R,barRadius:P,barIndexScale:M,barSpacing:N}=(function({width:V,height:B,length:D,options:z,pixelRatio:O}){const L=B/2,F=z.barWidth?z.barWidth*O:1,$=z.barGap?z.barGap*O:z.barWidth?F/2:0,H=F+$||1;return{halfHeight:L,barWidth:F,barGap:$,barRadius:z.barRadius||0,barIndexScale:D>0?V/H/D:0,barSpacing:H}})({width:A,height:k,length:(S[0]||[]).length,options:w,pixelRatio:this.getPixelRatio()}),I=(function({channelData:V,barIndexScale:B,barSpacing:D,barWidth:z,halfHeight:O,vScale:L,canvasHeight:F,barAlign:$}){const H=V[0]||[],j=V[1]||H,q=H.length,W=[];let X=0,te=0,ee=0;for(let G=0;G<=q;G++){const de=Math.round(G*B);if(de>X){const{topHeight:Q,totalHeight:ie}=l({maxTop:te,maxBottom:ee,halfHeight:O,vScale:L}),Z=c({barAlign:$,halfHeight:O,topHeight:Q,totalHeight:ie,canvasHeight:F});W.push({x:X*D,y:Z,width:z,height:ie}),X=de,te=0,ee=0}const le=Math.abs(H[G]||0),ae=Math.abs(j[G]||0);le>te&&(te=le),ae>ee&&(ee=ae)}return W})({channelData:S,barIndexScale:M,barSpacing:N,barWidth:R,halfHeight:x,vScale:T,canvasHeight:k,barAlign:w.barAlign});E.beginPath();for(const V of I)P&&"roundRect"in E?E.roundRect(V.x,V.y,V.width,V.height,P):E.rect(V.x,V.y,V.width,V.height);E.fill(),E.closePath()}renderLineWaveform(S,w,E,T){const{width:A,height:k}=E.canvas,x=(function({channelData:R,width:P,height:M,vScale:N}){const I=M/2,V=R[0]||[];return[V,R[1]||V].map(((B,D)=>{const z=B.length,O=z?P/z:0,L=I,F=D===0?-1:1,$=[{x:0,y:L}];let H=0,j=0;for(let q=0;q<=z;q++){const W=Math.round(q*O);if(W>H){const te=L+(Math.round(j*I*N)||1)*F;$.push({x:H,y:te}),H=W,j=0}const X=Math.abs(B[q]||0);X>j&&(j=X)}return $.push({x:H,y:L}),$}))})({channelData:S,width:A,height:k,vScale:T});E.beginPath();for(const R of x)if(R.length){E.moveTo(R[0].x,R[0].y);for(let P=1;P<R.length;P++){const M=R[P];E.lineTo(M.x,M.y)}}E.fill(),E.closePath()}renderWaveform(S,w,E){if(E.fillStyle=this.convertColorValues(w.waveColor),w.renderFunction)return void w.renderFunction(S,E);const T=(function({channelData:A,barHeight:k,normalize:x}){var R;const P=k||1;if(!x)return P;const M=A[0];if(!M||M.length===0)return P;let N=0;for(let I=0;I<M.length;I++){const V=(R=M[I])!==null&&R!==void 0?R:0,B=Math.abs(V);B>N&&(N=B)}return N?P/N:P})({channelData:S,barHeight:w.barHeight,normalize:w.normalize});u(w)?this.renderBarWaveform(S,w,E,T):this.renderLineWaveform(S,w,E,T)}renderSingleCanvas(S,w,E,T,A,k,x){const R=this.getPixelRatio(),P=document.createElement("canvas");P.width=Math.round(E*R),P.height=Math.round(T*R),P.style.width=`${E}px`,P.style.height=`${T}px`,P.style.left=`${Math.round(A)}px`,k.appendChild(P);const M=P.getContext("2d");if(w.renderFunction?(M.fillStyle=this.convertColorValues(w.waveColor),w.renderFunction(S,M)):this.renderWaveform(S,w,M),P.width>0&&P.height>0){const N=P.cloneNode(),I=N.getContext("2d");I.drawImage(P,0,0),I.globalCompositeOperation="source-in",I.fillStyle=this.convertColorValues(w.progressColor),I.fillRect(0,0,P.width,P.height),x.appendChild(N)}}renderMultiCanvas(S,w,E,T,A,k){const x=this.getPixelRatio(),{clientWidth:R}=this.scrollContainer,P=E/x,M=(function({clientWidth:B,totalWidth:D,options:z}){return p(Math.min(8e3,B,D),z)})({clientWidth:R,totalWidth:P,options:w});let N={};if(M===0)return;const I=B=>{if(B<0||B>=V||N[B])return;N[B]=!0;const D=B*M;let z=Math.min(P-D,M);if(z=p(z,w),z<=0)return;const O=(function({channelData:L,offset:F,clampedWidth:$,totalWidth:H}){return L.map((j=>{const q=Math.floor(F/H*j.length),W=Math.floor((F+$)/H*j.length);return j.slice(q,W)}))})({channelData:S,offset:D,clampedWidth:z,totalWidth:P});this.renderSingleCanvas(O,w,z,T,D,A,k)},V=Math.ceil(P/M);if(!this.isScrollable){for(let B=0;B<V;B++)I(B);return}if(m({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:P,numCanvases:V}).forEach((B=>I(B))),V>1){const B=this.on("scroll",(()=>{const{scrollLeft:D}=this.scrollContainer;Object.keys(N).length>10&&(A.innerHTML="",k.innerHTML="",N={}),m({scrollLeft:D,totalWidth:P,numCanvases:V}).forEach((z=>I(z)))}));this.unsubscribeOnScroll.push(B)}}renderChannel(S,w,E,T){var{overlay:A}=w,k=(function(M,N){var I={};for(var V in M)Object.prototype.hasOwnProperty.call(M,V)&&N.indexOf(V)<0&&(I[V]=M[V]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function"){var B=0;for(V=Object.getOwnPropertySymbols(M);B<V.length;B++)N.indexOf(V[B])<0&&Object.prototype.propertyIsEnumerable.call(M,V[B])&&(I[V[B]]=M[V[B]])}return I})(w,["overlay"]);const x=document.createElement("div"),R=this.getHeight(k.height,k.splitChannels);x.style.height=`${R}px`,A&&T>0&&(x.style.marginTop=`-${R}px`),this.canvasWrapper.style.minHeight=`${R}px`,this.canvasWrapper.appendChild(x);const P=x.cloneNode();this.progressWrapper.appendChild(P),this.renderMultiCanvas(S,k,E,R,x,P)}render(S){return t(this,void 0,void 0,(function*(){var w;this.timeouts.forEach((P=>P())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const E=this.getPixelRatio(),T=this.scrollContainer.clientWidth,{scrollWidth:A,isScrollable:k,useParentWidth:x,width:R}=(function({duration:P,minPxPerSec:M=0,parentWidth:N,fillParent:I,pixelRatio:V}){const B=Math.ceil(P*M),D=B>N,z=!!(I&&!D);return{scrollWidth:B,isScrollable:D,useParentWidth:z,width:(z?N:B)*V}})({duration:S.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:T,fillParent:this.options.fillParent,pixelRatio:E});if(this.isScrollable=k,this.wrapper.style.width=x?"100%":`${A}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=S,this.emit("render"),this.options.splitChannels)for(let P=0;P<S.numberOfChannels;P++){const M=Object.assign(Object.assign({},this.options),(w=this.options.splitChannels)===null||w===void 0?void 0:w[P]);this.renderChannel([S.getChannelData(P)],M,R,P)}else{const P=[S.getChannelData(0)];S.numberOfChannels>1&&P.push(S.getChannelData(1)),this.renderChannel(P,this.options,R,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((E=>E())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:S}=this.scrollContainer,{right:w}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&S!==this.scrollContainer.scrollWidth){const{right:E}=this.progressWrapper.getBoundingClientRect(),T=(function(A){const k=2*A;return(k<0?Math.floor(k):Math.ceil(k))/2})(E-w);this.scrollContainer.scrollLeft+=T}}zoom(S){this.options.minPxPerSec=S,this.reRender()}scrollIntoView(S,w=!1){const{scrollLeft:E,scrollWidth:T,clientWidth:A}=this.scrollContainer,k=S*T,x=E,R=E+A,P=A/2;if(this.isDragging)k+30>R?this.scrollContainer.scrollLeft+=30:k-30<x&&(this.scrollContainer.scrollLeft-=30);else{(k<x||k>R)&&(this.scrollContainer.scrollLeft=k-(this.options.autoCenter?P:0));const M=k-E-P;w&&this.options.autoCenter&&M>0&&(this.scrollContainer.scrollLeft+=M)}{const M=this.scrollContainer.scrollLeft,{startX:N,endX:I}=f({scrollLeft:M,scrollWidth:T,clientWidth:A});this.emit("scroll",N,I,M,M+A)}}renderProgress(S,w){if(isNaN(S))return;const E=100*S;this.canvasWrapper.style.clipPath=`polygon(${E}% 0%, 100% 0%, 100% 100%, ${E}% 100%)`,this.progressWrapper.style.width=`${E}%`,this.cursor.style.left=`${E}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${S*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(S,w)}exportImage(S,w,E){return t(this,void 0,void 0,(function*(){const T=this.canvasWrapper.querySelectorAll("canvas");if(!T.length)throw new Error("No waveform data");if(E==="dataURL"){const A=Array.from(T).map((k=>k.toDataURL(S,w)));return Promise.resolve(A)}return Promise.all(Array.from(T).map((A=>new Promise(((k,x)=>{A.toBlob((R=>{R?k(R):x(new Error("Could not export image"))}),S,w)})))))}))}}class v extends e{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const S=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(S))};S()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class b extends e{constructor(S=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=S,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return t(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(S){if(this.currentSrc=S,this._duration=void 0,!S)return this.buffer=null,void this.emit("emptied");fetch(S).then((w=>{if(w.status>=400)throw new Error(`Failed to fetch ${S}: ${w.status} (${w.statusText})`);return w.arrayBuffer()})).then((w=>this.currentSrc!==S?null:this.audioContext.decodeAudioData(w))).then((w=>{this.currentSrc===S&&(this.buffer=w,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})).catch((w=>{console.error("WebAudioPlayer load error:",w)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let S=this.playedDuration*this._playbackRate;(S>=this.duration||S<0)&&(S=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,S),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var S;this.paused=!0,(S=this.bufferNode)===null||S===void 0||S.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return t(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(S){const w=S-this.currentTime,E=this.bufferNode;E==null||E.stop(this.audioContext.currentTime+w),E==null||E.addEventListener("ended",(()=>{E===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(S){return t(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(S)}))}get playbackRate(){return this._playbackRate}set playbackRate(S){this._playbackRate=S,this.bufferNode&&(this.bufferNode.playbackRate.value=S)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(S){const w=!this.paused;w&&this._pause(),this.playedDuration=S/this._playbackRate,w&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var S,w;return(S=this._duration)!==null&&S!==void 0?S:((w=this.buffer)===null||w===void 0?void 0:w.duration)||0}set duration(S){this._duration=S}get volume(){return this.gainNode.gain.value}set volume(S){this.gainNode.gain.value=S,this.emit("volumechange")}get muted(){return this._muted}set muted(S){this._muted!==S&&(this._muted=S,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(S){return/^(audio|video)\//.test(S)}getGainNode(){return this.gainNode}getChannelData(){const S=[];if(!this.buffer)return S;const w=this.buffer.numberOfChannels;for(let E=0;E<w;E++)S.push(this.buffer.getChannelData(E));return S}removeAttribute(S){switch(S){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const y={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class C extends a{static create(S){return new C(S)}constructor(S){const w=S.media||(S.backend==="WebAudio"?new b:void 0);super({media:w,mediaControls:S.mediaControls,autoplay:S.autoplay,playbackRate:S.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},y,S),this.timer=new v;const E=w?void 0:this.getMediaElement();this.renderer=new g(this.options,E),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const T=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:A,duration:k}=this.options;(T||A&&k)&&this.load(T,A,k).catch((x=>{this.emit("error",x instanceof Error?x:new Error(String(x)))}))}))}updateProgress(S=this.getCurrentTime()){return this.renderer.renderProgress(S/this.getDuration(),this.isPlaying()),S}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const S=this.updateProgress();this.emit("timeupdate",S),this.emit("audioprocess",S),this.stopAtPosition!=null&&this.isPlaying()&&S>=this.stopAtPosition&&this.pause()}})))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const S=this.updateProgress();this.emit("timeupdate",S)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var S;this.emit("error",(S=this.getMediaElement().error)!==null&&S!==void 0?S:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((S,w)=>{this.options.interact&&(this.seekTo(S),this.emit("interaction",S*this.getDuration()),this.emit("click",S,w))})),this.renderer.on("dblclick",((S,w)=>{this.emit("dblclick",S,w)})),this.renderer.on("scroll",((S,w,E,T)=>{const A=this.getDuration();this.emit("scroll",S*A,w*A,E,T)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(S=>{this.emit("dragstart",S)})),this.renderer.on("dragend",(S=>{this.emit("dragend",S)})),this.renderer.on("resize",(()=>{this.emit("resize")})));{let S;const w=this.renderer.on("drag",(E=>{var T;if(!this.options.interact)return;this.renderer.renderProgress(E),clearTimeout(S);let A=0;const k=this.options.dragToSeek;this.isPlaying()?A=0:k===!0?A=200:k&&typeof k=="object"&&(A=(T=k.debounceTime)!==null&&T!==void 0?T:200),S=setTimeout((()=>{this.seekTo(E)}),A),this.emit("interaction",E*this.getDuration()),this.emit("drag",E)}));this.subscriptions.push((()=>{clearTimeout(S),w()}))}}initPlugins(){var S;!((S=this.options.plugins)===null||S===void 0)&&S.length&&this.options.plugins.forEach((w=>{this.registerPlugin(w)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((S=>S())),this.mediaSubscriptions=[]}setOptions(S){this.options=Object.assign({},this.options,S),S.duration&&!S.peaks&&(this.decodedData=i.createBuffer(this.exportPeaks(),S.duration)),S.peaks&&S.duration&&(this.decodedData=i.createBuffer(S.peaks,S.duration)),this.renderer.setOptions(this.options),S.audioRate&&this.setPlaybackRate(S.audioRate),S.mediaControls!=null&&(this.getMediaElement().controls=S.mediaControls)}registerPlugin(S){if(this.plugins.includes(S))return S;S._init(this),this.plugins.push(S);const w=S.once("destroy",(()=>{this.plugins=this.plugins.filter((E=>E!==S)),this.subscriptions=this.subscriptions.filter((E=>E!==w))}));return this.subscriptions.push(w),S}unregisterPlugin(S){this.plugins=this.plugins.filter((w=>w!==S)),S.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(S){return this.renderer.setScroll(S)}setScrollTime(S){const w=S/this.getDuration();this.renderer.setScrollPercentage(w)}getActivePlugins(){return this.plugins}loadAudio(S,w,E,T){return t(this,void 0,void 0,(function*(){var A;if(this.emit("load",S),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(A=this.abortController)===null||A===void 0||A.abort(),this.abortController=null,!w&&!E){const x=this.options.fetchParams||{};window.AbortController&&!x.signal&&(this.abortController=new AbortController,x.signal=this.abortController.signal);const R=M=>this.emit("loading",M);w=yield o.fetchBlob(S,R,x);const P=this.options.blobMimeType;P&&(w=new Blob([w],{type:P}))}this.setSrc(S,w);const k=yield new Promise((x=>{const R=T||this.getDuration();R?x(R):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>x(this.getDuration())),{once:!0}))}));if(!S&&!w){const x=this.getMediaElement();x instanceof b&&(x.duration=k)}if(E)this.decodedData=i.createBuffer(E,k||0);else if(w){const x=yield w.arrayBuffer();this.decodedData=yield i.decode(x,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(S,w,E){return t(this,void 0,void 0,(function*(){try{return yield this.loadAudio(S,void 0,w,E)}catch(T){throw this.emit("error",T),T}}))}loadBlob(S,w,E){return t(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",S,w,E)}catch(T){throw this.emit("error",T),T}}))}zoom(S){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(S),this.emit("zoom",S)}getDecodedData(){return this.decodedData}exportPeaks({channels:S=2,maxLength:w=8e3,precision:E=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const T=Math.min(S,this.decodedData.numberOfChannels),A=[];for(let k=0;k<T;k++){const x=this.decodedData.getChannelData(k),R=[],P=x.length/w;for(let M=0;M<w;M++){const N=x.slice(Math.floor(M*P),Math.ceil((M+1)*P));let I=0;for(let V=0;V<N.length;V++){const B=N[V];Math.abs(B)>Math.abs(I)&&(I=B)}R.push(Math.round(I*E)/E)}A.push(R)}return A}getDuration(){let S=super.getDuration()||0;return S!==0&&S!==1/0||!this.decodedData||(S=this.decodedData.duration),S}toggleInteraction(S){this.options.interact=S}setTime(S){this.stopAtPosition=null,super.setTime(S),this.updateProgress(S),this.emit("timeupdate",S)}seekTo(S){const w=this.getDuration()*S;this.setTime(w)}play(S,w){const E=Object.create(null,{play:{get:()=>super.play}});return t(this,void 0,void 0,(function*(){S!=null&&this.setTime(S);const T=yield E.play.call(this);return w!=null&&(this.media instanceof b?this.media.stopAt(w):this.stopAtPosition=w),T}))}playPause(){return t(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(S){this.setTime(this.getCurrentTime()+S)}empty(){this.load("",[[0]],.001)}setMediaElement(S){this.unsubscribePlayerEvents(),super.setMediaElement(S),this.initPlayerEvents()}exportImage(){return t(this,arguments,void 0,(function*(S="image/png",w=1,E="dataURL"){return this.renderer.exportImage(S,w,E)}))}destroy(){var S;this.emit("destroy"),(S=this.abortController)===null||S===void 0||S.abort(),this.plugins.forEach((w=>w.destroy())),this.subscriptions.forEach((w=>w())),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}C.BasePlugin=class extends e{constructor(_){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=_}onInit(){}_init(_){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=_,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((_=>_())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},C.dom=r;var lottie$2={exports:{}},lottie$1=lottie$2.exports,hasRequiredLottie;function requireLottie(){return hasRequiredLottie||(hasRequiredLottie=1,(function(module,exports$1){typeof document<"u"&&typeof navigator<"u"&&(function(_,S){module.exports=S()})(lottie$1,(function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(S){_useWebWorker=!!S},getWebWorker=function(){return _useWebWorker},setLocationHref=function(S){locationHref=S},getLocationHref=function(){return locationHref};function createTag(_){return document.createElement(_)}function extendPrototype(_,S){var w,E=_.length,T;for(w=0;w<E;w+=1){T=_[w].prototype;for(var A in T)Object.prototype.hasOwnProperty.call(T,A)&&(S.prototype[A]=T[A])}}function getDescriptor(_,S){return Object.getOwnPropertyDescriptor(_,S)}function createProxyFunction(_){function S(){}return S.prototype=_,S}var audioControllerFactory=(function(){function _(S){this.audios=[],this.audioFactory=S,this._volume=1,this._isMuted=!1}return _.prototype={addAudio:function(w){this.audios.push(w)},pause:function(){var w,E=this.audios.length;for(w=0;w<E;w+=1)this.audios[w].pause()},resume:function(){var w,E=this.audios.length;for(w=0;w<E;w+=1)this.audios[w].resume()},setRate:function(w){var E,T=this.audios.length;for(E=0;E<T;E+=1)this.audios[E].setRate(w)},createAudio:function(w){return this.audioFactory?this.audioFactory(w):window.Howl?new window.Howl({src:[w]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(w){this.audioFactory=w},setVolume:function(w){this._volume=w,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var w,E=this.audios.length;for(w=0;w<E;w+=1)this.audios[w].volume(this._volume*(this._isMuted?0:1))}},function(){return new _}})(),createTypedArray=(function(){function _(w,E){var T=0,A=[],k;switch(w){case"int16":case"uint8c":k=1;break;default:k=1.1;break}for(T=0;T<E;T+=1)A.push(k);return A}function S(w,E){return w==="float32"?new Float32Array(E):w==="int16"?new Int16Array(E):w==="uint8c"?new Uint8ClampedArray(E):_(w,E)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?S:_})();function createSizedArray(_){return Array.apply(null,{length:_})}function _typeof$6(_){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof$6(_)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var _=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],S,w=_.length;for(S=0;S<w;S+=1)BMMath[_[S]]=Math[_[S]]})(),BMMath.random=Math.random,BMMath.abs=function(_){var S=_typeof$6(_);if(S==="object"&&_.length){var w=createSizedArray(_.length),E,T=_.length;for(E=0;E<T;E+=1)w[E]=Math.abs(_[E]);return w}return Math.abs(_)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(_){_.style.position="absolute",_.style.top=0,_.style.left=0,_.style.display="block",_.style.transformOrigin="0 0",_.style.webkitTransformOrigin="0 0",_.style.backfaceVisibility="visible",_.style.webkitBackfaceVisibility="visible",_.style.transformStyle="preserve-3d",_.style.webkitTransformStyle="preserve-3d",_.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(_,S,w,E){this.type=_,this.currentTime=S,this.totalTime=w,this.direction=E<0?-1:1}function BMCompleteEvent(_,S){this.type=_,this.direction=S<0?-1:1}function BMCompleteLoopEvent(_,S,w,E){this.type=_,this.currentLoop=w,this.totalLoops=S,this.direction=E<0?-1:1}function BMSegmentStartEvent(_,S,w){this.type=_,this.firstFrame=S,this.totalFrames=w}function BMDestroyEvent(_,S){this.type=_,this.target=S}function BMRenderFrameErrorEvent(_,S){this.type="renderFrameError",this.nativeError=_,this.currentTime=S}function BMConfigErrorEvent(_){this.type="configError",this.nativeError=_}var createElementID=(function(){var _=0;return function(){return _+=1,idPrefix$1+"__lottie_element_"+_}})();function HSVtoRGB(_,S,w){var E,T,A,k,x,R,P,M;switch(k=Math.floor(_*6),x=_*6-k,R=w*(1-S),P=w*(1-x*S),M=w*(1-(1-x)*S),k%6){case 0:E=w,T=M,A=R;break;case 1:E=P,T=w,A=R;break;case 2:E=R,T=w,A=M;break;case 3:E=R,T=P,A=w;break;case 4:E=M,T=R,A=w;break;case 5:E=w,T=R,A=P;break}return[E,T,A]}function RGBtoHSV(_,S,w){var E=Math.max(_,S,w),T=Math.min(_,S,w),A=E-T,k,x=E===0?0:A/E,R=E/255;switch(E){case T:k=0;break;case _:k=S-w+A*(S<w?6:0),k/=6*A;break;case S:k=w-_+A*2,k/=6*A;break;case w:k=_-S+A*4,k/=6*A;break}return[k,x,R]}function addSaturationToRGB(_,S){var w=RGBtoHSV(_[0]*255,_[1]*255,_[2]*255);return w[1]+=S,w[1]>1?w[1]=1:w[1]<=0&&(w[1]=0),HSVtoRGB(w[0],w[1],w[2])}function addBrightnessToRGB(_,S){var w=RGBtoHSV(_[0]*255,_[1]*255,_[2]*255);return w[2]+=S,w[2]>1?w[2]=1:w[2]<0&&(w[2]=0),HSVtoRGB(w[0],w[1],w[2])}function addHueToRGB(_,S){var w=RGBtoHSV(_[0]*255,_[1]*255,_[2]*255);return w[0]+=S/360,w[0]>1?w[0]-=1:w[0]<0&&(w[0]+=1),HSVtoRGB(w[0],w[1],w[2])}var rgbToHex=(function(){var _=[],S,w;for(S=0;S<256;S+=1)w=S.toString(16),_[S]=w.length===1?"0"+w:w;return function(E,T,A){return E<0&&(E=0),T<0&&(T=0),A<0&&(A=0),"#"+_[E]+_[T]+_[A]}})(),setSubframeEnabled=function(S){subframeEnabled=!!S},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(S){expressionsPlugin=S},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(S){expressionsInterfaces=S},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(S){defaultCurveSegments=S},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(S){idPrefix$1=S};function createNS(_){return document.createElementNS(svgNS,_)}function _typeof$5(_){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof$5(_)}var dataManager=(function(){var _=1,S=[],w,E,T={onmessage:function(){},postMessage:function(V){w({data:V})}},A={postMessage:function(V){T.onmessage({data:V})}};function k(I){if(window.Worker&&window.Blob&&getWebWorker()){var V=new Blob(["var _workerSelf = self; self.onmessage = ",I.toString()],{type:"text/javascript"}),B=URL.createObjectURL(V);return new Worker(B)}return w=I,T}function x(){E||(E=k(function(V){function B(){function z(ae,Q){var ie,Z,J=ae.length,ue,pe,Re,me;for(Z=0;Z<J;Z+=1)if(ie=ae[Z],"ks"in ie&&!ie.completed){if(ie.completed=!0,ie.hasMask){var ge=ie.masksProperties;for(pe=ge.length,ue=0;ue<pe;ue+=1)if(ge[ue].pt.k.i)H(ge[ue].pt.k);else for(me=ge[ue].pt.k.length,Re=0;Re<me;Re+=1)ge[ue].pt.k[Re].s&&H(ge[ue].pt.k[Re].s[0]),ge[ue].pt.k[Re].e&&H(ge[ue].pt.k[Re].e[0])}ie.ty===0?(ie.layers=F(ie.refId,Q),z(ie.layers,Q)):ie.ty===4?$(ie.shapes):ie.ty===5&&de(ie)}}function O(ae,Q){if(ae){var ie=0,Z=ae.length;for(ie=0;ie<Z;ie+=1)ae[ie].t===1&&(ae[ie].data.layers=F(ae[ie].data.refId,Q),z(ae[ie].data.layers,Q))}}function L(ae,Q){for(var ie=0,Z=Q.length;ie<Z;){if(Q[ie].id===ae)return Q[ie];ie+=1}return null}function F(ae,Q){var ie=L(ae,Q);return ie?ie.layers.__used?JSON.parse(JSON.stringify(ie.layers)):(ie.layers.__used=!0,ie.layers):null}function $(ae){var Q,ie=ae.length,Z,J;for(Q=ie-1;Q>=0;Q-=1)if(ae[Q].ty==="sh")if(ae[Q].ks.k.i)H(ae[Q].ks.k);else for(J=ae[Q].ks.k.length,Z=0;Z<J;Z+=1)ae[Q].ks.k[Z].s&&H(ae[Q].ks.k[Z].s[0]),ae[Q].ks.k[Z].e&&H(ae[Q].ks.k[Z].e[0]);else ae[Q].ty==="gr"&&$(ae[Q].it)}function H(ae){var Q,ie=ae.i.length;for(Q=0;Q<ie;Q+=1)ae.i[Q][0]+=ae.v[Q][0],ae.i[Q][1]+=ae.v[Q][1],ae.o[Q][0]+=ae.v[Q][0],ae.o[Q][1]+=ae.v[Q][1]}function j(ae,Q){var ie=Q?Q.split("."):[100,100,100];return ae[0]>ie[0]?!0:ie[0]>ae[0]?!1:ae[1]>ie[1]?!0:ie[1]>ae[1]?!1:ae[2]>ie[2]?!0:ie[2]>ae[2]?!1:null}var q=(function(){var ae=[4,4,14];function Q(Z){var J=Z.t.d;Z.t.d={k:[{s:J,t:0}]}}function ie(Z){var J,ue=Z.length;for(J=0;J<ue;J+=1)Z[J].ty===5&&Q(Z[J])}return function(Z){if(j(ae,Z.v)&&(ie(Z.layers),Z.assets)){var J,ue=Z.assets.length;for(J=0;J<ue;J+=1)Z.assets[J].layers&&ie(Z.assets[J].layers)}}})(),W=(function(){var ae=[4,7,99];return function(Q){if(Q.chars&&!j(ae,Q.v)){var ie,Z=Q.chars.length;for(ie=0;ie<Z;ie+=1){var J=Q.chars[ie];J.data&&J.data.shapes&&($(J.data.shapes),J.data.ip=0,J.data.op=99999,J.data.st=0,J.data.sr=1,J.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},Q.chars[ie].t||(J.data.shapes.push({ty:"no"}),J.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}})(),X=(function(){var ae=[5,7,15];function Q(Z){var J=Z.t.p;typeof J.a=="number"&&(J.a={a:0,k:J.a}),typeof J.p=="number"&&(J.p={a:0,k:J.p}),typeof J.r=="number"&&(J.r={a:0,k:J.r})}function ie(Z){var J,ue=Z.length;for(J=0;J<ue;J+=1)Z[J].ty===5&&Q(Z[J])}return function(Z){if(j(ae,Z.v)&&(ie(Z.layers),Z.assets)){var J,ue=Z.assets.length;for(J=0;J<ue;J+=1)Z.assets[J].layers&&ie(Z.assets[J].layers)}}})(),te=(function(){var ae=[4,1,9];function Q(Z){var J,ue=Z.length,pe,Re;for(J=0;J<ue;J+=1)if(Z[J].ty==="gr")Q(Z[J].it);else if(Z[J].ty==="fl"||Z[J].ty==="st")if(Z[J].c.k&&Z[J].c.k[0].i)for(Re=Z[J].c.k.length,pe=0;pe<Re;pe+=1)Z[J].c.k[pe].s&&(Z[J].c.k[pe].s[0]/=255,Z[J].c.k[pe].s[1]/=255,Z[J].c.k[pe].s[2]/=255,Z[J].c.k[pe].s[3]/=255),Z[J].c.k[pe].e&&(Z[J].c.k[pe].e[0]/=255,Z[J].c.k[pe].e[1]/=255,Z[J].c.k[pe].e[2]/=255,Z[J].c.k[pe].e[3]/=255);else Z[J].c.k[0]/=255,Z[J].c.k[1]/=255,Z[J].c.k[2]/=255,Z[J].c.k[3]/=255}function ie(Z){var J,ue=Z.length;for(J=0;J<ue;J+=1)Z[J].ty===4&&Q(Z[J].shapes)}return function(Z){if(j(ae,Z.v)&&(ie(Z.layers),Z.assets)){var J,ue=Z.assets.length;for(J=0;J<ue;J+=1)Z.assets[J].layers&&ie(Z.assets[J].layers)}}})(),ee=(function(){var ae=[4,4,18];function Q(Z){var J,ue=Z.length,pe,Re;for(J=ue-1;J>=0;J-=1)if(Z[J].ty==="sh")if(Z[J].ks.k.i)Z[J].ks.k.c=Z[J].closed;else for(Re=Z[J].ks.k.length,pe=0;pe<Re;pe+=1)Z[J].ks.k[pe].s&&(Z[J].ks.k[pe].s[0].c=Z[J].closed),Z[J].ks.k[pe].e&&(Z[J].ks.k[pe].e[0].c=Z[J].closed);else Z[J].ty==="gr"&&Q(Z[J].it)}function ie(Z){var J,ue,pe=Z.length,Re,me,ge,we;for(ue=0;ue<pe;ue+=1){if(J=Z[ue],J.hasMask){var oe=J.masksProperties;for(me=oe.length,Re=0;Re<me;Re+=1)if(oe[Re].pt.k.i)oe[Re].pt.k.c=oe[Re].cl;else for(we=oe[Re].pt.k.length,ge=0;ge<we;ge+=1)oe[Re].pt.k[ge].s&&(oe[Re].pt.k[ge].s[0].c=oe[Re].cl),oe[Re].pt.k[ge].e&&(oe[Re].pt.k[ge].e[0].c=oe[Re].cl)}J.ty===4&&Q(J.shapes)}}return function(Z){if(j(ae,Z.v)&&(ie(Z.layers),Z.assets)){var J,ue=Z.assets.length;for(J=0;J<ue;J+=1)Z.assets[J].layers&&ie(Z.assets[J].layers)}}})();function G(ae){ae.__complete||(te(ae),q(ae),W(ae),X(ae),ee(ae),z(ae.layers,ae.assets),O(ae.chars,ae.assets),ae.__complete=!0)}function de(ae){ae.t.a.length===0&&"m"in ae.t.p}var le={};return le.completeData=G,le.checkColors=te,le.checkChars=W,le.checkPathProperties=X,le.checkShapes=ee,le.completeLayers=z,le}if(A.dataManager||(A.dataManager=B()),A.assetLoader||(A.assetLoader=(function(){function z(L){var F=L.getResponseHeader("content-type");return F&&L.responseType==="json"&&F.indexOf("json")!==-1||L.response&&_typeof$5(L.response)==="object"?L.response:L.response&&typeof L.response=="string"?JSON.parse(L.response):L.responseText?JSON.parse(L.responseText):null}function O(L,F,$,H){var j,q=new XMLHttpRequest;try{q.responseType="json"}catch{}q.onreadystatechange=function(){if(q.readyState===4)if(q.status===200)j=z(q),$(j);else try{j=z(q),$(j)}catch(W){H&&H(W)}};try{q.open(["G","E","T"].join(""),L,!0)}catch{q.open(["G","E","T"].join(""),F+"/"+L,!0)}q.send()}return{load:O}})()),V.data.type==="loadAnimation")A.assetLoader.load(V.data.path,V.data.fullPath,function(z){A.dataManager.completeData(z),A.postMessage({id:V.data.id,payload:z,status:"success"})},function(){A.postMessage({id:V.data.id,status:"error"})});else if(V.data.type==="complete"){var D=V.data.animation;A.dataManager.completeData(D),A.postMessage({id:V.data.id,payload:D,status:"success"})}else V.data.type==="loadData"&&A.assetLoader.load(V.data.path,V.data.fullPath,function(z){A.postMessage({id:V.data.id,payload:z,status:"success"})},function(){A.postMessage({id:V.data.id,status:"error"})})}),E.onmessage=function(I){var V=I.data,B=V.id,D=S[B];S[B]=null,V.status==="success"?D.onComplete(V.payload):D.onError&&D.onError()})}function R(I,V){_+=1;var B="processId_"+_;return S[B]={onComplete:I,onError:V},B}function P(I,V,B){x();var D=R(V,B);E.postMessage({type:"loadAnimation",path:I,fullPath:window.location.origin+window.location.pathname,id:D})}function M(I,V,B){x();var D=R(V,B);E.postMessage({type:"loadData",path:I,fullPath:window.location.origin+window.location.pathname,id:D})}function N(I,V,B){x();var D=R(V,B);E.postMessage({type:"complete",animation:I,id:D})}return{loadAnimation:P,loadData:M,completeAnimation:N}})(),ImagePreloader=(function(){var _=(function(){var O=createTag("canvas");O.width=1,O.height=1;var L=O.getContext("2d");return L.fillStyle="rgba(0,0,0,0)",L.fillRect(0,0,1,1),O})();function S(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function w(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function E(O,L,F){var $="";if(O.e)$=O.p;else if(L){var H=O.p;H.indexOf("images/")!==-1&&(H=H.split("/")[1]),$=L+H}else $=F,$+=O.u?O.u:"",$+=O.p;return $}function T(O){var L=0,F=setInterval((function(){var $=O.getBBox();($.width||L>500)&&(this._imageLoaded(),clearInterval(F)),L+=1}).bind(this),50)}function A(O){var L=E(O,this.assetsPath,this.path),F=createNS("image");isSafari?this.testImageLoaded(F):F.addEventListener("load",this._imageLoaded,!1),F.addEventListener("error",(function(){$.img=_,this._imageLoaded()}).bind(this),!1),F.setAttributeNS("http://www.w3.org/1999/xlink","href",L),this._elementHelper.append?this._elementHelper.append(F):this._elementHelper.appendChild(F);var $={img:F,assetData:O};return $}function k(O){var L=E(O,this.assetsPath,this.path),F=createTag("img");F.crossOrigin="anonymous",F.addEventListener("load",this._imageLoaded,!1),F.addEventListener("error",(function(){$.img=_,this._imageLoaded()}).bind(this),!1),F.src=L;var $={img:F,assetData:O};return $}function x(O){var L={assetData:O},F=E(O,this.assetsPath,this.path);return dataManager.loadData(F,(function($){L.img=$,this._footageLoaded()}).bind(this),(function(){L.img={},this._footageLoaded()}).bind(this)),L}function R(O,L){this.imagesLoadedCb=L;var F,$=O.length;for(F=0;F<$;F+=1)O[F].layers||(!O[F].t||O[F].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(O[F]))):O[F].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(O[F]))))}function P(O){this.path=O||""}function M(O){this.assetsPath=O||""}function N(O){for(var L=0,F=this.images.length;L<F;){if(this.images[L].assetData===O)return this.images[L].img;L+=1}return null}function I(){this.imagesLoadedCb=null,this.images.length=0}function V(){return this.totalImages===this.loadedAssets}function B(){return this.totalFootages===this.loadedFootagesCount}function D(O,L){O==="svg"?(this._elementHelper=L,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function z(){this._imageLoaded=S.bind(this),this._footageLoaded=w.bind(this),this.testImageLoaded=T.bind(this),this.createFootageData=x.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return z.prototype={loadAssets:R,setAssetsPath:M,setPath:P,loadedImages:V,loadedFootages:B,destroy:I,getAsset:N,createImgData:k,createImageData:A,imageLoaded:S,footageLoaded:w,setCacheType:D},z})();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(S,w){if(this._cbs[S])for(var E=this._cbs[S],T=0;T<E.length;T+=1)E[T](w)},addEventListener:function(S,w){return this._cbs[S]||(this._cbs[S]=[]),this._cbs[S].push(w),(function(){this.removeEventListener(S,w)}).bind(this)},removeEventListener:function(S,w){if(!w)this._cbs[S]=null;else if(this._cbs[S]){for(var E=0,T=this._cbs[S].length;E<T;)this._cbs[S][E]===w&&(this._cbs[S].splice(E,1),E-=1,T-=1),E+=1;this._cbs[S].length||(this._cbs[S]=null)}}};var markerParser=(function(){function _(S){for(var w=S.split(`\r
`),E={},T,A=0,k=0;k<w.length;k+=1)T=w[k].split(":"),T.length===2&&(E[T[0]]=T[1].trim(),A+=1);if(A===0)throw new Error;return E}return function(S){for(var w=[],E=0;E<S.length;E+=1){var T=S[E],A={time:T.tm,duration:T.dr};try{A.payload=JSON.parse(S[E].cm)}catch{try{A.payload=_(S[E].cm)}catch{A.payload={name:S[E].cm}}}w.push(A)}return w}})(),ProjectInterface=(function(){function _(S){this.compositions.push(S)}return function(){function S(w){for(var E=0,T=this.compositions.length;E<T;){if(this.compositions[E].data&&this.compositions[E].data.nm===w)return this.compositions[E].prepareFrame&&this.compositions[E].data.xt&&this.compositions[E].prepareFrame(this.currentFrame),this.compositions[E].compInterface;E+=1}return null}return S.compositions=[],S.currentFrame=0,S.registerComposition=_,S}})(),renderers={},registerRenderer=function(S,w){renderers[S]=w};function getRenderer(_){return renderers[_]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var _ in renderers)if(renderers[_])return _;return""}function _typeof$4(_){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof$4(_)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(_){(_.wrapper||_.container)&&(this.wrapper=_.wrapper||_.container);var S="svg";_.animType?S=_.animType:_.renderer&&(S=_.renderer);var w=getRenderer(S);this.renderer=new w(this,_.rendererSettings),this.imagePreloader.setCacheType(S,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=S,_.loop===""||_.loop===null||_.loop===void 0||_.loop===!0?this.loop=!0:_.loop===!1?this.loop=!1:this.loop=parseInt(_.loop,10),this.autoplay="autoplay"in _?_.autoplay:!0,this.name=_.name?_.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(_,"autoloadSegments")?_.autoloadSegments:!0,this.assetsPath=_.assetsPath,this.initialSegment=_.initialSegment,_.audioFactory&&this.audioController.setAudioFactory(_.audioFactory),_.animationData?this.setupAnimation(_.animationData):_.path&&(_.path.lastIndexOf("\\")!==-1?this.path=_.path.substr(0,_.path.lastIndexOf("\\")+1):this.path=_.path.substr(0,_.path.lastIndexOf("/")+1),this.fileName=_.path.substr(_.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(_.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(_){dataManager.completeAnimation(_,this.configAnimation)},AnimationItem.prototype.setData=function(_,S){S&&_typeof$4(S)!=="object"&&(S=JSON.parse(S));var w={wrapper:_,animationData:S},E=_.attributes;w.path=E.getNamedItem("data-animation-path")?E.getNamedItem("data-animation-path").value:E.getNamedItem("data-bm-path")?E.getNamedItem("data-bm-path").value:E.getNamedItem("bm-path")?E.getNamedItem("bm-path").value:"",w.animType=E.getNamedItem("data-anim-type")?E.getNamedItem("data-anim-type").value:E.getNamedItem("data-bm-type")?E.getNamedItem("data-bm-type").value:E.getNamedItem("bm-type")?E.getNamedItem("bm-type").value:E.getNamedItem("data-bm-renderer")?E.getNamedItem("data-bm-renderer").value:E.getNamedItem("bm-renderer")?E.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var T=E.getNamedItem("data-anim-loop")?E.getNamedItem("data-anim-loop").value:E.getNamedItem("data-bm-loop")?E.getNamedItem("data-bm-loop").value:E.getNamedItem("bm-loop")?E.getNamedItem("bm-loop").value:"";T==="false"?w.loop=!1:T==="true"?w.loop=!0:T!==""&&(w.loop=parseInt(T,10));var A=E.getNamedItem("data-anim-autoplay")?E.getNamedItem("data-anim-autoplay").value:E.getNamedItem("data-bm-autoplay")?E.getNamedItem("data-bm-autoplay").value:E.getNamedItem("bm-autoplay")?E.getNamedItem("bm-autoplay").value:!0;w.autoplay=A!=="false",w.name=E.getNamedItem("data-name")?E.getNamedItem("data-name").value:E.getNamedItem("data-bm-name")?E.getNamedItem("data-bm-name").value:E.getNamedItem("bm-name")?E.getNamedItem("bm-name").value:"";var k=E.getNamedItem("data-anim-prerender")?E.getNamedItem("data-anim-prerender").value:E.getNamedItem("data-bm-prerender")?E.getNamedItem("data-bm-prerender").value:E.getNamedItem("bm-prerender")?E.getNamedItem("bm-prerender").value:"";k==="false"&&(w.prerender=!1),w.path?this.setParams(w):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(_){_.op>this.animationData.op&&(this.animationData.op=_.op,this.totalFrames=Math.floor(_.op-this.animationData.ip));var S=this.animationData.layers,w,E=S.length,T=_.layers,A,k=T.length;for(A=0;A<k;A+=1)for(w=0;w<E;){if(S[w].id===T[A].id){S[w]=T[A];break}w+=1}if((_.chars||_.fonts)&&(this.renderer.globalData.fontManager.addChars(_.chars),this.renderer.globalData.fontManager.addFonts(_.fonts,this.renderer.globalData.defs)),_.assets)for(E=_.assets.length,w=0;w<E;w+=1)this.animationData.assets.push(_.assets[w]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(_){this.animationData=_;var S=getExpressionsPlugin();S&&S.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var _=this.animationData.segments;if(!_||_.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var S=_.shift();this.timeCompleted=S.time*this.frameRate;var w=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(w,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var _=this.animationData.segments;_||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(_){if(this.renderer)try{this.animationData=_,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(_),_.assets||(_.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(_.assets),this.markers=markerParser(_.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(S){this.triggerConfigError(S)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var _=getExpressionsPlugin();_&&_.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(_,S){var w=typeof _=="number"?_:void 0,E=typeof S=="number"?S:void 0;this.renderer.updateContainerSize(w,E)},AnimationItem.prototype.setSubframe=function(_){this.isSubframeEnabled=!!_},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(_){this.triggerRenderFrameError(_)}},AnimationItem.prototype.play=function(_){_&&this.name!==_||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(_){_&&this.name!==_||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(_){_&&this.name!==_||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(_){_&&this.name!==_||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(_){for(var S,w=0;w<this.markers.length;w+=1)if(S=this.markers[w],S.payload&&S.payload.name===_)return S;return null},AnimationItem.prototype.goToAndStop=function(_,S,w){if(!(w&&this.name!==w)){var E=Number(_);if(isNaN(E)){var T=this.getMarkerData(_);T&&this.goToAndStop(T.time,!0)}else S?this.setCurrentRawFrameValue(_):this.setCurrentRawFrameValue(_*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(_,S,w){if(!(w&&this.name!==w)){var E=Number(_);if(isNaN(E)){var T=this.getMarkerData(_);T&&(T.duration?this.playSegments([T.time,T.time+T.duration],!0):this.goToAndStop(T.time,!0))}else this.goToAndStop(E,S,w);this.play()}},AnimationItem.prototype.advanceTime=function(_){if(!(this.isPaused===!0||this.isLoaded===!1)){var S=this.currentRawFrame+_*this.frameModifier,w=!1;S>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(S>this.totalFrames?S%this.totalFrames:0)||(w=!0,S=this.totalFrames-1):S>=this.totalFrames?(this.playCount+=1,this.checkSegments(S%this.totalFrames)||(this.setCurrentRawFrameValue(S%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(S):S<0?this.checkSegments(S%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+S%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(w=!0,S=0)):this.setCurrentRawFrameValue(S),w&&(this.setCurrentRawFrameValue(S),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(_,S){this.playCount=0,_[1]<_[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=_[0]-_[1],this.timeCompleted=this.totalFrames,this.firstFrame=_[1],this.setCurrentRawFrameValue(this.totalFrames-.001-S)):_[1]>_[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=_[1]-_[0],this.timeCompleted=this.totalFrames,this.firstFrame=_[0],this.setCurrentRawFrameValue(.001+S)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(_,S){var w=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<_?w=_:this.currentRawFrame+this.firstFrame>S&&(w=S-_)),this.firstFrame=_,this.totalFrames=S-_,this.timeCompleted=this.totalFrames,w!==-1&&this.goToAndStop(w,!0)},AnimationItem.prototype.playSegments=function(_,S){if(S&&(this.segments.length=0),_typeof$4(_[0])==="object"){var w,E=_.length;for(w=0;w<E;w+=1)this.segments.push(_[w])}else this.segments.push(_);this.segments.length&&S&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(_){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),_&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(_){return this.segments.length?(this.adjustSegment(this.segments.shift(),_),!0):!1},AnimationItem.prototype.destroy=function(_){_&&this.name!==_||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(_){this.currentRawFrame=_,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(_){this.playSpeed=_,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(_){this.playDirection=_<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(_){this.loop=_},AnimationItem.prototype.setVolume=function(_,S){S&&this.name!==S||this.audioController.setVolume(_)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(_){_&&this.name!==_||this.audioController.mute()},AnimationItem.prototype.unmute=function(_){_&&this.name!==_||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(_){var S="";if(_.e)S=_.p;else if(this.assetsPath){var w=_.p;w.indexOf("images/")!==-1&&(w=w.split("/")[1]),S=this.assetsPath+w}else S=this.path,S+=_.u?_.u:"",S+=_.p;return S},AnimationItem.prototype.getAssetData=function(_){for(var S=0,w=this.assets.length;S<w;){if(_===this.assets[S].id)return this.assets[S];S+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(_){return _?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(_,S,w){try{var E=this.renderer.getElementByPath(_);E.updateDocumentData(S,w)}catch{}},AnimationItem.prototype.trigger=function(_){if(this._cbs&&this._cbs[_])switch(_){case"enterFrame":this.triggerEvent(_,new BMEnterFrameEvent(_,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(_,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(_,new BMCompleteLoopEvent(_,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(_,new BMCompleteEvent(_,this.frameMult));break;case"segmentStart":this.triggerEvent(_,new BMSegmentStartEvent(_,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(_,new BMDestroyEvent(_,this));break;default:this.triggerEvent(_)}_==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(_,this.currentFrame,this.totalFrames,this.frameMult)),_==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(_,this.loop,this.playCount,this.frameMult)),_==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(_,this.frameMult)),_==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(_,this.firstFrame,this.totalFrames)),_==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(_,this))},AnimationItem.prototype.triggerRenderFrameError=function(_){var S=new BMRenderFrameErrorEvent(_,this.currentFrame);this.triggerEvent("error",S),this.onError&&this.onError.call(this,S)},AnimationItem.prototype.triggerConfigError=function(_){var S=new BMConfigErrorEvent(_,this.currentFrame);this.triggerEvent("error",S),this.onError&&this.onError.call(this,S)};var animationManager=(function(){var _={},S=[],w=0,E=0,T=0,A=!0,k=!1;function x(Q){for(var ie=0,Z=Q.target;ie<E;)S[ie].animation===Z&&(S.splice(ie,1),ie-=1,E-=1,Z.isPaused||N()),ie+=1}function R(Q,ie){if(!Q)return null;for(var Z=0;Z<E;){if(S[Z].elem===Q&&S[Z].elem!==null)return S[Z].animation;Z+=1}var J=new AnimationItem;return I(J,Q),J.setData(Q,ie),J}function P(){var Q,ie=S.length,Z=[];for(Q=0;Q<ie;Q+=1)Z.push(S[Q].animation);return Z}function M(){T+=1,te()}function N(){T-=1}function I(Q,ie){Q.addEventListener("destroy",x),Q.addEventListener("_active",M),Q.addEventListener("_idle",N),S.push({elem:ie,animation:Q}),E+=1}function V(Q){var ie=new AnimationItem;return I(ie,null),ie.setParams(Q),ie}function B(Q,ie){var Z;for(Z=0;Z<E;Z+=1)S[Z].animation.setSpeed(Q,ie)}function D(Q,ie){var Z;for(Z=0;Z<E;Z+=1)S[Z].animation.setDirection(Q,ie)}function z(Q){var ie;for(ie=0;ie<E;ie+=1)S[ie].animation.play(Q)}function O(Q){var ie=Q-w,Z;for(Z=0;Z<E;Z+=1)S[Z].animation.advanceTime(ie);w=Q,T&&!k?window.requestAnimationFrame(O):A=!0}function L(Q){w=Q,window.requestAnimationFrame(O)}function F(Q){var ie;for(ie=0;ie<E;ie+=1)S[ie].animation.pause(Q)}function $(Q,ie,Z){var J;for(J=0;J<E;J+=1)S[J].animation.goToAndStop(Q,ie,Z)}function H(Q){var ie;for(ie=0;ie<E;ie+=1)S[ie].animation.stop(Q)}function j(Q){var ie;for(ie=0;ie<E;ie+=1)S[ie].animation.togglePause(Q)}function q(Q){var ie;for(ie=E-1;ie>=0;ie-=1)S[ie].animation.destroy(Q)}function W(Q,ie,Z){var J=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),ue,pe=J.length;for(ue=0;ue<pe;ue+=1)Z&&J[ue].setAttribute("data-bm-type",Z),R(J[ue],Q);if(ie&&pe===0){Z||(Z="svg");var Re=document.getElementsByTagName("body")[0];Re.innerText="";var me=createTag("div");me.style.width="100%",me.style.height="100%",me.setAttribute("data-bm-type",Z),Re.appendChild(me),R(me,Q)}}function X(){var Q;for(Q=0;Q<E;Q+=1)S[Q].animation.resize()}function te(){!k&&T&&A&&(window.requestAnimationFrame(L),A=!1)}function ee(){k=!0}function G(){k=!1,te()}function de(Q,ie){var Z;for(Z=0;Z<E;Z+=1)S[Z].animation.setVolume(Q,ie)}function le(Q){var ie;for(ie=0;ie<E;ie+=1)S[ie].animation.mute(Q)}function ae(Q){var ie;for(ie=0;ie<E;ie+=1)S[ie].animation.unmute(Q)}return _.registerAnimation=R,_.loadAnimation=V,_.setSpeed=B,_.setDirection=D,_.play=z,_.pause=F,_.stop=H,_.togglePause=j,_.searchAnimations=W,_.resize=X,_.goToAndStop=$,_.destroy=q,_.freeze=ee,_.unfreeze=G,_.setVolume=de,_.mute=le,_.unmute=ae,_.getRegisteredAnimations=P,_})(),BezierFactory=(function(){var _={};_.getBezierEasing=w;var S={};function w(L,F,$,H,j){var q=j||("bez_"+L+"_"+F+"_"+$+"_"+H).replace(/\./g,"p");if(S[q])return S[q];var W=new O([L,F,$,H]);return S[q]=W,W}var E=4,T=.001,A=1e-7,k=10,x=11,R=1/(x-1),P=typeof Float32Array=="function";function M(L,F){return 1-3*F+3*L}function N(L,F){return 3*F-6*L}function I(L){return 3*L}function V(L,F,$){return((M(F,$)*L+N(F,$))*L+I(F))*L}function B(L,F,$){return 3*M(F,$)*L*L+2*N(F,$)*L+I(F)}function D(L,F,$,H,j){var q,W,X=0;do W=F+($-F)/2,q=V(W,H,j)-L,q>0?$=W:F=W;while(Math.abs(q)>A&&++X<k);return W}function z(L,F,$,H){for(var j=0;j<E;++j){var q=B(F,$,H);if(q===0)return F;var W=V(F,$,H)-L;F-=W/q}return F}function O(L){this._p=L,this._mSampleValues=P?new Float32Array(x):new Array(x),this._precomputed=!1,this.get=this.get.bind(this)}return O.prototype={get:function(F){var $=this._p[0],H=this._p[1],j=this._p[2],q=this._p[3];return this._precomputed||this._precompute(),$===H&&j===q?F:F===0?0:F===1?1:V(this._getTForX(F),H,q)},_precompute:function(){var F=this._p[0],$=this._p[1],H=this._p[2],j=this._p[3];this._precomputed=!0,(F!==$||H!==j)&&this._calcSampleValues()},_calcSampleValues:function(){for(var F=this._p[0],$=this._p[2],H=0;H<x;++H)this._mSampleValues[H]=V(H*R,F,$)},_getTForX:function(F){for(var $=this._p[0],H=this._p[2],j=this._mSampleValues,q=0,W=1,X=x-1;W!==X&&j[W]<=F;++W)q+=R;--W;var te=(F-j[W])/(j[W+1]-j[W]),ee=q+te*R,G=B(ee,$,H);return G>=T?z(F,ee,$,H):G===0?ee:D(F,q,q+R,$,H)}},_})(),pooling=(function(){function _(S){return S.concat(createSizedArray(S.length))}return{double:_}})(),poolFactory=(function(){return function(_,S,w){var E=0,T=_,A=createSizedArray(T),k={newElement:x,release:R};function x(){var P;return E?(E-=1,P=A[E]):P=S(),P}function R(P){E===T&&(A=pooling.double(A),T*=2),w&&w(P),A[E]=P,E+=1}return k}})(),bezierLengthPool=(function(){function _(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,_)})(),segmentsLengthPool=(function(){function _(){return{lengths:[],totalLength:0}}function S(w){var E,T=w.lengths.length;for(E=0;E<T;E+=1)bezierLengthPool.release(w.lengths[E]);w.lengths.length=0}return poolFactory(8,_,S)})();function bezFunction(){var _=Math;function S(I,V,B,D,z,O){var L=I*D+V*z+B*O-z*D-O*I-B*V;return L>-.001&&L<.001}function w(I,V,B,D,z,O,L,F,$){if(B===0&&O===0&&$===0)return S(I,V,D,z,L,F);var H=_.sqrt(_.pow(D-I,2)+_.pow(z-V,2)+_.pow(O-B,2)),j=_.sqrt(_.pow(L-I,2)+_.pow(F-V,2)+_.pow($-B,2)),q=_.sqrt(_.pow(L-D,2)+_.pow(F-z,2)+_.pow($-O,2)),W;return H>j?H>q?W=H-j-q:W=q-j-H:q>j?W=q-j-H:W=j-H-q,W>-1e-4&&W<1e-4}var E=(function(){return function(I,V,B,D){var z=getDefaultCurveSegments(),O,L,F,$,H,j=0,q,W=[],X=[],te=bezierLengthPool.newElement();for(F=B.length,O=0;O<z;O+=1){for(H=O/(z-1),q=0,L=0;L<F;L+=1)$=bmPow(1-H,3)*I[L]+3*bmPow(1-H,2)*H*B[L]+3*(1-H)*bmPow(H,2)*D[L]+bmPow(H,3)*V[L],W[L]=$,X[L]!==null&&(q+=bmPow(W[L]-X[L],2)),X[L]=W[L];q&&(q=bmSqrt(q),j+=q),te.percents[O]=H,te.lengths[O]=j}return te.addedLength=j,te}})();function T(I){var V=segmentsLengthPool.newElement(),B=I.c,D=I.v,z=I.o,O=I.i,L,F=I._length,$=V.lengths,H=0;for(L=0;L<F-1;L+=1)$[L]=E(D[L],D[L+1],z[L],O[L+1]),H+=$[L].addedLength;return B&&F&&($[L]=E(D[L],D[0],z[L],O[0]),H+=$[L].addedLength),V.totalLength=H,V}function A(I){this.segmentLength=0,this.points=new Array(I)}function k(I,V){this.partialLength=I,this.point=V}var x=(function(){var I={};return function(V,B,D,z){var O=(V[0]+"_"+V[1]+"_"+B[0]+"_"+B[1]+"_"+D[0]+"_"+D[1]+"_"+z[0]+"_"+z[1]).replace(/\./g,"p");if(!I[O]){var L=getDefaultCurveSegments(),F,$,H,j,q,W=0,X,te,ee=null;V.length===2&&(V[0]!==B[0]||V[1]!==B[1])&&S(V[0],V[1],B[0],B[1],V[0]+D[0],V[1]+D[1])&&S(V[0],V[1],B[0],B[1],B[0]+z[0],B[1]+z[1])&&(L=2);var G=new A(L);for(H=D.length,F=0;F<L;F+=1){for(te=createSizedArray(H),q=F/(L-1),X=0,$=0;$<H;$+=1)j=bmPow(1-q,3)*V[$]+3*bmPow(1-q,2)*q*(V[$]+D[$])+3*(1-q)*bmPow(q,2)*(B[$]+z[$])+bmPow(q,3)*B[$],te[$]=j,ee!==null&&(X+=bmPow(te[$]-ee[$],2));X=bmSqrt(X),W+=X,G.points[F]=new k(X,te),ee=te}G.segmentLength=W,I[O]=G}return I[O]}})();function R(I,V){var B=V.percents,D=V.lengths,z=B.length,O=bmFloor((z-1)*I),L=I*V.addedLength,F=0;if(O===z-1||O===0||L===D[O])return B[O];for(var $=D[O]>L?-1:1,H=!0;H;)if(D[O]<=L&&D[O+1]>L?(F=(L-D[O])/(D[O+1]-D[O]),H=!1):O+=$,O<0||O>=z-1){if(O===z-1)return B[O];H=!1}return B[O]+(B[O+1]-B[O])*F}function P(I,V,B,D,z,O){var L=R(z,O),F=1-L,$=_.round((F*F*F*I[0]+(L*F*F+F*L*F+F*F*L)*B[0]+(L*L*F+F*L*L+L*F*L)*D[0]+L*L*L*V[0])*1e3)/1e3,H=_.round((F*F*F*I[1]+(L*F*F+F*L*F+F*F*L)*B[1]+(L*L*F+F*L*L+L*F*L)*D[1]+L*L*L*V[1])*1e3)/1e3;return[$,H]}var M=createTypedArray("float32",8);function N(I,V,B,D,z,O,L){z<0?z=0:z>1&&(z=1);var F=R(z,L);O=O>1?1:O;var $=R(O,L),H,j=I.length,q=1-F,W=1-$,X=q*q*q,te=F*q*q*3,ee=F*F*q*3,G=F*F*F,de=q*q*W,le=F*q*W+q*F*W+q*q*$,ae=F*F*W+q*F*$+F*q*$,Q=F*F*$,ie=q*W*W,Z=F*W*W+q*$*W+q*W*$,J=F*$*W+q*$*$+F*W*$,ue=F*$*$,pe=W*W*W,Re=$*W*W+W*$*W+W*W*$,me=$*$*W+W*$*$+$*W*$,ge=$*$*$;for(H=0;H<j;H+=1)M[H*4]=_.round((X*I[H]+te*B[H]+ee*D[H]+G*V[H])*1e3)/1e3,M[H*4+1]=_.round((de*I[H]+le*B[H]+ae*D[H]+Q*V[H])*1e3)/1e3,M[H*4+2]=_.round((ie*I[H]+Z*B[H]+J*D[H]+ue*V[H])*1e3)/1e3,M[H*4+3]=_.round((pe*I[H]+Re*B[H]+me*D[H]+ge*V[H])*1e3)/1e3;return M}return{getSegmentsLength:T,getNewSegment:N,getPointInSegment:P,buildBezierData:x,pointOnLine2D:S,pointOnLine3D:w}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(_,S){var w=this.offsetTime,E;this.propType==="multidimensional"&&(E=createTypedArray("float32",this.pv.length));for(var T=S.lastIndex,A=T,k=this.keyframes.length-1,x=!0,R,P,M;x;){if(R=this.keyframes[A],P=this.keyframes[A+1],A===k-1&&_>=P.t-w){R.h&&(R=P),T=0;break}if(P.t-w>_){T=A;break}A<k-1?A+=1:(T=0,x=!1)}M=this.keyframesMetadata[A]||{};var N,I,V,B,D,z,O=P.t-w,L=R.t-w,F;if(R.to){M.bezierData||(M.bezierData=bez.buildBezierData(R.s,P.s||R.e,R.to,R.ti));var $=M.bezierData;if(_>=O||_<L){var H=_>=O?$.points.length-1:0;for(I=$.points[H].point.length,N=0;N<I;N+=1)E[N]=$.points[H].point[N]}else{M.__fnct?z=M.__fnct:(z=BezierFactory.getBezierEasing(R.o.x,R.o.y,R.i.x,R.i.y,R.n).get,M.__fnct=z),V=z((_-L)/(O-L));var j=$.segmentLength*V,q,W=S.lastFrame<_&&S._lastKeyframeIndex===A?S._lastAddedLength:0;for(D=S.lastFrame<_&&S._lastKeyframeIndex===A?S._lastPoint:0,x=!0,B=$.points.length;x;){if(W+=$.points[D].partialLength,j===0||V===0||D===$.points.length-1){for(I=$.points[D].point.length,N=0;N<I;N+=1)E[N]=$.points[D].point[N];break}else if(j>=W&&j<W+$.points[D+1].partialLength){for(q=(j-W)/$.points[D+1].partialLength,I=$.points[D].point.length,N=0;N<I;N+=1)E[N]=$.points[D].point[N]+($.points[D+1].point[N]-$.points[D].point[N])*q;break}D<B-1?D+=1:x=!1}S._lastPoint=D,S._lastAddedLength=W-$.points[D].partialLength,S._lastKeyframeIndex=A}}else{var X,te,ee,G,de;if(k=R.s.length,F=P.s||R.e,this.sh&&R.h!==1)if(_>=O)E[0]=F[0],E[1]=F[1],E[2]=F[2];else if(_<=L)E[0]=R.s[0],E[1]=R.s[1],E[2]=R.s[2];else{var le=createQuaternion(R.s),ae=createQuaternion(F),Q=(_-L)/(O-L);quaternionToEuler(E,slerp(le,ae,Q))}else for(A=0;A<k;A+=1)R.h!==1&&(_>=O?V=1:_<L?V=0:(R.o.x.constructor===Array?(M.__fnct||(M.__fnct=[]),M.__fnct[A]?z=M.__fnct[A]:(X=R.o.x[A]===void 0?R.o.x[0]:R.o.x[A],te=R.o.y[A]===void 0?R.o.y[0]:R.o.y[A],ee=R.i.x[A]===void 0?R.i.x[0]:R.i.x[A],G=R.i.y[A]===void 0?R.i.y[0]:R.i.y[A],z=BezierFactory.getBezierEasing(X,te,ee,G).get,M.__fnct[A]=z)):M.__fnct?z=M.__fnct:(X=R.o.x,te=R.o.y,ee=R.i.x,G=R.i.y,z=BezierFactory.getBezierEasing(X,te,ee,G).get,R.keyframeMetadata=z),V=z((_-L)/(O-L)))),F=P.s||R.e,de=R.h===1?R.s[A]:R.s[A]+(F[A]-R.s[A])*V,this.propType==="multidimensional"?E[A]=de:E=de}return S.lastIndex=T,E}function slerp(_,S,w){var E=[],T=_[0],A=_[1],k=_[2],x=_[3],R=S[0],P=S[1],M=S[2],N=S[3],I,V,B,D,z;return V=T*R+A*P+k*M+x*N,V<0&&(V=-V,R=-R,P=-P,M=-M,N=-N),1-V>1e-6?(I=Math.acos(V),B=Math.sin(I),D=Math.sin((1-w)*I)/B,z=Math.sin(w*I)/B):(D=1-w,z=w),E[0]=D*T+z*R,E[1]=D*A+z*P,E[2]=D*k+z*M,E[3]=D*x+z*N,E}function quaternionToEuler(_,S){var w=S[0],E=S[1],T=S[2],A=S[3],k=Math.atan2(2*E*A-2*w*T,1-2*E*E-2*T*T),x=Math.asin(2*w*E+2*T*A),R=Math.atan2(2*w*A-2*E*T,1-2*w*w-2*T*T);_[0]=k/degToRads,_[1]=x/degToRads,_[2]=R/degToRads}function createQuaternion(_){var S=_[0]*degToRads,w=_[1]*degToRads,E=_[2]*degToRads,T=Math.cos(S/2),A=Math.cos(w/2),k=Math.cos(E/2),x=Math.sin(S/2),R=Math.sin(w/2),P=Math.sin(E/2),M=T*A*k-x*R*P,N=x*R*k+T*A*P,I=x*A*k+T*R*P,V=T*R*k-x*A*P;return[N,I,V,M]}function getValueAtCurrentTime(){var _=this.comp.renderedFrame-this.offsetTime,S=this.keyframes[0].t-this.offsetTime,w=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(_===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=w&&_>=w||this._caching.lastFrame<S&&_<S))){this._caching.lastFrame>=_&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var E=this.interpolateValue(_,this._caching);this.pv=E}return this._caching.lastFrame=_,this.pv}function setVValue(_){var S;if(this.propType==="unidimensional")S=_*this.mult,mathAbs(this.v-S)>1e-5&&(this.v=S,this._mdf=!0);else for(var w=0,E=this.v.length;w<E;)S=_[w]*this.mult,mathAbs(this.v[w]-S)>1e-5&&(this.v[w]=S,this._mdf=!0),w+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var _,S=this.effectsSequence.length,w=this.kf?this.pv:this.data.k;for(_=0;_<S;_+=1)w=this.effectsSequence[_](w);this.setVValue(w),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(_){this.effectsSequence.push(_),this.container.addDynamicProperty(this)}function ValueProperty(_,S,w,E){this.propType="unidimensional",this.mult=w||1,this.data=S,this.v=w?S.k*w:S.k,this.pv=S.k,this._mdf=!1,this.elem=_,this.container=E,this.comp=_.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(_,S,w,E){this.propType="multidimensional",this.mult=w||1,this.data=S,this._mdf=!1,this.elem=_,this.container=E,this.comp=_.comp,this.k=!1,this.kf=!1,this.frameId=-1;var T,A=S.k.length;for(this.v=createTypedArray("float32",A),this.pv=createTypedArray("float32",A),this.vel=createTypedArray("float32",A),T=0;T<A;T+=1)this.v[T]=S.k[T]*this.mult,this.pv[T]=S.k[T];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(_,S,w,E){this.propType="unidimensional",this.keyframes=S.k,this.keyframesMetadata=[],this.offsetTime=_.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=S,this.mult=w||1,this.elem=_,this.container=E,this.comp=_.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(_,S,w,E){this.propType="multidimensional";var T,A=S.k.length,k,x,R,P;for(T=0;T<A-1;T+=1)S.k[T].to&&S.k[T].s&&S.k[T+1]&&S.k[T+1].s&&(k=S.k[T].s,x=S.k[T+1].s,R=S.k[T].to,P=S.k[T].ti,(k.length===2&&!(k[0]===x[0]&&k[1]===x[1])&&bez.pointOnLine2D(k[0],k[1],x[0],x[1],k[0]+R[0],k[1]+R[1])&&bez.pointOnLine2D(k[0],k[1],x[0],x[1],x[0]+P[0],x[1]+P[1])||k.length===3&&!(k[0]===x[0]&&k[1]===x[1]&&k[2]===x[2])&&bez.pointOnLine3D(k[0],k[1],k[2],x[0],x[1],x[2],k[0]+R[0],k[1]+R[1],k[2]+R[2])&&bez.pointOnLine3D(k[0],k[1],k[2],x[0],x[1],x[2],x[0]+P[0],x[1]+P[1],x[2]+P[2]))&&(S.k[T].to=null,S.k[T].ti=null),k[0]===x[0]&&k[1]===x[1]&&R[0]===0&&R[1]===0&&P[0]===0&&P[1]===0&&(k.length===2||k[2]===x[2]&&R[2]===0&&P[2]===0)&&(S.k[T].to=null,S.k[T].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=S,this.keyframes=S.k,this.keyframesMetadata=[],this.offsetTime=_.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=w||1,this.elem=_,this.container=E,this.comp=_.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var M=S.k[0].s.length;for(this.v=createTypedArray("float32",M),this.pv=createTypedArray("float32",M),T=0;T<M;T+=1)this.v[T]=initFrame,this.pv[T]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",M)},this.addEffect=addEffect}var PropertyFactory=(function(){function _(w,E,T,A,k){E.sid&&(E=w.globalData.slotManager.getProp(E));var x;if(!E.k.length)x=new ValueProperty(w,E,A,k);else if(typeof E.k[0]=="number")x=new MultiDimensionalProperty(w,E,A,k);else switch(T){case 0:x=new KeyframedValueProperty(w,E,A,k);break;case 1:x=new KeyframedMultidimensionalProperty(w,E,A,k);break}return x.effectsSequence.length&&k.addDynamicProperty(x),x}var S={getProp:_};return S})();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(S){this.dynamicProperties.indexOf(S)===-1&&(this.dynamicProperties.push(S),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var S,w=this.dynamicProperties.length;for(S=0;S<w;S+=1)this.dynamicProperties[S].getValue(),this.dynamicProperties[S]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(S){this.container=S,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=(function(){function _(){return createTypedArray("float32",2)}return poolFactory(8,_)})();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(_,S){this.c=_,this.setLength(S);for(var w=0;w<S;)this.v[w]=pointPool.newElement(),this.o[w]=pointPool.newElement(),this.i[w]=pointPool.newElement(),w+=1},ShapePath.prototype.setLength=function(_){for(;this._maxLength<_;)this.doubleArrayLength();this._length=_},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(_,S,w,E,T){var A;switch(this._length=Math.max(this._length,E+1),this._length>=this._maxLength&&this.doubleArrayLength(),w){case"v":A=this.v;break;case"i":A=this.i;break;case"o":A=this.o;break;default:A=[];break}(!A[E]||A[E]&&!T)&&(A[E]=pointPool.newElement()),A[E][0]=_,A[E][1]=S},ShapePath.prototype.setTripleAt=function(_,S,w,E,T,A,k,x){this.setXYAt(_,S,"v",k,x),this.setXYAt(w,E,"o",k,x),this.setXYAt(T,A,"i",k,x)},ShapePath.prototype.reverse=function(){var _=new ShapePath;_.setPathData(this.c,this._length);var S=this.v,w=this.o,E=this.i,T=0;this.c&&(_.setTripleAt(S[0][0],S[0][1],E[0][0],E[0][1],w[0][0],w[0][1],0,!1),T=1);var A=this._length-1,k=this._length,x;for(x=T;x<k;x+=1)_.setTripleAt(S[A][0],S[A][1],E[A][0],E[A][1],w[A][0],w[A][1],x,!1),A-=1;return _},ShapePath.prototype.length=function(){return this._length};var shapePool=(function(){function _(){return new ShapePath}function S(T){var A=T._length,k;for(k=0;k<A;k+=1)pointPool.release(T.v[k]),pointPool.release(T.i[k]),pointPool.release(T.o[k]),T.v[k]=null,T.i[k]=null,T.o[k]=null;T._length=0,T.c=!1}function w(T){var A=E.newElement(),k,x=T._length===void 0?T.v.length:T._length;for(A.setLength(x),A.c=T.c,k=0;k<x;k+=1)A.setTripleAt(T.v[k][0],T.v[k][1],T.o[k][0],T.o[k][1],T.i[k][0],T.i[k][1],k);return A}var E=poolFactory(4,_,S);return E.clone=w,E})();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(_){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=_,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var _;for(_=0;_<this._length;_+=1)shapePool.release(this.shapes[_]);this._length=0};var shapeCollectionPool=(function(){var _={newShapeCollection:T,release:A},S=0,w=4,E=createSizedArray(w);function T(){var k;return S?(S-=1,k=E[S]):k=new ShapeCollection,k}function A(k){var x,R=k._length;for(x=0;x<R;x+=1)shapePool.release(k.shapes[x]);k._length=0,S===w&&(E=pooling.double(E),w*=2),E[S]=k,S+=1}return _})(),ShapePropertyFactory=(function(){var _=-999999;function S(O,L,F){var $=F.lastIndex,H,j,q,W,X,te,ee,G,de,le=this.keyframes;if(O<le[0].t-this.offsetTime)H=le[0].s[0],q=!0,$=0;else if(O>=le[le.length-1].t-this.offsetTime)H=le[le.length-1].s?le[le.length-1].s[0]:le[le.length-2].e[0],q=!0;else{for(var ae=$,Q=le.length-1,ie=!0,Z,J,ue;ie&&(Z=le[ae],J=le[ae+1],!(J.t-this.offsetTime>O));)ae<Q-1?ae+=1:ie=!1;if(ue=this.keyframesMetadata[ae]||{},q=Z.h===1,$=ae,!q){if(O>=J.t-this.offsetTime)G=1;else if(O<Z.t-this.offsetTime)G=0;else{var pe;ue.__fnct?pe=ue.__fnct:(pe=BezierFactory.getBezierEasing(Z.o.x,Z.o.y,Z.i.x,Z.i.y).get,ue.__fnct=pe),G=pe((O-(Z.t-this.offsetTime))/(J.t-this.offsetTime-(Z.t-this.offsetTime)))}j=J.s?J.s[0]:Z.e[0]}H=Z.s[0]}for(te=L._length,ee=H.i[0].length,F.lastIndex=$,W=0;W<te;W+=1)for(X=0;X<ee;X+=1)de=q?H.i[W][X]:H.i[W][X]+(j.i[W][X]-H.i[W][X])*G,L.i[W][X]=de,de=q?H.o[W][X]:H.o[W][X]+(j.o[W][X]-H.o[W][X])*G,L.o[W][X]=de,de=q?H.v[W][X]:H.v[W][X]+(j.v[W][X]-H.v[W][X])*G,L.v[W][X]=de}function w(){var O=this.comp.renderedFrame-this.offsetTime,L=this.keyframes[0].t-this.offsetTime,F=this.keyframes[this.keyframes.length-1].t-this.offsetTime,$=this._caching.lastFrame;return $!==_&&($<L&&O<L||$>F&&O>F)||(this._caching.lastIndex=$<O?this._caching.lastIndex:0,this.interpolateShape(O,this.pv,this._caching)),this._caching.lastFrame=O,this.pv}function E(){this.paths=this.localShapeCollection}function T(O,L){if(O._length!==L._length||O.c!==L.c)return!1;var F,$=O._length;for(F=0;F<$;F+=1)if(O.v[F][0]!==L.v[F][0]||O.v[F][1]!==L.v[F][1]||O.o[F][0]!==L.o[F][0]||O.o[F][1]!==L.o[F][1]||O.i[F][0]!==L.i[F][0]||O.i[F][1]!==L.i[F][1])return!1;return!0}function A(O){T(this.v,O)||(this.v=shapePool.clone(O),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function k(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var O;this.kf?O=this.pv:this.data.ks?O=this.data.ks.k:O=this.data.pt.k;var L,F=this.effectsSequence.length;for(L=0;L<F;L+=1)O=this.effectsSequence[L](O);this.setVValue(O),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function x(O,L,F){this.propType="shape",this.comp=O.comp,this.container=O,this.elem=O,this.data=L,this.k=!1,this.kf=!1,this._mdf=!1;var $=F===3?L.pt.k:L.ks.k;this.v=shapePool.clone($),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=E,this.effectsSequence=[]}function R(O){this.effectsSequence.push(O),this.container.addDynamicProperty(this)}x.prototype.interpolateShape=S,x.prototype.getValue=k,x.prototype.setVValue=A,x.prototype.addEffect=R;function P(O,L,F){this.propType="shape",this.comp=O.comp,this.elem=O,this.container=O,this.offsetTime=O.data.st,this.keyframes=F===3?L.pt.k:L.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var $=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,$),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=_,this.reset=E,this._caching={lastFrame:_,lastIndex:0},this.effectsSequence=[w.bind(this)]}P.prototype.getValue=k,P.prototype.interpolateShape=S,P.prototype.setVValue=A,P.prototype.addEffect=R;var M=(function(){var O=roundCorner;function L(F,$){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=$.d,this.elem=F,this.comp=F.comp,this.frameId=-1,this.initDynamicPropertyContainer(F),this.p=PropertyFactory.getProp(F,$.p,1,0,this),this.s=PropertyFactory.getProp(F,$.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return L.prototype={reset:E,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var $=this.p.v[0],H=this.p.v[1],j=this.s.v[0]/2,q=this.s.v[1]/2,W=this.d!==3,X=this.v;X.v[0][0]=$,X.v[0][1]=H-q,X.v[1][0]=W?$+j:$-j,X.v[1][1]=H,X.v[2][0]=$,X.v[2][1]=H+q,X.v[3][0]=W?$-j:$+j,X.v[3][1]=H,X.i[0][0]=W?$-j*O:$+j*O,X.i[0][1]=H-q,X.i[1][0]=W?$+j:$-j,X.i[1][1]=H-q*O,X.i[2][0]=W?$+j*O:$-j*O,X.i[2][1]=H+q,X.i[3][0]=W?$-j:$+j,X.i[3][1]=H+q*O,X.o[0][0]=W?$+j*O:$-j*O,X.o[0][1]=H-q,X.o[1][0]=W?$+j:$-j,X.o[1][1]=H+q*O,X.o[2][0]=W?$-j*O:$+j*O,X.o[2][1]=H+q,X.o[3][0]=W?$-j:$+j,X.o[3][1]=H-q*O}},extendPrototype([DynamicPropertyContainer],L),L})(),N=(function(){function O(L,F){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=L,this.comp=L.comp,this.data=F,this.frameId=-1,this.d=F.d,this.initDynamicPropertyContainer(L),F.sy===1?(this.ir=PropertyFactory.getProp(L,F.ir,0,0,this),this.is=PropertyFactory.getProp(L,F.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(L,F.pt,0,0,this),this.p=PropertyFactory.getProp(L,F.p,1,0,this),this.r=PropertyFactory.getProp(L,F.r,0,degToRads,this),this.or=PropertyFactory.getProp(L,F.or,0,0,this),this.os=PropertyFactory.getProp(L,F.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return O.prototype={reset:E,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var F=Math.floor(this.pt.v)*2,$=Math.PI*2/F,H=!0,j=this.or.v,q=this.ir.v,W=this.os.v,X=this.is.v,te=2*Math.PI*j/(F*2),ee=2*Math.PI*q/(F*2),G,de,le,ae,Q=-Math.PI/2;Q+=this.r.v;var ie=this.data.d===3?-1:1;for(this.v._length=0,G=0;G<F;G+=1){de=H?j:q,le=H?W:X,ae=H?te:ee;var Z=de*Math.cos(Q),J=de*Math.sin(Q),ue=Z===0&&J===0?0:J/Math.sqrt(Z*Z+J*J),pe=Z===0&&J===0?0:-Z/Math.sqrt(Z*Z+J*J);Z+=+this.p.v[0],J+=+this.p.v[1],this.v.setTripleAt(Z,J,Z-ue*ae*le*ie,J-pe*ae*le*ie,Z+ue*ae*le*ie,J+pe*ae*le*ie,G,!0),H=!H,Q+=$*ie}},convertPolygonToPath:function(){var F=Math.floor(this.pt.v),$=Math.PI*2/F,H=this.or.v,j=this.os.v,q=2*Math.PI*H/(F*4),W,X=-Math.PI*.5,te=this.data.d===3?-1:1;for(X+=this.r.v,this.v._length=0,W=0;W<F;W+=1){var ee=H*Math.cos(X),G=H*Math.sin(X),de=ee===0&&G===0?0:G/Math.sqrt(ee*ee+G*G),le=ee===0&&G===0?0:-ee/Math.sqrt(ee*ee+G*G);ee+=+this.p.v[0],G+=+this.p.v[1],this.v.setTripleAt(ee,G,ee-de*q*j*te,G-le*q*j*te,ee+de*q*j*te,G+le*q*j*te,W,!0),X+=$*te}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],O),O})(),I=(function(){function O(L,F){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=L,this.comp=L.comp,this.frameId=-1,this.d=F.d,this.initDynamicPropertyContainer(L),this.p=PropertyFactory.getProp(L,F.p,1,0,this),this.s=PropertyFactory.getProp(L,F.s,1,0,this),this.r=PropertyFactory.getProp(L,F.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return O.prototype={convertRectToPath:function(){var F=this.p.v[0],$=this.p.v[1],H=this.s.v[0]/2,j=this.s.v[1]/2,q=bmMin(H,j,this.r.v),W=q*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(F+H,$-j+q,F+H,$-j+q,F+H,$-j+W,0,!0),this.v.setTripleAt(F+H,$+j-q,F+H,$+j-W,F+H,$+j-q,1,!0),q!==0?(this.v.setTripleAt(F+H-q,$+j,F+H-q,$+j,F+H-W,$+j,2,!0),this.v.setTripleAt(F-H+q,$+j,F-H+W,$+j,F-H+q,$+j,3,!0),this.v.setTripleAt(F-H,$+j-q,F-H,$+j-q,F-H,$+j-W,4,!0),this.v.setTripleAt(F-H,$-j+q,F-H,$-j+W,F-H,$-j+q,5,!0),this.v.setTripleAt(F-H+q,$-j,F-H+q,$-j,F-H+W,$-j,6,!0),this.v.setTripleAt(F+H-q,$-j,F+H-W,$-j,F+H-q,$-j,7,!0)):(this.v.setTripleAt(F-H,$+j,F-H+W,$+j,F-H,$+j,2),this.v.setTripleAt(F-H,$-j,F-H,$-j+W,F-H,$-j,3))):(this.v.setTripleAt(F+H,$-j+q,F+H,$-j+W,F+H,$-j+q,0,!0),q!==0?(this.v.setTripleAt(F+H-q,$-j,F+H-q,$-j,F+H-W,$-j,1,!0),this.v.setTripleAt(F-H+q,$-j,F-H+W,$-j,F-H+q,$-j,2,!0),this.v.setTripleAt(F-H,$-j+q,F-H,$-j+q,F-H,$-j+W,3,!0),this.v.setTripleAt(F-H,$+j-q,F-H,$+j-W,F-H,$+j-q,4,!0),this.v.setTripleAt(F-H+q,$+j,F-H+q,$+j,F-H+W,$+j,5,!0),this.v.setTripleAt(F+H-q,$+j,F+H-W,$+j,F+H-q,$+j,6,!0),this.v.setTripleAt(F+H,$+j-q,F+H,$+j-q,F+H,$+j-W,7,!0)):(this.v.setTripleAt(F-H,$-j,F-H+W,$-j,F-H,$-j,1,!0),this.v.setTripleAt(F-H,$+j,F-H,$+j-W,F-H,$+j,2,!0),this.v.setTripleAt(F+H,$+j,F+H-W,$+j,F+H,$+j,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:E},extendPrototype([DynamicPropertyContainer],O),O})();function V(O,L,F){var $;if(F===3||F===4){var H=F===3?L.pt:L.ks,j=H.k;j.length?$=new P(O,L,F):$=new x(O,L,F)}else F===5?$=new I(O,L):F===6?$=new M(O,L):F===7&&($=new N(O,L));return $.k&&O.addDynamicProperty($),$}function B(){return x}function D(){return P}var z={};return z.getShapeProp=V,z.getConstructorFunction=B,z.getKeyframedConstructorFunction=D,z})();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=(function(){var _=Math.cos,S=Math.sin,w=Math.tan,E=Math.round;function T(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function A(Z){if(Z===0)return this;var J=_(Z),ue=S(Z);return this._t(J,-ue,0,0,ue,J,0,0,0,0,1,0,0,0,0,1)}function k(Z){if(Z===0)return this;var J=_(Z),ue=S(Z);return this._t(1,0,0,0,0,J,-ue,0,0,ue,J,0,0,0,0,1)}function x(Z){if(Z===0)return this;var J=_(Z),ue=S(Z);return this._t(J,0,ue,0,0,1,0,0,-ue,0,J,0,0,0,0,1)}function R(Z){if(Z===0)return this;var J=_(Z),ue=S(Z);return this._t(J,-ue,0,0,ue,J,0,0,0,0,1,0,0,0,0,1)}function P(Z,J){return this._t(1,J,Z,1,0,0)}function M(Z,J){return this.shear(w(Z),w(J))}function N(Z,J){var ue=_(J),pe=S(J);return this._t(ue,pe,0,0,-pe,ue,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,w(Z),1,0,0,0,0,1,0,0,0,0,1)._t(ue,-pe,0,0,pe,ue,0,0,0,0,1,0,0,0,0,1)}function I(Z,J,ue){return!ue&&ue!==0&&(ue=1),Z===1&&J===1&&ue===1?this:this._t(Z,0,0,0,0,J,0,0,0,0,ue,0,0,0,0,1)}function V(Z,J,ue,pe,Re,me,ge,we,oe,ce,ye,xe,Ae,se,K,ne){return this.props[0]=Z,this.props[1]=J,this.props[2]=ue,this.props[3]=pe,this.props[4]=Re,this.props[5]=me,this.props[6]=ge,this.props[7]=we,this.props[8]=oe,this.props[9]=ce,this.props[10]=ye,this.props[11]=xe,this.props[12]=Ae,this.props[13]=se,this.props[14]=K,this.props[15]=ne,this}function B(Z,J,ue){return ue=ue||0,Z!==0||J!==0||ue!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Z,J,ue,1):this}function D(Z,J,ue,pe,Re,me,ge,we,oe,ce,ye,xe,Ae,se,K,ne){var fe=this.props;if(Z===1&&J===0&&ue===0&&pe===0&&Re===0&&me===1&&ge===0&&we===0&&oe===0&&ce===0&&ye===1&&xe===0)return fe[12]=fe[12]*Z+fe[15]*Ae,fe[13]=fe[13]*me+fe[15]*se,fe[14]=fe[14]*ye+fe[15]*K,fe[15]*=ne,this._identityCalculated=!1,this;var Ee=fe[0],be=fe[1],Te=fe[2],Ne=fe[3],ve=fe[4],Oe=fe[5],Pe=fe[6],Se=fe[7],Ce=fe[8],Fe=fe[9],$e=fe[10],De=fe[11],ze=fe[12],Ve=fe[13],We=fe[14],Ze=fe[15];return fe[0]=Ee*Z+be*Re+Te*oe+Ne*Ae,fe[1]=Ee*J+be*me+Te*ce+Ne*se,fe[2]=Ee*ue+be*ge+Te*ye+Ne*K,fe[3]=Ee*pe+be*we+Te*xe+Ne*ne,fe[4]=ve*Z+Oe*Re+Pe*oe+Se*Ae,fe[5]=ve*J+Oe*me+Pe*ce+Se*se,fe[6]=ve*ue+Oe*ge+Pe*ye+Se*K,fe[7]=ve*pe+Oe*we+Pe*xe+Se*ne,fe[8]=Ce*Z+Fe*Re+$e*oe+De*Ae,fe[9]=Ce*J+Fe*me+$e*ce+De*se,fe[10]=Ce*ue+Fe*ge+$e*ye+De*K,fe[11]=Ce*pe+Fe*we+$e*xe+De*ne,fe[12]=ze*Z+Ve*Re+We*oe+Ze*Ae,fe[13]=ze*J+Ve*me+We*ce+Ze*se,fe[14]=ze*ue+Ve*ge+We*ye+Ze*K,fe[15]=ze*pe+Ve*we+We*xe+Ze*ne,this._identityCalculated=!1,this}function z(Z){var J=Z.props;return this.transform(J[0],J[1],J[2],J[3],J[4],J[5],J[6],J[7],J[8],J[9],J[10],J[11],J[12],J[13],J[14],J[15])}function O(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function L(Z){for(var J=0;J<16;){if(Z.props[J]!==this.props[J])return!1;J+=1}return!0}function F(Z){var J;for(J=0;J<16;J+=1)Z.props[J]=this.props[J];return Z}function $(Z){var J;for(J=0;J<16;J+=1)this.props[J]=Z[J]}function H(Z,J,ue){return{x:Z*this.props[0]+J*this.props[4]+ue*this.props[8]+this.props[12],y:Z*this.props[1]+J*this.props[5]+ue*this.props[9]+this.props[13],z:Z*this.props[2]+J*this.props[6]+ue*this.props[10]+this.props[14]}}function j(Z,J,ue){return Z*this.props[0]+J*this.props[4]+ue*this.props[8]+this.props[12]}function q(Z,J,ue){return Z*this.props[1]+J*this.props[5]+ue*this.props[9]+this.props[13]}function W(Z,J,ue){return Z*this.props[2]+J*this.props[6]+ue*this.props[10]+this.props[14]}function X(){var Z=this.props[0]*this.props[5]-this.props[1]*this.props[4],J=this.props[5]/Z,ue=-this.props[1]/Z,pe=-this.props[4]/Z,Re=this.props[0]/Z,me=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Z,ge=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Z,we=new Matrix;return we.props[0]=J,we.props[1]=ue,we.props[4]=pe,we.props[5]=Re,we.props[12]=me,we.props[13]=ge,we}function te(Z){var J=this.getInverseMatrix();return J.applyToPointArray(Z[0],Z[1],Z[2]||0)}function ee(Z){var J,ue=Z.length,pe=[];for(J=0;J<ue;J+=1)pe[J]=te(Z[J]);return pe}function G(Z,J,ue){var pe=createTypedArray("float32",6);if(this.isIdentity())pe[0]=Z[0],pe[1]=Z[1],pe[2]=J[0],pe[3]=J[1],pe[4]=ue[0],pe[5]=ue[1];else{var Re=this.props[0],me=this.props[1],ge=this.props[4],we=this.props[5],oe=this.props[12],ce=this.props[13];pe[0]=Z[0]*Re+Z[1]*ge+oe,pe[1]=Z[0]*me+Z[1]*we+ce,pe[2]=J[0]*Re+J[1]*ge+oe,pe[3]=J[0]*me+J[1]*we+ce,pe[4]=ue[0]*Re+ue[1]*ge+oe,pe[5]=ue[0]*me+ue[1]*we+ce}return pe}function de(Z,J,ue){var pe;return this.isIdentity()?pe=[Z,J,ue]:pe=[Z*this.props[0]+J*this.props[4]+ue*this.props[8]+this.props[12],Z*this.props[1]+J*this.props[5]+ue*this.props[9]+this.props[13],Z*this.props[2]+J*this.props[6]+ue*this.props[10]+this.props[14]],pe}function le(Z,J){if(this.isIdentity())return Z+","+J;var ue=this.props;return Math.round((Z*ue[0]+J*ue[4]+ue[12])*100)/100+","+Math.round((Z*ue[1]+J*ue[5]+ue[13])*100)/100}function ae(){for(var Z=0,J=this.props,ue="matrix3d(",pe=1e4;Z<16;)ue+=E(J[Z]*pe)/pe,ue+=Z===15?")":",",Z+=1;return ue}function Q(Z){var J=1e4;return Z<1e-6&&Z>0||Z>-1e-6&&Z<0?E(Z*J)/J:Z}function ie(){var Z=this.props,J=Q(Z[0]),ue=Q(Z[1]),pe=Q(Z[4]),Re=Q(Z[5]),me=Q(Z[12]),ge=Q(Z[13]);return"matrix("+J+","+ue+","+pe+","+Re+","+me+","+ge+")"}return function(){this.reset=T,this.rotate=A,this.rotateX=k,this.rotateY=x,this.rotateZ=R,this.skew=M,this.skewFromAxis=N,this.shear=P,this.scale=I,this.setTransform=V,this.translate=B,this.transform=D,this.multiply=z,this.applyToPoint=H,this.applyToX=j,this.applyToY=q,this.applyToZ=W,this.applyToPointArray=de,this.applyToTriplePoints=G,this.applyToPointStringified=le,this.toCSS=ae,this.to2dCSS=ie,this.clone=F,this.cloneFromProps=$,this.equals=L,this.inversePoints=ee,this.inversePoint=te,this.getInverseMatrix=X,this._t=this.transform,this.isIdentity=O,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}})();function _typeof$3(_){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof$3(_)}var lottie={};function setLocation(_){setLocationHref(_)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(_){setSubframeEnabled(_)}function setPrefix(_){setIdPrefix(_)}function loadAnimation(_){return animationManager.loadAnimation(_)}function setQuality(_){if(typeof _=="string")switch(_){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(_)&&_>1&&setDefaultCurveSegments(_)}function inBrowser(){return typeof navigator<"u"}function installPlugin(_,S){_==="expressions"&&setExpressionsPlugin(S)}function getFactory(_){switch(_){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.13.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(_){for(var S=queryString.split("&"),w=0;w<S.length;w+=1){var E=S[w].split("=");if(decodeURIComponent(E[0])==_)return decodeURIComponent(E[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports$1)!=="object"&&(window.bodymovin=lottie)}catch(_){}var ShapeModifiers=(function(){var _={},S={};_.registerModifier=w,_.getModifier=E;function w(T,A){S[T]||(S[T]=A)}function E(T,A,k){return new S[T](A,k)}return _})();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(_){if(!this.closed){_.sh.container.addDynamicProperty(_.sh);var S={shape:_.sh,data:_,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(S),this.addShapeToModifier(S),this._isAnimated&&_.setAsAnimated()}},ShapeModifier.prototype.init=function(_,S){this.shapes=[],this.elem=_,this.initDynamicPropertyContainer(_),this.initModifierProperties(_,S),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(_,S){this.s=PropertyFactory.getProp(_,S.s,0,.01,this),this.e=PropertyFactory.getProp(_,S.e,0,.01,this),this.o=PropertyFactory.getProp(_,S.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=S.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(_){_.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(_,S,w,E,T){var A=[];S<=1?A.push({s:_,e:S}):_>=1?A.push({s:_-1,e:S-1}):(A.push({s:_,e:1}),A.push({s:0,e:S-1}));var k=[],x,R=A.length,P;for(x=0;x<R;x+=1)if(P=A[x],!(P.e*T<E||P.s*T>E+w)){var M,N;P.s*T<=E?M=0:M=(P.s*T-E)/w,P.e*T>=E+w?N=1:N=(P.e*T-E)/w,k.push([M,N])}return k.length||k.push([0,0]),k},TrimModifier.prototype.releasePathsData=function(_){var S,w=_.length;for(S=0;S<w;S+=1)segmentsLengthPool.release(_[S]);return _.length=0,_},TrimModifier.prototype.processShapes=function(_){var S,w;if(this._mdf||_){var E=this.o.v%360/360;if(E<0&&(E+=1),this.s.v>1?S=1+E:this.s.v<0?S=0+E:S=this.s.v+E,this.e.v>1?w=1+E:this.e.v<0?w=0+E:w=this.e.v+E,S>w){var T=S;S=w,w=T}S=Math.round(S*1e4)*1e-4,w=Math.round(w*1e4)*1e-4,this.sValue=S,this.eValue=w}else S=this.sValue,w=this.eValue;var A,k,x=this.shapes.length,R,P,M,N,I,V=0;if(w===S)for(k=0;k<x;k+=1)this.shapes[k].localShapeCollection.releaseShapes(),this.shapes[k].shape._mdf=!0,this.shapes[k].shape.paths=this.shapes[k].localShapeCollection,this._mdf&&(this.shapes[k].pathsData.length=0);else if(w===1&&S===0||w===0&&S===1){if(this._mdf)for(k=0;k<x;k+=1)this.shapes[k].pathsData.length=0,this.shapes[k].shape._mdf=!0}else{var B=[],D,z;for(k=0;k<x;k+=1)if(D=this.shapes[k],!D.shape._mdf&&!this._mdf&&!_&&this.m!==2)D.shape.paths=D.localShapeCollection;else{if(A=D.shape.paths,P=A._length,I=0,!D.shape._mdf&&D.pathsData.length)I=D.totalShapeLength;else{for(M=this.releasePathsData(D.pathsData),R=0;R<P;R+=1)N=bez.getSegmentsLength(A.shapes[R]),M.push(N),I+=N.totalLength;D.totalShapeLength=I,D.pathsData=M}V+=I,D.shape._mdf=!0}var O=S,L=w,F=0,$;for(k=x-1;k>=0;k-=1)if(D=this.shapes[k],D.shape._mdf){for(z=D.localShapeCollection,z.releaseShapes(),this.m===2&&x>1?($=this.calculateShapeEdges(S,w,D.totalShapeLength,F,V),F+=D.totalShapeLength):$=[[O,L]],P=$.length,R=0;R<P;R+=1){O=$[R][0],L=$[R][1],B.length=0,L<=1?B.push({s:D.totalShapeLength*O,e:D.totalShapeLength*L}):O>=1?B.push({s:D.totalShapeLength*(O-1),e:D.totalShapeLength*(L-1)}):(B.push({s:D.totalShapeLength*O,e:D.totalShapeLength}),B.push({s:0,e:D.totalShapeLength*(L-1)}));var H=this.addShapes(D,B[0]);if(B[0].s!==B[0].e){if(B.length>1){var j=D.shape.paths.shapes[D.shape.paths._length-1];if(j.c){var q=H.pop();this.addPaths(H,z),H=this.addShapes(D,B[1],q)}else this.addPaths(H,z),H=this.addShapes(D,B[1])}this.addPaths(H,z)}}D.shape.paths=z}}},TrimModifier.prototype.addPaths=function(_,S){var w,E=_.length;for(w=0;w<E;w+=1)S.addShape(_[w])},TrimModifier.prototype.addSegment=function(_,S,w,E,T,A,k){T.setXYAt(S[0],S[1],"o",A),T.setXYAt(w[0],w[1],"i",A+1),k&&T.setXYAt(_[0],_[1],"v",A),T.setXYAt(E[0],E[1],"v",A+1)},TrimModifier.prototype.addSegmentFromArray=function(_,S,w,E){S.setXYAt(_[1],_[5],"o",w),S.setXYAt(_[2],_[6],"i",w+1),E&&S.setXYAt(_[0],_[4],"v",w),S.setXYAt(_[3],_[7],"v",w+1)},TrimModifier.prototype.addShapes=function(_,S,w){var E=_.pathsData,T=_.shape.paths.shapes,A,k=_.shape.paths._length,x,R,P=0,M,N,I,V,B=[],D,z=!0;for(w?(N=w._length,D=w._length):(w=shapePool.newElement(),N=0,D=0),B.push(w),A=0;A<k;A+=1){for(I=E[A].lengths,w.c=T[A].c,R=T[A].c?I.length:I.length+1,x=1;x<R;x+=1)if(M=I[x-1],P+M.addedLength<S.s)P+=M.addedLength,w.c=!1;else if(P>S.e){w.c=!1;break}else S.s<=P&&S.e>=P+M.addedLength?(this.addSegment(T[A].v[x-1],T[A].o[x-1],T[A].i[x],T[A].v[x],w,N,z),z=!1):(V=bez.getNewSegment(T[A].v[x-1],T[A].v[x],T[A].o[x-1],T[A].i[x],(S.s-P)/M.addedLength,(S.e-P)/M.addedLength,I[x-1]),this.addSegmentFromArray(V,w,N,z),z=!1,w.c=!1),P+=M.addedLength,N+=1;if(T[A].c&&I.length){if(M=I[x-1],P<=S.e){var O=I[x-1].addedLength;S.s<=P&&S.e>=P+O?(this.addSegment(T[A].v[x-1],T[A].o[x-1],T[A].i[0],T[A].v[0],w,N,z),z=!1):(V=bez.getNewSegment(T[A].v[x-1],T[A].v[0],T[A].o[x-1],T[A].i[0],(S.s-P)/O,(S.e-P)/O,I[x-1]),this.addSegmentFromArray(V,w,N,z),z=!1,w.c=!1)}else w.c=!1;P+=M.addedLength,N+=1}if(w._length&&(w.setXYAt(w.v[D][0],w.v[D][1],"i",D),w.setXYAt(w.v[w._length-1][0],w.v[w._length-1][1],"o",w._length-1)),P>S.e)break;A<k-1&&(w=shapePool.newElement(),z=!0,B.push(w),N=0)}return B};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(_,S){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(_,S.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(_,S){var w=S/100,E=[0,0],T=_._length,A=0;for(A=0;A<T;A+=1)E[0]+=_.v[A][0],E[1]+=_.v[A][1];E[0]/=T,E[1]/=T;var k=shapePool.newElement();k.c=_.c;var x,R,P,M,N,I;for(A=0;A<T;A+=1)x=_.v[A][0]+(E[0]-_.v[A][0])*w,R=_.v[A][1]+(E[1]-_.v[A][1])*w,P=_.o[A][0]+(E[0]-_.o[A][0])*-w,M=_.o[A][1]+(E[1]-_.o[A][1])*-w,N=_.i[A][0]+(E[0]-_.i[A][0])*-w,I=_.i[A][1]+(E[1]-_.i[A][1])*-w,k.setTripleAt(x,R,P,M,N,I,A);return k},PuckerAndBloatModifier.prototype.processShapes=function(_){var S,w,E=this.shapes.length,T,A,k=this.amount.v;if(k!==0){var x,R;for(w=0;w<E;w+=1){if(x=this.shapes[w],R=x.localShapeCollection,!(!x.shape._mdf&&!this._mdf&&!_))for(R.releaseShapes(),x.shape._mdf=!0,S=x.shape.paths.shapes,A=x.shape.paths._length,T=0;T<A;T+=1)R.addShape(this.processPath(S[T],k));x.shape.paths=x.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=(function(){var _=[0,0];function S(R){var P=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||P,this.a&&R.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&R.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&R.skewFromAxis(-this.sk.v,this.sa.v),this.r?R.rotate(-this.r.v):R.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?R.translate(this.px.v,this.py.v,-this.pz.v):R.translate(this.px.v,this.py.v,0):R.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function w(R){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||R){var P;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var M,N;if(P=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(M=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/P,0),N=this.p.getValueAtTime(this.p.keyframes[0].t/P,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(M=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/P,0),N=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/P,0)):(M=this.p.pv,N=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/P,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){M=[],N=[];var I=this.px,V=this.py;I._caching.lastFrame+I.offsetTime<=I.keyframes[0].t?(M[0]=I.getValueAtTime((I.keyframes[0].t+.01)/P,0),M[1]=V.getValueAtTime((V.keyframes[0].t+.01)/P,0),N[0]=I.getValueAtTime(I.keyframes[0].t/P,0),N[1]=V.getValueAtTime(V.keyframes[0].t/P,0)):I._caching.lastFrame+I.offsetTime>=I.keyframes[I.keyframes.length-1].t?(M[0]=I.getValueAtTime(I.keyframes[I.keyframes.length-1].t/P,0),M[1]=V.getValueAtTime(V.keyframes[V.keyframes.length-1].t/P,0),N[0]=I.getValueAtTime((I.keyframes[I.keyframes.length-1].t-.01)/P,0),N[1]=V.getValueAtTime((V.keyframes[V.keyframes.length-1].t-.01)/P,0)):(M=[I.pv,V.pv],N[0]=I.getValueAtTime((I._caching.lastFrame+I.offsetTime-.01)/P,I.offsetTime),N[1]=V.getValueAtTime((V._caching.lastFrame+V.offsetTime-.01)/P,V.offsetTime))}else N=_,M=N;this.v.rotate(-Math.atan2(M[1]-N[1],M[0]-N[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function E(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function T(){}function A(R){this._addDynamicProperty(R),this.elem.addDynamicProperty(R),this._isDirty=!0}function k(R,P,M){if(this.elem=R,this.frameId=-1,this.propType="transform",this.data=P,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(M||R),P.p&&P.p.s?(this.px=PropertyFactory.getProp(R,P.p.x,0,0,this),this.py=PropertyFactory.getProp(R,P.p.y,0,0,this),P.p.z&&(this.pz=PropertyFactory.getProp(R,P.p.z,0,0,this))):this.p=PropertyFactory.getProp(R,P.p||{k:[0,0,0]},1,0,this),P.rx){if(this.rx=PropertyFactory.getProp(R,P.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(R,P.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(R,P.rz,0,degToRads,this),P.or.k[0].ti){var N,I=P.or.k.length;for(N=0;N<I;N+=1)P.or.k[N].to=null,P.or.k[N].ti=null}this.or=PropertyFactory.getProp(R,P.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(R,P.r||{k:0},0,degToRads,this);P.sk&&(this.sk=PropertyFactory.getProp(R,P.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(R,P.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(R,P.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(R,P.s||{k:[100,100,100]},1,.01,this),P.o?this.o=PropertyFactory.getProp(R,P.o,0,.01,R):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}k.prototype={applyToMatrix:S,getValue:w,precalculateMatrix:E,autoOrient:T},extendPrototype([DynamicPropertyContainer],k),k.prototype.addDynamicProperty=A,k.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function x(R,P,M){return new k(R,P,M)}return{getTransformProperty:x}})();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(_,S){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(_,S.c,0,null,this),this.o=PropertyFactory.getProp(_,S.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(_,S.tr,this),this.so=PropertyFactory.getProp(_,S.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(_,S.tr.eo,0,.01,this),this.data=S,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(_,S,w,E,T,A){var k=A?-1:1,x=E.s.v[0]+(1-E.s.v[0])*(1-T),R=E.s.v[1]+(1-E.s.v[1])*(1-T);_.translate(E.p.v[0]*k*T,E.p.v[1]*k*T,E.p.v[2]),S.translate(-E.a.v[0],-E.a.v[1],E.a.v[2]),S.rotate(-E.r.v*k*T),S.translate(E.a.v[0],E.a.v[1],E.a.v[2]),w.translate(-E.a.v[0],-E.a.v[1],E.a.v[2]),w.scale(A?1/x:x,A?1/R:R),w.translate(E.a.v[0],E.a.v[1],E.a.v[2])},RepeaterModifier.prototype.init=function(_,S,w,E){for(this.elem=_,this.arr=S,this.pos=w,this.elemsData=E,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(_),this.initModifierProperties(_,S[w]);w>0;)w-=1,this._elements.unshift(S[w]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(_){var S,w=_.length;for(S=0;S<w;S+=1)_[S]._processed=!1,_[S].ty==="gr"&&this.resetElements(_[S].it)},RepeaterModifier.prototype.cloneElements=function(_){var S=JSON.parse(JSON.stringify(_));return this.resetElements(S),S},RepeaterModifier.prototype.changeGroupRender=function(_,S){var w,E=_.length;for(w=0;w<E;w+=1)_[w]._render=S,_[w].ty==="gr"&&this.changeGroupRender(_[w].it,S)},RepeaterModifier.prototype.processShapes=function(_){var S,w,E,T,A,k=!1;if(this._mdf||_){var x=Math.ceil(this.c.v);if(this._groups.length<x){for(;this._groups.length<x;){var R={it:this.cloneElements(this._elements),ty:"gr"};R.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,R),this._groups.splice(0,0,R),this._currentCopies+=1}this.elem.reloadShapes(),k=!0}A=0;var P;for(E=0;E<=this._groups.length-1;E+=1){if(P=A<x,this._groups[E]._render=P,this.changeGroupRender(this._groups[E].it,P),!P){var M=this.elemsData[E].it,N=M[M.length-1];N.transform.op.v!==0?(N.transform.op._mdf=!0,N.transform.op.v=0):N.transform.op._mdf=!1}A+=1}this._currentCopies=x;var I=this.o.v,V=I%1,B=I>0?Math.floor(I):Math.ceil(I),D=this.pMatrix.props,z=this.rMatrix.props,O=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var L=0;if(I>0){for(;L<B;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),L+=1;V&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,V,!1),L+=V)}else if(I<0){for(;L>B;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),L-=1;V&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-V,!0),L-=V)}E=this.data.m===1?0:this._currentCopies-1,T=this.data.m===1?1:-1,A=this._currentCopies;for(var F,$;A;){if(S=this.elemsData[E].it,w=S[S.length-1].transform.mProps.v.props,$=w.length,S[S.length-1].transform.mProps._mdf=!0,S[S.length-1].transform.op._mdf=!0,S[S.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(E/(this._currentCopies-1)),L!==0){for((E!==0&&T===1||E!==this._currentCopies-1&&T===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7],z[8],z[9],z[10],z[11],z[12],z[13],z[14],z[15]),this.matrix.transform(O[0],O[1],O[2],O[3],O[4],O[5],O[6],O[7],O[8],O[9],O[10],O[11],O[12],O[13],O[14],O[15]),this.matrix.transform(D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7],D[8],D[9],D[10],D[11],D[12],D[13],D[14],D[15]),F=0;F<$;F+=1)w[F]=this.matrix.props[F];this.matrix.reset()}else for(this.matrix.reset(),F=0;F<$;F+=1)w[F]=this.matrix.props[F];L+=1,A-=1,E+=T}}else for(A=this._currentCopies,E=0,T=1;A;)S=this.elemsData[E].it,w=S[S.length-1].transform.mProps.v.props,S[S.length-1].transform.mProps._mdf=!1,S[S.length-1].transform.op._mdf=!1,A-=1,E+=T;return k},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(_,S){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(_,S.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(_,S){var w=shapePool.newElement();w.c=_.c;var E,T=_._length,A,k,x,R,P,M,N=0,I,V,B,D,z,O;for(E=0;E<T;E+=1)A=_.v[E],x=_.o[E],k=_.i[E],A[0]===x[0]&&A[1]===x[1]&&A[0]===k[0]&&A[1]===k[1]?(E===0||E===T-1)&&!_.c?(w.setTripleAt(A[0],A[1],x[0],x[1],k[0],k[1],N),N+=1):(E===0?R=_.v[T-1]:R=_.v[E-1],P=Math.sqrt(Math.pow(A[0]-R[0],2)+Math.pow(A[1]-R[1],2)),M=P?Math.min(P/2,S)/P:0,z=A[0]+(R[0]-A[0])*M,I=z,O=A[1]-(A[1]-R[1])*M,V=O,B=I-(I-A[0])*roundCorner,D=V-(V-A[1])*roundCorner,w.setTripleAt(I,V,B,D,z,O,N),N+=1,E===T-1?R=_.v[0]:R=_.v[E+1],P=Math.sqrt(Math.pow(A[0]-R[0],2)+Math.pow(A[1]-R[1],2)),M=P?Math.min(P/2,S)/P:0,B=A[0]+(R[0]-A[0])*M,I=B,D=A[1]+(R[1]-A[1])*M,V=D,z=I-(I-A[0])*roundCorner,O=V-(V-A[1])*roundCorner,w.setTripleAt(I,V,B,D,z,O,N),N+=1):(w.setTripleAt(_.v[E][0],_.v[E][1],_.o[E][0],_.o[E][1],_.i[E][0],_.i[E][1],N),N+=1);return w},RoundCornersModifier.prototype.processShapes=function(_){var S,w,E=this.shapes.length,T,A,k=this.rd.v;if(k!==0){var x,R;for(w=0;w<E;w+=1){if(x=this.shapes[w],R=x.localShapeCollection,!(!x.shape._mdf&&!this._mdf&&!_))for(R.releaseShapes(),x.shape._mdf=!0,S=x.shape.paths.shapes,A=x.shape.paths._length,T=0;T<A;T+=1)R.addShape(this.processPath(S[T],k));x.shape.paths=x.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(_,S){return Math.abs(_-S)*1e5<=Math.min(Math.abs(_),Math.abs(S))}function floatZero(_){return Math.abs(_)<=1e-5}function lerp(_,S,w){return _*(1-w)+S*w}function lerpPoint(_,S,w){return[lerp(_[0],S[0],w),lerp(_[1],S[1],w)]}function quadRoots(_,S,w){if(_===0)return[];var E=S*S-4*_*w;if(E<0)return[];var T=-S/(2*_);if(E===0)return[T];var A=Math.sqrt(E)/(2*_);return[T-A,T+A]}function polynomialCoefficients(_,S,w,E){return[-_+3*S-3*w+E,3*_-6*S+3*w,-3*_+3*S,_]}function singlePoint(_){return new PolynomialBezier(_,_,_,_,!1)}function PolynomialBezier(_,S,w,E,T){T&&pointEqual(_,S)&&(S=lerpPoint(_,E,1/3)),T&&pointEqual(w,E)&&(w=lerpPoint(_,E,2/3));var A=polynomialCoefficients(_[0],S[0],w[0],E[0]),k=polynomialCoefficients(_[1],S[1],w[1],E[1]);this.a=[A[0],k[0]],this.b=[A[1],k[1]],this.c=[A[2],k[2]],this.d=[A[3],k[3]],this.points=[_,S,w,E]}PolynomialBezier.prototype.point=function(_){return[((this.a[0]*_+this.b[0])*_+this.c[0])*_+this.d[0],((this.a[1]*_+this.b[1])*_+this.c[1])*_+this.d[1]]},PolynomialBezier.prototype.derivative=function(_){return[(3*_*this.a[0]+2*this.b[0])*_+this.c[0],(3*_*this.a[1]+2*this.b[1])*_+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(_){var S=this.derivative(_);return Math.atan2(S[1],S[0])},PolynomialBezier.prototype.normalAngle=function(_){var S=this.derivative(_);return Math.atan2(S[0],S[1])},PolynomialBezier.prototype.inflectionPoints=function(){var _=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(_))return[];var S=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/_,w=S*S-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/_;if(w<0)return[];var E=Math.sqrt(w);return floatZero(E)?E>0&&E<1?[S]:[]:[S-E,S+E].filter(function(T){return T>0&&T<1})},PolynomialBezier.prototype.split=function(_){if(_<=0)return[singlePoint(this.points[0]),this];if(_>=1)return[this,singlePoint(this.points[this.points.length-1])];var S=lerpPoint(this.points[0],this.points[1],_),w=lerpPoint(this.points[1],this.points[2],_),E=lerpPoint(this.points[2],this.points[3],_),T=lerpPoint(S,w,_),A=lerpPoint(w,E,_),k=lerpPoint(T,A,_);return[new PolynomialBezier(this.points[0],S,T,k,!0),new PolynomialBezier(k,A,E,this.points[3],!0)]};function extrema(_,S){var w=_.points[0][S],E=_.points[_.points.length-1][S];if(w>E){var T=E;E=w,w=T}for(var A=quadRoots(3*_.a[S],2*_.b[S],_.c[S]),k=0;k<A.length;k+=1)if(A[k]>0&&A[k]<1){var x=_.point(A[k])[S];x<w?w=x:x>E&&(E=x)}return{min:w,max:E}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var _=this.bounds();return{left:_.x.min,right:_.x.max,top:_.y.min,bottom:_.y.max,width:_.x.max-_.x.min,height:_.y.max-_.y.min,cx:(_.x.max+_.x.min)/2,cy:(_.y.max+_.y.min)/2}};function intersectData(_,S,w){var E=_.boundingBox();return{cx:E.cx,cy:E.cy,width:E.width,height:E.height,bez:_,t:(S+w)/2,t1:S,t2:w}}function splitData(_){var S=_.bez.split(.5);return[intersectData(S[0],_.t1,_.t),intersectData(S[1],_.t,_.t2)]}function boxIntersect(_,S){return Math.abs(_.cx-S.cx)*2<_.width+S.width&&Math.abs(_.cy-S.cy)*2<_.height+S.height}function intersectsImpl(_,S,w,E,T,A){if(boxIntersect(_,S)){if(w>=A||_.width<=E&&_.height<=E&&S.width<=E&&S.height<=E){T.push([_.t,S.t]);return}var k=splitData(_),x=splitData(S);intersectsImpl(k[0],x[0],w+1,E,T,A),intersectsImpl(k[0],x[1],w+1,E,T,A),intersectsImpl(k[1],x[0],w+1,E,T,A),intersectsImpl(k[1],x[1],w+1,E,T,A)}}PolynomialBezier.prototype.intersections=function(_,S,w){S===void 0&&(S=2),w===void 0&&(w=7);var E=[];return intersectsImpl(intersectData(this,0,1),intersectData(_,0,1),0,S,E,w),E},PolynomialBezier.shapeSegment=function(_,S){var w=(S+1)%_.length();return new PolynomialBezier(_.v[S],_.o[S],_.i[w],_.v[w],!0)},PolynomialBezier.shapeSegmentInverted=function(_,S){var w=(S+1)%_.length();return new PolynomialBezier(_.v[w],_.i[w],_.o[S],_.v[S],!0)};function crossProduct(_,S){return[_[1]*S[2]-_[2]*S[1],_[2]*S[0]-_[0]*S[2],_[0]*S[1]-_[1]*S[0]]}function lineIntersection(_,S,w,E){var T=[_[0],_[1],1],A=[S[0],S[1],1],k=[w[0],w[1],1],x=[E[0],E[1],1],R=crossProduct(crossProduct(T,A),crossProduct(k,x));return floatZero(R[2])?null:[R[0]/R[2],R[1]/R[2]]}function polarOffset(_,S,w){return[_[0]+Math.cos(S)*w,_[1]-Math.sin(S)*w]}function pointDistance(_,S){return Math.hypot(_[0]-S[0],_[1]-S[1])}function pointEqual(_,S){return floatEqual(_[0],S[0])&&floatEqual(_[1],S[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(_,S){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(_,S.s,0,null,this),this.frequency=PropertyFactory.getProp(_,S.r,0,null,this),this.pointsType=PropertyFactory.getProp(_,S.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(_,S,w,E,T,A,k){var x=w-Math.PI/2,R=w+Math.PI/2,P=S[0]+Math.cos(w)*E*T,M=S[1]-Math.sin(w)*E*T;_.setTripleAt(P,M,P+Math.cos(x)*A,M-Math.sin(x)*A,P+Math.cos(R)*k,M-Math.sin(R)*k,_.length())}function getPerpendicularVector(_,S){var w=[S[0]-_[0],S[1]-_[1]],E=-Math.PI*.5,T=[Math.cos(E)*w[0]-Math.sin(E)*w[1],Math.sin(E)*w[0]+Math.cos(E)*w[1]];return T}function getProjectingAngle(_,S){var w=S===0?_.length()-1:S-1,E=(S+1)%_.length(),T=_.v[w],A=_.v[E],k=getPerpendicularVector(T,A);return Math.atan2(0,1)-Math.atan2(k[1],k[0])}function zigZagCorner(_,S,w,E,T,A,k){var x=getProjectingAngle(S,w),R=S.v[w%S._length],P=S.v[w===0?S._length-1:w-1],M=S.v[(w+1)%S._length],N=A===2?Math.sqrt(Math.pow(R[0]-P[0],2)+Math.pow(R[1]-P[1],2)):0,I=A===2?Math.sqrt(Math.pow(R[0]-M[0],2)+Math.pow(R[1]-M[1],2)):0;setPoint(_,S.v[w%S._length],x,k,E,I/((T+1)*2),N/((T+1)*2))}function zigZagSegment(_,S,w,E,T,A){for(var k=0;k<E;k+=1){var x=(k+1)/(E+1),R=T===2?Math.sqrt(Math.pow(S.points[3][0]-S.points[0][0],2)+Math.pow(S.points[3][1]-S.points[0][1],2)):0,P=S.normalAngle(x),M=S.point(x);setPoint(_,M,P,A,w,R/((E+1)*2),R/((E+1)*2)),A=-A}return A}ZigZagModifier.prototype.processPath=function(_,S,w,E){var T=_._length,A=shapePool.newElement();if(A.c=_.c,_.c||(T-=1),T===0)return A;var k=-1,x=PolynomialBezier.shapeSegment(_,0);zigZagCorner(A,_,0,S,w,E,k);for(var R=0;R<T;R+=1)k=zigZagSegment(A,x,S,w,E,-k),R===T-1&&!_.c?x=null:x=PolynomialBezier.shapeSegment(_,(R+1)%T),zigZagCorner(A,_,R+1,S,w,E,k);return A},ZigZagModifier.prototype.processShapes=function(_){var S,w,E=this.shapes.length,T,A,k=this.amplitude.v,x=Math.max(0,Math.round(this.frequency.v)),R=this.pointsType.v;if(k!==0){var P,M;for(w=0;w<E;w+=1){if(P=this.shapes[w],M=P.localShapeCollection,!(!P.shape._mdf&&!this._mdf&&!_))for(M.releaseShapes(),P.shape._mdf=!0,S=P.shape.paths.shapes,A=P.shape.paths._length,T=0;T<A;T+=1)M.addShape(this.processPath(S[T],k,x,R));P.shape.paths=P.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(_,S,w){var E=Math.atan2(S[0]-_[0],S[1]-_[1]);return[polarOffset(_,E,w),polarOffset(S,E,w)]}function offsetSegment(_,S){var w,E,T,A,k,x,R;R=linearOffset(_.points[0],_.points[1],S),w=R[0],E=R[1],R=linearOffset(_.points[1],_.points[2],S),T=R[0],A=R[1],R=linearOffset(_.points[2],_.points[3],S),k=R[0],x=R[1];var P=lineIntersection(w,E,T,A);P===null&&(P=E);var M=lineIntersection(k,x,T,A);return M===null&&(M=k),new PolynomialBezier(w,P,M,x)}function joinLines(_,S,w,E,T){var A=S.points[3],k=w.points[0];if(E===3||pointEqual(A,k))return A;if(E===2){var x=-S.tangentAngle(1),R=-w.tangentAngle(0)+Math.PI,P=lineIntersection(A,polarOffset(A,x+Math.PI/2,100),k,polarOffset(k,x+Math.PI/2,100)),M=P?pointDistance(P,A):pointDistance(A,k)/2,N=polarOffset(A,x,2*M*roundCorner);return _.setXYAt(N[0],N[1],"o",_.length()-1),N=polarOffset(k,R,2*M*roundCorner),_.setTripleAt(k[0],k[1],k[0],k[1],N[0],N[1],_.length()),k}var I=pointEqual(A,S.points[2])?S.points[0]:S.points[2],V=pointEqual(k,w.points[1])?w.points[3]:w.points[1],B=lineIntersection(I,A,k,V);return B&&pointDistance(B,A)<T?(_.setTripleAt(B[0],B[1],B[0],B[1],B[0],B[1],_.length()),B):A}function getIntersection(_,S){var w=_.intersections(S);return w.length&&floatEqual(w[0][0],1)&&w.shift(),w.length?w[0]:null}function pruneSegmentIntersection(_,S){var w=_.slice(),E=S.slice(),T=getIntersection(_[_.length-1],S[0]);return T&&(w[_.length-1]=_[_.length-1].split(T[0])[0],E[0]=S[0].split(T[1])[1]),_.length>1&&S.length>1&&(T=getIntersection(_[0],S[S.length-1]),T)?[[_[0].split(T[0])[0]],[S[S.length-1].split(T[1])[1]]]:[w,E]}function pruneIntersections(_){for(var S,w=1;w<_.length;w+=1)S=pruneSegmentIntersection(_[w-1],_[w]),_[w-1]=S[0],_[w]=S[1];return _.length>1&&(S=pruneSegmentIntersection(_[_.length-1],_[0]),_[_.length-1]=S[0],_[0]=S[1]),_}function offsetSegmentSplit(_,S){var w=_.inflectionPoints(),E,T,A,k;if(w.length===0)return[offsetSegment(_,S)];if(w.length===1||floatEqual(w[1],1))return A=_.split(w[0]),E=A[0],T=A[1],[offsetSegment(E,S),offsetSegment(T,S)];A=_.split(w[0]),E=A[0];var x=(w[1]-w[0])/(1-w[0]);return A=A[1].split(x),k=A[0],T=A[1],[offsetSegment(E,S),offsetSegment(k,S),offsetSegment(T,S)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(_,S){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(_,S.a,0,null,this),this.miterLimit=PropertyFactory.getProp(_,S.ml,0,null,this),this.lineJoin=S.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(_,S,w,E){var T=shapePool.newElement();T.c=_.c;var A=_.length();_.c||(A-=1);var k,x,R,P=[];for(k=0;k<A;k+=1)R=PolynomialBezier.shapeSegment(_,k),P.push(offsetSegmentSplit(R,S));if(!_.c)for(k=A-1;k>=0;k-=1)R=PolynomialBezier.shapeSegmentInverted(_,k),P.push(offsetSegmentSplit(R,S));P=pruneIntersections(P);var M=null,N=null;for(k=0;k<P.length;k+=1){var I=P[k];for(N&&(M=joinLines(T,N,I[0],w,E)),N=I[I.length-1],x=0;x<I.length;x+=1)R=I[x],M&&pointEqual(R.points[0],M)?T.setXYAt(R.points[1][0],R.points[1][1],"o",T.length()-1):T.setTripleAt(R.points[0][0],R.points[0][1],R.points[1][0],R.points[1][1],R.points[0][0],R.points[0][1],T.length()),T.setTripleAt(R.points[3][0],R.points[3][1],R.points[3][0],R.points[3][1],R.points[2][0],R.points[2][1],T.length()),M=R.points[3]}return P.length&&joinLines(T,N,P[0][0],w,E),T},OffsetPathModifier.prototype.processShapes=function(_){var S,w,E=this.shapes.length,T,A,k=this.amount.v,x=this.miterLimit.v,R=this.lineJoin;if(k!==0){var P,M;for(w=0;w<E;w+=1){if(P=this.shapes[w],M=P.localShapeCollection,!(!P.shape._mdf&&!this._mdf&&!_))for(M.releaseShapes(),P.shape._mdf=!0,S=P.shape.paths.shapes,A=P.shape.paths._length,T=0;T<A;T+=1)M.addShape(this.processPath(S[T],k,R,x));P.shape.paths=P.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(_){for(var S=_.fStyle?_.fStyle.split(" "):[],w="normal",E="normal",T=S.length,A,k=0;k<T;k+=1)switch(A=S[k].toLowerCase(),A){case"italic":E="italic";break;case"bold":w="700";break;case"black":w="900";break;case"medium":w="500";break;case"regular":case"normal":w="400";break;case"light":case"thin":w="200";break}return{style:E,weight:_.fWeight||w}}var FontManager=(function(){var _=5e3,S={w:0,size:0,shapes:[],data:{shapes:[]}},w=[];w=w.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var E=127988,T=917631,A=917601,k=917626,x=65039,R=8205,P=127462,M=127487,N=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function I(Q){var ie=Q.split(","),Z,J=ie.length,ue=[];for(Z=0;Z<J;Z+=1)ie[Z]!=="sans-serif"&&ie[Z]!=="monospace"&&ue.push(ie[Z]);return ue.join(",")}function V(Q,ie){var Z=createTag("span");Z.setAttribute("aria-hidden",!0),Z.style.fontFamily=ie;var J=createTag("span");J.innerText="giItT1WQy@!-/#",Z.style.position="absolute",Z.style.left="-10000px",Z.style.top="-10000px",Z.style.fontSize="300px",Z.style.fontVariant="normal",Z.style.fontStyle="normal",Z.style.fontWeight="normal",Z.style.letterSpacing="0",Z.appendChild(J),document.body.appendChild(Z);var ue=J.offsetWidth;return J.style.fontFamily=I(Q)+", "+ie,{node:J,w:ue,parent:Z}}function B(){var Q,ie=this.fonts.length,Z,J,ue=ie;for(Q=0;Q<ie;Q+=1)this.fonts[Q].loaded?ue-=1:this.fonts[Q].fOrigin==="n"||this.fonts[Q].origin===0?this.fonts[Q].loaded=!0:(Z=this.fonts[Q].monoCase.node,J=this.fonts[Q].monoCase.w,Z.offsetWidth!==J?(ue-=1,this.fonts[Q].loaded=!0):(Z=this.fonts[Q].sansCase.node,J=this.fonts[Q].sansCase.w,Z.offsetWidth!==J&&(ue-=1,this.fonts[Q].loaded=!0)),this.fonts[Q].loaded&&(this.fonts[Q].sansCase.parent.parentNode.removeChild(this.fonts[Q].sansCase.parent),this.fonts[Q].monoCase.parent.parentNode.removeChild(this.fonts[Q].monoCase.parent)));ue!==0&&Date.now()-this.initTime<_?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function D(Q,ie){var Z=document.body&&ie?"svg":"canvas",J,ue=getFontProperties(Q);if(Z==="svg"){var pe=createNS("text");pe.style.fontSize="100px",pe.setAttribute("font-family",Q.fFamily),pe.setAttribute("font-style",ue.style),pe.setAttribute("font-weight",ue.weight),pe.textContent="1",Q.fClass?(pe.style.fontFamily="inherit",pe.setAttribute("class",Q.fClass)):pe.style.fontFamily=Q.fFamily,ie.appendChild(pe),J=pe}else{var Re=new OffscreenCanvas(500,500).getContext("2d");Re.font=ue.style+" "+ue.weight+" 100px "+Q.fFamily,J=Re}function me(ge){return Z==="svg"?(J.textContent=ge,J.getComputedTextLength()):J.measureText(ge).width}return{measureText:me}}function z(Q,ie){if(!Q){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=Q.list;return}if(!document.body){this.isLoaded=!0,Q.list.forEach(function(ye){ye.helper=D(ye),ye.cache={}}),this.fonts=Q.list;return}var Z=Q.list,J,ue=Z.length,pe=ue;for(J=0;J<ue;J+=1){var Re=!0,me,ge;if(Z[J].loaded=!1,Z[J].monoCase=V(Z[J].fFamily,"monospace"),Z[J].sansCase=V(Z[J].fFamily,"sans-serif"),!Z[J].fPath)Z[J].loaded=!0,pe-=1;else if(Z[J].fOrigin==="p"||Z[J].origin===3){if(me=document.querySelectorAll('style[f-forigin="p"][f-family="'+Z[J].fFamily+'"], style[f-origin="3"][f-family="'+Z[J].fFamily+'"]'),me.length>0&&(Re=!1),Re){var we=createTag("style");we.setAttribute("f-forigin",Z[J].fOrigin),we.setAttribute("f-origin",Z[J].origin),we.setAttribute("f-family",Z[J].fFamily),we.type="text/css",we.innerText="@font-face {font-family: "+Z[J].fFamily+"; font-style: normal; src: url('"+Z[J].fPath+"');}",ie.appendChild(we)}}else if(Z[J].fOrigin==="g"||Z[J].origin===1){for(me=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),ge=0;ge<me.length;ge+=1)me[ge].href.indexOf(Z[J].fPath)!==-1&&(Re=!1);if(Re){var oe=createTag("link");oe.setAttribute("f-forigin",Z[J].fOrigin),oe.setAttribute("f-origin",Z[J].origin),oe.type="text/css",oe.rel="stylesheet",oe.href=Z[J].fPath,document.body.appendChild(oe)}}else if(Z[J].fOrigin==="t"||Z[J].origin===2){for(me=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),ge=0;ge<me.length;ge+=1)Z[J].fPath===me[ge].src&&(Re=!1);if(Re){var ce=createTag("link");ce.setAttribute("f-forigin",Z[J].fOrigin),ce.setAttribute("f-origin",Z[J].origin),ce.setAttribute("rel","stylesheet"),ce.setAttribute("href",Z[J].fPath),ie.appendChild(ce)}}Z[J].helper=D(Z[J],ie),Z[J].cache={},this.fonts.push(Z[J])}pe===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function O(Q){if(Q){this.chars||(this.chars=[]);var ie,Z=Q.length,J,ue=this.chars.length,pe;for(ie=0;ie<Z;ie+=1){for(J=0,pe=!1;J<ue;)this.chars[J].style===Q[ie].style&&this.chars[J].fFamily===Q[ie].fFamily&&this.chars[J].ch===Q[ie].ch&&(pe=!0),J+=1;pe||(this.chars.push(Q[ie]),ue+=1)}}}function L(Q,ie,Z){for(var J=0,ue=this.chars.length;J<ue;){if(this.chars[J].ch===Q&&this.chars[J].style===ie&&this.chars[J].fFamily===Z)return this.chars[J];J+=1}return(typeof Q=="string"&&Q.charCodeAt(0)!==13||!Q)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",Q,ie,Z)),S}function F(Q,ie,Z){var J=this.getFontByName(ie),ue=Q;if(!J.cache[ue]){var pe=J.helper;if(Q===" "){var Re=pe.measureText("|"+Q+"|"),me=pe.measureText("||");J.cache[ue]=(Re-me)/100}else J.cache[ue]=pe.measureText(Q)/100}return J.cache[ue]*Z}function $(Q){for(var ie=0,Z=this.fonts.length;ie<Z;){if(this.fonts[ie].fName===Q)return this.fonts[ie];ie+=1}return this.fonts[0]}function H(Q){var ie=0,Z=Q.charCodeAt(0);if(Z>=55296&&Z<=56319){var J=Q.charCodeAt(1);J>=56320&&J<=57343&&(ie=(Z-55296)*1024+J-56320+65536)}return ie}function j(Q,ie){var Z=Q.toString(16)+ie.toString(16);return N.indexOf(Z)!==-1}function q(Q){return Q===R}function W(Q){return Q===x}function X(Q){var ie=H(Q);return ie>=P&&ie<=M}function te(Q){return X(Q.substr(0,2))&&X(Q.substr(2,2))}function ee(Q){return w.indexOf(Q)!==-1}function G(Q,ie){var Z=H(Q.substr(ie,2));if(Z!==E)return!1;var J=0;for(ie+=2;J<5;){if(Z=H(Q.substr(ie,2)),Z<A||Z>k)return!1;J+=1,ie+=2}return H(Q.substr(ie,2))===T}function de(){this.isLoaded=!0}var le=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};le.isModifier=j,le.isZeroWidthJoiner=q,le.isFlagEmoji=te,le.isRegionalCode=X,le.isCombinedCharacter=ee,le.isRegionalFlag=G,le.isVariationSelector=W,le.BLACK_FLAG_CODE_POINT=E;var ae={addChars:O,addFonts:z,getCharData:L,getFontByName:$,measureText:F,checkLoadedFonts:B,setIsLoaded:de};return le.prototype=ae,le})();function SlotManager(_){this.animationData=_}SlotManager.prototype.getProp=function(_){return this.animationData.slots&&this.animationData.slots[_.sid]?Object.assign(_,this.animationData.slots[_.sid].p):_};function slotFactory(_){return new SlotManager(_)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(S){this.renderableComponents.indexOf(S)===-1&&this.renderableComponents.push(S)},removeRenderableComponent:function(S){this.renderableComponents.indexOf(S)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(S),1)},prepareRenderableFrame:function(S){this.checkLayerLimits(S)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(S){this.data.ip-this.data.st<=S&&this.data.op-this.data.st>S?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var S,w=this.renderableComponents.length;for(S=0;S<w;S+=1)this.renderableComponents[S].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=(function(){var _={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(S){return _[S]||""}})();function SliderEffect(_,S,w){this.p=PropertyFactory.getProp(S,_.v,0,0,w)}function AngleEffect(_,S,w){this.p=PropertyFactory.getProp(S,_.v,0,0,w)}function ColorEffect(_,S,w){this.p=PropertyFactory.getProp(S,_.v,1,0,w)}function PointEffect(_,S,w){this.p=PropertyFactory.getProp(S,_.v,1,0,w)}function LayerIndexEffect(_,S,w){this.p=PropertyFactory.getProp(S,_.v,0,0,w)}function MaskIndexEffect(_,S,w){this.p=PropertyFactory.getProp(S,_.v,0,0,w)}function CheckboxEffect(_,S,w){this.p=PropertyFactory.getProp(S,_.v,0,0,w)}function NoValueEffect(){this.p={}}function EffectsManager(_,S){var w=_.ef||[];this.effectElements=[];var E,T=w.length,A;for(E=0;E<T;E+=1)A=new GroupEffect(w[E],S),this.effectElements.push(A)}function GroupEffect(_,S){this.init(_,S)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(_,S){this.data=_,this.effectElements=[],this.initDynamicPropertyContainer(S);var w,E=this.data.ef.length,T,A=this.data.ef;for(w=0;w<E;w+=1){switch(T=null,A[w].ty){case 0:T=new SliderEffect(A[w],S,this);break;case 1:T=new AngleEffect(A[w],S,this);break;case 2:T=new ColorEffect(A[w],S,this);break;case 3:T=new PointEffect(A[w],S,this);break;case 4:case 7:T=new CheckboxEffect(A[w],S,this);break;case 10:T=new LayerIndexEffect(A[w],S,this);break;case 11:T=new MaskIndexEffect(A[w],S,this);break;case 5:T=new EffectsManager(A[w],S);break;default:T=new NoValueEffect(A[w]);break}T&&this.effectElements.push(T)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var S=0,w=this.data.masksProperties.length;S<w;){if(this.data.masksProperties[S].mode!=="n"&&this.data.masksProperties[S].cl!==!1)return!0;S+=1}return!1},initExpressions:function(){var S=getExpressionInterfaces();if(S){var w=S("layer"),E=S("effects"),T=S("shape"),A=S("text"),k=S("comp");this.layerInterface=w(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var x=E.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(x),this.data.ty===0||this.data.xt?this.compInterface=k(this):this.data.ty===4?(this.layerInterface.shapeInterface=T(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=A(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var S=getBlendMode(this.data.bm),w=this.baseElement||this.layerElement;w.style["mix-blend-mode"]=S},initBaseData:function(S,w,E){this.globalData=w,this.comp=E,this.data=S,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(S,w){var E,T=this.dynamicProperties.length;for(E=0;E<T;E+=1)(w||this._isParent&&this.dynamicProperties[E].propType==="transform")&&(this.dynamicProperties[E].getValue(),this.dynamicProperties[E]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(S){this.dynamicProperties.indexOf(S)===-1&&this.dynamicProperties.push(S)}};function FootageElement(_,S,w){this.initFrame(),this.initRenderable(),this.assetData=S.getAssetData(_.refId),this.footageData=S.imageLoader.getAsset(this.assetData),this.initBaseData(_,S,w)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var _=getExpressionInterfaces();if(_){var S=_("footage");this.layerInterface=S(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(_,S,w){this.initFrame(),this.initRenderable(),this.assetData=S.getAssetData(_.refId),this.initBaseData(_,S,w),this._isPlaying=!1,this._canPlay=!1;var E=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(E),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=_.tm?PropertyFactory.getProp(this,_.tm,0,S.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,_.au&&_.au.lv?_.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(_){if(this.prepareRenderableFrame(_,!0),this.prepareProperties(_,!0),this.tm._placeholder)this._currentTime=_/this.data.sr;else{var S=this.tm.v;this._currentTime=S}this._volume=this.lv.v[0];var w=this._volume*this._volumeMultiplier;this._previousVolume!==w&&(this._previousVolume=w,this.audio.volume(w))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(_){this.audio.rate(_)},AudioElement.prototype.volume=function(_){this._volumeMultiplier=_,this._previousVolume=_*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(_){var S,w=this.layers.length,E;for(this.completeLayers=!0,S=w-1;S>=0;S-=1)this.elements[S]||(E=this.layers[S],E.ip-E.st<=_-this.layers[S].st&&E.op-E.st>_-this.layers[S].st&&this.buildItem(S)),this.completeLayers=this.elements[S]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(_){switch(_.ty){case 2:return this.createImage(_);case 0:return this.createComp(_);case 1:return this.createSolid(_);case 3:return this.createNull(_);case 4:return this.createShape(_);case 5:return this.createText(_);case 6:return this.createAudio(_);case 13:return this.createCamera(_);case 15:return this.createFootage(_);default:return this.createNull(_)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(_){return new AudioElement(_,this.globalData,this)},BaseRenderer.prototype.createFootage=function(_){return new FootageElement(_,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var _,S=this.layers.length;for(_=0;_<S;_+=1)this.buildItem(_);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(_){this.completeLayers=!1;var S,w=_.length,E,T=this.layers.length;for(S=0;S<w;S+=1)for(E=0;E<T;){if(this.layers[E].id===_[S].id){this.layers[E]=_[S];break}E+=1}},BaseRenderer.prototype.setProjectInterface=function(_){this.globalData.projectInterface=_},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(_,S,w){for(var E=this.elements,T=this.layers,A=0,k=T.length;A<k;)T[A].ind==S&&(!E[A]||E[A]===!0?(this.buildItem(A),this.addPendingElement(_)):(w.push(E[A]),E[A].setAsParent(),T[A].parent!==void 0?this.buildElementParenting(_,T[A].parent,w):_.setHierarchy(w))),A+=1},BaseRenderer.prototype.addPendingElement=function(_){this.pendingElements.push(_)},BaseRenderer.prototype.searchExtraCompositions=function(_){var S,w=_.length;for(S=0;S<w;S+=1)if(_[S].xt){var E=this.createComp(_[S]);E.initExpressions(),this.globalData.projectInterface.registerComposition(E)}},BaseRenderer.prototype.getElementById=function(_){var S,w=this.elements.length;for(S=0;S<w;S+=1)if(this.elements[S].data.ind===_)return this.elements[S];return null},BaseRenderer.prototype.getElementByPath=function(_){var S=_.shift(),w;if(typeof S=="number")w=this.elements[S];else{var E,T=this.elements.length;for(E=0;E<T;E+=1)if(this.elements[E].data.nm===S){w=this.elements[E];break}}return _.length===0?w:w.getElementByPath(_)},BaseRenderer.prototype.setupGlobalData=function(_,S){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(_),this.globalData.fontManager.addChars(_.chars),this.globalData.fontManager.addFonts(_.fonts,S),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=_.fr,this.globalData.nm=_.nm,this.globalData.compSize={w:_.w,h:_.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var S=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:S,localMat:S,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var S,w=this.finalTransform.mat,E=0,T=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;E<T;){if(this.hierarchy[E].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}E+=1}if(this.finalTransform._matMdf)for(S=this.finalTransform.mProp.v.props,w.cloneFromProps(S),E=0;E<T;E+=1)w.multiply(this.hierarchy[E].finalTransform.mProp.v)}(!this.localTransforms||this.finalTransform._matMdf)&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var S=0,w=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;S<w;)this.localTransforms[S]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[S]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),S+=1;if(this.finalTransform._localMatMdf){var E=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(E),S=1;S<w;S+=1){var T=this.localTransforms[S].matrix;E.multiply(T)}E.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var A=this.finalTransform.localOpacity;for(S=0;S<w;S+=1)A*=this.localTransforms[S].opacity*.01;this.finalTransform.localOpacity=A}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var S=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(S.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var w=0,E=S.length;for(w=0;w<E;w+=1)this.localTransforms.push(S[w])}}},globalToLocal:function(S){var w=[];w.push(this.finalTransform);for(var E=!0,T=this.comp;E;)T.finalTransform?(T.data.hasMask&&w.splice(0,0,T.finalTransform),T=T.comp):E=!1;var A,k=w.length,x;for(A=0;A<k;A+=1)x=w[A].mat.applyToPointArray(0,0,0),S=[S[0]-x[0],S[1]-x[1],0];return S},mHelper:new Matrix};function MaskElement(_,S,w){this.data=_,this.element=S,this.globalData=w,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var E=this.globalData.defs,T,A=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(A),this.solidPath="";var k,x=this.masksProperties,R=0,P=[],M,N,I=createElementID(),V,B,D,z,O="clipPath",L="clip-path";for(T=0;T<A;T+=1)if((x[T].mode!=="a"&&x[T].mode!=="n"||x[T].inv||x[T].o.k!==100||x[T].o.x)&&(O="mask",L="mask"),(x[T].mode==="s"||x[T].mode==="i")&&R===0?(V=createNS("rect"),V.setAttribute("fill","#ffffff"),V.setAttribute("width",this.element.comp.data.w||0),V.setAttribute("height",this.element.comp.data.h||0),P.push(V)):V=null,k=createNS("path"),x[T].mode==="n")this.viewData[T]={op:PropertyFactory.getProp(this.element,x[T].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,x[T],3),elem:k,lastPath:""},E.appendChild(k);else{R+=1,k.setAttribute("fill",x[T].mode==="s"?"#000000":"#ffffff"),k.setAttribute("clip-rule","nonzero");var F;if(x[T].x.k!==0?(O="mask",L="mask",z=PropertyFactory.getProp(this.element,x[T].x,0,null,this.element),F=createElementID(),B=createNS("filter"),B.setAttribute("id",F),D=createNS("feMorphology"),D.setAttribute("operator","erode"),D.setAttribute("in","SourceGraphic"),D.setAttribute("radius","0"),B.appendChild(D),E.appendChild(B),k.setAttribute("stroke",x[T].mode==="s"?"#000000":"#ffffff")):(D=null,z=null),this.storedData[T]={elem:k,x:z,expan:D,lastPath:"",lastOperator:"",filterId:F,lastRadius:0},x[T].mode==="i"){N=P.length;var $=createNS("g");for(M=0;M<N;M+=1)$.appendChild(P[M]);var H=createNS("mask");H.setAttribute("mask-type","alpha"),H.setAttribute("id",I+"_"+R),H.appendChild(k),E.appendChild(H),$.setAttribute("mask","url("+getLocationHref()+"#"+I+"_"+R+")"),P.length=0,P.push($)}else P.push(k);x[T].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[T]={elem:k,lastPath:"",op:PropertyFactory.getProp(this.element,x[T].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,x[T],3),invRect:V},this.viewData[T].prop.k||this.drawPath(x[T],this.viewData[T].prop.v,this.viewData[T])}for(this.maskElement=createNS(O),A=P.length,T=0;T<A;T+=1)this.maskElement.appendChild(P[T]);R>0&&(this.maskElement.setAttribute("id",I),this.element.maskedElement.setAttribute(L,"url("+getLocationHref()+"#"+I+")"),E.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(_){return this.viewData[_].prop},MaskElement.prototype.renderFrame=function(_){var S=this.element.finalTransform.mat,w,E=this.masksProperties.length;for(w=0;w<E;w+=1)if((this.viewData[w].prop._mdf||_)&&this.drawPath(this.masksProperties[w],this.viewData[w].prop.v,this.viewData[w]),(this.viewData[w].op._mdf||_)&&this.viewData[w].elem.setAttribute("fill-opacity",this.viewData[w].op.v),this.masksProperties[w].mode!=="n"&&(this.viewData[w].invRect&&(this.element.finalTransform.mProp._mdf||_)&&this.viewData[w].invRect.setAttribute("transform",S.getInverseMatrix().to2dCSS()),this.storedData[w].x&&(this.storedData[w].x._mdf||_))){var T=this.storedData[w].expan;this.storedData[w].x.v<0?(this.storedData[w].lastOperator!=="erode"&&(this.storedData[w].lastOperator="erode",this.storedData[w].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[w].filterId+")")),T.setAttribute("radius",-this.storedData[w].x.v)):(this.storedData[w].lastOperator!=="dilate"&&(this.storedData[w].lastOperator="dilate",this.storedData[w].elem.setAttribute("filter",null)),this.storedData[w].elem.setAttribute("stroke-width",this.storedData[w].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var _="M0,0 ";return _+=" h"+this.globalData.compSize.w,_+=" v"+this.globalData.compSize.h,_+=" h-"+this.globalData.compSize.w,_+=" v-"+this.globalData.compSize.h+" ",_},MaskElement.prototype.drawPath=function(_,S,w){var E=" M"+S.v[0][0]+","+S.v[0][1],T,A;for(A=S._length,T=1;T<A;T+=1)E+=" C"+S.o[T-1][0]+","+S.o[T-1][1]+" "+S.i[T][0]+","+S.i[T][1]+" "+S.v[T][0]+","+S.v[T][1];if(S.c&&A>1&&(E+=" C"+S.o[T-1][0]+","+S.o[T-1][1]+" "+S.i[0][0]+","+S.i[0][1]+" "+S.v[0][0]+","+S.v[0][1]),w.lastPath!==E){var k="";w.elem&&(S.c&&(k=_.inv?this.solidPath+E:E),w.elem.setAttribute("d",k)),w.lastPath=E}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=(function(){var _={};_.createFilter=S,_.createAlphaToLuminanceFilter=w;function S(E,T){var A=createNS("filter");return A.setAttribute("id",E),T!==!0&&(A.setAttribute("filterUnits","objectBoundingBox"),A.setAttribute("x","0%"),A.setAttribute("y","0%"),A.setAttribute("width","100%"),A.setAttribute("height","100%")),A}function w(){var E=createNS("feColorMatrix");return E.setAttribute("type","matrix"),E.setAttribute("color-interpolation-filters","sRGB"),E.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),E}return _})(),featureSupport=(function(){var _={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(_.maskType=!1),/firefox/i.test(navigator.userAgent)&&(_.svgLumaHidden=!1),_})(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(_){var S,w="SourceGraphic",E=_.data.ef?_.data.ef.length:0,T=createElementID(),A=filtersFactory.createFilter(T,!0),k=0;this.filters=[];var x;for(S=0;S<E;S+=1){x=null;var R=_.data.ef[S].ty;if(registeredEffects$1[R]){var P=registeredEffects$1[R].effect;x=new P(A,_.effectsManager.effectElements[S],_,idPrefix+k,w),w=idPrefix+k,registeredEffects$1[R].countsAsEffect&&(k+=1)}x&&this.filters.push(x)}k&&(_.globalData.defs.appendChild(A),_.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+T+")")),this.filters.length&&_.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(_){var S,w=this.filters.length;for(S=0;S<w;S+=1)this.filters[S].renderFrame(_)},SVGEffects.prototype.getEffects=function(_){var S,w=this.filters.length,E=[];for(S=0;S<w;S+=1)this.filters[S].type===_&&E.push(this.filters[S]);return E};function registerEffect$1(_,S,w){registeredEffects$1[_]={effect:S,countsAsEffect:w}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var S=null;if(this.data.td){this.matteMasks={};var w=createNS("g");w.setAttribute("id",this.layerId),w.appendChild(this.layerElement),S=w,this.globalData.defs.appendChild(w)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),S=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var E=createNS("clipPath"),T=createNS("path");T.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var A=createElementID();if(E.setAttribute("id",A),E.appendChild(T),this.globalData.defs.appendChild(E),this.checkMasks()){var k=createNS("g");k.setAttribute("clip-path","url("+getLocationHref()+"#"+A+")"),k.appendChild(this.layerElement),this.transformedElement=k,S?S.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+A+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(S){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[S]){var w=this.layerId+"_"+S,E,T,A,k;if(S===1||S===3){var x=createNS("mask");x.setAttribute("id",w),x.setAttribute("mask-type",S===3?"luminance":"alpha"),A=createNS("use"),A.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),x.appendChild(A),this.globalData.defs.appendChild(x),!featureSupport.maskType&&S===1&&(x.setAttribute("mask-type","luminance"),E=createElementID(),T=filtersFactory.createFilter(E),this.globalData.defs.appendChild(T),T.appendChild(filtersFactory.createAlphaToLuminanceFilter()),k=createNS("g"),k.appendChild(A),x.appendChild(k),k.setAttribute("filter","url("+getLocationHref()+"#"+E+")"))}else if(S===2){var R=createNS("mask");R.setAttribute("id",w),R.setAttribute("mask-type","alpha");var P=createNS("g");R.appendChild(P),E=createElementID(),T=filtersFactory.createFilter(E);var M=createNS("feComponentTransfer");M.setAttribute("in","SourceGraphic"),T.appendChild(M);var N=createNS("feFuncA");N.setAttribute("type","table"),N.setAttribute("tableValues","1.0 0.0"),M.appendChild(N),this.globalData.defs.appendChild(T);var I=createNS("rect");I.setAttribute("width",this.comp.data.w),I.setAttribute("height",this.comp.data.h),I.setAttribute("x","0"),I.setAttribute("y","0"),I.setAttribute("fill","#ffffff"),I.setAttribute("opacity","0"),P.setAttribute("filter","url("+getLocationHref()+"#"+E+")"),P.appendChild(I),A=createNS("use"),A.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),P.appendChild(A),featureSupport.maskType||(R.setAttribute("mask-type","luminance"),T.appendChild(filtersFactory.createAlphaToLuminanceFilter()),k=createNS("g"),P.appendChild(I),k.appendChild(this.layerElement),P.appendChild(k)),this.globalData.defs.appendChild(R)}this.matteMasks[S]=w}return this.matteMasks[S]},setMatte:function(S){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+S+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(S){this.hierarchy=S},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var _={initElement:function(w,E,T){this.initFrame(),this.initBaseData(w,E,T),this.initTransform(w,E,T),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var w=this.baseElement||this.layerElement;w.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var w=this.baseElement||this.layerElement;w.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(w){this._mdf=!1,this.prepareRenderableFrame(w),this.prepareProperties(w,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(_)],RenderableDOMElement)})();function IImageElement(_,S,w){this.assetData=S.getAssetData(_.refId),this.assetData&&this.assetData.sid&&(this.assetData=S.slotManager.getProp(this.assetData)),this.initElement(_,S,w),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var _=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",_),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(_,S){this.elem=_,this.pos=S}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(S){var w,E=this.shapeModifiers.length;for(w=0;w<E;w+=1)this.shapeModifiers[w].addShape(S)},isShapeInAnimatedModifiers:function(S){for(var w=0,E=this.shapeModifiers.length;w<E;)if(this.shapeModifiers[w].isAnimatedWithShape(S))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var S,w=this.shapes.length;for(S=0;S<w;S+=1)this.shapes[S].sh.reset();w=this.shapeModifiers.length;var E;for(S=w-1;S>=0&&(E=this.shapeModifiers[S].processShapes(this._isFirstFrame),!E);S-=1);}},searchProcessedElement:function(S){for(var w=this.processedElements,E=0,T=w.length;E<T;){if(w[E].elem===S)return w[E].pos;E+=1}return 0},addProcessedElement:function(S,w){for(var E=this.processedElements,T=E.length;T;)if(T-=1,E[T].elem===S){E[T].pos=w;return}E.push(new ProcessedElement(S,w))},prepareFrame:function(S){this.prepareRenderableFrame(S),this.prepareProperties(S,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(_,S,w){this.caches=[],this.styles=[],this.transformers=_,this.lStr="",this.sh=w,this.lvl=S,this._isAnimated=!!w.k;for(var E=0,T=_.length;E<T;){if(_[E].mProps.dynamicProperties.length){this._isAnimated=!0;break}E+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(_,S){this.data=_,this.type=_.ty,this.d="",this.lvl=S,this._mdf=!1,this.closed=_.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(_,S,w,E){this.elem=_,this.frameId=-1,this.dataProps=createSizedArray(S.length),this.renderer=w,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",S.length?S.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(E);var T,A=S.length||0,k;for(T=0;T<A;T+=1)k=PropertyFactory.getProp(_,S[T].v,0,0,this),this.k=k.k||this.k,this.dataProps[T]={n:S[T].n,p:k};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(_){if(!(this.elem.globalData.frameId===this.frameId&&!_)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||_,this._mdf)){var S=0,w=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),S=0;S<w;S+=1)this.dataProps[S].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[S].p.v:this.dashArray[S]=this.dataProps[S].p.v:this.dashoffset[0]=this.dataProps[S].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(_,S,w){this.initDynamicPropertyContainer(_),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(_,S.o,0,.01,this),this.w=PropertyFactory.getProp(_,S.w,0,null,this),this.d=new DashProperty(_,S.d||{},"svg",this),this.c=PropertyFactory.getProp(_,S.c,1,255,this),this.style=w,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(_,S,w){this.initDynamicPropertyContainer(_),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(_,S.o,0,.01,this),this.c=PropertyFactory.getProp(_,S.c,1,255,this),this.style=w}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(_,S,w){this.initDynamicPropertyContainer(_),this.getValue=this.iterateDynamicProperties,this.style=w}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(_,S,w){this.data=S,this.c=createTypedArray("uint8c",S.p*4);var E=S.k.k[0].s?S.k.k[0].s.length-S.p*4:S.k.k.length-S.p*4;this.o=createTypedArray("float32",E),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=E,this.initDynamicPropertyContainer(w),this.prop=PropertyFactory.getProp(_,S.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(_,S){for(var w=0,E=this.o.length/2,T;w<E;){if(T=Math.abs(_[w*4]-_[S*4+w*2]),T>.01)return!1;w+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var _=0,S=this.data.k.k.length;_<S;){if(!this.comparePoints(this.data.k.k[_].s,this.data.p))return!1;_+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(_){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||_){var S,w=this.data.p*4,E,T;for(S=0;S<w;S+=1)E=S%4===0?100:255,T=Math.round(this.prop.v[S]*E),this.c[S]!==T&&(this.c[S]=T,this._cmdf=!_);if(this.o.length)for(w=this.prop.v.length,S=this.data.p*4;S<w;S+=1)E=S%2===0?100:1,T=S%2===0?Math.round(this.prop.v[S]*100):this.prop.v[S],this.o[S-this.data.p*4]!==T&&(this.o[S-this.data.p*4]=T,this._omdf=!_);this._mdf=!_}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(_,S,w){this.initDynamicPropertyContainer(_),this.getValue=this.iterateDynamicProperties,this.initGradientData(_,S,w)}SVGGradientFillStyleData.prototype.initGradientData=function(_,S,w){this.o=PropertyFactory.getProp(_,S.o,0,.01,this),this.s=PropertyFactory.getProp(_,S.s,1,null,this),this.e=PropertyFactory.getProp(_,S.e,1,null,this),this.h=PropertyFactory.getProp(_,S.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(_,S.a||{k:0},0,degToRads,this),this.g=new GradientProperty(_,S.g,this),this.style=w,this.stops=[],this.setGradientData(w.pElem,S),this.setGradientOpacity(S,w),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(_,S){var w=createElementID(),E=createNS(S.t===1?"linearGradient":"radialGradient");E.setAttribute("id",w),E.setAttribute("spreadMethod","pad"),E.setAttribute("gradientUnits","userSpaceOnUse");var T=[],A,k,x;for(x=S.g.p*4,k=0;k<x;k+=4)A=createNS("stop"),E.appendChild(A),T.push(A);_.setAttribute(S.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+w+")"),this.gf=E,this.cst=T},SVGGradientFillStyleData.prototype.setGradientOpacity=function(_,S){if(this.g._hasOpacity&&!this.g._collapsable){var w,E,T,A=createNS("mask"),k=createNS("path");A.appendChild(k);var x=createElementID(),R=createElementID();A.setAttribute("id",R);var P=createNS(_.t===1?"linearGradient":"radialGradient");P.setAttribute("id",x),P.setAttribute("spreadMethod","pad"),P.setAttribute("gradientUnits","userSpaceOnUse"),T=_.g.k.k[0].s?_.g.k.k[0].s.length:_.g.k.k.length;var M=this.stops;for(E=_.g.p*4;E<T;E+=2)w=createNS("stop"),w.setAttribute("stop-color","rgb(255,255,255)"),P.appendChild(w),M.push(w);k.setAttribute(_.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+x+")"),_.ty==="gs"&&(k.setAttribute("stroke-linecap",lineCapEnum[_.lc||2]),k.setAttribute("stroke-linejoin",lineJoinEnum[_.lj||2]),_.lj===1&&k.setAttribute("stroke-miterlimit",_.ml)),this.of=P,this.ms=A,this.ost=M,this.maskId=R,S.msElem=k}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(_,S,w){this.initDynamicPropertyContainer(_),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(_,S.w,0,null,this),this.d=new DashProperty(_,S.d||{},"svg",this),this.initGradientData(_,S,w),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(_,S,w){this.transform={mProps:_,op:S,container:w},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(S,w,E,T){if(w===0)return"";var A=S.o,k=S.i,x=S.v,R,P=" M"+T.applyToPointStringified(x[0][0],x[0][1]);for(R=1;R<w;R+=1)P+=" C"+T.applyToPointStringified(A[R-1][0],A[R-1][1])+" "+T.applyToPointStringified(k[R][0],k[R][1])+" "+T.applyToPointStringified(x[R][0],x[R][1]);return E&&w&&(P+=" C"+T.applyToPointStringified(A[R-1][0],A[R-1][1])+" "+T.applyToPointStringified(k[0][0],k[0][1])+" "+T.applyToPointStringified(x[0][0],x[0][1]),P+="z"),P},SVGElementsRenderer=(function(){var _=new Matrix,S=new Matrix,w={createRenderFunction:E};function E(N){switch(N.ty){case"fl":return x;case"gf":return P;case"gs":return R;case"st":return M;case"sh":case"el":case"rc":case"sr":return k;case"tr":return T;case"no":return A;default:return null}}function T(N,I,V){(V||I.transform.op._mdf)&&I.transform.container.setAttribute("opacity",I.transform.op.v),(V||I.transform.mProps._mdf)&&I.transform.container.setAttribute("transform",I.transform.mProps.v.to2dCSS())}function A(){}function k(N,I,V){var B,D,z,O,L,F,$=I.styles.length,H=I.lvl,j,q,W,X;for(F=0;F<$;F+=1){if(O=I.sh._mdf||V,I.styles[F].lvl<H){for(q=S.reset(),W=H-I.styles[F].lvl,X=I.transformers.length-1;!O&&W>0;)O=I.transformers[X].mProps._mdf||O,W-=1,X-=1;if(O)for(W=H-I.styles[F].lvl,X=I.transformers.length-1;W>0;)q.multiply(I.transformers[X].mProps.v),W-=1,X-=1}else q=_;if(j=I.sh.paths,D=j._length,O){for(z="",B=0;B<D;B+=1)L=j.shapes[B],L&&L._length&&(z+=buildShapeString(L,L._length,L.c,q));I.caches[F]=z}else z=I.caches[F];I.styles[F].d+=N.hd===!0?"":z,I.styles[F]._mdf=O||I.styles[F]._mdf}}function x(N,I,V){var B=I.style;(I.c._mdf||V)&&B.pElem.setAttribute("fill","rgb("+bmFloor(I.c.v[0])+","+bmFloor(I.c.v[1])+","+bmFloor(I.c.v[2])+")"),(I.o._mdf||V)&&B.pElem.setAttribute("fill-opacity",I.o.v)}function R(N,I,V){P(N,I,V),M(N,I,V)}function P(N,I,V){var B=I.gf,D=I.g._hasOpacity,z=I.s.v,O=I.e.v;if(I.o._mdf||V){var L=N.ty==="gf"?"fill-opacity":"stroke-opacity";I.style.pElem.setAttribute(L,I.o.v)}if(I.s._mdf||V){var F=N.t===1?"x1":"cx",$=F==="x1"?"y1":"cy";B.setAttribute(F,z[0]),B.setAttribute($,z[1]),D&&!I.g._collapsable&&(I.of.setAttribute(F,z[0]),I.of.setAttribute($,z[1]))}var H,j,q,W;if(I.g._cmdf||V){H=I.cst;var X=I.g.c;for(q=H.length,j=0;j<q;j+=1)W=H[j],W.setAttribute("offset",X[j*4]+"%"),W.setAttribute("stop-color","rgb("+X[j*4+1]+","+X[j*4+2]+","+X[j*4+3]+")")}if(D&&(I.g._omdf||V)){var te=I.g.o;for(I.g._collapsable?H=I.cst:H=I.ost,q=H.length,j=0;j<q;j+=1)W=H[j],I.g._collapsable||W.setAttribute("offset",te[j*2]+"%"),W.setAttribute("stop-opacity",te[j*2+1])}if(N.t===1)(I.e._mdf||V)&&(B.setAttribute("x2",O[0]),B.setAttribute("y2",O[1]),D&&!I.g._collapsable&&(I.of.setAttribute("x2",O[0]),I.of.setAttribute("y2",O[1])));else{var ee;if((I.s._mdf||I.e._mdf||V)&&(ee=Math.sqrt(Math.pow(z[0]-O[0],2)+Math.pow(z[1]-O[1],2)),B.setAttribute("r",ee),D&&!I.g._collapsable&&I.of.setAttribute("r",ee)),I.s._mdf||I.e._mdf||I.h._mdf||I.a._mdf||V){ee||(ee=Math.sqrt(Math.pow(z[0]-O[0],2)+Math.pow(z[1]-O[1],2)));var G=Math.atan2(O[1]-z[1],O[0]-z[0]),de=I.h.v;de>=1?de=.99:de<=-1&&(de=-.99);var le=ee*de,ae=Math.cos(G+I.a.v)*le+z[0],Q=Math.sin(G+I.a.v)*le+z[1];B.setAttribute("fx",ae),B.setAttribute("fy",Q),D&&!I.g._collapsable&&(I.of.setAttribute("fx",ae),I.of.setAttribute("fy",Q))}}}function M(N,I,V){var B=I.style,D=I.d;D&&(D._mdf||V)&&D.dashStr&&(B.pElem.setAttribute("stroke-dasharray",D.dashStr),B.pElem.setAttribute("stroke-dashoffset",D.dashoffset[0])),I.c&&(I.c._mdf||V)&&B.pElem.setAttribute("stroke","rgb("+bmFloor(I.c.v[0])+","+bmFloor(I.c.v[1])+","+bmFloor(I.c.v[2])+")"),(I.o._mdf||V)&&B.pElem.setAttribute("stroke-opacity",I.o.v),(I.w._mdf||V)&&(B.pElem.setAttribute("stroke-width",I.w.v),B.msElem&&B.msElem.setAttribute("stroke-width",I.w.v))}return w})();function SVGShapeElement(_,S,w){this.shapes=[],this.shapesData=_.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(_,S,w),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var _,S=this.shapes.length,w,E,T=this.stylesList.length,A,k=[],x=!1;for(E=0;E<T;E+=1){for(A=this.stylesList[E],x=!1,k.length=0,_=0;_<S;_+=1)w=this.shapes[_],w.styles.indexOf(A)!==-1&&(k.push(w),x=w._isAnimated||x);k.length>1&&x&&this.setShapesAsAnimated(k)}},SVGShapeElement.prototype.setShapesAsAnimated=function(_){var S,w=_.length;for(S=0;S<w;S+=1)_[S].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(_,S){var w,E=new SVGStyleData(_,S),T=E.pElem;if(_.ty==="st")w=new SVGStrokeStyleData(this,_,E);else if(_.ty==="fl")w=new SVGFillStyleData(this,_,E);else if(_.ty==="gf"||_.ty==="gs"){var A=_.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;w=new A(this,_,E),this.globalData.defs.appendChild(w.gf),w.maskId&&(this.globalData.defs.appendChild(w.ms),this.globalData.defs.appendChild(w.of),T.setAttribute("mask","url("+getLocationHref()+"#"+w.maskId+")"))}else _.ty==="no"&&(w=new SVGNoStyleData(this,_,E));return(_.ty==="st"||_.ty==="gs")&&(T.setAttribute("stroke-linecap",lineCapEnum[_.lc||2]),T.setAttribute("stroke-linejoin",lineJoinEnum[_.lj||2]),T.setAttribute("fill-opacity","0"),_.lj===1&&T.setAttribute("stroke-miterlimit",_.ml)),_.r===2&&T.setAttribute("fill-rule","evenodd"),_.ln&&T.setAttribute("id",_.ln),_.cl&&T.setAttribute("class",_.cl),_.bm&&(T.style["mix-blend-mode"]=getBlendMode(_.bm)),this.stylesList.push(E),this.addToAnimatedContents(_,w),w},SVGShapeElement.prototype.createGroupElement=function(_){var S=new ShapeGroupData;return _.ln&&S.gr.setAttribute("id",_.ln),_.cl&&S.gr.setAttribute("class",_.cl),_.bm&&(S.gr.style["mix-blend-mode"]=getBlendMode(_.bm)),S},SVGShapeElement.prototype.createTransformElement=function(_,S){var w=TransformPropertyFactory.getTransformProperty(this,_,this),E=new SVGTransformData(w,w.o,S);return this.addToAnimatedContents(_,E),E},SVGShapeElement.prototype.createShapeElement=function(_,S,w){var E=4;_.ty==="rc"?E=5:_.ty==="el"?E=6:_.ty==="sr"&&(E=7);var T=ShapePropertyFactory.getShapeProp(this,_,E,this),A=new SVGShapeData(S,w,T);return this.shapes.push(A),this.addShapeToModifiers(A),this.addToAnimatedContents(_,A),A},SVGShapeElement.prototype.addToAnimatedContents=function(_,S){for(var w=0,E=this.animatedContents.length;w<E;){if(this.animatedContents[w].element===S)return;w+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(_),element:S,data:_})},SVGShapeElement.prototype.setElementStyles=function(_){var S=_.styles,w,E=this.stylesList.length;for(w=0;w<E;w+=1)S.indexOf(this.stylesList[w])===-1&&!this.stylesList[w].closed&&S.push(this.stylesList[w])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var _,S=this.itemsData.length;for(_=0;_<S;_+=1)this.prevViewData[_]=this.itemsData[_];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),S=this.dynamicProperties.length,_=0;_<S;_+=1)this.dynamicProperties[_].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(_,S,w,E,T,A,k){var x=[].concat(A),R,P=_.length-1,M,N,I=[],V=[],B,D,z;for(R=P;R>=0;R-=1){if(z=this.searchProcessedElement(_[R]),z?S[R]=w[z-1]:_[R]._render=k,_[R].ty==="fl"||_[R].ty==="st"||_[R].ty==="gf"||_[R].ty==="gs"||_[R].ty==="no")z?S[R].style.closed=_[R].hd:S[R]=this.createStyleElement(_[R],T),_[R]._render&&S[R].style.pElem.parentNode!==E&&E.appendChild(S[R].style.pElem),I.push(S[R].style);else if(_[R].ty==="gr"){if(!z)S[R]=this.createGroupElement(_[R]);else for(N=S[R].it.length,M=0;M<N;M+=1)S[R].prevViewData[M]=S[R].it[M];this.searchShapes(_[R].it,S[R].it,S[R].prevViewData,S[R].gr,T+1,x,k),_[R]._render&&S[R].gr.parentNode!==E&&E.appendChild(S[R].gr)}else _[R].ty==="tr"?(z||(S[R]=this.createTransformElement(_[R],E)),B=S[R].transform,x.push(B)):_[R].ty==="sh"||_[R].ty==="rc"||_[R].ty==="el"||_[R].ty==="sr"?(z||(S[R]=this.createShapeElement(_[R],x,T)),this.setElementStyles(S[R])):_[R].ty==="tm"||_[R].ty==="rd"||_[R].ty==="ms"||_[R].ty==="pb"||_[R].ty==="zz"||_[R].ty==="op"?(z?(D=S[R],D.closed=!1):(D=ShapeModifiers.getModifier(_[R].ty),D.init(this,_[R]),S[R]=D,this.shapeModifiers.push(D)),V.push(D)):_[R].ty==="rp"&&(z?(D=S[R],D.closed=!0):(D=ShapeModifiers.getModifier(_[R].ty),S[R]=D,D.init(this,_,R,S),this.shapeModifiers.push(D),k=!1),V.push(D));this.addProcessedElement(_[R],R+1)}for(P=I.length,R=0;R<P;R+=1)I[R].closed=!0;for(P=V.length,R=0;R<P;R+=1)V[R].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var _,S=this.stylesList.length;for(_=0;_<S;_+=1)this.stylesList[_].reset();for(this.renderShape(),_=0;_<S;_+=1)(this.stylesList[_]._mdf||this._isFirstFrame)&&(this.stylesList[_].msElem&&(this.stylesList[_].msElem.setAttribute("d",this.stylesList[_].d),this.stylesList[_].d="M0 0"+this.stylesList[_].d),this.stylesList[_].pElem.setAttribute("d",this.stylesList[_].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var _,S=this.animatedContents.length,w;for(_=0;_<S;_+=1)w=this.animatedContents[_],(this._isFirstFrame||w.element._isAnimated)&&w.data!==!0&&w.fn(w.data,w.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(_,S,w,E,T,A){this.o=_,this.sw=S,this.sc=w,this.fc=E,this.m=T,this.p=A,this._mdf={o:!0,sw:!!S,sc:!!w,fc:!!E,m:!0,p:!0}}LetterProps.prototype.update=function(_,S,w,E,T,A){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var k=!1;return this.o!==_&&(this.o=_,this._mdf.o=!0,k=!0),this.sw!==S&&(this.sw=S,this._mdf.sw=!0,k=!0),this.sc!==w&&(this.sc=w,this._mdf.sc=!0,k=!0),this.fc!==E&&(this.fc=E,this._mdf.fc=!0,k=!0),this.m!==T&&(this.m=T,this._mdf.m=!0,k=!0),A.length&&(this.p[0]!==A[0]||this.p[1]!==A[1]||this.p[4]!==A[4]||this.p[5]!==A[5]||this.p[12]!==A[12]||this.p[13]!==A[13])&&(this.p=A,this._mdf.p=!0,k=!0),k};function TextProperty(_,S){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,S.d&&S.d.sid&&(S.d=_.globalData.slotManager.getProp(S.d)),this.data=S,this.elem=_,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(_,S){for(var w in S)Object.prototype.hasOwnProperty.call(S,w)&&(_[w]=S[w]);return _},TextProperty.prototype.setCurrentData=function(_){_.__complete||this.completeTextData(_),this.currentData=_,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(_){this.effectsSequence.push(_),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(_){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!_)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var S=this.currentData,w=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var E,T=this.effectsSequence.length,A=_||this.data.d.k[this.keysIndex].s;for(E=0;E<T;E+=1)w!==this.keysIndex?A=this.effectsSequence[E](A,A.t):A=this.effectsSequence[E](this.currentData,A.t);S!==A&&this.setCurrentData(A),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var _=this.data.d.k,S=this.elem.comp.renderedFrame,w=0,E=_.length;w<=E-1&&!(w===E-1||_[w+1].t>S);)w+=1;return this.keysIndex!==w&&(this.keysIndex=w),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(_){for(var S=[],w=0,E=_.length,T,A,k=!1,x=!1,R="";w<E;)k=x,x=!1,T=_.charCodeAt(w),R=_.charAt(w),FontManager.isCombinedCharacter(T)?k=!0:T>=55296&&T<=56319?FontManager.isRegionalFlag(_,w)?R=_.substr(w,14):(A=_.charCodeAt(w+1),A>=56320&&A<=57343&&(FontManager.isModifier(T,A)?(R=_.substr(w,2),k=!0):FontManager.isFlagEmoji(_.substr(w,4))?R=_.substr(w,4):R=_.substr(w,2))):T>56319?(A=_.charCodeAt(w+1),FontManager.isVariationSelector(T)&&(k=!0)):FontManager.isZeroWidthJoiner(T)&&(k=!0,x=!0),k?(S[S.length-1]+=R,k=!1):S.push(R),w+=R.length;return S},TextProperty.prototype.completeTextData=function(_){_.__complete=!0;var S=this.elem.globalData.fontManager,w=this.data,E=[],T,A,k,x=0,R,P=w.m.g,M=0,N=0,I=0,V=[],B=0,D=0,z,O,L=S.getFontByName(_.f),F,$=0,H=getFontProperties(L);_.fWeight=H.weight,_.fStyle=H.style,_.finalSize=_.s,_.finalText=this.buildFinalText(_.t),A=_.finalText.length,_.finalLineHeight=_.lh;var j=_.tr/1e3*_.finalSize,q;if(_.sz)for(var W=!0,X=_.sz[0],te=_.sz[1],ee,G;W;){G=this.buildFinalText(_.t),ee=0,B=0,A=G.length,j=_.tr/1e3*_.finalSize;var de=-1;for(T=0;T<A;T+=1)q=G[T].charCodeAt(0),k=!1,G[T]===" "?de=T:(q===13||q===3)&&(B=0,k=!0,ee+=_.finalLineHeight||_.finalSize*1.2),S.chars?(F=S.getCharData(G[T],L.fStyle,L.fFamily),$=k?0:F.w*_.finalSize/100):$=S.measureText(G[T],_.f,_.finalSize),B+$>X&&G[T]!==" "?(de===-1?A+=1:T=de,ee+=_.finalLineHeight||_.finalSize*1.2,G.splice(T,de===T?1:0,"\r"),de=-1,B=0):(B+=$,B+=j);ee+=L.ascent*_.finalSize/100,this.canResize&&_.finalSize>this.minimumFontSize&&te<ee?(_.finalSize-=1,_.finalLineHeight=_.finalSize*_.lh/_.s):(_.finalText=G,A=_.finalText.length,W=!1)}B=-j,$=0;var le=0,ae;for(T=0;T<A;T+=1)if(k=!1,ae=_.finalText[T],q=ae.charCodeAt(0),q===13||q===3?(le=0,V.push(B),D=B>D?B:D,B=-2*j,R="",k=!0,I+=1):R=ae,S.chars?(F=S.getCharData(ae,L.fStyle,S.getFontByName(_.f).fFamily),$=k?0:F.w*_.finalSize/100):$=S.measureText(R,_.f,_.finalSize),ae===" "?le+=$+j:(B+=$+j+le,le=0),E.push({l:$,an:$,add:M,n:k,anIndexes:[],val:R,line:I,animatorJustifyOffset:0}),P==2){if(M+=$,R===""||R===" "||T===A-1){for((R===""||R===" ")&&(M-=$);N<=T;)E[N].an=M,E[N].ind=x,E[N].extra=$,N+=1;x+=1,M=0}}else if(P==3){if(M+=$,R===""||T===A-1){for(R===""&&(M-=$);N<=T;)E[N].an=M,E[N].ind=x,E[N].extra=$,N+=1;M=0,x+=1}}else E[x].ind=x,E[x].extra=0,x+=1;if(_.l=E,D=B>D?B:D,V.push(B),_.sz)_.boxWidth=_.sz[0],_.justifyOffset=0;else switch(_.boxWidth=D,_.j){case 1:_.justifyOffset=-_.boxWidth;break;case 2:_.justifyOffset=-_.boxWidth/2;break;default:_.justifyOffset=0}_.lineWidths=V;var Q=w.a,ie,Z;O=Q.length;var J,ue,pe=[];for(z=0;z<O;z+=1){for(ie=Q[z],ie.a.sc&&(_.strokeColorAnim=!0),ie.a.sw&&(_.strokeWidthAnim=!0),(ie.a.fc||ie.a.fh||ie.a.fs||ie.a.fb)&&(_.fillColorAnim=!0),ue=0,J=ie.s.b,T=0;T<A;T+=1)Z=E[T],Z.anIndexes[z]=ue,(J==1&&Z.val!==""||J==2&&Z.val!==""&&Z.val!==" "||J==3&&(Z.n||Z.val==" "||T==A-1)||J==4&&(Z.n||T==A-1))&&(ie.s.rn===1&&pe.push(ue),ue+=1);w.a[z].s.totalChars=ue;var Re=-1,me;if(ie.s.rn===1)for(T=0;T<A;T+=1)Z=E[T],Re!=Z.anIndexes[z]&&(Re=Z.anIndexes[z],me=pe.splice(Math.floor(Math.random()*pe.length),1)[0]),Z.anIndexes[z]=me}_.yOffset=_.finalLineHeight||_.finalSize*1.2,_.ls=_.ls||0,_.ascent=L.ascent*_.finalSize/100},TextProperty.prototype.updateDocumentData=function(_,S){S=S===void 0?this.keysIndex:S;var w=this.copyData({},this.data.d.k[S].s);w=this.copyData(w,_),this.data.d.k[S].s=w,this.recalculate(S),this.setCurrentData(w),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(_){var S=this.data.d.k[_].s;S.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(S)},TextProperty.prototype.canResizeFont=function(_){this.canResize=_,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(_){this.minimumFontSize=Math.floor(_)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=(function(){var _=Math.max,S=Math.min,w=Math.floor;function E(A,k){this._currentTextLength=-1,this.k=!1,this.data=k,this.elem=A,this.comp=A.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(A),this.s=PropertyFactory.getProp(A,k.s||{k:0},0,0,this),"e"in k?this.e=PropertyFactory.getProp(A,k.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(A,k.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(A,k.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(A,k.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(A,k.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(A,k.a,0,.01,this),this.dynamicProperties.length||this.getValue()}E.prototype={getMult:function(k){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var x=0,R=0,P=1,M=1;this.ne.v>0?x=this.ne.v/100:R=-this.ne.v/100,this.xe.v>0?P=1-this.xe.v/100:M=1+this.xe.v/100;var N=BezierFactory.getBezierEasing(x,R,P,M).get,I=0,V=this.finalS,B=this.finalE,D=this.data.sh;if(D===2)B===V?I=k>=B?1:0:I=_(0,S(.5/(B-V)+(k-V)/(B-V),1)),I=N(I);else if(D===3)B===V?I=k>=B?0:1:I=1-_(0,S(.5/(B-V)+(k-V)/(B-V),1)),I=N(I);else if(D===4)B===V?I=0:(I=_(0,S(.5/(B-V)+(k-V)/(B-V),1)),I<.5?I*=2:I=1-2*(I-.5)),I=N(I);else if(D===5){if(B===V)I=0;else{var z=B-V;k=S(_(0,k+.5-V),B-V);var O=-z/2+k,L=z/2;I=Math.sqrt(1-O*O/(L*L))}I=N(I)}else D===6?(B===V?I=0:(k=S(_(0,k+.5-V),B-V),I=(1+Math.cos(Math.PI+Math.PI*2*k/(B-V)))/2),I=N(I)):(k>=w(V)&&(k-V<0?I=_(0,S(S(B,1)-(V-k),1)):I=_(0,S(B-k,1))),I=N(I));if(this.sm.v!==100){var F=this.sm.v*.01;F===0&&(F=1e-8);var $=.5-F*.5;I<$?I=0:(I=(I-$)/F,I>1&&(I=1))}return I*this.a.v},getValue:function(k){this.iterateDynamicProperties(),this._mdf=k||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,k&&this.data.r===2&&(this.e.v=this._currentTextLength);var x=this.data.r===2?1:100/this.data.totalChars,R=this.o.v/x,P=this.s.v/x+R,M=this.e.v/x+R;if(P>M){var N=P;P=M,M=N}this.finalS=P,this.finalE=M}},extendPrototype([DynamicPropertyContainer],E);function T(A,k,x){return new E(A,k)}return{getTextSelectorProp:T}})();function TextAnimatorDataProperty(_,S,w){var E={propType:!1},T=PropertyFactory.getProp,A=S.a;this.a={r:A.r?T(_,A.r,0,degToRads,w):E,rx:A.rx?T(_,A.rx,0,degToRads,w):E,ry:A.ry?T(_,A.ry,0,degToRads,w):E,sk:A.sk?T(_,A.sk,0,degToRads,w):E,sa:A.sa?T(_,A.sa,0,degToRads,w):E,s:A.s?T(_,A.s,1,.01,w):E,a:A.a?T(_,A.a,1,0,w):E,o:A.o?T(_,A.o,0,.01,w):E,p:A.p?T(_,A.p,1,0,w):E,sw:A.sw?T(_,A.sw,0,0,w):E,sc:A.sc?T(_,A.sc,1,0,w):E,fc:A.fc?T(_,A.fc,1,0,w):E,fh:A.fh?T(_,A.fh,0,0,w):E,fs:A.fs?T(_,A.fs,0,.01,w):E,fb:A.fb?T(_,A.fb,0,.01,w):E,t:A.t?T(_,A.t,0,0,w):E},this.s=TextSelectorProp.getTextSelectorProp(_,S.s,w),this.s.t=S.s.t}function TextAnimatorProperty(_,S,w){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=_,this._renderType=S,this._elem=w,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(w)}TextAnimatorProperty.prototype.searchProperties=function(){var _,S=this._textData.a.length,w,E=PropertyFactory.getProp;for(_=0;_<S;_+=1)w=this._textData.a[_],this._animatorsData[_]=new TextAnimatorDataProperty(this._elem,w,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:E(this._elem,this._textData.p.a,0,0,this),f:E(this._elem,this._textData.p.f,0,0,this),l:E(this._elem,this._textData.p.l,0,0,this),r:E(this._elem,this._textData.p.r,0,0,this),p:E(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=E(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(_,S){if(this.lettersChangedFlag=S,!(!this._mdf&&!this._isFirstFrame&&!S&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var w=this._moreOptions.alignment.v,E=this._animatorsData,T=this._textData,A=this.mHelper,k=this._renderType,x=this.renderedLetters.length,R,P,M,N,I=_.l,V,B,D,z,O,L,F,$,H,j,q,W,X,te,ee;if(this._hasMaskedPath){if(ee=this._pathData.m,!this._pathData.n||this._pathData._mdf){var G=ee.v;this._pathData.r.v&&(G=G.reverse()),V={tLength:0,segments:[]},N=G._length-1;var de;for(W=0,M=0;M<N;M+=1)de=bez.buildBezierData(G.v[M],G.v[M+1],[G.o[M][0]-G.v[M][0],G.o[M][1]-G.v[M][1]],[G.i[M+1][0]-G.v[M+1][0],G.i[M+1][1]-G.v[M+1][1]]),V.tLength+=de.segmentLength,V.segments.push(de),W+=de.segmentLength;M=N,ee.v.c&&(de=bez.buildBezierData(G.v[M],G.v[0],[G.o[M][0]-G.v[M][0],G.o[M][1]-G.v[M][1]],[G.i[0][0]-G.v[0][0],G.i[0][1]-G.v[0][1]]),V.tLength+=de.segmentLength,V.segments.push(de),W+=de.segmentLength),this._pathData.pi=V}if(V=this._pathData.pi,B=this._pathData.f.v,F=0,L=1,z=0,O=!0,j=V.segments,B<0&&ee.v.c)for(V.tLength<Math.abs(B)&&(B=-Math.abs(B)%V.tLength),F=j.length-1,H=j[F].points,L=H.length-1;B<0;)B+=H[L].partialLength,L-=1,L<0&&(F-=1,H=j[F].points,L=H.length-1);H=j[F].points,$=H[L-1],D=H[L],q=D.partialLength}N=I.length,R=0,P=0;var le=_.finalSize*1.2*.714,ae=!0,Q,ie,Z,J,ue;J=E.length;var pe,Re=-1,me,ge,we,oe=B,ce=F,ye=L,xe=-1,Ae,se,K,ne,fe,Ee,be,Te,Ne="",ve=this.defaultPropsArray,Oe;if(_.j===2||_.j===1){var Pe=0,Se=0,Ce=_.j===2?-.5:-1,Fe=0,$e=!0;for(M=0;M<N;M+=1)if(I[M].n){for(Pe&&(Pe+=Se);Fe<M;)I[Fe].animatorJustifyOffset=Pe,Fe+=1;Pe=0,$e=!0}else{for(Z=0;Z<J;Z+=1)Q=E[Z].a,Q.t.propType&&($e&&_.j===2&&(Se+=Q.t.v*Ce),ie=E[Z].s,pe=ie.getMult(I[M].anIndexes[Z],T.a[Z].s.totalChars),pe.length?Pe+=Q.t.v*pe[0]*Ce:Pe+=Q.t.v*pe*Ce);$e=!1}for(Pe&&(Pe+=Se);Fe<M;)I[Fe].animatorJustifyOffset=Pe,Fe+=1}for(M=0;M<N;M+=1){if(A.reset(),Ae=1,I[M].n)R=0,P+=_.yOffset,P+=ae?1:0,B=oe,ae=!1,this._hasMaskedPath&&(F=ce,L=ye,H=j[F].points,$=H[L-1],D=H[L],q=D.partialLength,z=0),Ne="",Te="",Ee="",Oe="",ve=this.defaultPropsArray;else{if(this._hasMaskedPath){if(xe!==I[M].line){switch(_.j){case 1:B+=W-_.lineWidths[I[M].line];break;case 2:B+=(W-_.lineWidths[I[M].line])/2;break}xe=I[M].line}Re!==I[M].ind&&(I[Re]&&(B+=I[Re].extra),B+=I[M].an/2,Re=I[M].ind),B+=w[0]*I[M].an*.005;var De=0;for(Z=0;Z<J;Z+=1)Q=E[Z].a,Q.p.propType&&(ie=E[Z].s,pe=ie.getMult(I[M].anIndexes[Z],T.a[Z].s.totalChars),pe.length?De+=Q.p.v[0]*pe[0]:De+=Q.p.v[0]*pe),Q.a.propType&&(ie=E[Z].s,pe=ie.getMult(I[M].anIndexes[Z],T.a[Z].s.totalChars),pe.length?De+=Q.a.v[0]*pe[0]:De+=Q.a.v[0]*pe);for(O=!0,this._pathData.a.v&&(B=I[0].an*.5+(W-this._pathData.f.v-I[0].an*.5-I[I.length-1].an*.5)*Re/(N-1),B+=this._pathData.f.v);O;)z+q>=B+De||!H?(X=(B+De-z)/D.partialLength,ge=$.point[0]+(D.point[0]-$.point[0])*X,we=$.point[1]+(D.point[1]-$.point[1])*X,A.translate(-w[0]*I[M].an*.005,-(w[1]*le)*.01),O=!1):H&&(z+=D.partialLength,L+=1,L>=H.length&&(L=0,F+=1,j[F]?H=j[F].points:ee.v.c?(L=0,F=0,H=j[F].points):(z-=D.partialLength,H=null)),H&&($=D,D=H[L],q=D.partialLength));me=I[M].an/2-I[M].add,A.translate(-me,0,0)}else me=I[M].an/2-I[M].add,A.translate(-me,0,0),A.translate(-w[0]*I[M].an*.005,-w[1]*le*.01,0);for(Z=0;Z<J;Z+=1)Q=E[Z].a,Q.t.propType&&(ie=E[Z].s,pe=ie.getMult(I[M].anIndexes[Z],T.a[Z].s.totalChars),(R!==0||_.j!==0)&&(this._hasMaskedPath?pe.length?B+=Q.t.v*pe[0]:B+=Q.t.v*pe:pe.length?R+=Q.t.v*pe[0]:R+=Q.t.v*pe));for(_.strokeWidthAnim&&(K=_.sw||0),_.strokeColorAnim&&(_.sc?se=[_.sc[0],_.sc[1],_.sc[2]]:se=[0,0,0]),_.fillColorAnim&&_.fc&&(ne=[_.fc[0],_.fc[1],_.fc[2]]),Z=0;Z<J;Z+=1)Q=E[Z].a,Q.a.propType&&(ie=E[Z].s,pe=ie.getMult(I[M].anIndexes[Z],T.a[Z].s.totalChars),pe.length?A.translate(-Q.a.v[0]*pe[0],-Q.a.v[1]*pe[1],Q.a.v[2]*pe[2]):A.translate(-Q.a.v[0]*pe,-Q.a.v[1]*pe,Q.a.v[2]*pe));for(Z=0;Z<J;Z+=1)Q=E[Z].a,Q.s.propType&&(ie=E[Z].s,pe=ie.getMult(I[M].anIndexes[Z],T.a[Z].s.totalChars),pe.length?A.scale(1+(Q.s.v[0]-1)*pe[0],1+(Q.s.v[1]-1)*pe[1],1):A.scale(1+(Q.s.v[0]-1)*pe,1+(Q.s.v[1]-1)*pe,1));for(Z=0;Z<J;Z+=1){if(Q=E[Z].a,ie=E[Z].s,pe=ie.getMult(I[M].anIndexes[Z],T.a[Z].s.totalChars),Q.sk.propType&&(pe.length?A.skewFromAxis(-Q.sk.v*pe[0],Q.sa.v*pe[1]):A.skewFromAxis(-Q.sk.v*pe,Q.sa.v*pe)),Q.r.propType&&(pe.length?A.rotateZ(-Q.r.v*pe[2]):A.rotateZ(-Q.r.v*pe)),Q.ry.propType&&(pe.length?A.rotateY(Q.ry.v*pe[1]):A.rotateY(Q.ry.v*pe)),Q.rx.propType&&(pe.length?A.rotateX(Q.rx.v*pe[0]):A.rotateX(Q.rx.v*pe)),Q.o.propType&&(pe.length?Ae+=(Q.o.v*pe[0]-Ae)*pe[0]:Ae+=(Q.o.v*pe-Ae)*pe),_.strokeWidthAnim&&Q.sw.propType&&(pe.length?K+=Q.sw.v*pe[0]:K+=Q.sw.v*pe),_.strokeColorAnim&&Q.sc.propType)for(fe=0;fe<3;fe+=1)pe.length?se[fe]+=(Q.sc.v[fe]-se[fe])*pe[0]:se[fe]+=(Q.sc.v[fe]-se[fe])*pe;if(_.fillColorAnim&&_.fc){if(Q.fc.propType)for(fe=0;fe<3;fe+=1)pe.length?ne[fe]+=(Q.fc.v[fe]-ne[fe])*pe[0]:ne[fe]+=(Q.fc.v[fe]-ne[fe])*pe;Q.fh.propType&&(pe.length?ne=addHueToRGB(ne,Q.fh.v*pe[0]):ne=addHueToRGB(ne,Q.fh.v*pe)),Q.fs.propType&&(pe.length?ne=addSaturationToRGB(ne,Q.fs.v*pe[0]):ne=addSaturationToRGB(ne,Q.fs.v*pe)),Q.fb.propType&&(pe.length?ne=addBrightnessToRGB(ne,Q.fb.v*pe[0]):ne=addBrightnessToRGB(ne,Q.fb.v*pe))}}for(Z=0;Z<J;Z+=1)Q=E[Z].a,Q.p.propType&&(ie=E[Z].s,pe=ie.getMult(I[M].anIndexes[Z],T.a[Z].s.totalChars),this._hasMaskedPath?pe.length?A.translate(0,Q.p.v[1]*pe[0],-Q.p.v[2]*pe[1]):A.translate(0,Q.p.v[1]*pe,-Q.p.v[2]*pe):pe.length?A.translate(Q.p.v[0]*pe[0],Q.p.v[1]*pe[1],-Q.p.v[2]*pe[2]):A.translate(Q.p.v[0]*pe,Q.p.v[1]*pe,-Q.p.v[2]*pe));if(_.strokeWidthAnim&&(Ee=K<0?0:K),_.strokeColorAnim&&(be="rgb("+Math.round(se[0]*255)+","+Math.round(se[1]*255)+","+Math.round(se[2]*255)+")"),_.fillColorAnim&&_.fc&&(Te="rgb("+Math.round(ne[0]*255)+","+Math.round(ne[1]*255)+","+Math.round(ne[2]*255)+")"),this._hasMaskedPath){if(A.translate(0,-_.ls),A.translate(0,w[1]*le*.01+P,0),this._pathData.p.v){te=(D.point[1]-$.point[1])/(D.point[0]-$.point[0]);var ze=Math.atan(te)*180/Math.PI;D.point[0]<$.point[0]&&(ze+=180),A.rotate(-ze*Math.PI/180)}A.translate(ge,we,0),B-=w[0]*I[M].an*.005,I[M+1]&&Re!==I[M+1].ind&&(B+=I[M].an/2,B+=_.tr*.001*_.finalSize)}else{switch(A.translate(R,P,0),_.ps&&A.translate(_.ps[0],_.ps[1]+_.ascent,0),_.j){case 1:A.translate(I[M].animatorJustifyOffset+_.justifyOffset+(_.boxWidth-_.lineWidths[I[M].line]),0,0);break;case 2:A.translate(I[M].animatorJustifyOffset+_.justifyOffset+(_.boxWidth-_.lineWidths[I[M].line])/2,0,0);break}A.translate(0,-_.ls),A.translate(me,0,0),A.translate(w[0]*I[M].an*.005,w[1]*le*.01,0),R+=I[M].l+_.tr*.001*_.finalSize}k==="html"?Ne=A.toCSS():k==="svg"?Ne=A.to2dCSS():ve=[A.props[0],A.props[1],A.props[2],A.props[3],A.props[4],A.props[5],A.props[6],A.props[7],A.props[8],A.props[9],A.props[10],A.props[11],A.props[12],A.props[13],A.props[14],A.props[15]],Oe=Ae}x<=M?(ue=new LetterProps(Oe,Ee,be,Te,Ne,ve),this.renderedLetters.push(ue),x+=1,this.lettersChangedFlag=!0):(ue=this.renderedLetters[M],this.lettersChangedFlag=ue.update(Oe,Ee,be,Te,Ne,ve)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(_,S,w){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(_,S,w),this.textProperty=new TextProperty(this,_.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(_.t,this.renderType,this),this.initTransform(_,S,w),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(_){this._mdf=!1,this.prepareRenderableFrame(_),this.prepareProperties(_,this.isInRange)},ITextElement.prototype.createPathShape=function(_,S){var w,E=S.length,T,A="";for(w=0;w<E;w+=1)S[w].ty==="sh"&&(T=S[w].ks.k,A+=buildShapeString(T,T.i.length,!0,_));return A},ITextElement.prototype.updateDocumentData=function(_,S){this.textProperty.updateDocumentData(_,S)},ITextElement.prototype.canResizeFont=function(_){this.textProperty.canResizeFont(_)},ITextElement.prototype.setMinimumFontSize=function(_){this.textProperty.setMinimumFontSize(_)},ITextElement.prototype.applyTextPropertiesToMatrix=function(_,S,w,E,T){switch(_.ps&&S.translate(_.ps[0],_.ps[1]+_.ascent,0),S.translate(0,-_.ls,0),_.j){case 1:S.translate(_.justifyOffset+(_.boxWidth-_.lineWidths[w]),0,0);break;case 2:S.translate(_.justifyOffset+(_.boxWidth-_.lineWidths[w])/2,0,0);break}S.translate(E,T,0)},ITextElement.prototype.buildColor=function(_){return"rgb("+Math.round(_[0]*255)+","+Math.round(_[1]*255)+","+Math.round(_[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(_,S,w){this.textSpans=[],this.renderType="svg",this.initElement(_,S,w)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(_){for(var S=0,w=_.length,E=[],T="";S<w;)_[S]==="\r"||_[S]===""?(E.push(T),T=""):T+=_[S],S+=1;return E.push(T),E},SVGTextLottieElement.prototype.buildShapeData=function(_,S){if(_.shapes&&_.shapes.length){var w=_.shapes[0];if(w.it){var E=w.it[w.it.length-1];E.s&&(E.s.k[0]=S,E.s.k[1]=S)}}return _},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var _,S,w=this.textProperty.currentData;this.renderedLetters=createSizedArray(w?w.l.length:0),w.fc?this.layerElement.setAttribute("fill",this.buildColor(w.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),w.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(w.sc)),this.layerElement.setAttribute("stroke-width",w.sw)),this.layerElement.setAttribute("font-size",w.finalSize);var E=this.globalData.fontManager.getFontByName(w.f);if(E.fClass)this.layerElement.setAttribute("class",E.fClass);else{this.layerElement.setAttribute("font-family",E.fFamily);var T=w.fWeight,A=w.fStyle;this.layerElement.setAttribute("font-style",A),this.layerElement.setAttribute("font-weight",T)}this.layerElement.setAttribute("aria-label",w.t);var k=w.l||[],x=!!this.globalData.fontManager.chars;S=k.length;var R,P=this.mHelper,M="",N=this.data.singleShape,I=0,V=0,B=!0,D=w.tr*.001*w.finalSize;if(N&&!x&&!w.sz){var z=this.textContainer,O="start";switch(w.j){case 1:O="end";break;case 2:O="middle";break;default:O="start";break}z.setAttribute("text-anchor",O),z.setAttribute("letter-spacing",D);var L=this.buildTextContents(w.finalText);for(S=L.length,V=w.ps?w.ps[1]+w.ascent:0,_=0;_<S;_+=1)R=this.textSpans[_].span||createNS("tspan"),R.textContent=L[_],R.setAttribute("x",0),R.setAttribute("y",V),R.style.display="inherit",z.appendChild(R),this.textSpans[_]||(this.textSpans[_]={span:null,glyph:null}),this.textSpans[_].span=R,V+=w.finalLineHeight;this.layerElement.appendChild(z)}else{var F=this.textSpans.length,$;for(_=0;_<S;_+=1){if(this.textSpans[_]||(this.textSpans[_]={span:null,childSpan:null,glyph:null}),!x||!N||_===0){if(R=F>_?this.textSpans[_].span:createNS(x?"g":"text"),F<=_){if(R.setAttribute("stroke-linecap","butt"),R.setAttribute("stroke-linejoin","round"),R.setAttribute("stroke-miterlimit","4"),this.textSpans[_].span=R,x){var H=createNS("g");R.appendChild(H),this.textSpans[_].childSpan=H}this.textSpans[_].span=R,this.layerElement.appendChild(R)}R.style.display="inherit"}if(P.reset(),N&&(k[_].n&&(I=-D,V+=w.yOffset,V+=B?1:0,B=!1),this.applyTextPropertiesToMatrix(w,P,k[_].line,I,V),I+=k[_].l||0,I+=D),x){$=this.globalData.fontManager.getCharData(w.finalText[_],E.fStyle,this.globalData.fontManager.getFontByName(w.f).fFamily);var j;if($.t===1)j=new SVGCompElement($.data,this.globalData,this);else{var q=emptyShapeData;$.data&&$.data.shapes&&(q=this.buildShapeData($.data,w.finalSize)),j=new SVGShapeElement(q,this.globalData,this)}if(this.textSpans[_].glyph){var W=this.textSpans[_].glyph;this.textSpans[_].childSpan.removeChild(W.layerElement),W.destroy()}this.textSpans[_].glyph=j,j._debug=!0,j.prepareFrame(0),j.renderFrame(),this.textSpans[_].childSpan.appendChild(j.layerElement),$.t===1&&this.textSpans[_].childSpan.setAttribute("transform","scale("+w.finalSize/100+","+w.finalSize/100+")")}else N&&R.setAttribute("transform","translate("+P.props[12]+","+P.props[13]+")"),R.textContent=k[_].val,R.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}N&&R&&R.setAttribute("d",M)}for(;_<this.textSpans.length;)this.textSpans[_].span.style.display="none",_+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var _=this.layerElement.getBBox();this.bbox={top:_.y,left:_.x,width:_.width,height:_.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var _,S=this.textSpans.length,w;for(this.renderedFrame=this.comp.renderedFrame,_=0;_<S;_+=1)w=this.textSpans[_].glyph,w&&(w.prepareFrame(this.comp.renderedFrame-this.data.st),w._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var _,S,w=this.textAnimator.renderedLetters,E=this.textProperty.currentData.l;S=E.length;var T,A,k;for(_=0;_<S;_+=1)E[_].n||(T=w[_],A=this.textSpans[_].span,k=this.textSpans[_].glyph,k&&k.renderFrame(),T._mdf.m&&A.setAttribute("transform",T.m),T._mdf.o&&A.setAttribute("opacity",T.o),T._mdf.sw&&A.setAttribute("stroke-width",T.sw),T._mdf.sc&&A.setAttribute("stroke",T.sc),T._mdf.fc&&A.setAttribute("fill",T.fc))}};function ISolidElement(_,S,w){this.initElement(_,S,w)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var _=createNS("rect");_.setAttribute("width",this.data.sw),_.setAttribute("height",this.data.sh),_.setAttribute("fill",this.data.sc),this.layerElement.appendChild(_)};function NullElement(_,S,w){this.initFrame(),this.initBaseData(_,S,w),this.initFrame(),this.initTransform(_,S,w),this.initHierarchy()}NullElement.prototype.prepareFrame=function(_){this.prepareProperties(_,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(_){return new NullElement(_,this.globalData,this)},SVGRendererBase.prototype.createShape=function(_){return new SVGShapeElement(_,this.globalData,this)},SVGRendererBase.prototype.createText=function(_){return new SVGTextLottieElement(_,this.globalData,this)},SVGRendererBase.prototype.createImage=function(_){return new IImageElement(_,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(_){return new ISolidElement(_,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(_){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+_.w+" "+_.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",_.w),this.svgElement.setAttribute("height",_.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var S=this.globalData.defs;this.setupGlobalData(_,S),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=_;var w=createNS("clipPath"),E=createNS("rect");E.setAttribute("width",_.w),E.setAttribute("height",_.h),E.setAttribute("x",0),E.setAttribute("y",0);var T=createElementID();w.setAttribute("id",T),w.appendChild(E),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+T+")"),S.appendChild(w),this.layers=_.layers,this.elements=createSizedArray(_.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var _,S=this.layers?this.layers.length:0;for(_=0;_<S;_+=1)this.elements[_]&&this.elements[_].destroy&&this.elements[_].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(_){var S=0,w=this.layers.length;for(S=0;S<w;S+=1)if(this.layers[S].ind===_)return S;return-1},SVGRendererBase.prototype.buildItem=function(_){var S=this.elements;if(!(S[_]||this.layers[_].ty===99)){S[_]=!0;var w=this.createItem(this.layers[_]);if(S[_]=w,getExpressionsPlugin()&&(this.layers[_].ty===0&&this.globalData.projectInterface.registerComposition(w),w.initExpressions()),this.appendElementInPos(w,_),this.layers[_].tt){var E="tp"in this.layers[_]?this.findIndexByInd(this.layers[_].tp):_-1;if(E===-1)return;if(!this.elements[E]||this.elements[E]===!0)this.buildItem(E),this.addPendingElement(w);else{var T=S[E],A=T.getMatte(this.layers[_].tt);w.setMatte(A)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var _=this.pendingElements.pop();if(_.checkParenting(),_.data.tt)for(var S=0,w=this.elements.length;S<w;){if(this.elements[S]===_){var E="tp"in _.data?this.findIndexByInd(_.data.tp):S-1,T=this.elements[E],A=T.getMatte(this.layers[S].tt);_.setMatte(A);break}S+=1}}},SVGRendererBase.prototype.renderFrame=function(_){if(!(this.renderedFrame===_||this.destroyed)){_===null?_=this.renderedFrame:this.renderedFrame=_,this.globalData.frameNum=_,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=_,this.globalData._mdf=!1;var S,w=this.layers.length;for(this.completeLayers||this.checkLayers(_),S=w-1;S>=0;S-=1)(this.completeLayers||this.elements[S])&&this.elements[S].prepareFrame(_-this.layers[S].st);if(this.globalData._mdf)for(S=0;S<w;S+=1)(this.completeLayers||this.elements[S])&&this.elements[S].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(_,S){var w=_.getBaseElement();if(w){for(var E=0,T;E<S;)this.elements[E]&&this.elements[E]!==!0&&this.elements[E].getBaseElement()&&(T=this.elements[E].getBaseElement()),E+=1;T?this.layerElement.insertBefore(w,T):this.layerElement.appendChild(w)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(_,S,w){this.initFrame(),this.initBaseData(_,S,w),this.initTransform(_,S,w),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!S.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(_){if(this._mdf=!1,this.prepareRenderableFrame(_),this.prepareProperties(_,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=_/this.data.sr;else{var S=this.tm.v;S===this.data.op&&(S=this.data.op-1),this.renderedFrame=S}var w,E=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),w=E-1;w>=0;w-=1)(this.completeLayers||this.elements[w])&&(this.elements[w].prepareFrame(this.renderedFrame-this.layers[w].st),this.elements[w]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var _,S=this.layers.length;for(_=0;_<S;_+=1)(this.completeLayers||this.elements[_])&&this.elements[_].renderFrame()},ICompElement.prototype.setElements=function(_){this.elements=_},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var _,S=this.layers.length;for(_=0;_<S;_+=1)this.elements[_]&&this.elements[_].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(_,S,w){this.layers=_.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(_,S,w),this.tm=_.tm?PropertyFactory.getProp(this,_.tm,0,S.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(_){return new SVGCompElement(_,this.globalData,this)};function SVGRenderer(_,S){this.animationItem=_,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var w="";if(S&&S.title){var E=createNS("title"),T=createElementID();E.setAttribute("id",T),E.textContent=S.title,this.svgElement.appendChild(E),w+=T}if(S&&S.description){var A=createNS("desc"),k=createElementID();A.setAttribute("id",k),A.textContent=S.description,this.svgElement.appendChild(A),w+=" "+k}w&&this.svgElement.setAttribute("aria-labelledby",w);var x=createNS("defs");this.svgElement.appendChild(x);var R=createNS("g");this.svgElement.appendChild(R),this.layerElement=R,this.renderConfig={preserveAspectRatio:S&&S.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:S&&S.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:S&&S.contentVisibility||"visible",progressiveLoad:S&&S.progressiveLoad||!1,hideOnTransparent:!(S&&S.hideOnTransparent===!1),viewBoxOnly:S&&S.viewBoxOnly||!1,viewBoxSize:S&&S.viewBoxSize||!1,className:S&&S.className||"",id:S&&S.id||"",focusable:S&&S.focusable,filterSize:{width:S&&S.filterSize&&S.filterSize.width||"100%",height:S&&S.filterSize&&S.filterSize.height||"100%",x:S&&S.filterSize&&S.filterSize.x||"0%",y:S&&S.filterSize&&S.filterSize.y||"0%"},width:S&&S.width,height:S&&S.height,runExpressions:!S||S.runExpressions===void 0||S.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:x,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(_){return new SVGCompElement(_,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(S){var w,E=S.length,T="_";for(w=0;w<E;w+=1)T+=S[w].transform.key+"_";var A=this.sequences[T];return A||(A={transforms:[].concat(S),finalTransform:new Matrix,_mdf:!1},this.sequences[T]=A,this.sequenceList.push(A)),A},processSequence:function(S,w){for(var E=0,T=S.transforms.length,A=w;E<T&&!w;){if(S.transforms[E].transform.mProps._mdf){A=!0;break}E+=1}if(A)for(S.finalTransform.reset(),E=T-1;E>=0;E-=1)S.finalTransform.multiply(S.transforms[E].transform.mProps.v);S._mdf=A},processSequences:function(S){var w,E=this.sequenceList.length;for(w=0;w<E;w+=1)this.processSequence(this.sequenceList[w],S)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var S="__lottie_element_luma_buffer",w=null,E=null,T=null;function A(){var R=createNS("svg"),P=createNS("filter"),M=createNS("feColorMatrix");return P.setAttribute("id",S),M.setAttribute("type","matrix"),M.setAttribute("color-interpolation-filters","sRGB"),M.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),P.appendChild(M),R.appendChild(P),R.setAttribute("id",S+"_svg"),featureSupport.svgLumaHidden&&(R.style.display="none"),R}function k(){w||(T=A(),document.body.appendChild(T),w=createTag("canvas"),E=w.getContext("2d"),E.filter="url(#"+S+")",E.fillStyle="rgba(0,0,0,0)",E.fillRect(0,0,1,1))}function x(R){return w||k(),w.width=R.width,w.height=R.height,E.filter="url(#"+S+")",w}return{load:k,get:x}};function createCanvas(_,S){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(_,S);var w=createTag("canvas");return w.width=_,w.height=S,w}var assetLoader=(function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}})(),registeredEffects={};function CVEffects(_){var S,w=_.data.ef?_.data.ef.length:0;this.filters=[];var E;for(S=0;S<w;S+=1){E=null;var T=_.data.ef[S].ty;if(registeredEffects[T]){var A=registeredEffects[T].effect;E=new A(_.effectsManager.effectElements[S],_)}E&&this.filters.push(E)}this.filters.length&&_.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(_){var S,w=this.filters.length;for(S=0;S<w;S+=1)this.filters[S].renderFrame(_)},CVEffects.prototype.getEffects=function(_){var S,w=this.filters.length,E=[];for(S=0;S<w;S+=1)this.filters[S].type===_&&E.push(this.filters[S]);return E};function registerEffect(_,S){registeredEffects[_]={effect:S}}function CVMaskElement(_,S){this.data=_,this.element=S,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var w,E=this.masksProperties.length,T=!1;for(w=0;w<E;w+=1)this.masksProperties[w].mode!=="n"&&(T=!0),this.viewData[w]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[w],3);this.hasMasks=T,T&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var _=this.element.finalTransform.mat,S=this.element.canvasContext,w,E=this.masksProperties.length,T,A,k;for(S.beginPath(),w=0;w<E;w+=1)if(this.masksProperties[w].mode!=="n"){this.masksProperties[w].inv&&(S.moveTo(0,0),S.lineTo(this.element.globalData.compSize.w,0),S.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),S.lineTo(0,this.element.globalData.compSize.h),S.lineTo(0,0)),k=this.viewData[w].v,T=_.applyToPointArray(k.v[0][0],k.v[0][1],0),S.moveTo(T[0],T[1]);var x,R=k._length;for(x=1;x<R;x+=1)A=_.applyToTriplePoints(k.o[x-1],k.i[x],k.v[x]),S.bezierCurveTo(A[0],A[1],A[2],A[3],A[4],A[5]);A=_.applyToTriplePoints(k.o[x-1],k.i[0],k.v[0]),S.bezierCurveTo(A[0],A[1],A[2],A[3],A[4],A[5])}this.element.globalData.renderer.save(!0),S.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var S=this.globalData.canvasContext,w=assetLoader.createCanvas(S.canvas.width,S.canvas.height);this.buffers.push(w);var E=assetLoader.createCanvas(S.canvas.width,S.canvas.height);this.buffers.push(E),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var S=this.globalData;if(S.blendMode!==this.data.bm){S.blendMode=this.data.bm;var w=getBlendMode(this.data.bm);S.canvasContext.globalCompositeOperation=w}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(S){S.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var S=this.buffers[0],w=S.getContext("2d");this.clearCanvas(w),w.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var S=this.buffers[1],w=S.getContext("2d");this.clearCanvas(w),w.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var E=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(E.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var T=assetLoader.getLumaCanvas(this.canvasContext.canvas),A=T.getContext("2d");A.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(T,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(S,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(S){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!S)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var w=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(w),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(w),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(_,S,w,E){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var T=4;S.ty==="rc"?T=5:S.ty==="el"?T=6:S.ty==="sr"&&(T=7),this.sh=ShapePropertyFactory.getShapeProp(_,S,T,_);var A,k=w.length,x;for(A=0;A<k;A+=1)w[A].closed||(x={transforms:E.addTransformSequence(w[A].transforms),trNodes:[]},this.styledShapes.push(x),w[A].elements.push(x))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(_,S,w){this.shapes=[],this.shapesData=_.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(_,S,w)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(_,S){var w={data:_,type:_.ty,preTransforms:this.transformsManager.addTransformSequence(S),transforms:[],elements:[],closed:_.hd===!0},E={};if(_.ty==="fl"||_.ty==="st"?(E.c=PropertyFactory.getProp(this,_.c,1,255,this),E.c.k||(w.co="rgb("+bmFloor(E.c.v[0])+","+bmFloor(E.c.v[1])+","+bmFloor(E.c.v[2])+")")):(_.ty==="gf"||_.ty==="gs")&&(E.s=PropertyFactory.getProp(this,_.s,1,null,this),E.e=PropertyFactory.getProp(this,_.e,1,null,this),E.h=PropertyFactory.getProp(this,_.h||{k:0},0,.01,this),E.a=PropertyFactory.getProp(this,_.a||{k:0},0,degToRads,this),E.g=new GradientProperty(this,_.g,this)),E.o=PropertyFactory.getProp(this,_.o,0,.01,this),_.ty==="st"||_.ty==="gs"){if(w.lc=lineCapEnum[_.lc||2],w.lj=lineJoinEnum[_.lj||2],_.lj==1&&(w.ml=_.ml),E.w=PropertyFactory.getProp(this,_.w,0,null,this),E.w.k||(w.wi=E.w.v),_.d){var T=new DashProperty(this,_.d,"canvas",this);E.d=T,E.d.k||(w.da=E.d.dashArray,w.do=E.d.dashoffset[0])}}else w.r=_.r===2?"evenodd":"nonzero";return this.stylesList.push(w),E.style=w,E},CVShapeElement.prototype.createGroupElement=function(){var _={it:[],prevViewData:[]};return _},CVShapeElement.prototype.createTransformElement=function(_){var S={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,_.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,_,this)}};return S},CVShapeElement.prototype.createShapeElement=function(_){var S=new CVShapeData(this,_,this.stylesList,this.transformsManager);return this.shapes.push(S),this.addShapeToModifiers(S),S},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var _,S=this.itemsData.length;for(_=0;_<S;_+=1)this.prevViewData[_]=this.itemsData[_];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),S=this.dynamicProperties.length,_=0;_<S;_+=1)this.dynamicProperties[_].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(_){var S,w=this.stylesList.length;for(S=0;S<w;S+=1)this.stylesList[S].closed||this.stylesList[S].transforms.push(_)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var _,S=this.stylesList.length;for(_=0;_<S;_+=1)this.stylesList[_].closed||this.stylesList[_].transforms.pop()},CVShapeElement.prototype.closeStyles=function(_){var S,w=_.length;for(S=0;S<w;S+=1)_[S].closed=!0},CVShapeElement.prototype.searchShapes=function(_,S,w,E,T){var A,k=_.length-1,x,R,P=[],M=[],N,I,V,B=[].concat(T);for(A=k;A>=0;A-=1){if(N=this.searchProcessedElement(_[A]),N?S[A]=w[N-1]:_[A]._shouldRender=E,_[A].ty==="fl"||_[A].ty==="st"||_[A].ty==="gf"||_[A].ty==="gs")N?S[A].style.closed=!1:S[A]=this.createStyleElement(_[A],B),P.push(S[A].style);else if(_[A].ty==="gr"){if(!N)S[A]=this.createGroupElement(_[A]);else for(R=S[A].it.length,x=0;x<R;x+=1)S[A].prevViewData[x]=S[A].it[x];this.searchShapes(_[A].it,S[A].it,S[A].prevViewData,E,B)}else _[A].ty==="tr"?(N||(V=this.createTransformElement(_[A]),S[A]=V),B.push(S[A]),this.addTransformToStyleList(S[A])):_[A].ty==="sh"||_[A].ty==="rc"||_[A].ty==="el"||_[A].ty==="sr"?N||(S[A]=this.createShapeElement(_[A])):_[A].ty==="tm"||_[A].ty==="rd"||_[A].ty==="pb"||_[A].ty==="zz"||_[A].ty==="op"?(N?(I=S[A],I.closed=!1):(I=ShapeModifiers.getModifier(_[A].ty),I.init(this,_[A]),S[A]=I,this.shapeModifiers.push(I)),M.push(I)):_[A].ty==="rp"&&(N?(I=S[A],I.closed=!0):(I=ShapeModifiers.getModifier(_[A].ty),S[A]=I,I.init(this,_,A,S),this.shapeModifiers.push(I),E=!1),M.push(I));this.addProcessedElement(_[A],A+1)}for(this.removeTransformFromStyleList(),this.closeStyles(P),k=M.length,A=0;A<k;A+=1)M[A].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(_,S){(_._opMdf||S.op._mdf||this._isFirstFrame)&&(S.opacity=_.opacity,S.opacity*=S.op.v,S._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var _,S=this.stylesList.length,w,E,T,A,k,x,R=this.globalData.renderer,P=this.globalData.canvasContext,M,N;for(_=0;_<S;_+=1)if(N=this.stylesList[_],M=N.type,!((M==="st"||M==="gs")&&N.wi===0||!N.data._shouldRender||N.coOp===0||this.globalData.currentGlobalAlpha===0)){for(R.save(),k=N.elements,M==="st"||M==="gs"?(R.ctxStrokeStyle(M==="st"?N.co:N.grd),R.ctxLineWidth(N.wi),R.ctxLineCap(N.lc),R.ctxLineJoin(N.lj),R.ctxMiterLimit(N.ml||0)):R.ctxFillStyle(M==="fl"?N.co:N.grd),R.ctxOpacity(N.coOp),M!=="st"&&M!=="gs"&&P.beginPath(),R.ctxTransform(N.preTransforms.finalTransform.props),E=k.length,w=0;w<E;w+=1){for((M==="st"||M==="gs")&&(P.beginPath(),N.da&&(P.setLineDash(N.da),P.lineDashOffset=N.do)),x=k[w].trNodes,A=x.length,T=0;T<A;T+=1)x[T].t==="m"?P.moveTo(x[T].p[0],x[T].p[1]):x[T].t==="c"?P.bezierCurveTo(x[T].pts[0],x[T].pts[1],x[T].pts[2],x[T].pts[3],x[T].pts[4],x[T].pts[5]):P.closePath();(M==="st"||M==="gs")&&(R.ctxStroke(),N.da&&P.setLineDash(this.dashResetter))}M!=="st"&&M!=="gs"&&this.globalData.renderer.ctxFill(N.r),R.restore()}},CVShapeElement.prototype.renderShape=function(_,S,w,E){var T,A=S.length-1,k;for(k=_,T=A;T>=0;T-=1)S[T].ty==="tr"?(k=w[T].transform,this.renderShapeTransform(_,k)):S[T].ty==="sh"||S[T].ty==="el"||S[T].ty==="rc"||S[T].ty==="sr"?this.renderPath(S[T],w[T]):S[T].ty==="fl"?this.renderFill(S[T],w[T],k):S[T].ty==="st"?this.renderStroke(S[T],w[T],k):S[T].ty==="gf"||S[T].ty==="gs"?this.renderGradientFill(S[T],w[T],k):S[T].ty==="gr"?this.renderShape(k,S[T].it,w[T].it):S[T].ty;E&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(_,S){if(this._isFirstFrame||S._mdf||_.transforms._mdf){var w=_.trNodes,E=S.paths,T,A,k,x=E._length;w.length=0;var R=_.transforms.finalTransform;for(k=0;k<x;k+=1){var P=E.shapes[k];if(P&&P.v){for(A=P._length,T=1;T<A;T+=1)T===1&&w.push({t:"m",p:R.applyToPointArray(P.v[0][0],P.v[0][1],0)}),w.push({t:"c",pts:R.applyToTriplePoints(P.o[T-1],P.i[T],P.v[T])});A===1&&w.push({t:"m",p:R.applyToPointArray(P.v[0][0],P.v[0][1],0)}),P.c&&A&&(w.push({t:"c",pts:R.applyToTriplePoints(P.o[T-1],P.i[0],P.v[0])}),w.push({t:"z"}))}}_.trNodes=w}},CVShapeElement.prototype.renderPath=function(_,S){if(_.hd!==!0&&_._shouldRender){var w,E=S.styledShapes.length;for(w=0;w<E;w+=1)this.renderStyledShape(S.styledShapes[w],S.sh)}},CVShapeElement.prototype.renderFill=function(_,S,w){var E=S.style;(S.c._mdf||this._isFirstFrame)&&(E.co="rgb("+bmFloor(S.c.v[0])+","+bmFloor(S.c.v[1])+","+bmFloor(S.c.v[2])+")"),(S.o._mdf||w._opMdf||this._isFirstFrame)&&(E.coOp=S.o.v*w.opacity)},CVShapeElement.prototype.renderGradientFill=function(_,S,w){var E=S.style,T;if(!E.grd||S.g._mdf||S.s._mdf||S.e._mdf||_.t!==1&&(S.h._mdf||S.a._mdf)){var A=this.globalData.canvasContext,k=S.s.v,x=S.e.v;if(_.t===1)T=A.createLinearGradient(k[0],k[1],x[0],x[1]);else{var R=Math.sqrt(Math.pow(k[0]-x[0],2)+Math.pow(k[1]-x[1],2)),P=Math.atan2(x[1]-k[1],x[0]-k[0]),M=S.h.v;M>=1?M=.99:M<=-1&&(M=-.99);var N=R*M,I=Math.cos(P+S.a.v)*N+k[0],V=Math.sin(P+S.a.v)*N+k[1];T=A.createRadialGradient(I,V,0,k[0],k[1],R)}var B,D=_.g.p,z=S.g.c,O=1;for(B=0;B<D;B+=1)S.g._hasOpacity&&S.g._collapsable&&(O=S.g.o[B*2+1]),T.addColorStop(z[B*4]/100,"rgba("+z[B*4+1]+","+z[B*4+2]+","+z[B*4+3]+","+O+")");E.grd=T}E.coOp=S.o.v*w.opacity},CVShapeElement.prototype.renderStroke=function(_,S,w){var E=S.style,T=S.d;T&&(T._mdf||this._isFirstFrame)&&(E.da=T.dashArray,E.do=T.dashoffset[0]),(S.c._mdf||this._isFirstFrame)&&(E.co="rgb("+bmFloor(S.c.v[0])+","+bmFloor(S.c.v[1])+","+bmFloor(S.c.v[2])+")"),(S.o._mdf||w._opMdf||this._isFirstFrame)&&(E.coOp=S.o.v*w.opacity),(S.w._mdf||this._isFirstFrame)&&(E.wi=S.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(_,S,w){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(_,S,w)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var _=this.textProperty.currentData;this.renderedLetters=createSizedArray(_.l?_.l.length:0);var S=!1;_.fc?(S=!0,this.values.fill=this.buildColor(_.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=S;var w=!1;_.sc&&(w=!0,this.values.stroke=this.buildColor(_.sc),this.values.sWidth=_.sw);var E=this.globalData.fontManager.getFontByName(_.f),T,A,k=_.l,x=this.mHelper;this.stroke=w,this.values.fValue=_.finalSize+"px "+this.globalData.fontManager.getFontByName(_.f).fFamily,A=_.finalText.length;var R,P,M,N,I,V,B,D,z,O,L=this.data.singleShape,F=_.tr*.001*_.finalSize,$=0,H=0,j=!0,q=0;for(T=0;T<A;T+=1){R=this.globalData.fontManager.getCharData(_.finalText[T],E.fStyle,this.globalData.fontManager.getFontByName(_.f).fFamily),P=R&&R.data||{},x.reset(),L&&k[T].n&&($=-F,H+=_.yOffset,H+=j?1:0,j=!1),I=P.shapes?P.shapes[0].it:[],B=I.length,x.scale(_.finalSize/100,_.finalSize/100),L&&this.applyTextPropertiesToMatrix(_,x,k[T].line,$,H),z=createSizedArray(B-1);var W=0;for(V=0;V<B;V+=1)if(I[V].ty==="sh"){for(N=I[V].ks.k.i.length,D=I[V].ks.k,O=[],M=1;M<N;M+=1)M===1&&O.push(x.applyToX(D.v[0][0],D.v[0][1],0),x.applyToY(D.v[0][0],D.v[0][1],0)),O.push(x.applyToX(D.o[M-1][0],D.o[M-1][1],0),x.applyToY(D.o[M-1][0],D.o[M-1][1],0),x.applyToX(D.i[M][0],D.i[M][1],0),x.applyToY(D.i[M][0],D.i[M][1],0),x.applyToX(D.v[M][0],D.v[M][1],0),x.applyToY(D.v[M][0],D.v[M][1],0));O.push(x.applyToX(D.o[M-1][0],D.o[M-1][1],0),x.applyToY(D.o[M-1][0],D.o[M-1][1],0),x.applyToX(D.i[0][0],D.i[0][1],0),x.applyToY(D.i[0][0],D.i[0][1],0),x.applyToX(D.v[0][0],D.v[0][1],0),x.applyToY(D.v[0][0],D.v[0][1],0)),z[W]=O,W+=1}L&&($+=k[T].l,$+=F),this.textSpans[q]?this.textSpans[q].elem=z:this.textSpans[q]={elem:z},q+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var _=this.canvasContext;_.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var S,w,E,T,A,k,x=this.textAnimator.renderedLetters,R=this.textProperty.currentData.l;w=R.length;var P,M=null,N=null,I=null,V,B,D=this.globalData.renderer;for(S=0;S<w;S+=1)if(!R[S].n){if(P=x[S],P&&(D.save(),D.ctxTransform(P.p),D.ctxOpacity(P.o)),this.fill){for(P&&P.fc?M!==P.fc&&(D.ctxFillStyle(P.fc),M=P.fc):M!==this.values.fill&&(M=this.values.fill,D.ctxFillStyle(this.values.fill)),V=this.textSpans[S].elem,T=V.length,this.globalData.canvasContext.beginPath(),E=0;E<T;E+=1)for(B=V[E],k=B.length,this.globalData.canvasContext.moveTo(B[0],B[1]),A=2;A<k;A+=6)this.globalData.canvasContext.bezierCurveTo(B[A],B[A+1],B[A+2],B[A+3],B[A+4],B[A+5]);this.globalData.canvasContext.closePath(),D.ctxFill()}if(this.stroke){for(P&&P.sw?I!==P.sw&&(I=P.sw,D.ctxLineWidth(P.sw)):I!==this.values.sWidth&&(I=this.values.sWidth,D.ctxLineWidth(this.values.sWidth)),P&&P.sc?N!==P.sc&&(N=P.sc,D.ctxStrokeStyle(P.sc)):N!==this.values.stroke&&(N=this.values.stroke,D.ctxStrokeStyle(this.values.stroke)),V=this.textSpans[S].elem,T=V.length,this.globalData.canvasContext.beginPath(),E=0;E<T;E+=1)for(B=V[E],k=B.length,this.globalData.canvasContext.moveTo(B[0],B[1]),A=2;A<k;A+=6)this.globalData.canvasContext.bezierCurveTo(B[A],B[A+1],B[A+2],B[A+3],B[A+4],B[A+5]);this.globalData.canvasContext.closePath(),D.ctxStroke()}P&&this.globalData.renderer.restore()}};function CVImageElement(_,S,w){this.assetData=S.getAssetData(_.refId),this.img=S.imageLoader.getAsset(this.assetData),this.initElement(_,S,w)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var _=createTag("canvas");_.width=this.assetData.w,_.height=this.assetData.h;var S=_.getContext("2d"),w=this.img.width,E=this.img.height,T=w/E,A=this.assetData.w/this.assetData.h,k,x,R=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;T>A&&R==="xMidYMid slice"||T<A&&R!=="xMidYMid slice"?(x=E,k=x*A):(k=w,x=k/A),S.drawImage(this.img,(w-k)/2,(E-x)/2,k,x,0,0,this.assetData.w,this.assetData.h),this.img=_}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(_,S,w){this.initElement(_,S,w)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(_){return new CVShapeElement(_,this.globalData,this)},CanvasRendererBase.prototype.createText=function(_){return new CVTextElement(_,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(_){return new CVImageElement(_,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(_){return new CVSolidElement(_,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(_){_[0]===1&&_[1]===0&&_[4]===0&&_[5]===1&&_[12]===0&&_[13]===0||this.canvasContext.transform(_[0],_[1],_[4],_[5],_[12],_[13])},CanvasRendererBase.prototype.ctxOpacity=function(_){this.canvasContext.globalAlpha*=_<0?0:_},CanvasRendererBase.prototype.ctxFillStyle=function(_){this.canvasContext.fillStyle=_},CanvasRendererBase.prototype.ctxStrokeStyle=function(_){this.canvasContext.strokeStyle=_},CanvasRendererBase.prototype.ctxLineWidth=function(_){this.canvasContext.lineWidth=_},CanvasRendererBase.prototype.ctxLineCap=function(_){this.canvasContext.lineCap=_},CanvasRendererBase.prototype.ctxLineJoin=function(_){this.canvasContext.lineJoin=_},CanvasRendererBase.prototype.ctxMiterLimit=function(_){this.canvasContext.miterLimit=_},CanvasRendererBase.prototype.ctxFill=function(_){this.canvasContext.fill(_)},CanvasRendererBase.prototype.ctxFillRect=function(_,S,w,E){this.canvasContext.fillRect(_,S,w,E)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(_){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}_&&(this.globalData.blendMode="source-over"),this.contextData.restore(_)},CanvasRendererBase.prototype.configAnimation=function(_){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var S=this.animationItem.container.style;S.width="100%",S.height="100%";var w="0px 0px 0px";S.transformOrigin=w,S.mozTransformOrigin=w,S.webkitTransformOrigin=w,S["-webkit-transform"]=w,S.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=_,this.layers=_.layers,this.transformCanvas={w:_.w,h:_.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(_,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(_.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(_,S){this.reset();var w,E;_?(w=_,E=S,this.canvasContext.canvas.width=w,this.canvasContext.canvas.height=E):(this.animationItem.wrapper&&this.animationItem.container?(w=this.animationItem.wrapper.offsetWidth,E=this.animationItem.wrapper.offsetHeight):(w=this.canvasContext.canvas.width,E=this.canvasContext.canvas.height),this.canvasContext.canvas.width=w*this.renderConfig.dpr,this.canvasContext.canvas.height=E*this.renderConfig.dpr);var T,A;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var k=this.renderConfig.preserveAspectRatio.split(" "),x=k[1]||"meet",R=k[0]||"xMidYMid",P=R.substr(0,4),M=R.substr(4);T=w/E,A=this.transformCanvas.w/this.transformCanvas.h,A>T&&x==="meet"||A<T&&x==="slice"?(this.transformCanvas.sx=w/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=w/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=E/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=E/(this.transformCanvas.h/this.renderConfig.dpr)),P==="xMid"&&(A<T&&x==="meet"||A>T&&x==="slice")?this.transformCanvas.tx=(w-this.transformCanvas.w*(E/this.transformCanvas.h))/2*this.renderConfig.dpr:P==="xMax"&&(A<T&&x==="meet"||A>T&&x==="slice")?this.transformCanvas.tx=(w-this.transformCanvas.w*(E/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,M==="YMid"&&(A>T&&x==="meet"||A<T&&x==="slice")?this.transformCanvas.ty=(E-this.transformCanvas.h*(w/this.transformCanvas.w))/2*this.renderConfig.dpr:M==="YMax"&&(A>T&&x==="meet"||A<T&&x==="slice")?this.transformCanvas.ty=(E-this.transformCanvas.h*(w/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=w/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=E/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var _,S=this.layers?this.layers.length:0;for(_=S-1;_>=0;_-=1)this.elements[_]&&this.elements[_].destroy&&this.elements[_].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(_,S){if(!(this.renderedFrame===_&&this.renderConfig.clearCanvas===!0&&!S||this.destroyed||_===-1)){this.renderedFrame=_,this.globalData.frameNum=_-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||S,this.globalData.projectInterface.currentFrame=_;var w,E=this.layers.length;for(this.completeLayers||this.checkLayers(_),w=E-1;w>=0;w-=1)(this.completeLayers||this.elements[w])&&this.elements[w].prepareFrame(_-this.layers[w].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),w=E-1;w>=0;w-=1)(this.completeLayers||this.elements[w])&&this.elements[w].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(_){var S=this.elements;if(!(S[_]||this.layers[_].ty===99)){var w=this.createItem(this.layers[_],this,this.globalData);S[_]=w,w.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var _=this.pendingElements.pop();_.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var _,S=15;for(_=0;_<S;_+=1){var w=new CanvasContext;this.stack[_]=w}this._length=S,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var _=this._length*2,S=0;for(S=this._length;S<_;S+=1)this.stack[S]=new CanvasContext;this._length=_},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(_){this.cArrPos-=1;var S=this.stack[this.cArrPos],w=S.transform,E,T=this.cTr.props;for(E=0;E<16;E+=1)T[E]=w[E];if(_){this.nativeContext.restore();var A=this.stack[this.cArrPos+1];this.appliedFillStyle=A.fillStyle,this.appliedStrokeStyle=A.strokeStyle,this.appliedLineWidth=A.lineWidth,this.appliedLineCap=A.lineCap,this.appliedLineJoin=A.lineJoin,this.appliedMiterLimit=A.miterLimit}this.nativeContext.setTransform(w[0],w[1],w[4],w[5],w[12],w[13]),(_||S.opacity!==-1&&this.currentOpacity!==S.opacity)&&(this.nativeContext.globalAlpha=S.opacity,this.currentOpacity=S.opacity),this.currentFillStyle=S.fillStyle,this.currentStrokeStyle=S.strokeStyle,this.currentLineWidth=S.lineWidth,this.currentLineCap=S.lineCap,this.currentLineJoin=S.lineJoin,this.currentMiterLimit=S.miterLimit},CVContextData.prototype.save=function(_){_&&this.nativeContext.save();var S=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var w=this.stack[this.cArrPos],E;for(E=0;E<16;E+=1)w.transform[E]=S[E];this.cArrPos+=1;var T=this.stack[this.cArrPos];T.opacity=w.opacity,T.fillStyle=w.fillStyle,T.strokeStyle=w.strokeStyle,T.lineWidth=w.lineWidth,T.lineCap=w.lineCap,T.lineJoin=w.lineJoin,T.miterLimit=w.miterLimit},CVContextData.prototype.setOpacity=function(_){this.stack[this.cArrPos].opacity=_},CVContextData.prototype.setContext=function(_){this.nativeContext=_},CVContextData.prototype.fillStyle=function(_){this.stack[this.cArrPos].fillStyle!==_&&(this.currentFillStyle=_,this.stack[this.cArrPos].fillStyle=_)},CVContextData.prototype.strokeStyle=function(_){this.stack[this.cArrPos].strokeStyle!==_&&(this.currentStrokeStyle=_,this.stack[this.cArrPos].strokeStyle=_)},CVContextData.prototype.lineWidth=function(_){this.stack[this.cArrPos].lineWidth!==_&&(this.currentLineWidth=_,this.stack[this.cArrPos].lineWidth=_)},CVContextData.prototype.lineCap=function(_){this.stack[this.cArrPos].lineCap!==_&&(this.currentLineCap=_,this.stack[this.cArrPos].lineCap=_)},CVContextData.prototype.lineJoin=function(_){this.stack[this.cArrPos].lineJoin!==_&&(this.currentLineJoin=_,this.stack[this.cArrPos].lineJoin=_)},CVContextData.prototype.miterLimit=function(_){this.stack[this.cArrPos].miterLimit!==_&&(this.currentMiterLimit=_,this.stack[this.cArrPos].miterLimit=_)},CVContextData.prototype.transform=function(_){this.transformMat.cloneFromProps(_);var S=this.cTr;this.transformMat.multiply(S),S.cloneFromProps(this.transformMat.props);var w=S.props;this.nativeContext.setTransform(w[0],w[1],w[4],w[5],w[12],w[13])},CVContextData.prototype.opacity=function(_){var S=this.stack[this.cArrPos].opacity;S*=_<0?0:_,this.stack[this.cArrPos].opacity!==S&&(this.currentOpacity!==_&&(this.nativeContext.globalAlpha=_,this.currentOpacity=_),this.stack[this.cArrPos].opacity=S)},CVContextData.prototype.fill=function(_){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(_)},CVContextData.prototype.fillRect=function(_,S,w,E){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(_,S,w,E)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(_,S,w){this.completeLayers=!1,this.layers=_.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(_,S,w),this.tm=_.tm?PropertyFactory.getProp(this,_.tm,0,S.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var _=this.canvasContext;_.beginPath(),_.moveTo(0,0),_.lineTo(this.data.w,0),_.lineTo(this.data.w,this.data.h),_.lineTo(0,this.data.h),_.lineTo(0,0),_.clip();var S,w=this.layers.length;for(S=w-1;S>=0;S-=1)(this.completeLayers||this.elements[S])&&this.elements[S].renderFrame()},CVCompElement.prototype.destroy=function(){var _,S=this.layers.length;for(_=S-1;_>=0;_-=1)this.elements[_]&&this.elements[_].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(_){return new CVCompElement(_,this.globalData,this)};function CanvasRenderer(_,S){this.animationItem=_,this.renderConfig={clearCanvas:S&&S.clearCanvas!==void 0?S.clearCanvas:!0,context:S&&S.context||null,progressiveLoad:S&&S.progressiveLoad||!1,preserveAspectRatio:S&&S.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:S&&S.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:S&&S.contentVisibility||"visible",className:S&&S.className||"",id:S&&S.id||"",runExpressions:!S||S.runExpressions===void 0||S.runExpressions},this.renderConfig.dpr=S&&S.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=S&&S.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(_){return new CVCompElement(_,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var S=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var w=this.finalTransform.mat.toCSS();S.transform=w,S.webkitTransform=w}this.finalTransform._opMdf&&(S.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(_,S,w){this.initElement(_,S,w)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var _;this.data.hasMask?(_=createNS("rect"),_.setAttribute("width",this.data.sw),_.setAttribute("height",this.data.sh),_.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(_=createTag("div"),_.style.width=this.data.sw+"px",_.style.height=this.data.sh+"px",_.style.backgroundColor=this.data.sc),this.layerElement.appendChild(_)};function HShapeElement(_,S,w){this.shapes=[],this.shapesData=_.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(_,S,w),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var _;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),_=this.svgElement;else{_=createNS("svg");var S=this.comp.data?this.comp.data:this.globalData.compSize;_.setAttribute("width",S.w),_.setAttribute("height",S.h),_.appendChild(this.shapesContainer),this.layerElement.appendChild(_)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=_},HShapeElement.prototype.getTransformedPoint=function(_,S){var w,E=_.length;for(w=0;w<E;w+=1)S=_[w].mProps.v.applyToPointArray(S[0],S[1],0);return S},HShapeElement.prototype.calculateShapeBoundingBox=function(_,S){var w=_.sh.v,E=_.transformers,T,A=w._length,k,x,R,P;if(!(A<=1)){for(T=0;T<A-1;T+=1)k=this.getTransformedPoint(E,w.v[T]),x=this.getTransformedPoint(E,w.o[T]),R=this.getTransformedPoint(E,w.i[T+1]),P=this.getTransformedPoint(E,w.v[T+1]),this.checkBounds(k,x,R,P,S);w.c&&(k=this.getTransformedPoint(E,w.v[T]),x=this.getTransformedPoint(E,w.o[T]),R=this.getTransformedPoint(E,w.i[0]),P=this.getTransformedPoint(E,w.v[0]),this.checkBounds(k,x,R,P,S))}},HShapeElement.prototype.checkBounds=function(_,S,w,E,T){this.getBoundsOfCurve(_,S,w,E);var A=this.shapeBoundingBox;T.x=bmMin(A.left,T.x),T.xMax=bmMax(A.right,T.xMax),T.y=bmMin(A.top,T.y),T.yMax=bmMax(A.bottom,T.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(_,S,w,E){for(var T=[[_[0],E[0]],[_[1],E[1]]],A,k,x,R,P,M,N,I=0;I<2;++I)k=6*_[I]-12*S[I]+6*w[I],A=-3*_[I]+9*S[I]-9*w[I]+3*E[I],x=3*S[I]-3*_[I],k|=0,A|=0,x|=0,A===0&&k===0||(A===0?(R=-x/k,R>0&&R<1&&T[I].push(this.calculateF(R,_,S,w,E,I))):(P=k*k-4*x*A,P>=0&&(M=(-k+bmSqrt(P))/(2*A),M>0&&M<1&&T[I].push(this.calculateF(M,_,S,w,E,I)),N=(-k-bmSqrt(P))/(2*A),N>0&&N<1&&T[I].push(this.calculateF(N,_,S,w,E,I)))));this.shapeBoundingBox.left=bmMin.apply(null,T[0]),this.shapeBoundingBox.top=bmMin.apply(null,T[1]),this.shapeBoundingBox.right=bmMax.apply(null,T[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,T[1])},HShapeElement.prototype.calculateF=function(_,S,w,E,T,A){return bmPow(1-_,3)*S[A]+3*bmPow(1-_,2)*_*w[A]+3*(1-_)*bmPow(_,2)*E[A]+bmPow(_,3)*T[A]},HShapeElement.prototype.calculateBoundingBox=function(_,S){var w,E=_.length;for(w=0;w<E;w+=1)_[w]&&_[w].sh?this.calculateShapeBoundingBox(_[w],S):_[w]&&_[w].it?this.calculateBoundingBox(_[w].it,S):_[w]&&_[w].style&&_[w].w&&this.expandStrokeBoundingBox(_[w].w,S)},HShapeElement.prototype.expandStrokeBoundingBox=function(_,S){var w=0;if(_.keyframes){for(var E=0;E<_.keyframes.length;E+=1){var T=_.keyframes[E].s;T>w&&(w=T)}w*=_.mult}else w=_.v*_.mult;S.x-=w,S.xMax+=w,S.y-=w,S.yMax+=w},HShapeElement.prototype.currentBoxContains=function(_){return this.currentBBox.x<=_.x&&this.currentBBox.y<=_.y&&this.currentBBox.width+this.currentBBox.x>=_.x+_.width&&this.currentBBox.height+this.currentBBox.y>=_.y+_.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var _=this.tempBoundingBox,S=999999;if(_.x=S,_.xMax=-S,_.y=S,_.yMax=-S,this.calculateBoundingBox(this.itemsData,_),_.width=_.xMax<_.x?0:_.xMax-_.x,_.height=_.yMax<_.y?0:_.yMax-_.y,this.currentBoxContains(_))return;var w=!1;if(this.currentBBox.w!==_.width&&(this.currentBBox.w=_.width,this.shapeCont.setAttribute("width",_.width),w=!0),this.currentBBox.h!==_.height&&(this.currentBBox.h=_.height,this.shapeCont.setAttribute("height",_.height),w=!0),w||this.currentBBox.x!==_.x||this.currentBBox.y!==_.y){this.currentBBox.w=_.width,this.currentBBox.h=_.height,this.currentBBox.x=_.x,this.currentBBox.y=_.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var E=this.shapeCont.style,T="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";E.transform=T,E.webkitTransform=T}}};function HTextElement(_,S,w){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(_,S,w)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var _=createNS("g");this.maskedElement.appendChild(_),this.innerElem=_}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var _=this.textProperty.currentData;this.renderedLetters=createSizedArray(_.l?_.l.length:0);var S=this.innerElem.style,w=_.fc?this.buildColor(_.fc):"rgba(0,0,0,0)";S.fill=w,S.color=w,_.sc&&(S.stroke=this.buildColor(_.sc),S.strokeWidth=_.sw+"px");var E=this.globalData.fontManager.getFontByName(_.f);if(!this.globalData.fontManager.chars)if(S.fontSize=_.finalSize+"px",S.lineHeight=_.finalSize+"px",E.fClass)this.innerElem.className=E.fClass;else{S.fontFamily=E.fFamily;var T=_.fWeight,A=_.fStyle;S.fontStyle=A,S.fontWeight=T}var k,x,R=_.l;x=R.length;var P,M,N,I=this.mHelper,V,B="",D=0;for(k=0;k<x;k+=1){if(this.globalData.fontManager.chars?(this.textPaths[D]?P=this.textPaths[D]:(P=createNS("path"),P.setAttribute("stroke-linecap",lineCapEnum[1]),P.setAttribute("stroke-linejoin",lineJoinEnum[2]),P.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[D]?(M=this.textSpans[D],N=M.children[0]):(M=createTag("div"),M.style.lineHeight=0,N=createNS("svg"),N.appendChild(P),styleDiv(M)))):this.isMasked?P=this.textPaths[D]?this.textPaths[D]:createNS("text"):this.textSpans[D]?(M=this.textSpans[D],P=this.textPaths[D]):(M=createTag("span"),styleDiv(M),P=createTag("span"),styleDiv(P),M.appendChild(P)),this.globalData.fontManager.chars){var z=this.globalData.fontManager.getCharData(_.finalText[k],E.fStyle,this.globalData.fontManager.getFontByName(_.f).fFamily),O;if(z?O=z.data:O=null,I.reset(),O&&O.shapes&&O.shapes.length&&(V=O.shapes[0].it,I.scale(_.finalSize/100,_.finalSize/100),B=this.createPathShape(I,V),P.setAttribute("d",B)),this.isMasked)this.innerElem.appendChild(P);else{if(this.innerElem.appendChild(M),O&&O.shapes){document.body.appendChild(N);var L=N.getBBox();N.setAttribute("width",L.width+2),N.setAttribute("height",L.height+2),N.setAttribute("viewBox",L.x-1+" "+(L.y-1)+" "+(L.width+2)+" "+(L.height+2));var F=N.style,$="translate("+(L.x-1)+"px,"+(L.y-1)+"px)";F.transform=$,F.webkitTransform=$,R[k].yOffset=L.y-1}else N.setAttribute("width",1),N.setAttribute("height",1);M.appendChild(N)}}else if(P.textContent=R[k].val,P.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(P);else{this.innerElem.appendChild(M);var H=P.style,j="translate3d(0,"+-_.finalSize/1.2+"px,0)";H.transform=j,H.webkitTransform=j}this.isMasked?this.textSpans[D]=P:this.textSpans[D]=M,this.textSpans[D].style.display="block",this.textPaths[D]=P,D+=1}for(;D<this.textSpans.length;)this.textSpans[D].style.display="none",D+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var _;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),_=this.svgElement.style;var S="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";_.transform=S,_.webkitTransform=S}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var w,E,T=0,A=this.textAnimator.renderedLetters,k=this.textProperty.currentData.l;E=k.length;var x,R,P;for(w=0;w<E;w+=1)k[w].n?T+=1:(R=this.textSpans[w],P=this.textPaths[w],x=A[T],T+=1,x._mdf.m&&(this.isMasked?R.setAttribute("transform",x.m):(R.style.webkitTransform=x.m,R.style.transform=x.m)),R.style.opacity=x.o,x.sw&&x._mdf.sw&&P.setAttribute("stroke-width",x.sw),x.sc&&x._mdf.sc&&P.setAttribute("stroke",x.sc),x.fc&&x._mdf.fc&&(P.setAttribute("fill",x.fc),P.style.color=x.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var M=this.innerElem.getBBox();this.currentBBox.w!==M.width&&(this.currentBBox.w=M.width,this.svgElement.setAttribute("width",M.width)),this.currentBBox.h!==M.height&&(this.currentBBox.h=M.height,this.svgElement.setAttribute("height",M.height));var N=1;if(this.currentBBox.w!==M.width+N*2||this.currentBBox.h!==M.height+N*2||this.currentBBox.x!==M.x-N||this.currentBBox.y!==M.y-N){this.currentBBox.w=M.width+N*2,this.currentBBox.h=M.height+N*2,this.currentBBox.x=M.x-N,this.currentBBox.y=M.y-N,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),_=this.svgElement.style;var I="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";_.transform=I,_.webkitTransform=I}}}};function HCameraElement(_,S,w){this.initFrame(),this.initBaseData(_,S,w),this.initHierarchy();var E=PropertyFactory.getProp;if(this.pe=E(this,_.pe,0,0,this),_.ks.p.s?(this.px=E(this,_.ks.p.x,1,0,this),this.py=E(this,_.ks.p.y,1,0,this),this.pz=E(this,_.ks.p.z,1,0,this)):this.p=E(this,_.ks.p,1,0,this),_.ks.a&&(this.a=E(this,_.ks.a,1,0,this)),_.ks.or.k.length&&_.ks.or.k[0].to){var T,A=_.ks.or.k.length;for(T=0;T<A;T+=1)_.ks.or.k[T].to=null,_.ks.or.k[T].ti=null}this.or=E(this,_.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=E(this,_.ks.rx,0,degToRads,this),this.ry=E(this,_.ks.ry,0,degToRads,this),this.rz=E(this,_.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var _,S=this.comp.threeDElements.length,w,E,T;for(_=0;_<S;_+=1)if(w=this.comp.threeDElements[_],w.type==="3d"){E=w.perspectiveElem.style,T=w.container.style;var A=this.pe.v+"px",k="0px 0px 0px",x="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";E.perspective=A,E.webkitPerspective=A,T.transformOrigin=k,T.mozTransformOrigin=k,T.webkitTransformOrigin=k,E.transform=x,E.webkitTransform=x}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var _=this._isFirstFrame,S,w;if(this.hierarchy)for(w=this.hierarchy.length,S=0;S<w;S+=1)_=this.hierarchy[S].finalTransform.mProp._mdf||_;if(_||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(w=this.hierarchy.length-1,S=w;S>=0;S-=1){var E=this.hierarchy[S].finalTransform.mProp;this.mat.translate(-E.p.v[0],-E.p.v[1],E.p.v[2]),this.mat.rotateX(-E.or.v[0]).rotateY(-E.or.v[1]).rotateZ(E.or.v[2]),this.mat.rotateX(-E.rx.v).rotateY(-E.ry.v).rotateZ(E.rz.v),this.mat.scale(1/E.s.v[0],1/E.s.v[1],1/E.s.v[2]),this.mat.translate(E.a.v[0],E.a.v[1],E.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var T;this.p?T=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:T=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var A=Math.sqrt(Math.pow(T[0],2)+Math.pow(T[1],2)+Math.pow(T[2],2)),k=[T[0]/A,T[1]/A,T[2]/A],x=Math.sqrt(k[2]*k[2]+k[0]*k[0]),R=Math.atan2(k[1],x),P=Math.atan2(k[0],-k[2]);this.mat.rotateY(P).rotateX(-R)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var M=!this._prevMat.equals(this.mat);if((M||this.pe._mdf)&&this.comp.threeDElements){w=this.comp.threeDElements.length;var N,I,V;for(S=0;S<w;S+=1)if(N=this.comp.threeDElements[S],N.type==="3d"){if(M){var B=this.mat.toCSS();V=N.container.style,V.transform=B,V.webkitTransform=B}this.pe._mdf&&(I=N.perspectiveElem.style,I.perspective=this.pe.v+"px",I.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(_){this.prepareProperties(_,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(_,S,w){this.assetData=S.getAssetData(_.refId),this.initElement(_,S,w)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var _=this.globalData.getAssetsPath(this.assetData),S=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",_),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(S),S.crossOrigin="anonymous",S.src=_,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(_,S){this.animationItem=_,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:S&&S.className||"",imagePreserveAspectRatio:S&&S.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(S&&S.hideOnTransparent===!1),filterSize:{width:S&&S.filterSize&&S.filterSize.width||"400%",height:S&&S.filterSize&&S.filterSize.height||"400%",x:S&&S.filterSize&&S.filterSize.x||"-100%",y:S&&S.filterSize&&S.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var _=this.pendingElements.pop();_.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(_,S){var w=_.getBaseElement();if(w){var E=this.layers[S];if(!E.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(w,S);else{for(var T=0,A,k,x;T<S;)this.elements[T]&&this.elements[T]!==!0&&this.elements[T].getBaseElement&&(k=this.elements[T],x=this.layers[T].ddd?this.getThreeDContainerByPos(T):k.getBaseElement(),A=x||A),T+=1;A?(!E.ddd||!this.supports3d)&&this.layerElement.insertBefore(w,A):(!E.ddd||!this.supports3d)&&this.layerElement.appendChild(w)}else this.addTo3dContainer(w,S)}},HybridRendererBase.prototype.createShape=function(_){return this.supports3d?new HShapeElement(_,this.globalData,this):new SVGShapeElement(_,this.globalData,this)},HybridRendererBase.prototype.createText=function(_){return this.supports3d?new HTextElement(_,this.globalData,this):new SVGTextLottieElement(_,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(_){return this.camera=new HCameraElement(_,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(_){return this.supports3d?new HImageElement(_,this.globalData,this):new IImageElement(_,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(_){return this.supports3d?new HSolidElement(_,this.globalData,this):new ISolidElement(_,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(_){for(var S=0,w=this.threeDElements.length;S<w;){if(this.threeDElements[S].startPos<=_&&this.threeDElements[S].endPos>=_)return this.threeDElements[S].perspectiveElem;S+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(_,S){var w=createTag("div"),E,T;styleDiv(w);var A=createTag("div");if(styleDiv(A),S==="3d"){E=w.style,E.width=this.globalData.compSize.w+"px",E.height=this.globalData.compSize.h+"px";var k="50% 50%";E.webkitTransformOrigin=k,E.mozTransformOrigin=k,E.transformOrigin=k,T=A.style;var x="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";T.transform=x,T.webkitTransform=x}w.appendChild(A);var R={container:A,perspectiveElem:w,startPos:_,endPos:_,type:S};return this.threeDElements.push(R),R},HybridRendererBase.prototype.build3dContainers=function(){var _,S=this.layers.length,w,E="";for(_=0;_<S;_+=1)this.layers[_].ddd&&this.layers[_].ty!==3?(E!=="3d"&&(E="3d",w=this.createThreeDContainer(_,"3d")),w.endPos=Math.max(w.endPos,_)):(E!=="2d"&&(E="2d",w=this.createThreeDContainer(_,"2d")),w.endPos=Math.max(w.endPos,_));for(S=this.threeDElements.length,_=S-1;_>=0;_-=1)this.resizerElem.appendChild(this.threeDElements[_].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(_,S){for(var w=0,E=this.threeDElements.length;w<E;){if(S<=this.threeDElements[w].endPos){for(var T=this.threeDElements[w].startPos,A;T<S;)this.elements[T]&&this.elements[T].getBaseElement&&(A=this.elements[T].getBaseElement()),T+=1;A?this.threeDElements[w].container.insertBefore(_,A):this.threeDElements[w].container.appendChild(_);break}w+=1}},HybridRendererBase.prototype.configAnimation=function(_){var S=createTag("div"),w=this.animationItem.wrapper,E=S.style;E.width=_.w+"px",E.height=_.h+"px",this.resizerElem=S,styleDiv(S),E.transformStyle="flat",E.mozTransformStyle="flat",E.webkitTransformStyle="flat",this.renderConfig.className&&S.setAttribute("class",this.renderConfig.className),w.appendChild(S),E.overflow="hidden";var T=createNS("svg");T.setAttribute("width","1"),T.setAttribute("height","1"),styleDiv(T),this.resizerElem.appendChild(T);var A=createNS("defs");T.appendChild(A),this.data=_,this.setupGlobalData(_,T),this.globalData.defs=A,this.layers=_.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var _,S=this.layers?this.layers.length:0;for(_=0;_<S;_+=1)this.elements[_]&&this.elements[_].destroy&&this.elements[_].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var _=this.animationItem.wrapper.offsetWidth,S=this.animationItem.wrapper.offsetHeight,w=_/S,E=this.globalData.compSize.w/this.globalData.compSize.h,T,A,k,x;E>w?(T=_/this.globalData.compSize.w,A=_/this.globalData.compSize.w,k=0,x=(S-this.globalData.compSize.h*(_/this.globalData.compSize.w))/2):(T=S/this.globalData.compSize.h,A=S/this.globalData.compSize.h,k=(_-this.globalData.compSize.w*(S/this.globalData.compSize.h))/2,x=0);var R=this.resizerElem.style;R.webkitTransform="matrix3d("+T+",0,0,0,0,"+A+",0,0,0,0,1,0,"+k+","+x+",0,1)",R.transform=R.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var _=this.globalData.compSize.w,S=this.globalData.compSize.h,w,E=this.threeDElements.length;for(w=0;w<E;w+=1){var T=this.threeDElements[w].perspectiveElem.style;T.webkitPerspective=Math.sqrt(Math.pow(_,2)+Math.pow(S,2))+"px",T.perspective=T.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(_){var S,w=_.length,E=createTag("div");for(S=0;S<w;S+=1)if(_[S].xt){var T=this.createComp(_[S],E,this.globalData.comp,null);T.initExpressions(),this.globalData.projectInterface.registerComposition(T)}};function HCompElement(_,S,w){this.layers=_.layers,this.supports3d=!_.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(_,S,w),this.tm=_.tm?PropertyFactory.getProp(this,_.tm,0,S.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(_,S){for(var w=0,E;w<S;)this.elements[w]&&this.elements[w].getBaseElement&&(E=this.elements[w].getBaseElement()),w+=1;E?this.layerElement.insertBefore(_,E):this.layerElement.appendChild(_)},HCompElement.prototype.createComp=function(_){return this.supports3d?new HCompElement(_,this.globalData,this):new SVGCompElement(_,this.globalData,this)};function HybridRenderer(_,S){this.animationItem=_,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:S&&S.className||"",imagePreserveAspectRatio:S&&S.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(S&&S.hideOnTransparent===!1),filterSize:{width:S&&S.filterSize&&S.filterSize.width||"400%",height:S&&S.filterSize&&S.filterSize.height||"400%",x:S&&S.filterSize&&S.filterSize.x||"-100%",y:S&&S.filterSize&&S.filterSize.y||"-100%"},runExpressions:!S||S.runExpressions===void 0||S.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(_){return this.supports3d?new HCompElement(_,this.globalData,this):new SVGCompElement(_,this.globalData,this)};var CompExpressionInterface=(function(){return function(_){function S(w){for(var E=0,T=_.layers.length;E<T;){if(_.layers[E].nm===w||_.layers[E].ind===w)return _.elements[E].layerInterface;E+=1}return null}return Object.defineProperty(S,"_name",{value:_.data.nm}),S.layer=S,S.pixelAspect=1,S.height=_.data.h||_.globalData.compSize.h,S.width=_.data.w||_.globalData.compSize.w,S.pixelAspect=1,S.frameDuration=1/_.globalData.frameRate,S.displayStartTime=0,S.numLayers=_.layers.length,S}})();function _typeof$2(_){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof$2(_)}function seedRandom(_,S){var w=this,E=256,T=6,A=52,k="random",x=S.pow(E,T),R=S.pow(2,A),P=R*2,M=E-1,N;function I(F,$,H){var j=[];$=$===!0?{entropy:!0}:$||{};var q=z(D($.entropy?[F,L(_)]:F===null?O():F,3),j),W=new V(j),X=function(){for(var ee=W.g(T),G=x,de=0;ee<R;)ee=(ee+de)*E,G*=E,de=W.g(1);for(;ee>=P;)ee/=2,G/=2,de>>>=1;return(ee+de)/G};return X.int32=function(){return W.g(4)|0},X.quick=function(){return W.g(4)/4294967296},X.double=X,z(L(W.S),_),($.pass||H||function(te,ee,G,de){return de&&(de.S&&B(de,W),te.state=function(){return B(W,{})}),G?(S[k]=te,ee):te})(X,q,"global"in $?$.global:this==S,$.state)}S["seed"+k]=I;function V(F){var $,H=F.length,j=this,q=0,W=j.i=j.j=0,X=j.S=[];for(H||(F=[H++]);q<E;)X[q]=q++;for(q=0;q<E;q++)X[q]=X[W=M&W+F[q%H]+($=X[q])],X[W]=$;j.g=function(te){for(var ee,G=0,de=j.i,le=j.j,ae=j.S;te--;)ee=ae[de=M&de+1],G=G*E+ae[M&(ae[de]=ae[le=M&le+ee])+(ae[le]=ee)];return j.i=de,j.j=le,G}}function B(F,$){return $.i=F.i,$.j=F.j,$.S=F.S.slice(),$}function D(F,$){var H=[],j=_typeof$2(F),q;if($&&j=="object")for(q in F)try{H.push(D(F[q],$-1))}catch{}return H.length?H:j=="string"?F:F+"\0"}function z(F,$){for(var H=F+"",j,q=0;q<H.length;)$[M&q]=M&(j^=$[M&q]*19)+H.charCodeAt(q++);return L($)}function O(){try{var F=new Uint8Array(E);return(w.crypto||w.msCrypto).getRandomValues(F),L(F)}catch{var $=w.navigator,H=$&&$.plugins;return[+new Date,w,H,w.screen,L(_)]}}function L(F){return String.fromCharCode.apply(0,F)}z(S.random(),_)}function initialize$2(_){seedRandom([],_)}var propTypes={SHAPE:"shape"};function _typeof$1(_){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof$1(_)}var ExpressionManager=(function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(_){return _.constructor===Array||_.constructor===Float32Array}function isNumerable(_,S){return _==="number"||S instanceof Number||_==="boolean"||_==="string"}function $bm_neg(_){var S=_typeof$1(_);if(S==="number"||_ instanceof Number||S==="boolean")return-_;if($bm_isInstanceOfArray(_)){var w,E=_.length,T=[];for(w=0;w<E;w+=1)T[w]=-_[w];return T}return _.propType?_.v:-_}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(_,S){var w=_typeof$1(_),E=_typeof$1(S);if(isNumerable(w,_)&&isNumerable(E,S)||w==="string"||E==="string")return _+S;if($bm_isInstanceOfArray(_)&&isNumerable(E,S))return _=_.slice(0),_[0]+=S,_;if(isNumerable(w,_)&&$bm_isInstanceOfArray(S))return S=S.slice(0),S[0]=_+S[0],S;if($bm_isInstanceOfArray(_)&&$bm_isInstanceOfArray(S)){for(var T=0,A=_.length,k=S.length,x=[];T<A||T<k;)(typeof _[T]=="number"||_[T]instanceof Number)&&(typeof S[T]=="number"||S[T]instanceof Number)?x[T]=_[T]+S[T]:x[T]=S[T]===void 0?_[T]:_[T]||S[T],T+=1;return x}return 0}var add=sum;function sub(_,S){var w=_typeof$1(_),E=_typeof$1(S);if(isNumerable(w,_)&&isNumerable(E,S))return w==="string"&&(_=parseInt(_,10)),E==="string"&&(S=parseInt(S,10)),_-S;if($bm_isInstanceOfArray(_)&&isNumerable(E,S))return _=_.slice(0),_[0]-=S,_;if(isNumerable(w,_)&&$bm_isInstanceOfArray(S))return S=S.slice(0),S[0]=_-S[0],S;if($bm_isInstanceOfArray(_)&&$bm_isInstanceOfArray(S)){for(var T=0,A=_.length,k=S.length,x=[];T<A||T<k;)(typeof _[T]=="number"||_[T]instanceof Number)&&(typeof S[T]=="number"||S[T]instanceof Number)?x[T]=_[T]-S[T]:x[T]=S[T]===void 0?_[T]:_[T]||S[T],T+=1;return x}return 0}function mul(_,S){var w=_typeof$1(_),E=_typeof$1(S),T;if(isNumerable(w,_)&&isNumerable(E,S))return _*S;var A,k;if($bm_isInstanceOfArray(_)&&isNumerable(E,S)){for(k=_.length,T=createTypedArray("float32",k),A=0;A<k;A+=1)T[A]=_[A]*S;return T}if(isNumerable(w,_)&&$bm_isInstanceOfArray(S)){for(k=S.length,T=createTypedArray("float32",k),A=0;A<k;A+=1)T[A]=_*S[A];return T}return 0}function div(_,S){var w=_typeof$1(_),E=_typeof$1(S),T;if(isNumerable(w,_)&&isNumerable(E,S))return _/S;var A,k;if($bm_isInstanceOfArray(_)&&isNumerable(E,S)){for(k=_.length,T=createTypedArray("float32",k),A=0;A<k;A+=1)T[A]=_[A]/S;return T}if(isNumerable(w,_)&&$bm_isInstanceOfArray(S)){for(k=S.length,T=createTypedArray("float32",k),A=0;A<k;A+=1)T[A]=_/S[A];return T}return 0}function mod(_,S){return typeof _=="string"&&(_=parseInt(_,10)),typeof S=="string"&&(S=parseInt(S,10)),_%S}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(_,S,w){if(S>w){var E=w;w=S,S=E}return Math.min(Math.max(_,S),w)}function radiansToDegrees(_){return _/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(_){return _*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(_,S){if(typeof _=="number"||_ instanceof Number)return S=S||0,Math.abs(_-S);S||(S=helperLengthArray);var w,E=Math.min(_.length,S.length),T=0;for(w=0;w<E;w+=1)T+=Math.pow(S[w]-_[w],2);return Math.sqrt(T)}function normalize(_){return div(_,length(_))}function rgbToHsl(_){var S=_[0],w=_[1],E=_[2],T=Math.max(S,w,E),A=Math.min(S,w,E),k,x,R=(T+A)/2;if(T===A)k=0,x=0;else{var P=T-A;switch(x=R>.5?P/(2-T-A):P/(T+A),T){case S:k=(w-E)/P+(w<E?6:0);break;case w:k=(E-S)/P+2;break;case E:k=(S-w)/P+4;break}k/=6}return[k,x,R,_[3]]}function hue2rgb(_,S,w){return w<0&&(w+=1),w>1&&(w-=1),w<1/6?_+(S-_)*6*w:w<1/2?S:w<2/3?_+(S-_)*(2/3-w)*6:_}function hslToRgb(_){var S=_[0],w=_[1],E=_[2],T,A,k;if(w===0)T=E,k=E,A=E;else{var x=E<.5?E*(1+w):E+w-E*w,R=2*E-x;T=hue2rgb(R,x,S+1/3),A=hue2rgb(R,x,S),k=hue2rgb(R,x,S-1/3)}return[T,A,k,_[3]]}function linear(_,S,w,E,T){if((E===void 0||T===void 0)&&(E=S,T=w,S=0,w=1),w<S){var A=w;w=S,S=A}if(_<=S)return E;if(_>=w)return T;var k=w===S?0:(_-S)/(w-S);if(!E.length)return E+(T-E)*k;var x,R=E.length,P=createTypedArray("float32",R);for(x=0;x<R;x+=1)P[x]=E[x]+(T[x]-E[x])*k;return P}function random(_,S){if(S===void 0&&(_===void 0?(_=0,S=1):(S=_,_=void 0)),S.length){var w,E=S.length;_||(_=createTypedArray("float32",E));var T=createTypedArray("float32",E),A=BMMath.random();for(w=0;w<E;w+=1)T[w]=_[w]+A*(S[w]-_[w]);return T}_===void 0&&(_=0);var k=BMMath.random();return _+k*(S-_)}function createPath(_,S,w,E){var T,A=_.length,k=shapePool.newElement();k.setPathData(!!E,A);var x=[0,0],R,P;for(T=0;T<A;T+=1)R=S&&S[T]?S[T]:x,P=w&&w[T]?w[T]:x,k.setTripleAt(_[T][0],_[T][1],P[0]+_[T][0],P[1]+_[T][1],R[0]+_[T][0],R[1]+_[T][1],T,!0);return k}function initiateExpression(elem,data,property){function noOp(_){return _}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty._name=elem.data.nm,thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function _(S,w){var E,T,A=this.pv.length?this.pv.length:1,k=createTypedArray("float32",A);S=5;var x=Math.floor(time*S);for(E=0,T=0;E<x;){for(T=0;T<A;T+=1)k[T]+=-w+w*2*BMMath.random();E+=1}var R=time*S,P=R-Math.floor(R),M=createTypedArray("float32",A);if(A>1){for(T=0;T<A;T+=1)M[T]=this.pv[T]+k[T]+(-w+w*2*BMMath.random())*P;return M}return this.pv+k[0]+(-w+w*2*BMMath.random())*P}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(_,S){return loopIn(_,S,!0)}function loopOutDuration(_,S){return loopOut(_,S,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(_,S){var w=[S[0]-_[0],S[1]-_[1],S[2]-_[2]],E=Math.atan2(w[0],Math.sqrt(w[1]*w[1]+w[2]*w[2]))/degToRads,T=-Math.atan2(w[1],w[2])/degToRads;return[T,E,0]}function easeOut(_,S,w,E,T){return applyEase(easeOutBez,_,S,w,E,T)}function easeIn(_,S,w,E,T){return applyEase(easeInBez,_,S,w,E,T)}function ease(_,S,w,E,T){return applyEase(easeInOutBez,_,S,w,E,T)}function applyEase(_,S,w,E,T,A){T===void 0?(T=w,A=E):S=(S-w)/(E-w),S>1?S=1:S<0&&(S=0);var k=_(S);if($bm_isInstanceOfArray(T)){var x,R=T.length,P=createTypedArray("float32",R);for(x=0;x<R;x+=1)P[x]=(A[x]-T[x])*k+T[x];return P}return(A-T)*k+T}function nearestKey(_){var S,w=data.k.length,E,T;if(!data.k.length||typeof data.k[0]=="number")E=0,T=0;else if(E=-1,_*=elem.comp.globalData.frameRate,_<data.k[0].t)E=1,T=data.k[0].t;else{for(S=0;S<w-1;S+=1)if(_===data.k[S].t){E=S+1,T=data.k[S].t;break}else if(_>data.k[S].t&&_<data.k[S+1].t){_-data.k[S].t>data.k[S+1].t-_?(E=S+2,T=data.k[S+1].t):(E=S+1,T=data.k[S].t);break}E===-1&&(E=S+1,T=data.k[S].t)}var A={};return A.index=E,A.time=T/elem.comp.globalData.frameRate,A}function key(_){var S,w,E;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+_);_-=1,S={time:data.k[_].t/elem.comp.globalData.frameRate,value:[]};var T=Object.prototype.hasOwnProperty.call(data.k[_],"s")?data.k[_].s:data.k[_-1].e;for(E=T.length,w=0;w<E;w+=1)S[w]=T[w],S.value[w]=T[w];return S}function framesToTime(_,S){return S||(S=elem.comp.globalData.frameRate),_/S}function timeToFrames(_,S){return!_&&_!==0&&(_=time),S||(S=elem.comp.globalData.frameRate),_*S}function seedRandom(_){BMMath.seedrandom(randSeed+_)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(_,S){return typeof value=="string"?S===void 0?value.substring(_):value.substring(_,S):""}function substr(_,S){return typeof value=="string"?S===void 0?value.substr(_):value.substr(_,S):""}function posterizeTime(_){time=_===0?0:Math.floor(time*_)/_,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(_){return value=_,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob})(),Expressions=(function(){var _={};_.initExpressions=S,_.resetFrame=ExpressionManager.resetFrame;function S(w){var E=0,T=[];function A(){E+=1}function k(){E-=1,E===0&&R()}function x(P){T.indexOf(P)===-1&&T.push(P)}function R(){var P,M=T.length;for(P=0;P<M;P+=1)T[P].release();T.length=0}w.renderer.compInterface=CompExpressionInterface(w.renderer),w.renderer.globalData.projectInterface.registerComposition(w.renderer),w.renderer.globalData.pushExpression=A,w.renderer.globalData.popExpression=k,w.renderer.globalData.registerExpressionProperty=x}return _})(),MaskManagerInterface=(function(){function _(w,E){this._mask=w,this._data=E}Object.defineProperty(_.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(_.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var S=function(E){var T=createSizedArray(E.viewData.length),A,k=E.viewData.length;for(A=0;A<k;A+=1)T[A]=new _(E.viewData[A],E.masksProperties[A]);var x=function(P){for(A=0;A<k;){if(E.masksProperties[A].nm===P)return T[A];A+=1}return null};return x};return S})(),ExpressionPropertyInterface=(function(){var _={pv:0,v:0,mult:1},S={pv:[0,0,0],v:[0,0,0],mult:1};function w(k,x,R){Object.defineProperty(k,"velocity",{get:function(){return x.getVelocityAtTime(x.comp.currentFrame)}}),k.numKeys=x.keyframes?x.keyframes.length:0,k.key=function(P){if(!k.numKeys)return 0;var M="";"s"in x.keyframes[P-1]?M=x.keyframes[P-1].s:"e"in x.keyframes[P-2]?M=x.keyframes[P-2].e:M=x.keyframes[P-2].s;var N=R==="unidimensional"?new Number(M):Object.assign({},M);return N.time=x.keyframes[P-1].t/x.elem.comp.globalData.frameRate,N.value=R==="unidimensional"?M[0]:M,N},k.valueAtTime=x.getValueAtTime,k.speedAtTime=x.getSpeedAtTime,k.velocityAtTime=x.getVelocityAtTime,k.propertyGroup=x.propertyGroup}function E(k){(!k||!("pv"in k))&&(k=_);var x=1/k.mult,R=k.pv*x,P=new Number(R);return P.value=R,w(P,k,"unidimensional"),function(){return k.k&&k.getValue(),R=k.v*x,P.value!==R&&(P=new Number(R),P.value=R,P[0]=R,w(P,k,"unidimensional")),P}}function T(k){(!k||!("pv"in k))&&(k=S);var x=1/k.mult,R=k.data&&k.data.l||k.pv.length,P=createTypedArray("float32",R),M=createTypedArray("float32",R);return P.value=M,w(P,k,"multidimensional"),function(){k.k&&k.getValue();for(var N=0;N<R;N+=1)M[N]=k.v[N]*x,P[N]=M[N];return P}}function A(){return _}return function(k){return k?k.propType==="unidimensional"?E(k):T(k):A}})(),TransformExpressionInterface=(function(){return function(_){function S(k){switch(k){case"scale":case"Scale":case"ADBE Scale":case 6:return S.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return S.rotation;case"ADBE Rotate X":return S.xRotation;case"ADBE Rotate Y":return S.yRotation;case"position":case"Position":case"ADBE Position":case 2:return S.position;case"ADBE Position_0":return S.xPosition;case"ADBE Position_1":return S.yPosition;case"ADBE Position_2":return S.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return S.anchorPoint;case"opacity":case"Opacity":case 11:return S.opacity;default:return null}}Object.defineProperty(S,"rotation",{get:ExpressionPropertyInterface(_.r||_.rz)}),Object.defineProperty(S,"zRotation",{get:ExpressionPropertyInterface(_.rz||_.r)}),Object.defineProperty(S,"xRotation",{get:ExpressionPropertyInterface(_.rx)}),Object.defineProperty(S,"yRotation",{get:ExpressionPropertyInterface(_.ry)}),Object.defineProperty(S,"scale",{get:ExpressionPropertyInterface(_.s)});var w,E,T,A;return _.p?A=ExpressionPropertyInterface(_.p):(w=ExpressionPropertyInterface(_.px),E=ExpressionPropertyInterface(_.py),_.pz&&(T=ExpressionPropertyInterface(_.pz))),Object.defineProperty(S,"position",{get:function(){return _.p?A():[w(),E(),T?T():0]}}),Object.defineProperty(S,"xPosition",{get:ExpressionPropertyInterface(_.px)}),Object.defineProperty(S,"yPosition",{get:ExpressionPropertyInterface(_.py)}),Object.defineProperty(S,"zPosition",{get:ExpressionPropertyInterface(_.pz)}),Object.defineProperty(S,"anchorPoint",{get:ExpressionPropertyInterface(_.a)}),Object.defineProperty(S,"opacity",{get:ExpressionPropertyInterface(_.o)}),Object.defineProperty(S,"skew",{get:ExpressionPropertyInterface(_.sk)}),Object.defineProperty(S,"skewAxis",{get:ExpressionPropertyInterface(_.sa)}),Object.defineProperty(S,"orientation",{get:ExpressionPropertyInterface(_.or)}),S}})(),LayerExpressionInterface=(function(){function _(P){var M=new Matrix;if(P!==void 0){var N=this._elem.finalTransform.mProp.getValueAtTime(P);N.clone(M)}else{var I=this._elem.finalTransform.mProp;I.applyToMatrix(M)}return M}function S(P,M){var N=this.getMatrix(M);return N.props[12]=0,N.props[13]=0,N.props[14]=0,this.applyPoint(N,P)}function w(P,M){var N=this.getMatrix(M);return this.applyPoint(N,P)}function E(P,M){var N=this.getMatrix(M);return N.props[12]=0,N.props[13]=0,N.props[14]=0,this.invertPoint(N,P)}function T(P,M){var N=this.getMatrix(M);return this.invertPoint(N,P)}function A(P,M){if(this._elem.hierarchy&&this._elem.hierarchy.length){var N,I=this._elem.hierarchy.length;for(N=0;N<I;N+=1)this._elem.hierarchy[N].finalTransform.mProp.applyToMatrix(P)}return P.applyToPointArray(M[0],M[1],M[2]||0)}function k(P,M){if(this._elem.hierarchy&&this._elem.hierarchy.length){var N,I=this._elem.hierarchy.length;for(N=0;N<I;N+=1)this._elem.hierarchy[N].finalTransform.mProp.applyToMatrix(P)}return P.inversePoint(M)}function x(P){var M=new Matrix;if(M.reset(),this._elem.finalTransform.mProp.applyToMatrix(M),this._elem.hierarchy&&this._elem.hierarchy.length){var N,I=this._elem.hierarchy.length;for(N=0;N<I;N+=1)this._elem.hierarchy[N].finalTransform.mProp.applyToMatrix(M);return M.inversePoint(P)}return M.inversePoint(P)}function R(){return[1,1,1,1]}return function(P){var M;function N(D){V.mask=new MaskManagerInterface(D,P)}function I(D){V.effect=D}function V(D){switch(D){case"ADBE Root Vectors Group":case"Contents":case 2:return V.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return M;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return V.effect;case"ADBE Text Properties":return V.textInterface;default:return null}}V.getMatrix=_,V.invertPoint=k,V.applyPoint=A,V.toWorld=w,V.toWorldVec=S,V.fromWorld=T,V.fromWorldVec=E,V.toComp=w,V.fromComp=x,V.sampleImage=R,V.sourceRectAtTime=P.sourceRectAtTime.bind(P),V._elem=P,M=TransformExpressionInterface(P.finalTransform.mProp);var B=getDescriptor(M,"anchorPoint");return Object.defineProperties(V,{hasParent:{get:function(){return P.hierarchy.length}},parent:{get:function(){return P.hierarchy[0].layerInterface}},rotation:getDescriptor(M,"rotation"),scale:getDescriptor(M,"scale"),position:getDescriptor(M,"position"),opacity:getDescriptor(M,"opacity"),anchorPoint:B,anchor_point:B,transform:{get:function(){return M}},active:{get:function(){return P.isInRange}}}),V.startTime=P.data.st,V.index=P.data.ind,V.source=P.data.refId,V.height=P.data.ty===0?P.data.h:100,V.width=P.data.ty===0?P.data.w:100,V.inPoint=P.data.ip/P.comp.globalData.frameRate,V.outPoint=P.data.op/P.comp.globalData.frameRate,V._name=P.data.nm,V.registerMaskInterface=N,V.registerEffectsInterface=I,V}})(),propertyGroupFactory=(function(){return function(_,S){return function(w){return w=w===void 0?1:w,w<=0?_:S(w-1)}}})(),PropertyInterface=(function(){return function(_,S){var w={_name:_};function E(T){return T=T===void 0?1:T,T<=0?w:S(T-1)}return E}})(),EffectsExpressionInterface=(function(){var _={createEffectsInterface:S};function S(T,A){if(T.effectsManager){var k=[],x=T.data.ef,R,P=T.effectsManager.effectElements.length;for(R=0;R<P;R+=1)k.push(w(x[R],T.effectsManager.effectElements[R],A,T));var M=T.data.ef||[],N=function(V){for(R=0,P=M.length;R<P;){if(V===M[R].nm||V===M[R].mn||V===M[R].ix)return k[R];R+=1}return null};return Object.defineProperty(N,"numProperties",{get:function(){return M.length}}),N}return null}function w(T,A,k,x){function R(V){for(var B=T.ef,D=0,z=B.length;D<z;){if(V===B[D].nm||V===B[D].mn||V===B[D].ix)return B[D].ty===5?M[D]:M[D]();D+=1}throw new Error}var P=propertyGroupFactory(R,k),M=[],N,I=T.ef.length;for(N=0;N<I;N+=1)T.ef[N].ty===5?M.push(w(T.ef[N],A.effectElements[N],A.effectElements[N].propertyGroup,x)):M.push(E(A.effectElements[N],T.ef[N].ty,x,P));return T.mn==="ADBE Color Control"&&Object.defineProperty(R,"color",{get:function(){return M[0]()}}),Object.defineProperties(R,{numProperties:{get:function(){return T.np}},_name:{value:T.nm},propertyGroup:{value:P}}),R.enabled=T.en!==0,R.active=R.enabled,R}function E(T,A,k,x){var R=ExpressionPropertyInterface(T.p);function P(){return A===10?k.comp.compInterface(T.p.v):R()}return T.p.setGroupProperty&&T.p.setGroupProperty(PropertyInterface("",x)),P}return _})(),ShapePathInterface=(function(){return function(S,w,E){var T=w.sh;function A(x){return x==="Shape"||x==="shape"||x==="Path"||x==="path"||x==="ADBE Vector Shape"||x===2?A.path:null}var k=propertyGroupFactory(A,E);return T.setGroupProperty(PropertyInterface("Path",k)),Object.defineProperties(A,{path:{get:function(){return T.k&&T.getValue(),T}},shape:{get:function(){return T.k&&T.getValue(),T}},_name:{value:S.nm},ix:{value:S.ix},propertyIndex:{value:S.ix},mn:{value:S.mn},propertyGroup:{value:E}}),A}})(),ShapeExpressionInterface=(function(){function _(B,D,z){var O=[],L,F=B?B.length:0;for(L=0;L<F;L+=1)B[L].ty==="gr"?O.push(w(B[L],D[L],z)):B[L].ty==="fl"?O.push(E(B[L],D[L],z)):B[L].ty==="st"?O.push(k(B[L],D[L],z)):B[L].ty==="tm"?O.push(x(B[L],D[L],z)):B[L].ty==="tr"||(B[L].ty==="el"?O.push(P(B[L],D[L],z)):B[L].ty==="sr"?O.push(M(B[L],D[L],z)):B[L].ty==="sh"?O.push(ShapePathInterface(B[L],D[L],z)):B[L].ty==="rc"?O.push(N(B[L],D[L],z)):B[L].ty==="rd"?O.push(I(B[L],D[L],z)):B[L].ty==="rp"?O.push(V(B[L],D[L],z)):B[L].ty==="gf"?O.push(T(B[L],D[L],z)):O.push(A(B[L],D[L])));return O}function S(B,D,z){var O,L=function(H){for(var j=0,q=O.length;j<q;){if(O[j]._name===H||O[j].mn===H||O[j].propertyIndex===H||O[j].ix===H||O[j].ind===H)return O[j];j+=1}return typeof H=="number"?O[H-1]:null};L.propertyGroup=propertyGroupFactory(L,z),O=_(B.it,D.it,L.propertyGroup),L.numProperties=O.length;var F=R(B.it[B.it.length-1],D.it[D.it.length-1],L.propertyGroup);return L.transform=F,L.propertyIndex=B.cix,L._name=B.nm,L}function w(B,D,z){var O=function(H){switch(H){case"ADBE Vectors Group":case"Contents":case 2:return O.content;default:return O.transform}};O.propertyGroup=propertyGroupFactory(O,z);var L=S(B,D,O.propertyGroup),F=R(B.it[B.it.length-1],D.it[D.it.length-1],O.propertyGroup);return O.content=L,O.transform=F,Object.defineProperty(O,"_name",{get:function(){return B.nm}}),O.numProperties=B.np,O.propertyIndex=B.ix,O.nm=B.nm,O.mn=B.mn,O}function E(B,D,z){function O(L){return L==="Color"||L==="color"?O.color:L==="Opacity"||L==="opacity"?O.opacity:null}return Object.defineProperties(O,{color:{get:ExpressionPropertyInterface(D.c)},opacity:{get:ExpressionPropertyInterface(D.o)},_name:{value:B.nm},mn:{value:B.mn}}),D.c.setGroupProperty(PropertyInterface("Color",z)),D.o.setGroupProperty(PropertyInterface("Opacity",z)),O}function T(B,D,z){function O(L){return L==="Start Point"||L==="start point"?O.startPoint:L==="End Point"||L==="end point"?O.endPoint:L==="Opacity"||L==="opacity"?O.opacity:null}return Object.defineProperties(O,{startPoint:{get:ExpressionPropertyInterface(D.s)},endPoint:{get:ExpressionPropertyInterface(D.e)},opacity:{get:ExpressionPropertyInterface(D.o)},type:{get:function(){return"a"}},_name:{value:B.nm},mn:{value:B.mn}}),D.s.setGroupProperty(PropertyInterface("Start Point",z)),D.e.setGroupProperty(PropertyInterface("End Point",z)),D.o.setGroupProperty(PropertyInterface("Opacity",z)),O}function A(){function B(){return null}return B}function k(B,D,z){var O=propertyGroupFactory(q,z),L=propertyGroupFactory(j,O);function F(W){Object.defineProperty(j,B.d[W].nm,{get:ExpressionPropertyInterface(D.d.dataProps[W].p)})}var $,H=B.d?B.d.length:0,j={};for($=0;$<H;$+=1)F($),D.d.dataProps[$].p.setGroupProperty(L);function q(W){return W==="Color"||W==="color"?q.color:W==="Opacity"||W==="opacity"?q.opacity:W==="Stroke Width"||W==="stroke width"?q.strokeWidth:null}return Object.defineProperties(q,{color:{get:ExpressionPropertyInterface(D.c)},opacity:{get:ExpressionPropertyInterface(D.o)},strokeWidth:{get:ExpressionPropertyInterface(D.w)},dash:{get:function(){return j}},_name:{value:B.nm},mn:{value:B.mn}}),D.c.setGroupProperty(PropertyInterface("Color",O)),D.o.setGroupProperty(PropertyInterface("Opacity",O)),D.w.setGroupProperty(PropertyInterface("Stroke Width",O)),q}function x(B,D,z){function O(F){return F===B.e.ix||F==="End"||F==="end"?O.end:F===B.s.ix?O.start:F===B.o.ix?O.offset:null}var L=propertyGroupFactory(O,z);return O.propertyIndex=B.ix,D.s.setGroupProperty(PropertyInterface("Start",L)),D.e.setGroupProperty(PropertyInterface("End",L)),D.o.setGroupProperty(PropertyInterface("Offset",L)),O.propertyIndex=B.ix,O.propertyGroup=z,Object.defineProperties(O,{start:{get:ExpressionPropertyInterface(D.s)},end:{get:ExpressionPropertyInterface(D.e)},offset:{get:ExpressionPropertyInterface(D.o)},_name:{value:B.nm}}),O.mn=B.mn,O}function R(B,D,z){function O(F){return B.a.ix===F||F==="Anchor Point"?O.anchorPoint:B.o.ix===F||F==="Opacity"?O.opacity:B.p.ix===F||F==="Position"?O.position:B.r.ix===F||F==="Rotation"||F==="ADBE Vector Rotation"?O.rotation:B.s.ix===F||F==="Scale"?O.scale:B.sk&&B.sk.ix===F||F==="Skew"?O.skew:B.sa&&B.sa.ix===F||F==="Skew Axis"?O.skewAxis:null}var L=propertyGroupFactory(O,z);return D.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",L)),D.transform.mProps.p.setGroupProperty(PropertyInterface("Position",L)),D.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",L)),D.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",L)),D.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",L)),D.transform.mProps.sk&&(D.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",L)),D.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",L))),D.transform.op.setGroupProperty(PropertyInterface("Opacity",L)),Object.defineProperties(O,{opacity:{get:ExpressionPropertyInterface(D.transform.mProps.o)},position:{get:ExpressionPropertyInterface(D.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(D.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(D.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(D.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(D.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(D.transform.mProps.sa)},_name:{value:B.nm}}),O.ty="tr",O.mn=B.mn,O.propertyGroup=z,O}function P(B,D,z){function O($){return B.p.ix===$?O.position:B.s.ix===$?O.size:null}var L=propertyGroupFactory(O,z);O.propertyIndex=B.ix;var F=D.sh.ty==="tm"?D.sh.prop:D.sh;return F.s.setGroupProperty(PropertyInterface("Size",L)),F.p.setGroupProperty(PropertyInterface("Position",L)),Object.defineProperties(O,{size:{get:ExpressionPropertyInterface(F.s)},position:{get:ExpressionPropertyInterface(F.p)},_name:{value:B.nm}}),O.mn=B.mn,O}function M(B,D,z){function O($){return B.p.ix===$?O.position:B.r.ix===$?O.rotation:B.pt.ix===$?O.points:B.or.ix===$||$==="ADBE Vector Star Outer Radius"?O.outerRadius:B.os.ix===$?O.outerRoundness:B.ir&&(B.ir.ix===$||$==="ADBE Vector Star Inner Radius")?O.innerRadius:B.is&&B.is.ix===$?O.innerRoundness:null}var L=propertyGroupFactory(O,z),F=D.sh.ty==="tm"?D.sh.prop:D.sh;return O.propertyIndex=B.ix,F.or.setGroupProperty(PropertyInterface("Outer Radius",L)),F.os.setGroupProperty(PropertyInterface("Outer Roundness",L)),F.pt.setGroupProperty(PropertyInterface("Points",L)),F.p.setGroupProperty(PropertyInterface("Position",L)),F.r.setGroupProperty(PropertyInterface("Rotation",L)),B.ir&&(F.ir.setGroupProperty(PropertyInterface("Inner Radius",L)),F.is.setGroupProperty(PropertyInterface("Inner Roundness",L))),Object.defineProperties(O,{position:{get:ExpressionPropertyInterface(F.p)},rotation:{get:ExpressionPropertyInterface(F.r)},points:{get:ExpressionPropertyInterface(F.pt)},outerRadius:{get:ExpressionPropertyInterface(F.or)},outerRoundness:{get:ExpressionPropertyInterface(F.os)},innerRadius:{get:ExpressionPropertyInterface(F.ir)},innerRoundness:{get:ExpressionPropertyInterface(F.is)},_name:{value:B.nm}}),O.mn=B.mn,O}function N(B,D,z){function O($){return B.p.ix===$?O.position:B.r.ix===$?O.roundness:B.s.ix===$||$==="Size"||$==="ADBE Vector Rect Size"?O.size:null}var L=propertyGroupFactory(O,z),F=D.sh.ty==="tm"?D.sh.prop:D.sh;return O.propertyIndex=B.ix,F.p.setGroupProperty(PropertyInterface("Position",L)),F.s.setGroupProperty(PropertyInterface("Size",L)),F.r.setGroupProperty(PropertyInterface("Rotation",L)),Object.defineProperties(O,{position:{get:ExpressionPropertyInterface(F.p)},roundness:{get:ExpressionPropertyInterface(F.r)},size:{get:ExpressionPropertyInterface(F.s)},_name:{value:B.nm}}),O.mn=B.mn,O}function I(B,D,z){function O($){return B.r.ix===$||$==="Round Corners 1"?O.radius:null}var L=propertyGroupFactory(O,z),F=D;return O.propertyIndex=B.ix,F.rd.setGroupProperty(PropertyInterface("Radius",L)),Object.defineProperties(O,{radius:{get:ExpressionPropertyInterface(F.rd)},_name:{value:B.nm}}),O.mn=B.mn,O}function V(B,D,z){function O($){return B.c.ix===$||$==="Copies"?O.copies:B.o.ix===$||$==="Offset"?O.offset:null}var L=propertyGroupFactory(O,z),F=D;return O.propertyIndex=B.ix,F.c.setGroupProperty(PropertyInterface("Copies",L)),F.o.setGroupProperty(PropertyInterface("Offset",L)),Object.defineProperties(O,{copies:{get:ExpressionPropertyInterface(F.c)},offset:{get:ExpressionPropertyInterface(F.o)},_name:{value:B.nm}}),O.mn=B.mn,O}return function(B,D,z){var O;function L($){if(typeof $=="number")return $=$===void 0?1:$,$===0?z:O[$-1];for(var H=0,j=O.length;H<j;){if(O[H]._name===$)return O[H];H+=1}return null}function F(){return z}return L.propertyGroup=propertyGroupFactory(L,F),O=_(B,D,L.propertyGroup),L.numProperties=O.length,L._name="Contents",L}})(),TextExpressionInterface=(function(){return function(_){var S;function w(E){switch(E){case"ADBE Text Document":return w.sourceText;default:return null}}return Object.defineProperty(w,"sourceText",{get:function(){_.textProperty.getValue();var T=_.textProperty.currentData.t;return(!S||T!==S.value)&&(S=new String(T),S.value=T||new String(T),Object.defineProperty(S,"style",{get:function(){return{fillColor:_.textProperty.currentData.fc}}})),S}}),w}})();function _typeof(_){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof(_)}var FootageInterface=(function(){var _=function(E){var T="",A=E.getFootageData();function k(){return T="",A=E.getFootageData(),x}function x(R){if(A[R])return T=R,A=A[R],_typeof(A)==="object"?x:A;var P=R.indexOf(T);if(P!==-1){var M=parseInt(R.substr(P+T.length),10);return A=A[M],_typeof(A)==="object"?x:A}return""}return k},S=function(E){function T(A){return A==="Outline"?T.outlineInterface():null}return T._name="Outline",T.outlineInterface=_(E),T};return function(w){function E(T){return T==="Data"?E.dataInterface:null}return E._name="Data",E.dataInterface=S(w),E}})(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(_){return interfaces[_]||null}var expressionHelpers=(function(){function _(k,x,R){x.x&&(R.k=!0,R.x=!0,R.initiateExpression=ExpressionManager.initiateExpression,R.effectsSequence.push(R.initiateExpression(k,x,R).bind(R)))}function S(k){return k*=this.elem.globalData.frameRate,k-=this.offsetTime,k!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<k?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(k,this._cachingAtTime),this._cachingAtTime.lastFrame=k),this._cachingAtTime.value}function w(k){var x=-.01,R=this.getValueAtTime(k),P=this.getValueAtTime(k+x),M=0;if(R.length){var N;for(N=0;N<R.length;N+=1)M+=Math.pow(P[N]-R[N],2);M=Math.sqrt(M)*100}else M=0;return M}function E(k){if(this.vel!==void 0)return this.vel;var x=-.001,R=this.getValueAtTime(k),P=this.getValueAtTime(k+x),M;if(R.length){M=createTypedArray("float32",R.length);var N;for(N=0;N<R.length;N+=1)M[N]=(P[N]-R[N])/x}else M=(P-R)/x;return M}function T(){return this.pv}function A(k){this.propertyGroup=k}return{searchExpressions:_,getSpeedAtTime:w,getVelocityAtTime:E,getValueAtTime:S,getStaticValueAtTime:T,setGroupProperty:A}})();function addPropertyDecorator(){function _(I,V,B){if(!this.k||!this.keyframes)return this.pv;I=I?I.toLowerCase():"";var D=this.comp.renderedFrame,z=this.keyframes,O=z[z.length-1].t;if(D<=O)return this.pv;var L,F;B?(V?L=Math.abs(O-this.elem.comp.globalData.frameRate*V):L=Math.max(0,O-this.elem.data.ip),F=O-L):((!V||V>z.length-1)&&(V=z.length-1),F=z[z.length-1-V].t,L=O-F);var $,H,j;if(I==="pingpong"){var q=Math.floor((D-F)/L);if(q%2!==0)return this.getValueAtTime((L-(D-F)%L+F)/this.comp.globalData.frameRate,0)}else if(I==="offset"){var W=this.getValueAtTime(F/this.comp.globalData.frameRate,0),X=this.getValueAtTime(O/this.comp.globalData.frameRate,0),te=this.getValueAtTime(((D-F)%L+F)/this.comp.globalData.frameRate,0),ee=Math.floor((D-F)/L);if(this.pv.length){for(j=new Array(W.length),H=j.length,$=0;$<H;$+=1)j[$]=(X[$]-W[$])*ee+te[$];return j}return(X-W)*ee+te}else if(I==="continue"){var G=this.getValueAtTime(O/this.comp.globalData.frameRate,0),de=this.getValueAtTime((O-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(j=new Array(G.length),H=j.length,$=0;$<H;$+=1)j[$]=G[$]+(G[$]-de[$])*((D-O)/this.comp.globalData.frameRate)/5e-4;return j}return G+(G-de)*((D-O)/.001)}return this.getValueAtTime(((D-F)%L+F)/this.comp.globalData.frameRate,0)}function S(I,V,B){if(!this.k)return this.pv;I=I?I.toLowerCase():"";var D=this.comp.renderedFrame,z=this.keyframes,O=z[0].t;if(D>=O)return this.pv;var L,F;B?(V?L=Math.abs(this.elem.comp.globalData.frameRate*V):L=Math.max(0,this.elem.data.op-O),F=O+L):((!V||V>z.length-1)&&(V=z.length-1),F=z[V].t,L=F-O);var $,H,j;if(I==="pingpong"){var q=Math.floor((O-D)/L);if(q%2===0)return this.getValueAtTime(((O-D)%L+O)/this.comp.globalData.frameRate,0)}else if(I==="offset"){var W=this.getValueAtTime(O/this.comp.globalData.frameRate,0),X=this.getValueAtTime(F/this.comp.globalData.frameRate,0),te=this.getValueAtTime((L-(O-D)%L+O)/this.comp.globalData.frameRate,0),ee=Math.floor((O-D)/L)+1;if(this.pv.length){for(j=new Array(W.length),H=j.length,$=0;$<H;$+=1)j[$]=te[$]-(X[$]-W[$])*ee;return j}return te-(X-W)*ee}else if(I==="continue"){var G=this.getValueAtTime(O/this.comp.globalData.frameRate,0),de=this.getValueAtTime((O+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(j=new Array(G.length),H=j.length,$=0;$<H;$+=1)j[$]=G[$]+(G[$]-de[$])*(O-D)/.001;return j}return G+(G-de)*(O-D)/.001}return this.getValueAtTime((L-((O-D)%L+O))/this.comp.globalData.frameRate,0)}function w(I,V){if(!this.k)return this.pv;if(I=(I||.4)*.5,V=Math.floor(V||5),V<=1)return this.pv;var B=this.comp.renderedFrame/this.comp.globalData.frameRate,D=B-I,z=B+I,O=V>1?(z-D)/(V-1):1,L=0,F=0,$;this.pv.length?$=createTypedArray("float32",this.pv.length):$=0;for(var H;L<V;){if(H=this.getValueAtTime(D+L*O),this.pv.length)for(F=0;F<this.pv.length;F+=1)$[F]+=H[F];else $+=H;L+=1}if(this.pv.length)for(F=0;F<this.pv.length;F+=1)$[F]/=V;else $/=V;return $}function E(I){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var V=this._transformCachingAtTime.v;if(V.cloneFromProps(this.pre.props),this.appliedTransformations<1){var B=this.a.getValueAtTime(I);V.translate(-B[0]*this.a.mult,-B[1]*this.a.mult,B[2]*this.a.mult)}if(this.appliedTransformations<2){var D=this.s.getValueAtTime(I);V.scale(D[0]*this.s.mult,D[1]*this.s.mult,D[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var z=this.sk.getValueAtTime(I),O=this.sa.getValueAtTime(I);V.skewFromAxis(-z*this.sk.mult,O*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var L=this.r.getValueAtTime(I);V.rotate(-L*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var F=this.rz.getValueAtTime(I),$=this.ry.getValueAtTime(I),H=this.rx.getValueAtTime(I),j=this.or.getValueAtTime(I);V.rotateZ(-F*this.rz.mult).rotateY($*this.ry.mult).rotateX(H*this.rx.mult).rotateZ(-j[2]*this.or.mult).rotateY(j[1]*this.or.mult).rotateX(j[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var q=this.px.getValueAtTime(I),W=this.py.getValueAtTime(I);if(this.data.p.z){var X=this.pz.getValueAtTime(I);V.translate(q*this.px.mult,W*this.py.mult,-X*this.pz.mult)}else V.translate(q*this.px.mult,W*this.py.mult,0)}else{var te=this.p.getValueAtTime(I);V.translate(te[0]*this.p.mult,te[1]*this.p.mult,-te[2]*this.p.mult)}return V}function T(){return this.v.clone(new Matrix)}var A=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(I,V,B){var D=A(I,V,B);return D.dynamicProperties.length?D.getValueAtTime=E.bind(D):D.getValueAtTime=T.bind(D),D.setGroupProperty=expressionHelpers.setGroupProperty,D};var k=PropertyFactory.getProp;PropertyFactory.getProp=function(I,V,B,D,z){var O=k(I,V,B,D,z);O.kf?O.getValueAtTime=expressionHelpers.getValueAtTime.bind(O):O.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(O),O.setGroupProperty=expressionHelpers.setGroupProperty,O.loopOut=_,O.loopIn=S,O.smooth=w,O.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(O),O.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(O),O.numKeys=V.a===1?V.k.length:0,O.propertyIndex=V.ix;var L=0;return B!==0&&(L=createTypedArray("float32",V.a===1?V.k[0].s.length:V.k.length)),O._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:L},expressionHelpers.searchExpressions(I,V,O),O.k&&z.addDynamicProperty(O),O};function x(I){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),I*=this.elem.globalData.frameRate,I-=this.offsetTime,I!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<I?this._caching.lastIndex:0,this._cachingAtTime.lastTime=I,this.interpolateShape(I,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var R=ShapePropertyFactory.getConstructorFunction(),P=ShapePropertyFactory.getKeyframedConstructorFunction();function M(){}M.prototype={vertices:function(V,B){this.k&&this.getValue();var D=this.v;B!==void 0&&(D=this.getValueAtTime(B,0));var z,O=D._length,L=D[V],F=D.v,$=createSizedArray(O);for(z=0;z<O;z+=1)V==="i"||V==="o"?$[z]=[L[z][0]-F[z][0],L[z][1]-F[z][1]]:$[z]=[L[z][0],L[z][1]];return $},points:function(V){return this.vertices("v",V)},inTangents:function(V){return this.vertices("i",V)},outTangents:function(V){return this.vertices("o",V)},isClosed:function(){return this.v.c},pointOnPath:function(V,B){var D=this.v;B!==void 0&&(D=this.getValueAtTime(B,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(D));for(var z=this._segmentsLength,O=z.lengths,L=z.totalLength*V,F=0,$=O.length,H=0,j;F<$;){if(H+O[F].addedLength>L){var q=F,W=D.c&&F===$-1?0:F+1,X=(L-H)/O[F].addedLength;j=bez.getPointInSegment(D.v[q],D.v[W],D.o[q],D.i[W],X,O[F]);break}else H+=O[F].addedLength;F+=1}return j||(j=D.c?[D.v[0][0],D.v[0][1]]:[D.v[D._length-1][0],D.v[D._length-1][1]]),j},vectorOnPath:function(V,B,D){V==1?V=this.v.c:V==0&&(V=.999);var z=this.pointOnPath(V,B),O=this.pointOnPath(V+.001,B),L=O[0]-z[0],F=O[1]-z[1],$=Math.sqrt(Math.pow(L,2)+Math.pow(F,2));if($===0)return[0,0];var H=D==="tangent"?[L/$,F/$]:[-F/$,L/$];return H},tangentOnPath:function(V,B){return this.vectorOnPath(V,B,"tangent")},normalOnPath:function(V,B){return this.vectorOnPath(V,B,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([M],R),extendPrototype([M],P),P.prototype.getValueAtTime=x,P.prototype.initiateExpression=ExpressionManager.initiateExpression;var N=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(I,V,B,D,z){var O=N(I,V,B,D,z);return O.propertyIndex=V.ix,O.lock=!1,B===3?expressionHelpers.searchExpressions(I,V.pt,O):B===4&&expressionHelpers.searchExpressions(I,V.ks,O),O.k&&I.addDynamicProperty(O),O}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function _(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(S,w){var E=this.calculateExpression(w);if(S.t!==E){var T={};return this.copyData(T,S),T.t=E.toString(),T.__complete=!1,T}return S},TextProperty.prototype.searchProperty=function(){var S=this.searchKeyframes(),w=this.searchExpressions();return this.kf=S||w,this.kf},TextProperty.prototype.searchExpressions=_}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function _(S,w){var E=createNS("feMerge");E.setAttribute("result",S);var T,A;for(A=0;A<w.length;A+=1)T=createNS("feMergeNode"),T.setAttribute("in",w[A]),E.appendChild(T),E.appendChild(T);return E}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(_,S,w,E,T){this.filterManager=S;var A=createNS("feColorMatrix");A.setAttribute("type","matrix"),A.setAttribute("color-interpolation-filters","linearRGB"),A.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=A,A.setAttribute("result",E+"_tint_1"),_.appendChild(A),A=createNS("feColorMatrix"),A.setAttribute("type","matrix"),A.setAttribute("color-interpolation-filters","sRGB"),A.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),A.setAttribute("result",E+"_tint_2"),_.appendChild(A),this.matrixFilter=A;var k=this.createMergeNode(E,[T,E+"_tint_1",E+"_tint_2"]);_.appendChild(k)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(_){if(_||this.filterManager._mdf){var S=this.filterManager.effectElements[0].p.v,w=this.filterManager.effectElements[1].p.v,E=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+E+" 0"),this.matrixFilter.setAttribute("values",w[0]-S[0]+" 0 0 0 "+S[0]+" "+(w[1]-S[1])+" 0 0 0 "+S[1]+" "+(w[2]-S[2])+" 0 0 0 "+S[2]+" 0 0 0 1 0")}};function SVGFillFilter(_,S,w,E){this.filterManager=S;var T=createNS("feColorMatrix");T.setAttribute("type","matrix"),T.setAttribute("color-interpolation-filters","sRGB"),T.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),T.setAttribute("result",E),_.appendChild(T),this.matrixFilter=T}SVGFillFilter.prototype.renderFrame=function(_){if(_||this.filterManager._mdf){var S=this.filterManager.effectElements[2].p.v,w=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+S[0]+" 0 0 0 0 "+S[1]+" 0 0 0 0 "+S[2]+" 0 0 0 "+w+" 0")}};function SVGStrokeEffect(_,S,w){this.initialized=!1,this.filterManager=S,this.elem=w,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var _=this.elem.layerElement.children||this.elem.layerElement.childNodes,S,w,E,T;for(this.filterManager.effectElements[1].p.v===1?(T=this.elem.maskManager.masksProperties.length,E=0):(E=this.filterManager.effectElements[0].p.v-1,T=E+1),w=createNS("g"),w.setAttribute("fill","none"),w.setAttribute("stroke-linecap","round"),w.setAttribute("stroke-dashoffset",1),E;E<T;E+=1)S=createNS("path"),w.appendChild(S),this.paths.push({p:S,m:E});if(this.filterManager.effectElements[10].p.v===3){var A=createNS("mask"),k=createElementID();A.setAttribute("id",k),A.setAttribute("mask-type","alpha"),A.appendChild(w),this.elem.globalData.defs.appendChild(A);var x=createNS("g");for(x.setAttribute("mask","url("+getLocationHref()+"#"+k+")");_[0];)x.appendChild(_[0]);this.elem.layerElement.appendChild(x),this.masker=A,w.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(_=this.elem.layerElement.children||this.elem.layerElement.childNodes;_.length;)this.elem.layerElement.removeChild(_[0]);this.elem.layerElement.appendChild(w),this.elem.layerElement.removeAttribute("mask"),w.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=w},SVGStrokeEffect.prototype.renderFrame=function(_){this.initialized||this.initialize();var S,w=this.paths.length,E,T;for(S=0;S<w;S+=1)if(this.paths[S].m!==-1&&(E=this.elem.maskManager.viewData[this.paths[S].m],T=this.paths[S].p,(_||this.filterManager._mdf||E.prop._mdf)&&T.setAttribute("d",E.lastPath),_||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||E.prop._mdf)){var A;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var k=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,x=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,R=T.getTotalLength();A="0 0 0 "+R*k+" ";var P=R*(x-k),M=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,N=Math.floor(P/M),I;for(I=0;I<N;I+=1)A+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";A+="0 "+R*10+" 0 0"}else A="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;T.setAttribute("stroke-dasharray",A)}if((_||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(_||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(_||this.filterManager.effectElements[3].p._mdf)){var V=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(V[0]*255)+","+bmFloor(V[1]*255)+","+bmFloor(V[2]*255)+")")}};function SVGTritoneFilter(_,S,w,E){this.filterManager=S;var T=createNS("feColorMatrix");T.setAttribute("type","matrix"),T.setAttribute("color-interpolation-filters","linearRGB"),T.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),_.appendChild(T);var A=createNS("feComponentTransfer");A.setAttribute("color-interpolation-filters","sRGB"),A.setAttribute("result",E),this.matrixFilter=A;var k=createNS("feFuncR");k.setAttribute("type","table"),A.appendChild(k),this.feFuncR=k;var x=createNS("feFuncG");x.setAttribute("type","table"),A.appendChild(x),this.feFuncG=x;var R=createNS("feFuncB");R.setAttribute("type","table"),A.appendChild(R),this.feFuncB=R,_.appendChild(A)}SVGTritoneFilter.prototype.renderFrame=function(_){if(_||this.filterManager._mdf){var S=this.filterManager.effectElements[0].p.v,w=this.filterManager.effectElements[1].p.v,E=this.filterManager.effectElements[2].p.v,T=E[0]+" "+w[0]+" "+S[0],A=E[1]+" "+w[1]+" "+S[1],k=E[2]+" "+w[2]+" "+S[2];this.feFuncR.setAttribute("tableValues",T),this.feFuncG.setAttribute("tableValues",A),this.feFuncB.setAttribute("tableValues",k)}};function SVGProLevelsFilter(_,S,w,E){this.filterManager=S;var T=this.filterManager.effectElements,A=createNS("feComponentTransfer");(T[10].p.k||T[10].p.v!==0||T[11].p.k||T[11].p.v!==1||T[12].p.k||T[12].p.v!==1||T[13].p.k||T[13].p.v!==0||T[14].p.k||T[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",A)),(T[17].p.k||T[17].p.v!==0||T[18].p.k||T[18].p.v!==1||T[19].p.k||T[19].p.v!==1||T[20].p.k||T[20].p.v!==0||T[21].p.k||T[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",A)),(T[24].p.k||T[24].p.v!==0||T[25].p.k||T[25].p.v!==1||T[26].p.k||T[26].p.v!==1||T[27].p.k||T[27].p.v!==0||T[28].p.k||T[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",A)),(T[31].p.k||T[31].p.v!==0||T[32].p.k||T[32].p.v!==1||T[33].p.k||T[33].p.v!==1||T[34].p.k||T[34].p.v!==0||T[35].p.k||T[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",A)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(A.setAttribute("color-interpolation-filters","sRGB"),_.appendChild(A)),(T[3].p.k||T[3].p.v!==0||T[4].p.k||T[4].p.v!==1||T[5].p.k||T[5].p.v!==1||T[6].p.k||T[6].p.v!==0||T[7].p.k||T[7].p.v!==1)&&(A=createNS("feComponentTransfer"),A.setAttribute("color-interpolation-filters","sRGB"),A.setAttribute("result",E),_.appendChild(A),this.feFuncRComposed=this.createFeFunc("feFuncR",A),this.feFuncGComposed=this.createFeFunc("feFuncG",A),this.feFuncBComposed=this.createFeFunc("feFuncB",A))}SVGProLevelsFilter.prototype.createFeFunc=function(_,S){var w=createNS(_);return w.setAttribute("type","table"),S.appendChild(w),w},SVGProLevelsFilter.prototype.getTableValue=function(_,S,w,E,T){for(var A=0,k=256,x,R=Math.min(_,S),P=Math.max(_,S),M=Array.call(null,{length:k}),N,I=0,V=T-E,B=S-_;A<=256;)x=A/256,x<=R?N=B<0?T:E:x>=P?N=B<0?E:T:N=E+V*Math.pow((x-_)/B,1/w),M[I]=N,I+=1,A+=256/(k-1);return M.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(_){if(_||this.filterManager._mdf){var S,w=this.filterManager.effectElements;this.feFuncRComposed&&(_||w[3].p._mdf||w[4].p._mdf||w[5].p._mdf||w[6].p._mdf||w[7].p._mdf)&&(S=this.getTableValue(w[3].p.v,w[4].p.v,w[5].p.v,w[6].p.v,w[7].p.v),this.feFuncRComposed.setAttribute("tableValues",S),this.feFuncGComposed.setAttribute("tableValues",S),this.feFuncBComposed.setAttribute("tableValues",S)),this.feFuncR&&(_||w[10].p._mdf||w[11].p._mdf||w[12].p._mdf||w[13].p._mdf||w[14].p._mdf)&&(S=this.getTableValue(w[10].p.v,w[11].p.v,w[12].p.v,w[13].p.v,w[14].p.v),this.feFuncR.setAttribute("tableValues",S)),this.feFuncG&&(_||w[17].p._mdf||w[18].p._mdf||w[19].p._mdf||w[20].p._mdf||w[21].p._mdf)&&(S=this.getTableValue(w[17].p.v,w[18].p.v,w[19].p.v,w[20].p.v,w[21].p.v),this.feFuncG.setAttribute("tableValues",S)),this.feFuncB&&(_||w[24].p._mdf||w[25].p._mdf||w[26].p._mdf||w[27].p._mdf||w[28].p._mdf)&&(S=this.getTableValue(w[24].p.v,w[25].p.v,w[26].p.v,w[27].p.v,w[28].p.v),this.feFuncB.setAttribute("tableValues",S)),this.feFuncA&&(_||w[31].p._mdf||w[32].p._mdf||w[33].p._mdf||w[34].p._mdf||w[35].p._mdf)&&(S=this.getTableValue(w[31].p.v,w[32].p.v,w[33].p.v,w[34].p.v,w[35].p.v),this.feFuncA.setAttribute("tableValues",S))}};function SVGDropShadowEffect(_,S,w,E,T){var A=S.container.globalData.renderConfig.filterSize,k=S.data.fs||A;_.setAttribute("x",k.x||A.x),_.setAttribute("y",k.y||A.y),_.setAttribute("width",k.width||A.width),_.setAttribute("height",k.height||A.height),this.filterManager=S;var x=createNS("feGaussianBlur");x.setAttribute("in","SourceAlpha"),x.setAttribute("result",E+"_drop_shadow_1"),x.setAttribute("stdDeviation","0"),this.feGaussianBlur=x,_.appendChild(x);var R=createNS("feOffset");R.setAttribute("dx","25"),R.setAttribute("dy","0"),R.setAttribute("in",E+"_drop_shadow_1"),R.setAttribute("result",E+"_drop_shadow_2"),this.feOffset=R,_.appendChild(R);var P=createNS("feFlood");P.setAttribute("flood-color","#00ff00"),P.setAttribute("flood-opacity","1"),P.setAttribute("result",E+"_drop_shadow_3"),this.feFlood=P,_.appendChild(P);var M=createNS("feComposite");M.setAttribute("in",E+"_drop_shadow_3"),M.setAttribute("in2",E+"_drop_shadow_2"),M.setAttribute("operator","in"),M.setAttribute("result",E+"_drop_shadow_4"),_.appendChild(M);var N=this.createMergeNode(E,[E+"_drop_shadow_4",T]);_.appendChild(N)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(_){if(_||this.filterManager._mdf){if((_||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),_||this.filterManager.effectElements[0].p._mdf){var S=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(S[0]*255),Math.round(S[1]*255),Math.round(S[2]*255)))}if((_||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),_||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var w=this.filterManager.effectElements[3].p.v,E=(this.filterManager.effectElements[2].p.v-90)*degToRads,T=w*Math.cos(E),A=w*Math.sin(E);this.feOffset.setAttribute("dx",T),this.feOffset.setAttribute("dy",A)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(_,S,w){this.initialized=!1,this.filterManager=S,this.filterElem=_,this.elem=w,w.matteElement=createNS("g"),w.matteElement.appendChild(w.layerElement),w.matteElement.appendChild(w.transformedElement),w.baseElement=w.matteElement}SVGMatte3Effect.prototype.findSymbol=function(_){for(var S=0,w=_svgMatteSymbols.length;S<w;){if(_svgMatteSymbols[S]===_)return _svgMatteSymbols[S];S+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(_,S){var w=_.layerElement.parentNode;if(w){for(var E=w.children,T=0,A=E.length;T<A&&E[T]!==_.layerElement;)T+=1;var k;T<=A-2&&(k=E[T+1]);var x=createNS("use");x.setAttribute("href","#"+S),k?w.insertBefore(x,k):w.appendChild(x)}},SVGMatte3Effect.prototype.setElementAsMask=function(_,S){if(!this.findSymbol(S)){var w=createElementID(),E=createNS("mask");E.setAttribute("id",S.layerId),E.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(S);var T=_.globalData.defs;T.appendChild(E);var A=createNS("symbol");A.setAttribute("id",w),this.replaceInParent(S,w),A.appendChild(S.layerElement),T.appendChild(A);var k=createNS("use");k.setAttribute("href","#"+w),E.appendChild(k),S.data.hd=!1,S.show()}_.setMatte(S.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var _=this.filterManager.effectElements[0].p.v,S=this.elem.comp.elements,w=0,E=S.length;w<E;)S[w]&&S[w].data.ind===_&&this.setElementAsMask(this.elem,S[w]),w+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(_,S,w,E){_.setAttribute("x","-100%"),_.setAttribute("y","-100%"),_.setAttribute("width","300%"),_.setAttribute("height","300%"),this.filterManager=S;var T=createNS("feGaussianBlur");T.setAttribute("result",E),_.appendChild(T),this.feGaussianBlur=T}SVGGaussianBlurEffect.prototype.renderFrame=function(_){if(_||this.filterManager._mdf){var S=.3,w=this.filterManager.effectElements[0].p.v*S,E=this.filterManager.effectElements[1].p.v,T=E==3?0:w,A=E==2?0:w;this.feGaussianBlur.setAttribute("stdDeviation",T+" "+A);var k=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",k)}};function TransformEffect(){}TransformEffect.prototype.init=function(_){this.effectsManager=_,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(_){if(this._opMdf=!1,this._mdf=!1,_||this.effectsManager._mdf){var S=this.effectsManager.effectElements,w=S[0].p.v,E=S[1].p.v,T=S[2].p.v===1,A=S[3].p.v,k=T?A:S[4].p.v,x=S[5].p.v,R=S[6].p.v,P=S[7].p.v;this.matrix.reset(),this.matrix.translate(-w[0],-w[1],w[2]),this.matrix.scale(k*.01,A*.01,1),this.matrix.rotate(-P*degToRads),this.matrix.skewFromAxis(-x*degToRads,(R+90)*degToRads),this.matrix.translate(E[0],E[1],0),this._mdf=!0,this.opacity!==S[8].p.v&&(this.opacity=S[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(_,S){this.init(S)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(_){this.init(_)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie}))})(lottie$2,lottie$2.exports)),lottie$2.exports}var lottieExports=requireLottie();const lottie=getDefaultExportFromCjs$1(lottieExports);/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(_){let S=_.length;for(;--S>=0;)_[S]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(_,S,w,E,T){this.static_tree=_,this.extra_bits=S,this.extra_base=w,this.elems=E,this.max_length=T,this.has_stree=_&&_.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(_,S){this.dyn_tree=_,this.max_code=0,this.stat_desc=S}const d_code=_=>_<256?_dist_code[_]:_dist_code[256+(_>>>7)],put_short=(_,S)=>{_.pending_buf[_.pending++]=S&255,_.pending_buf[_.pending++]=S>>>8&255},send_bits=(_,S,w)=>{_.bi_valid>Buf_size-w?(_.bi_buf|=S<<_.bi_valid&65535,put_short(_,_.bi_buf),_.bi_buf=S>>Buf_size-_.bi_valid,_.bi_valid+=w-Buf_size):(_.bi_buf|=S<<_.bi_valid&65535,_.bi_valid+=w)},send_code=(_,S,w)=>{send_bits(_,w[S*2],w[S*2+1])},bi_reverse=(_,S)=>{let w=0;do w|=_&1,_>>>=1,w<<=1;while(--S>0);return w>>>1},bi_flush=_=>{_.bi_valid===16?(put_short(_,_.bi_buf),_.bi_buf=0,_.bi_valid=0):_.bi_valid>=8&&(_.pending_buf[_.pending++]=_.bi_buf&255,_.bi_buf>>=8,_.bi_valid-=8)},gen_bitlen=(_,S)=>{const w=S.dyn_tree,E=S.max_code,T=S.stat_desc.static_tree,A=S.stat_desc.has_stree,k=S.stat_desc.extra_bits,x=S.stat_desc.extra_base,R=S.stat_desc.max_length;let P,M,N,I,V,B,D=0;for(I=0;I<=MAX_BITS$1;I++)_.bl_count[I]=0;for(w[_.heap[_.heap_max]*2+1]=0,P=_.heap_max+1;P<HEAP_SIZE$1;P++)M=_.heap[P],I=w[w[M*2+1]*2+1]+1,I>R&&(I=R,D++),w[M*2+1]=I,!(M>E)&&(_.bl_count[I]++,V=0,M>=x&&(V=k[M-x]),B=w[M*2],_.opt_len+=B*(I+V),A&&(_.static_len+=B*(T[M*2+1]+V)));if(D!==0){do{for(I=R-1;_.bl_count[I]===0;)I--;_.bl_count[I]--,_.bl_count[I+1]+=2,_.bl_count[R]--,D-=2}while(D>0);for(I=R;I!==0;I--)for(M=_.bl_count[I];M!==0;)N=_.heap[--P],!(N>E)&&(w[N*2+1]!==I&&(_.opt_len+=(I-w[N*2+1])*w[N*2],w[N*2+1]=I),M--)}},gen_codes=(_,S,w)=>{const E=new Array(MAX_BITS$1+1);let T=0,A,k;for(A=1;A<=MAX_BITS$1;A++)T=T+w[A-1]<<1,E[A]=T;for(k=0;k<=S;k++){let x=_[k*2+1];x!==0&&(_[k*2]=bi_reverse(E[x]++,x))}},tr_static_init=()=>{let _,S,w,E,T;const A=new Array(MAX_BITS$1+1);for(w=0,E=0;E<LENGTH_CODES$1-1;E++)for(base_length[E]=w,_=0;_<1<<extra_lbits[E];_++)_length_code[w++]=E;for(_length_code[w-1]=E,T=0,E=0;E<16;E++)for(base_dist[E]=T,_=0;_<1<<extra_dbits[E];_++)_dist_code[T++]=E;for(T>>=7;E<D_CODES$1;E++)for(base_dist[E]=T<<7,_=0;_<1<<extra_dbits[E]-7;_++)_dist_code[256+T++]=E;for(S=0;S<=MAX_BITS$1;S++)A[S]=0;for(_=0;_<=143;)static_ltree[_*2+1]=8,_++,A[8]++;for(;_<=255;)static_ltree[_*2+1]=9,_++,A[9]++;for(;_<=279;)static_ltree[_*2+1]=7,_++,A[7]++;for(;_<=287;)static_ltree[_*2+1]=8,_++,A[8]++;for(gen_codes(static_ltree,L_CODES$1+1,A),_=0;_<D_CODES$1;_++)static_dtree[_*2+1]=5,static_dtree[_*2]=bi_reverse(_,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=_=>{let S;for(S=0;S<L_CODES$1;S++)_.dyn_ltree[S*2]=0;for(S=0;S<D_CODES$1;S++)_.dyn_dtree[S*2]=0;for(S=0;S<BL_CODES$1;S++)_.bl_tree[S*2]=0;_.dyn_ltree[END_BLOCK*2]=1,_.opt_len=_.static_len=0,_.sym_next=_.matches=0},bi_windup=_=>{_.bi_valid>8?put_short(_,_.bi_buf):_.bi_valid>0&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0},smaller=(_,S,w,E)=>{const T=S*2,A=w*2;return _[T]<_[A]||_[T]===_[A]&&E[S]<=E[w]},pqdownheap=(_,S,w)=>{const E=_.heap[w];let T=w<<1;for(;T<=_.heap_len&&(T<_.heap_len&&smaller(S,_.heap[T+1],_.heap[T],_.depth)&&T++,!smaller(S,E,_.heap[T],_.depth));)_.heap[w]=_.heap[T],w=T,T<<=1;_.heap[w]=E},compress_block=(_,S,w)=>{let E,T,A=0,k,x;if(_.sym_next!==0)do E=_.pending_buf[_.sym_buf+A++]&255,E+=(_.pending_buf[_.sym_buf+A++]&255)<<8,T=_.pending_buf[_.sym_buf+A++],E===0?send_code(_,T,S):(k=_length_code[T],send_code(_,k+LITERALS$1+1,S),x=extra_lbits[k],x!==0&&(T-=base_length[k],send_bits(_,T,x)),E--,k=d_code(E),send_code(_,k,w),x=extra_dbits[k],x!==0&&(E-=base_dist[k],send_bits(_,E,x)));while(A<_.sym_next);send_code(_,END_BLOCK,S)},build_tree=(_,S)=>{const w=S.dyn_tree,E=S.stat_desc.static_tree,T=S.stat_desc.has_stree,A=S.stat_desc.elems;let k,x,R=-1,P;for(_.heap_len=0,_.heap_max=HEAP_SIZE$1,k=0;k<A;k++)w[k*2]!==0?(_.heap[++_.heap_len]=R=k,_.depth[k]=0):w[k*2+1]=0;for(;_.heap_len<2;)P=_.heap[++_.heap_len]=R<2?++R:0,w[P*2]=1,_.depth[P]=0,_.opt_len--,T&&(_.static_len-=E[P*2+1]);for(S.max_code=R,k=_.heap_len>>1;k>=1;k--)pqdownheap(_,w,k);P=A;do k=_.heap[1],_.heap[1]=_.heap[_.heap_len--],pqdownheap(_,w,1),x=_.heap[1],_.heap[--_.heap_max]=k,_.heap[--_.heap_max]=x,w[P*2]=w[k*2]+w[x*2],_.depth[P]=(_.depth[k]>=_.depth[x]?_.depth[k]:_.depth[x])+1,w[k*2+1]=w[x*2+1]=P,_.heap[1]=P++,pqdownheap(_,w,1);while(_.heap_len>=2);_.heap[--_.heap_max]=_.heap[1],gen_bitlen(_,S),gen_codes(w,R,_.bl_count)},scan_tree=(_,S,w)=>{let E,T=-1,A,k=S[1],x=0,R=7,P=4;for(k===0&&(R=138,P=3),S[(w+1)*2+1]=65535,E=0;E<=w;E++)A=k,k=S[(E+1)*2+1],!(++x<R&&A===k)&&(x<P?_.bl_tree[A*2]+=x:A!==0?(A!==T&&_.bl_tree[A*2]++,_.bl_tree[REP_3_6*2]++):x<=10?_.bl_tree[REPZ_3_10*2]++:_.bl_tree[REPZ_11_138*2]++,x=0,T=A,k===0?(R=138,P=3):A===k?(R=6,P=3):(R=7,P=4))},send_tree=(_,S,w)=>{let E,T=-1,A,k=S[1],x=0,R=7,P=4;for(k===0&&(R=138,P=3),E=0;E<=w;E++)if(A=k,k=S[(E+1)*2+1],!(++x<R&&A===k)){if(x<P)do send_code(_,A,_.bl_tree);while(--x!==0);else A!==0?(A!==T&&(send_code(_,A,_.bl_tree),x--),send_code(_,REP_3_6,_.bl_tree),send_bits(_,x-3,2)):x<=10?(send_code(_,REPZ_3_10,_.bl_tree),send_bits(_,x-3,3)):(send_code(_,REPZ_11_138,_.bl_tree),send_bits(_,x-11,7));x=0,T=A,k===0?(R=138,P=3):A===k?(R=6,P=3):(R=7,P=4)}},build_bl_tree=_=>{let S;for(scan_tree(_,_.dyn_ltree,_.l_desc.max_code),scan_tree(_,_.dyn_dtree,_.d_desc.max_code),build_tree(_,_.bl_desc),S=BL_CODES$1-1;S>=3&&_.bl_tree[bl_order[S]*2+1]===0;S--);return _.opt_len+=3*(S+1)+5+5+4,S},send_all_trees=(_,S,w,E)=>{let T;for(send_bits(_,S-257,5),send_bits(_,w-1,5),send_bits(_,E-4,4),T=0;T<E;T++)send_bits(_,_.bl_tree[bl_order[T]*2+1],3);send_tree(_,_.dyn_ltree,S-1),send_tree(_,_.dyn_dtree,w-1)},detect_data_type=_=>{let S=4093624447,w;for(w=0;w<=31;w++,S>>>=1)if(S&1&&_.dyn_ltree[w*2]!==0)return Z_BINARY;if(_.dyn_ltree[18]!==0||_.dyn_ltree[20]!==0||_.dyn_ltree[26]!==0)return Z_TEXT;for(w=32;w<LITERALS$1;w++)if(_.dyn_ltree[w*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=_=>{static_init_done||(tr_static_init(),static_init_done=!0),_.l_desc=new TreeDesc(_.dyn_ltree,static_l_desc),_.d_desc=new TreeDesc(_.dyn_dtree,static_d_desc),_.bl_desc=new TreeDesc(_.bl_tree,static_bl_desc),_.bi_buf=0,_.bi_valid=0,init_block(_)},_tr_stored_block$1=(_,S,w,E)=>{send_bits(_,(STORED_BLOCK<<1)+(E?1:0),3),bi_windup(_),put_short(_,w),put_short(_,~w),w&&_.pending_buf.set(_.window.subarray(S,S+w),_.pending),_.pending+=w},_tr_align$1=_=>{send_bits(_,STATIC_TREES<<1,3),send_code(_,END_BLOCK,static_ltree),bi_flush(_)},_tr_flush_block$1=(_,S,w,E)=>{let T,A,k=0;_.level>0?(_.strm.data_type===Z_UNKNOWN$1&&(_.strm.data_type=detect_data_type(_)),build_tree(_,_.l_desc),build_tree(_,_.d_desc),k=build_bl_tree(_),T=_.opt_len+3+7>>>3,A=_.static_len+3+7>>>3,A<=T&&(T=A)):T=A=w+5,w+4<=T&&S!==-1?_tr_stored_block$1(_,S,w,E):_.strategy===Z_FIXED$1||A===T?(send_bits(_,(STATIC_TREES<<1)+(E?1:0),3),compress_block(_,static_ltree,static_dtree)):(send_bits(_,(DYN_TREES<<1)+(E?1:0),3),send_all_trees(_,_.l_desc.max_code+1,_.d_desc.max_code+1,k+1),compress_block(_,_.dyn_ltree,_.dyn_dtree)),init_block(_),E&&bi_windup(_)},_tr_tally$1=(_,S,w)=>(_.pending_buf[_.sym_buf+_.sym_next++]=S,_.pending_buf[_.sym_buf+_.sym_next++]=S>>8,_.pending_buf[_.sym_buf+_.sym_next++]=w,S===0?_.dyn_ltree[w*2]++:(_.matches++,S--,_.dyn_ltree[(_length_code[w]+LITERALS$1+1)*2]++,_.dyn_dtree[d_code(S)*2]++),_.sym_next===_.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(_,S,w,E)=>{let T=_&65535|0,A=_>>>16&65535|0,k=0;for(;w!==0;){k=w>2e3?2e3:w,w-=k;do T=T+S[E++]|0,A=A+T|0;while(--k);T%=65521,A%=65521}return T|A<<16|0};var adler32_1=adler32;const makeTable=()=>{let _,S=[];for(var w=0;w<256;w++){_=w;for(var E=0;E<8;E++)_=_&1?3988292384^_>>>1:_>>>1;S[w]=_}return S},crcTable=new Uint32Array(makeTable()),crc32=(_,S,w,E)=>{const T=crcTable,A=E+w;_^=-1;for(let k=E;k<A;k++)_=_>>>8^T[(_^S[k])&255];return _^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(_,S)=>(_.msg=messages[S],S),rank=_=>_*2-(_>4?9:0),zero=_=>{let S=_.length;for(;--S>=0;)_[S]=0},slide_hash=_=>{let S,w,E,T=_.w_size;S=_.hash_size,E=S;do w=_.head[--E],_.head[E]=w>=T?w-T:0;while(--S);S=T,E=S;do w=_.prev[--E],_.prev[E]=w>=T?w-T:0;while(--S)};let HASH_ZLIB=(_,S,w)=>(S<<_.hash_shift^w)&_.hash_mask,HASH=HASH_ZLIB;const flush_pending=_=>{const S=_.state;let w=S.pending;w>_.avail_out&&(w=_.avail_out),w!==0&&(_.output.set(S.pending_buf.subarray(S.pending_out,S.pending_out+w),_.next_out),_.next_out+=w,S.pending_out+=w,_.total_out+=w,_.avail_out-=w,S.pending-=w,S.pending===0&&(S.pending_out=0))},flush_block_only=(_,S)=>{_tr_flush_block(_,_.block_start>=0?_.block_start:-1,_.strstart-_.block_start,S),_.block_start=_.strstart,flush_pending(_.strm)},put_byte=(_,S)=>{_.pending_buf[_.pending++]=S},putShortMSB=(_,S)=>{_.pending_buf[_.pending++]=S>>>8&255,_.pending_buf[_.pending++]=S&255},read_buf=(_,S,w,E)=>{let T=_.avail_in;return T>E&&(T=E),T===0?0:(_.avail_in-=T,S.set(_.input.subarray(_.next_in,_.next_in+T),w),_.state.wrap===1?_.adler=adler32_1(_.adler,S,T,w):_.state.wrap===2&&(_.adler=crc32_1(_.adler,S,T,w)),_.next_in+=T,_.total_in+=T,T)},longest_match=(_,S)=>{let w=_.max_chain_length,E=_.strstart,T,A,k=_.prev_length,x=_.nice_match;const R=_.strstart>_.w_size-MIN_LOOKAHEAD?_.strstart-(_.w_size-MIN_LOOKAHEAD):0,P=_.window,M=_.w_mask,N=_.prev,I=_.strstart+MAX_MATCH;let V=P[E+k-1],B=P[E+k];_.prev_length>=_.good_match&&(w>>=2),x>_.lookahead&&(x=_.lookahead);do if(T=S,!(P[T+k]!==B||P[T+k-1]!==V||P[T]!==P[E]||P[++T]!==P[E+1])){E+=2,T++;do;while(P[++E]===P[++T]&&P[++E]===P[++T]&&P[++E]===P[++T]&&P[++E]===P[++T]&&P[++E]===P[++T]&&P[++E]===P[++T]&&P[++E]===P[++T]&&P[++E]===P[++T]&&E<I);if(A=MAX_MATCH-(I-E),E=I-MAX_MATCH,A>k){if(_.match_start=S,k=A,A>=x)break;V=P[E+k-1],B=P[E+k]}}while((S=N[S&M])>R&&--w!==0);return k<=_.lookahead?k:_.lookahead},fill_window=_=>{const S=_.w_size;let w,E,T;do{if(E=_.window_size-_.lookahead-_.strstart,_.strstart>=S+(S-MIN_LOOKAHEAD)&&(_.window.set(_.window.subarray(S,S+S-E),0),_.match_start-=S,_.strstart-=S,_.block_start-=S,_.insert>_.strstart&&(_.insert=_.strstart),slide_hash(_),E+=S),_.strm.avail_in===0)break;if(w=read_buf(_.strm,_.window,_.strstart+_.lookahead,E),_.lookahead+=w,_.lookahead+_.insert>=MIN_MATCH)for(T=_.strstart-_.insert,_.ins_h=_.window[T],_.ins_h=HASH(_,_.ins_h,_.window[T+1]);_.insert&&(_.ins_h=HASH(_,_.ins_h,_.window[T+MIN_MATCH-1]),_.prev[T&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=T,T++,_.insert--,!(_.lookahead+_.insert<MIN_MATCH)););}while(_.lookahead<MIN_LOOKAHEAD&&_.strm.avail_in!==0)},deflate_stored=(_,S)=>{let w=_.pending_buf_size-5>_.w_size?_.w_size:_.pending_buf_size-5,E,T,A,k=0,x=_.strm.avail_in;do{if(E=65535,A=_.bi_valid+42>>3,_.strm.avail_out<A||(A=_.strm.avail_out-A,T=_.strstart-_.block_start,E>T+_.strm.avail_in&&(E=T+_.strm.avail_in),E>A&&(E=A),E<w&&(E===0&&S!==Z_FINISH$3||S===Z_NO_FLUSH$2||E!==T+_.strm.avail_in)))break;k=S===Z_FINISH$3&&E===T+_.strm.avail_in?1:0,_tr_stored_block(_,0,0,k),_.pending_buf[_.pending-4]=E,_.pending_buf[_.pending-3]=E>>8,_.pending_buf[_.pending-2]=~E,_.pending_buf[_.pending-1]=~E>>8,flush_pending(_.strm),T&&(T>E&&(T=E),_.strm.output.set(_.window.subarray(_.block_start,_.block_start+T),_.strm.next_out),_.strm.next_out+=T,_.strm.avail_out-=T,_.strm.total_out+=T,_.block_start+=T,E-=T),E&&(read_buf(_.strm,_.strm.output,_.strm.next_out,E),_.strm.next_out+=E,_.strm.avail_out-=E,_.strm.total_out+=E)}while(k===0);return x-=_.strm.avail_in,x&&(x>=_.w_size?(_.matches=2,_.window.set(_.strm.input.subarray(_.strm.next_in-_.w_size,_.strm.next_in),0),_.strstart=_.w_size,_.insert=_.strstart):(_.window_size-_.strstart<=x&&(_.strstart-=_.w_size,_.window.set(_.window.subarray(_.w_size,_.w_size+_.strstart),0),_.matches<2&&_.matches++,_.insert>_.strstart&&(_.insert=_.strstart)),_.window.set(_.strm.input.subarray(_.strm.next_in-x,_.strm.next_in),_.strstart),_.strstart+=x,_.insert+=x>_.w_size-_.insert?_.w_size-_.insert:x),_.block_start=_.strstart),_.high_water<_.strstart&&(_.high_water=_.strstart),k?BS_FINISH_DONE:S!==Z_NO_FLUSH$2&&S!==Z_FINISH$3&&_.strm.avail_in===0&&_.strstart===_.block_start?BS_BLOCK_DONE:(A=_.window_size-_.strstart,_.strm.avail_in>A&&_.block_start>=_.w_size&&(_.block_start-=_.w_size,_.strstart-=_.w_size,_.window.set(_.window.subarray(_.w_size,_.w_size+_.strstart),0),_.matches<2&&_.matches++,A+=_.w_size,_.insert>_.strstart&&(_.insert=_.strstart)),A>_.strm.avail_in&&(A=_.strm.avail_in),A&&(read_buf(_.strm,_.window,_.strstart,A),_.strstart+=A,_.insert+=A>_.w_size-_.insert?_.w_size-_.insert:A),_.high_water<_.strstart&&(_.high_water=_.strstart),A=_.bi_valid+42>>3,A=_.pending_buf_size-A>65535?65535:_.pending_buf_size-A,w=A>_.w_size?_.w_size:A,T=_.strstart-_.block_start,(T>=w||(T||S===Z_FINISH$3)&&S!==Z_NO_FLUSH$2&&_.strm.avail_in===0&&T<=A)&&(E=T>A?A:T,k=S===Z_FINISH$3&&_.strm.avail_in===0&&E===T?1:0,_tr_stored_block(_,_.block_start,E,k),_.block_start+=E,flush_pending(_.strm)),k?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(_,S)=>{let w,E;for(;;){if(_.lookahead<MIN_LOOKAHEAD){if(fill_window(_),_.lookahead<MIN_LOOKAHEAD&&S===Z_NO_FLUSH$2)return BS_NEED_MORE;if(_.lookahead===0)break}if(w=0,_.lookahead>=MIN_MATCH&&(_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),w=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),w!==0&&_.strstart-w<=_.w_size-MIN_LOOKAHEAD&&(_.match_length=longest_match(_,w)),_.match_length>=MIN_MATCH)if(E=_tr_tally(_,_.strstart-_.match_start,_.match_length-MIN_MATCH),_.lookahead-=_.match_length,_.match_length<=_.max_lazy_match&&_.lookahead>=MIN_MATCH){_.match_length--;do _.strstart++,_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),w=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart;while(--_.match_length!==0);_.strstart++}else _.strstart+=_.match_length,_.match_length=0,_.ins_h=_.window[_.strstart],_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+1]);else E=_tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++;if(E&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}return _.insert=_.strstart<MIN_MATCH-1?_.strstart:MIN_MATCH-1,S===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(_,S)=>{let w,E,T;for(;;){if(_.lookahead<MIN_LOOKAHEAD){if(fill_window(_),_.lookahead<MIN_LOOKAHEAD&&S===Z_NO_FLUSH$2)return BS_NEED_MORE;if(_.lookahead===0)break}if(w=0,_.lookahead>=MIN_MATCH&&(_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),w=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),_.prev_length=_.match_length,_.prev_match=_.match_start,_.match_length=MIN_MATCH-1,w!==0&&_.prev_length<_.max_lazy_match&&_.strstart-w<=_.w_size-MIN_LOOKAHEAD&&(_.match_length=longest_match(_,w),_.match_length<=5&&(_.strategy===Z_FILTERED||_.match_length===MIN_MATCH&&_.strstart-_.match_start>4096)&&(_.match_length=MIN_MATCH-1)),_.prev_length>=MIN_MATCH&&_.match_length<=_.prev_length){T=_.strstart+_.lookahead-MIN_MATCH,E=_tr_tally(_,_.strstart-1-_.prev_match,_.prev_length-MIN_MATCH),_.lookahead-=_.prev_length-1,_.prev_length-=2;do++_.strstart<=T&&(_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),w=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart);while(--_.prev_length!==0);if(_.match_available=0,_.match_length=MIN_MATCH-1,_.strstart++,E&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}else if(_.match_available){if(E=_tr_tally(_,0,_.window[_.strstart-1]),E&&flush_block_only(_,!1),_.strstart++,_.lookahead--,_.strm.avail_out===0)return BS_NEED_MORE}else _.match_available=1,_.strstart++,_.lookahead--}return _.match_available&&(E=_tr_tally(_,0,_.window[_.strstart-1]),_.match_available=0),_.insert=_.strstart<MIN_MATCH-1?_.strstart:MIN_MATCH-1,S===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(_,S)=>{let w,E,T,A;const k=_.window;for(;;){if(_.lookahead<=MAX_MATCH){if(fill_window(_),_.lookahead<=MAX_MATCH&&S===Z_NO_FLUSH$2)return BS_NEED_MORE;if(_.lookahead===0)break}if(_.match_length=0,_.lookahead>=MIN_MATCH&&_.strstart>0&&(T=_.strstart-1,E=k[T],E===k[++T]&&E===k[++T]&&E===k[++T])){A=_.strstart+MAX_MATCH;do;while(E===k[++T]&&E===k[++T]&&E===k[++T]&&E===k[++T]&&E===k[++T]&&E===k[++T]&&E===k[++T]&&E===k[++T]&&T<A);_.match_length=MAX_MATCH-(A-T),_.match_length>_.lookahead&&(_.match_length=_.lookahead)}if(_.match_length>=MIN_MATCH?(w=_tr_tally(_,1,_.match_length-MIN_MATCH),_.lookahead-=_.match_length,_.strstart+=_.match_length,_.match_length=0):(w=_tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++),w&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}return _.insert=0,S===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(_,S)=>{let w;for(;;){if(_.lookahead===0&&(fill_window(_),_.lookahead===0)){if(S===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(_.match_length=0,w=_tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++,w&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}return _.insert=0,S===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(_,S,w,E,T){this.good_length=_,this.max_lazy=S,this.nice_length=w,this.max_chain=E,this.func=T}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=_=>{_.window_size=2*_.w_size,zero(_.head),_.max_lazy_match=configuration_table[_.level].max_lazy,_.good_match=configuration_table[_.level].good_length,_.nice_match=configuration_table[_.level].nice_length,_.max_chain_length=configuration_table[_.level].max_chain,_.strstart=0,_.block_start=0,_.lookahead=0,_.insert=0,_.match_length=_.prev_length=MIN_MATCH-1,_.match_available=0,_.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=_=>{if(!_)return 1;const S=_.state;return!S||S.strm!==_||S.status!==INIT_STATE&&S.status!==GZIP_STATE&&S.status!==EXTRA_STATE&&S.status!==NAME_STATE&&S.status!==COMMENT_STATE&&S.status!==HCRC_STATE&&S.status!==BUSY_STATE&&S.status!==FINISH_STATE?1:0},deflateResetKeep=_=>{if(deflateStateCheck(_))return err(_,Z_STREAM_ERROR$2);_.total_in=_.total_out=0,_.data_type=Z_UNKNOWN;const S=_.state;return S.pending=0,S.pending_out=0,S.wrap<0&&(S.wrap=-S.wrap),S.status=S.wrap===2?GZIP_STATE:S.wrap?INIT_STATE:BUSY_STATE,_.adler=S.wrap===2?0:1,S.last_flush=-2,_tr_init(S),Z_OK$3},deflateReset=_=>{const S=deflateResetKeep(_);return S===Z_OK$3&&lm_init(_.state),S},deflateSetHeader=(_,S)=>deflateStateCheck(_)||_.state.wrap!==2?Z_STREAM_ERROR$2:(_.state.gzhead=S,Z_OK$3),deflateInit2=(_,S,w,E,T,A)=>{if(!_)return Z_STREAM_ERROR$2;let k=1;if(S===Z_DEFAULT_COMPRESSION$1&&(S=6),E<0?(k=0,E=-E):E>15&&(k=2,E-=16),T<1||T>MAX_MEM_LEVEL||w!==Z_DEFLATED$2||E<8||E>15||S<0||S>9||A<0||A>Z_FIXED||E===8&&k!==1)return err(_,Z_STREAM_ERROR$2);E===8&&(E=9);const x=new DeflateState;return _.state=x,x.strm=_,x.status=INIT_STATE,x.wrap=k,x.gzhead=null,x.w_bits=E,x.w_size=1<<x.w_bits,x.w_mask=x.w_size-1,x.hash_bits=T+7,x.hash_size=1<<x.hash_bits,x.hash_mask=x.hash_size-1,x.hash_shift=~~((x.hash_bits+MIN_MATCH-1)/MIN_MATCH),x.window=new Uint8Array(x.w_size*2),x.head=new Uint16Array(x.hash_size),x.prev=new Uint16Array(x.w_size),x.lit_bufsize=1<<T+6,x.pending_buf_size=x.lit_bufsize*4,x.pending_buf=new Uint8Array(x.pending_buf_size),x.sym_buf=x.lit_bufsize,x.sym_end=(x.lit_bufsize-1)*3,x.level=S,x.strategy=A,x.method=w,deflateReset(_)},deflateInit=(_,S)=>deflateInit2(_,S,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(_,S)=>{if(deflateStateCheck(_)||S>Z_BLOCK$1||S<0)return _?err(_,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const w=_.state;if(!_.output||_.avail_in!==0&&!_.input||w.status===FINISH_STATE&&S!==Z_FINISH$3)return err(_,_.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const E=w.last_flush;if(w.last_flush=S,w.pending!==0){if(flush_pending(_),_.avail_out===0)return w.last_flush=-1,Z_OK$3}else if(_.avail_in===0&&rank(S)<=rank(E)&&S!==Z_FINISH$3)return err(_,Z_BUF_ERROR$1);if(w.status===FINISH_STATE&&_.avail_in!==0)return err(_,Z_BUF_ERROR$1);if(w.status===INIT_STATE&&w.wrap===0&&(w.status=BUSY_STATE),w.status===INIT_STATE){let T=Z_DEFLATED$2+(w.w_bits-8<<4)<<8,A=-1;if(w.strategy>=Z_HUFFMAN_ONLY||w.level<2?A=0:w.level<6?A=1:w.level===6?A=2:A=3,T|=A<<6,w.strstart!==0&&(T|=PRESET_DICT),T+=31-T%31,putShortMSB(w,T),w.strstart!==0&&(putShortMSB(w,_.adler>>>16),putShortMSB(w,_.adler&65535)),_.adler=1,w.status=BUSY_STATE,flush_pending(_),w.pending!==0)return w.last_flush=-1,Z_OK$3}if(w.status===GZIP_STATE){if(_.adler=0,put_byte(w,31),put_byte(w,139),put_byte(w,8),w.gzhead)put_byte(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),put_byte(w,w.gzhead.time&255),put_byte(w,w.gzhead.time>>8&255),put_byte(w,w.gzhead.time>>16&255),put_byte(w,w.gzhead.time>>24&255),put_byte(w,w.level===9?2:w.strategy>=Z_HUFFMAN_ONLY||w.level<2?4:0),put_byte(w,w.gzhead.os&255),w.gzhead.extra&&w.gzhead.extra.length&&(put_byte(w,w.gzhead.extra.length&255),put_byte(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(_.adler=crc32_1(_.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=EXTRA_STATE;else if(put_byte(w,0),put_byte(w,0),put_byte(w,0),put_byte(w,0),put_byte(w,0),put_byte(w,w.level===9?2:w.strategy>=Z_HUFFMAN_ONLY||w.level<2?4:0),put_byte(w,OS_CODE),w.status=BUSY_STATE,flush_pending(_),w.pending!==0)return w.last_flush=-1,Z_OK$3}if(w.status===EXTRA_STATE){if(w.gzhead.extra){let T=w.pending,A=(w.gzhead.extra.length&65535)-w.gzindex;for(;w.pending+A>w.pending_buf_size;){let x=w.pending_buf_size-w.pending;if(w.pending_buf.set(w.gzhead.extra.subarray(w.gzindex,w.gzindex+x),w.pending),w.pending=w.pending_buf_size,w.gzhead.hcrc&&w.pending>T&&(_.adler=crc32_1(_.adler,w.pending_buf,w.pending-T,T)),w.gzindex+=x,flush_pending(_),w.pending!==0)return w.last_flush=-1,Z_OK$3;T=0,A-=x}let k=new Uint8Array(w.gzhead.extra);w.pending_buf.set(k.subarray(w.gzindex,w.gzindex+A),w.pending),w.pending+=A,w.gzhead.hcrc&&w.pending>T&&(_.adler=crc32_1(_.adler,w.pending_buf,w.pending-T,T)),w.gzindex=0}w.status=NAME_STATE}if(w.status===NAME_STATE){if(w.gzhead.name){let T=w.pending,A;do{if(w.pending===w.pending_buf_size){if(w.gzhead.hcrc&&w.pending>T&&(_.adler=crc32_1(_.adler,w.pending_buf,w.pending-T,T)),flush_pending(_),w.pending!==0)return w.last_flush=-1,Z_OK$3;T=0}w.gzindex<w.gzhead.name.length?A=w.gzhead.name.charCodeAt(w.gzindex++)&255:A=0,put_byte(w,A)}while(A!==0);w.gzhead.hcrc&&w.pending>T&&(_.adler=crc32_1(_.adler,w.pending_buf,w.pending-T,T)),w.gzindex=0}w.status=COMMENT_STATE}if(w.status===COMMENT_STATE){if(w.gzhead.comment){let T=w.pending,A;do{if(w.pending===w.pending_buf_size){if(w.gzhead.hcrc&&w.pending>T&&(_.adler=crc32_1(_.adler,w.pending_buf,w.pending-T,T)),flush_pending(_),w.pending!==0)return w.last_flush=-1,Z_OK$3;T=0}w.gzindex<w.gzhead.comment.length?A=w.gzhead.comment.charCodeAt(w.gzindex++)&255:A=0,put_byte(w,A)}while(A!==0);w.gzhead.hcrc&&w.pending>T&&(_.adler=crc32_1(_.adler,w.pending_buf,w.pending-T,T))}w.status=HCRC_STATE}if(w.status===HCRC_STATE){if(w.gzhead.hcrc){if(w.pending+2>w.pending_buf_size&&(flush_pending(_),w.pending!==0))return w.last_flush=-1,Z_OK$3;put_byte(w,_.adler&255),put_byte(w,_.adler>>8&255),_.adler=0}if(w.status=BUSY_STATE,flush_pending(_),w.pending!==0)return w.last_flush=-1,Z_OK$3}if(_.avail_in!==0||w.lookahead!==0||S!==Z_NO_FLUSH$2&&w.status!==FINISH_STATE){let T=w.level===0?deflate_stored(w,S):w.strategy===Z_HUFFMAN_ONLY?deflate_huff(w,S):w.strategy===Z_RLE?deflate_rle(w,S):configuration_table[w.level].func(w,S);if((T===BS_FINISH_STARTED||T===BS_FINISH_DONE)&&(w.status=FINISH_STATE),T===BS_NEED_MORE||T===BS_FINISH_STARTED)return _.avail_out===0&&(w.last_flush=-1),Z_OK$3;if(T===BS_BLOCK_DONE&&(S===Z_PARTIAL_FLUSH?_tr_align(w):S!==Z_BLOCK$1&&(_tr_stored_block(w,0,0,!1),S===Z_FULL_FLUSH$1&&(zero(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),flush_pending(_),_.avail_out===0))return w.last_flush=-1,Z_OK$3}return S!==Z_FINISH$3?Z_OK$3:w.wrap<=0?Z_STREAM_END$3:(w.wrap===2?(put_byte(w,_.adler&255),put_byte(w,_.adler>>8&255),put_byte(w,_.adler>>16&255),put_byte(w,_.adler>>24&255),put_byte(w,_.total_in&255),put_byte(w,_.total_in>>8&255),put_byte(w,_.total_in>>16&255),put_byte(w,_.total_in>>24&255)):(putShortMSB(w,_.adler>>>16),putShortMSB(w,_.adler&65535)),flush_pending(_),w.wrap>0&&(w.wrap=-w.wrap),w.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=_=>{if(deflateStateCheck(_))return Z_STREAM_ERROR$2;const S=_.state.status;return _.state=null,S===BUSY_STATE?err(_,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(_,S)=>{let w=S.length;if(deflateStateCheck(_))return Z_STREAM_ERROR$2;const E=_.state,T=E.wrap;if(T===2||T===1&&E.status!==INIT_STATE||E.lookahead)return Z_STREAM_ERROR$2;if(T===1&&(_.adler=adler32_1(_.adler,S,w,0)),E.wrap=0,w>=E.w_size){T===0&&(zero(E.head),E.strstart=0,E.block_start=0,E.insert=0);let R=new Uint8Array(E.w_size);R.set(S.subarray(w-E.w_size,w),0),S=R,w=E.w_size}const A=_.avail_in,k=_.next_in,x=_.input;for(_.avail_in=w,_.next_in=0,_.input=S,fill_window(E);E.lookahead>=MIN_MATCH;){let R=E.strstart,P=E.lookahead-(MIN_MATCH-1);do E.ins_h=HASH(E,E.ins_h,E.window[R+MIN_MATCH-1]),E.prev[R&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=R,R++;while(--P);E.strstart=R,E.lookahead=MIN_MATCH-1,fill_window(E)}return E.strstart+=E.lookahead,E.block_start=E.strstart,E.insert=E.lookahead,E.lookahead=0,E.match_length=E.prev_length=MIN_MATCH-1,E.match_available=0,_.next_in=k,_.input=x,_.avail_in=A,E.wrap=T,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(_,S)=>Object.prototype.hasOwnProperty.call(_,S);var assign=function(_){const S=Array.prototype.slice.call(arguments,1);for(;S.length;){const w=S.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(const E in w)_has(w,E)&&(_[E]=w[E])}}return _},flattenChunks=_=>{let S=0;for(let E=0,T=_.length;E<T;E++)S+=_[E].length;const w=new Uint8Array(S);for(let E=0,T=0,A=_.length;E<A;E++){let k=_[E];w.set(k,T),T+=k.length}return w},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(_){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let _=0;_<256;_++)_utf8len[_]=_>=252?6:_>=248?5:_>=240?4:_>=224?3:_>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=_=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(_);let S,w,E,T,A,k=_.length,x=0;for(T=0;T<k;T++)w=_.charCodeAt(T),(w&64512)===55296&&T+1<k&&(E=_.charCodeAt(T+1),(E&64512)===56320&&(w=65536+(w-55296<<10)+(E-56320),T++)),x+=w<128?1:w<2048?2:w<65536?3:4;for(S=new Uint8Array(x),A=0,T=0;A<x;T++)w=_.charCodeAt(T),(w&64512)===55296&&T+1<k&&(E=_.charCodeAt(T+1),(E&64512)===56320&&(w=65536+(w-55296<<10)+(E-56320),T++)),w<128?S[A++]=w:w<2048?(S[A++]=192|w>>>6,S[A++]=128|w&63):w<65536?(S[A++]=224|w>>>12,S[A++]=128|w>>>6&63,S[A++]=128|w&63):(S[A++]=240|w>>>18,S[A++]=128|w>>>12&63,S[A++]=128|w>>>6&63,S[A++]=128|w&63);return S};const buf2binstring=(_,S)=>{if(S<65534&&_.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,_.length===S?_:_.subarray(0,S));let w="";for(let E=0;E<S;E++)w+=String.fromCharCode(_[E]);return w};var buf2string=(_,S)=>{const w=S||_.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(_.subarray(0,S));let E,T;const A=new Array(w*2);for(T=0,E=0;E<w;){let k=_[E++];if(k<128){A[T++]=k;continue}let x=_utf8len[k];if(x>4){A[T++]=65533,E+=x-1;continue}for(k&=x===2?31:x===3?15:7;x>1&&E<w;)k=k<<6|_[E++]&63,x--;if(x>1){A[T++]=65533;continue}k<65536?A[T++]=k:(k-=65536,A[T++]=55296|k>>10&1023,A[T++]=56320|k&1023)}return buf2binstring(A,T)},utf8border=(_,S)=>{S=S||_.length,S>_.length&&(S=_.length);let w=S-1;for(;w>=0&&(_[w]&192)===128;)w--;return w<0||w===0?S:w+_utf8len[_[w]]>S?w:S},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(_){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},_||{});let S=this.options;S.raw&&S.windowBits>0?S.windowBits=-S.windowBits:S.gzip&&S.windowBits>0&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let w=deflate_1$2.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(w!==Z_OK$2)throw new Error(messages[w]);if(S.header&&deflate_1$2.deflateSetHeader(this.strm,S.header),S.dictionary){let E;if(typeof S.dictionary=="string"?E=strings.string2buf(S.dictionary):toString$1.call(S.dictionary)==="[object ArrayBuffer]"?E=new Uint8Array(S.dictionary):E=S.dictionary,w=deflate_1$2.deflateSetDictionary(this.strm,E),w!==Z_OK$2)throw new Error(messages[w]);this._dict_set=!0}}Deflate$1.prototype.push=function(_,S){const w=this.strm,E=this.options.chunkSize;let T,A;if(this.ended)return!1;for(S===~~S?A=S:A=S===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof _=="string"?w.input=strings.string2buf(_):toString$1.call(_)==="[object ArrayBuffer]"?w.input=new Uint8Array(_):w.input=_,w.next_in=0,w.avail_in=w.input.length;;){if(w.avail_out===0&&(w.output=new Uint8Array(E),w.next_out=0,w.avail_out=E),(A===Z_SYNC_FLUSH||A===Z_FULL_FLUSH)&&w.avail_out<=6){this.onData(w.output.subarray(0,w.next_out)),w.avail_out=0;continue}if(T=deflate_1$2.deflate(w,A),T===Z_STREAM_END$2)return w.next_out>0&&this.onData(w.output.subarray(0,w.next_out)),T=deflate_1$2.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===Z_OK$2;if(w.avail_out===0){this.onData(w.output);continue}if(A>0&&w.next_out>0){this.onData(w.output.subarray(0,w.next_out)),w.avail_out=0;continue}if(w.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(_){this.chunks.push(_)};Deflate$1.prototype.onEnd=function(_){_===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function deflate$1(_,S){const w=new Deflate$1(S);if(w.push(_,!0),w.err)throw w.msg||messages[w.err];return w.result}function deflateRaw$1(_,S){return S=S||{},S.raw=!0,deflate$1(_,S)}function gzip$1(_,S){return S=S||{},S.gzip=!0,deflate$1(_,S)}var Deflate_1$1=Deflate$1,deflate_2=deflate$1,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1};const BAD$1=16209,TYPE$1=16191;var inffast=function _(S,w){let E,T,A,k,x,R,P,M,N,I,V,B,D,z,O,L,F,$,H,j,q,W,X,te;const ee=S.state;E=S.next_in,X=S.input,T=E+(S.avail_in-5),A=S.next_out,te=S.output,k=A-(w-S.avail_out),x=A+(S.avail_out-257),R=ee.dmax,P=ee.wsize,M=ee.whave,N=ee.wnext,I=ee.window,V=ee.hold,B=ee.bits,D=ee.lencode,z=ee.distcode,O=(1<<ee.lenbits)-1,L=(1<<ee.distbits)-1;e:do{B<15&&(V+=X[E++]<<B,B+=8,V+=X[E++]<<B,B+=8),F=D[V&O];t:for(;;){if($=F>>>24,V>>>=$,B-=$,$=F>>>16&255,$===0)te[A++]=F&65535;else if($&16){H=F&65535,$&=15,$&&(B<$&&(V+=X[E++]<<B,B+=8),H+=V&(1<<$)-1,V>>>=$,B-=$),B<15&&(V+=X[E++]<<B,B+=8,V+=X[E++]<<B,B+=8),F=z[V&L];r:for(;;){if($=F>>>24,V>>>=$,B-=$,$=F>>>16&255,$&16){if(j=F&65535,$&=15,B<$&&(V+=X[E++]<<B,B+=8,B<$&&(V+=X[E++]<<B,B+=8)),j+=V&(1<<$)-1,j>R){S.msg="invalid distance too far back",ee.mode=BAD$1;break e}if(V>>>=$,B-=$,$=A-k,j>$){if($=j-$,$>M&&ee.sane){S.msg="invalid distance too far back",ee.mode=BAD$1;break e}if(q=0,W=I,N===0){if(q+=P-$,$<H){H-=$;do te[A++]=I[q++];while(--$);q=A-j,W=te}}else if(N<$){if(q+=P+N-$,$-=N,$<H){H-=$;do te[A++]=I[q++];while(--$);if(q=0,N<H){$=N,H-=$;do te[A++]=I[q++];while(--$);q=A-j,W=te}}}else if(q+=N-$,$<H){H-=$;do te[A++]=I[q++];while(--$);q=A-j,W=te}for(;H>2;)te[A++]=W[q++],te[A++]=W[q++],te[A++]=W[q++],H-=3;H&&(te[A++]=W[q++],H>1&&(te[A++]=W[q++]))}else{q=A-j;do te[A++]=te[q++],te[A++]=te[q++],te[A++]=te[q++],H-=3;while(H>2);H&&(te[A++]=te[q++],H>1&&(te[A++]=te[q++]))}}else if(($&64)===0){F=z[(F&65535)+(V&(1<<$)-1)];continue r}else{S.msg="invalid distance code",ee.mode=BAD$1;break e}break}}else if(($&64)===0){F=D[(F&65535)+(V&(1<<$)-1)];continue t}else if($&32){ee.mode=TYPE$1;break e}else{S.msg="invalid literal/length code",ee.mode=BAD$1;break e}break}}while(E<T&&A<x);H=B>>3,E-=H,B-=H<<3,V&=(1<<B)-1,S.next_in=E,S.next_out=A,S.avail_in=E<T?5+(T-E):5-(E-T),S.avail_out=A<x?257+(x-A):257-(A-x),ee.hold=V,ee.bits=B};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(_,S,w,E,T,A,k,x)=>{const R=x.bits;let P=0,M=0,N=0,I=0,V=0,B=0,D=0,z=0,O=0,L=0,F,$,H,j,q,W=null,X;const te=new Uint16Array(MAXBITS+1),ee=new Uint16Array(MAXBITS+1);let G=null,de,le,ae;for(P=0;P<=MAXBITS;P++)te[P]=0;for(M=0;M<E;M++)te[S[w+M]]++;for(V=R,I=MAXBITS;I>=1&&te[I]===0;I--);if(V>I&&(V=I),I===0)return T[A++]=1<<24|64<<16|0,T[A++]=1<<24|64<<16|0,x.bits=1,0;for(N=1;N<I&&te[N]===0;N++);for(V<N&&(V=N),z=1,P=1;P<=MAXBITS;P++)if(z<<=1,z-=te[P],z<0)return-1;if(z>0&&(_===CODES$1||I!==1))return-1;for(ee[1]=0,P=1;P<MAXBITS;P++)ee[P+1]=ee[P]+te[P];for(M=0;M<E;M++)S[w+M]!==0&&(k[ee[S[w+M]]++]=M);if(_===CODES$1?(W=G=k,X=20):_===LENS$1?(W=lbase,G=lext,X=257):(W=dbase,G=dext,X=0),L=0,M=0,P=N,q=A,B=V,D=0,H=-1,O=1<<V,j=O-1,_===LENS$1&&O>ENOUGH_LENS$1||_===DISTS$1&&O>ENOUGH_DISTS$1)return 1;for(;;){de=P-D,k[M]+1<X?(le=0,ae=k[M]):k[M]>=X?(le=G[k[M]-X],ae=W[k[M]-X]):(le=96,ae=0),F=1<<P-D,$=1<<B,N=$;do $-=F,T[q+(L>>D)+$]=de<<24|le<<16|ae|0;while($!==0);for(F=1<<P-1;L&F;)F>>=1;if(F!==0?(L&=F-1,L+=F):L=0,M++,--te[P]===0){if(P===I)break;P=S[w+k[M]]}if(P>V&&(L&j)!==H){for(D===0&&(D=V),q+=N,B=P-D,z=1<<B;B+D<I&&(z-=te[B+D],!(z<=0));)B++,z<<=1;if(O+=1<<B,_===LENS$1&&O>ENOUGH_LENS$1||_===DISTS$1&&O>ENOUGH_DISTS$1)return 1;H=L&j,T[H]=V<<24|B<<16|q-A|0}}return L!==0&&(T[q+L]=P-D<<24|64<<16|0),x.bits=V,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=_=>(_>>>24&255)+(_>>>8&65280)+((_&65280)<<8)+((_&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=_=>{if(!_)return 1;const S=_.state;return!S||S.strm!==_||S.mode<HEAD||S.mode>SYNC?1:0},inflateResetKeep=_=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const S=_.state;return _.total_in=_.total_out=S.total=0,_.msg="",S.wrap&&(_.adler=S.wrap&1),S.mode=HEAD,S.last=0,S.havedict=0,S.flags=-1,S.dmax=32768,S.head=null,S.hold=0,S.bits=0,S.lencode=S.lendyn=new Int32Array(ENOUGH_LENS),S.distcode=S.distdyn=new Int32Array(ENOUGH_DISTS),S.sane=1,S.back=-1,Z_OK$1},inflateReset=_=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const S=_.state;return S.wsize=0,S.whave=0,S.wnext=0,inflateResetKeep(_)},inflateReset2=(_,S)=>{let w;if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const E=_.state;return S<0?(w=0,S=-S):(w=(S>>4)+5,S<48&&(S&=15)),S&&(S<8||S>15)?Z_STREAM_ERROR$1:(E.window!==null&&E.wbits!==S&&(E.window=null),E.wrap=w,E.wbits=S,inflateReset(_))},inflateInit2=(_,S)=>{if(!_)return Z_STREAM_ERROR$1;const w=new InflateState;_.state=w,w.strm=_,w.window=null,w.mode=HEAD;const E=inflateReset2(_,S);return E!==Z_OK$1&&(_.state=null),E},inflateInit=_=>inflateInit2(_,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=_=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let S=0;for(;S<144;)_.lens[S++]=8;for(;S<256;)_.lens[S++]=9;for(;S<280;)_.lens[S++]=7;for(;S<288;)_.lens[S++]=8;for(inftrees(LENS,_.lens,0,288,lenfix,0,_.work,{bits:9}),S=0;S<32;)_.lens[S++]=5;inftrees(DISTS,_.lens,0,32,distfix,0,_.work,{bits:5}),virgin=!1}_.lencode=lenfix,_.lenbits=9,_.distcode=distfix,_.distbits=5},updatewindow=(_,S,w,E)=>{let T;const A=_.state;return A.window===null&&(A.wsize=1<<A.wbits,A.wnext=0,A.whave=0,A.window=new Uint8Array(A.wsize)),E>=A.wsize?(A.window.set(S.subarray(w-A.wsize,w),0),A.wnext=0,A.whave=A.wsize):(T=A.wsize-A.wnext,T>E&&(T=E),A.window.set(S.subarray(w-E,w-E+T),A.wnext),E-=T,E?(A.window.set(S.subarray(w-E,w),0),A.wnext=E,A.whave=A.wsize):(A.wnext+=T,A.wnext===A.wsize&&(A.wnext=0),A.whave<A.wsize&&(A.whave+=T))),0},inflate$2=(_,S)=>{let w,E,T,A,k,x,R,P,M,N,I,V,B,D,z=0,O,L,F,$,H,j,q,W;const X=new Uint8Array(4);let te,ee;const G=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(_)||!_.output||!_.input&&_.avail_in!==0)return Z_STREAM_ERROR$1;w=_.state,w.mode===TYPE&&(w.mode=TYPEDO),k=_.next_out,T=_.output,R=_.avail_out,A=_.next_in,E=_.input,x=_.avail_in,P=w.hold,M=w.bits,N=x,I=R,W=Z_OK$1;e:for(;;)switch(w.mode){case HEAD:if(w.wrap===0){w.mode=TYPEDO;break}for(;M<16;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}if(w.wrap&2&&P===35615){w.wbits===0&&(w.wbits=15),w.check=0,X[0]=P&255,X[1]=P>>>8&255,w.check=crc32_1(w.check,X,2,0),P=0,M=0,w.mode=FLAGS;break}if(w.head&&(w.head.done=!1),!(w.wrap&1)||(((P&255)<<8)+(P>>8))%31){_.msg="incorrect header check",w.mode=BAD;break}if((P&15)!==Z_DEFLATED){_.msg="unknown compression method",w.mode=BAD;break}if(P>>>=4,M-=4,q=(P&15)+8,w.wbits===0&&(w.wbits=q),q>15||q>w.wbits){_.msg="invalid window size",w.mode=BAD;break}w.dmax=1<<w.wbits,w.flags=0,_.adler=w.check=1,w.mode=P&512?DICTID:TYPE,P=0,M=0;break;case FLAGS:for(;M<16;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}if(w.flags=P,(w.flags&255)!==Z_DEFLATED){_.msg="unknown compression method",w.mode=BAD;break}if(w.flags&57344){_.msg="unknown header flags set",w.mode=BAD;break}w.head&&(w.head.text=P>>8&1),w.flags&512&&w.wrap&4&&(X[0]=P&255,X[1]=P>>>8&255,w.check=crc32_1(w.check,X,2,0)),P=0,M=0,w.mode=TIME;case TIME:for(;M<32;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}w.head&&(w.head.time=P),w.flags&512&&w.wrap&4&&(X[0]=P&255,X[1]=P>>>8&255,X[2]=P>>>16&255,X[3]=P>>>24&255,w.check=crc32_1(w.check,X,4,0)),P=0,M=0,w.mode=OS;case OS:for(;M<16;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}w.head&&(w.head.xflags=P&255,w.head.os=P>>8),w.flags&512&&w.wrap&4&&(X[0]=P&255,X[1]=P>>>8&255,w.check=crc32_1(w.check,X,2,0)),P=0,M=0,w.mode=EXLEN;case EXLEN:if(w.flags&1024){for(;M<16;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}w.length=P,w.head&&(w.head.extra_len=P),w.flags&512&&w.wrap&4&&(X[0]=P&255,X[1]=P>>>8&255,w.check=crc32_1(w.check,X,2,0)),P=0,M=0}else w.head&&(w.head.extra=null);w.mode=EXTRA;case EXTRA:if(w.flags&1024&&(V=w.length,V>x&&(V=x),V&&(w.head&&(q=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Uint8Array(w.head.extra_len)),w.head.extra.set(E.subarray(A,A+V),q)),w.flags&512&&w.wrap&4&&(w.check=crc32_1(w.check,E,V,A)),x-=V,A+=V,w.length-=V),w.length))break e;w.length=0,w.mode=NAME;case NAME:if(w.flags&2048){if(x===0)break e;V=0;do q=E[A+V++],w.head&&q&&w.length<65536&&(w.head.name+=String.fromCharCode(q));while(q&&V<x);if(w.flags&512&&w.wrap&4&&(w.check=crc32_1(w.check,E,V,A)),x-=V,A+=V,q)break e}else w.head&&(w.head.name=null);w.length=0,w.mode=COMMENT;case COMMENT:if(w.flags&4096){if(x===0)break e;V=0;do q=E[A+V++],w.head&&q&&w.length<65536&&(w.head.comment+=String.fromCharCode(q));while(q&&V<x);if(w.flags&512&&w.wrap&4&&(w.check=crc32_1(w.check,E,V,A)),x-=V,A+=V,q)break e}else w.head&&(w.head.comment=null);w.mode=HCRC;case HCRC:if(w.flags&512){for(;M<16;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}if(w.wrap&4&&P!==(w.check&65535)){_.msg="header crc mismatch",w.mode=BAD;break}P=0,M=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),_.adler=w.check=0,w.mode=TYPE;break;case DICTID:for(;M<32;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}_.adler=w.check=zswap32(P),P=0,M=0,w.mode=DICT;case DICT:if(w.havedict===0)return _.next_out=k,_.avail_out=R,_.next_in=A,_.avail_in=x,w.hold=P,w.bits=M,Z_NEED_DICT$1;_.adler=w.check=1,w.mode=TYPE;case TYPE:if(S===Z_BLOCK||S===Z_TREES)break e;case TYPEDO:if(w.last){P>>>=M&7,M-=M&7,w.mode=CHECK;break}for(;M<3;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}switch(w.last=P&1,P>>>=1,M-=1,P&3){case 0:w.mode=STORED;break;case 1:if(fixedtables(w),w.mode=LEN_,S===Z_TREES){P>>>=2,M-=2;break e}break;case 2:w.mode=TABLE;break;case 3:_.msg="invalid block type",w.mode=BAD}P>>>=2,M-=2;break;case STORED:for(P>>>=M&7,M-=M&7;M<32;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}if((P&65535)!==(P>>>16^65535)){_.msg="invalid stored block lengths",w.mode=BAD;break}if(w.length=P&65535,P=0,M=0,w.mode=COPY_,S===Z_TREES)break e;case COPY_:w.mode=COPY;case COPY:if(V=w.length,V){if(V>x&&(V=x),V>R&&(V=R),V===0)break e;T.set(E.subarray(A,A+V),k),x-=V,A+=V,R-=V,k+=V,w.length-=V;break}w.mode=TYPE;break;case TABLE:for(;M<14;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}if(w.nlen=(P&31)+257,P>>>=5,M-=5,w.ndist=(P&31)+1,P>>>=5,M-=5,w.ncode=(P&15)+4,P>>>=4,M-=4,w.nlen>286||w.ndist>30){_.msg="too many length or distance symbols",w.mode=BAD;break}w.have=0,w.mode=LENLENS;case LENLENS:for(;w.have<w.ncode;){for(;M<3;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}w.lens[G[w.have++]]=P&7,P>>>=3,M-=3}for(;w.have<19;)w.lens[G[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,te={bits:w.lenbits},W=inftrees(CODES,w.lens,0,19,w.lencode,0,w.work,te),w.lenbits=te.bits,W){_.msg="invalid code lengths set",w.mode=BAD;break}w.have=0,w.mode=CODELENS;case CODELENS:for(;w.have<w.nlen+w.ndist;){for(;z=w.lencode[P&(1<<w.lenbits)-1],O=z>>>24,L=z>>>16&255,F=z&65535,!(O<=M);){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}if(F<16)P>>>=O,M-=O,w.lens[w.have++]=F;else{if(F===16){for(ee=O+2;M<ee;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}if(P>>>=O,M-=O,w.have===0){_.msg="invalid bit length repeat",w.mode=BAD;break}q=w.lens[w.have-1],V=3+(P&3),P>>>=2,M-=2}else if(F===17){for(ee=O+3;M<ee;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}P>>>=O,M-=O,q=0,V=3+(P&7),P>>>=3,M-=3}else{for(ee=O+7;M<ee;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}P>>>=O,M-=O,q=0,V=11+(P&127),P>>>=7,M-=7}if(w.have+V>w.nlen+w.ndist){_.msg="invalid bit length repeat",w.mode=BAD;break}for(;V--;)w.lens[w.have++]=q}}if(w.mode===BAD)break;if(w.lens[256]===0){_.msg="invalid code -- missing end-of-block",w.mode=BAD;break}if(w.lenbits=9,te={bits:w.lenbits},W=inftrees(LENS,w.lens,0,w.nlen,w.lencode,0,w.work,te),w.lenbits=te.bits,W){_.msg="invalid literal/lengths set",w.mode=BAD;break}if(w.distbits=6,w.distcode=w.distdyn,te={bits:w.distbits},W=inftrees(DISTS,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,te),w.distbits=te.bits,W){_.msg="invalid distances set",w.mode=BAD;break}if(w.mode=LEN_,S===Z_TREES)break e;case LEN_:w.mode=LEN;case LEN:if(x>=6&&R>=258){_.next_out=k,_.avail_out=R,_.next_in=A,_.avail_in=x,w.hold=P,w.bits=M,inffast(_,I),k=_.next_out,T=_.output,R=_.avail_out,A=_.next_in,E=_.input,x=_.avail_in,P=w.hold,M=w.bits,w.mode===TYPE&&(w.back=-1);break}for(w.back=0;z=w.lencode[P&(1<<w.lenbits)-1],O=z>>>24,L=z>>>16&255,F=z&65535,!(O<=M);){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}if(L&&(L&240)===0){for($=O,H=L,j=F;z=w.lencode[j+((P&(1<<$+H)-1)>>$)],O=z>>>24,L=z>>>16&255,F=z&65535,!($+O<=M);){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}P>>>=$,M-=$,w.back+=$}if(P>>>=O,M-=O,w.back+=O,w.length=F,L===0){w.mode=LIT;break}if(L&32){w.back=-1,w.mode=TYPE;break}if(L&64){_.msg="invalid literal/length code",w.mode=BAD;break}w.extra=L&15,w.mode=LENEXT;case LENEXT:if(w.extra){for(ee=w.extra;M<ee;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}w.length+=P&(1<<w.extra)-1,P>>>=w.extra,M-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=DIST;case DIST:for(;z=w.distcode[P&(1<<w.distbits)-1],O=z>>>24,L=z>>>16&255,F=z&65535,!(O<=M);){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}if((L&240)===0){for($=O,H=L,j=F;z=w.distcode[j+((P&(1<<$+H)-1)>>$)],O=z>>>24,L=z>>>16&255,F=z&65535,!($+O<=M);){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}P>>>=$,M-=$,w.back+=$}if(P>>>=O,M-=O,w.back+=O,L&64){_.msg="invalid distance code",w.mode=BAD;break}w.offset=F,w.extra=L&15,w.mode=DISTEXT;case DISTEXT:if(w.extra){for(ee=w.extra;M<ee;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}w.offset+=P&(1<<w.extra)-1,P>>>=w.extra,M-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){_.msg="invalid distance too far back",w.mode=BAD;break}w.mode=MATCH;case MATCH:if(R===0)break e;if(V=I-R,w.offset>V){if(V=w.offset-V,V>w.whave&&w.sane){_.msg="invalid distance too far back",w.mode=BAD;break}V>w.wnext?(V-=w.wnext,B=w.wsize-V):B=w.wnext-V,V>w.length&&(V=w.length),D=w.window}else D=T,B=k-w.offset,V=w.length;V>R&&(V=R),R-=V,w.length-=V;do T[k++]=D[B++];while(--V);w.length===0&&(w.mode=LEN);break;case LIT:if(R===0)break e;T[k++]=w.length,R--,w.mode=LEN;break;case CHECK:if(w.wrap){for(;M<32;){if(x===0)break e;x--,P|=E[A++]<<M,M+=8}if(I-=R,_.total_out+=I,w.total+=I,w.wrap&4&&I&&(_.adler=w.check=w.flags?crc32_1(w.check,T,I,k-I):adler32_1(w.check,T,I,k-I)),I=R,w.wrap&4&&(w.flags?P:zswap32(P))!==w.check){_.msg="incorrect data check",w.mode=BAD;break}P=0,M=0}w.mode=LENGTH;case LENGTH:if(w.wrap&&w.flags){for(;M<32;){if(x===0)break e;x--,P+=E[A++]<<M,M+=8}if(w.wrap&4&&P!==(w.total&4294967295)){_.msg="incorrect length check",w.mode=BAD;break}P=0,M=0}w.mode=DONE;case DONE:W=Z_STREAM_END$1;break e;case BAD:W=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return _.next_out=k,_.avail_out=R,_.next_in=A,_.avail_in=x,w.hold=P,w.bits=M,(w.wsize||I!==_.avail_out&&w.mode<BAD&&(w.mode<CHECK||S!==Z_FINISH$1))&&updatewindow(_,_.output,_.next_out,I-_.avail_out),N-=_.avail_in,I-=_.avail_out,_.total_in+=N,_.total_out+=I,w.total+=I,w.wrap&4&&I&&(_.adler=w.check=w.flags?crc32_1(w.check,T,I,_.next_out-I):adler32_1(w.check,T,I,_.next_out-I)),_.data_type=w.bits+(w.last?64:0)+(w.mode===TYPE?128:0)+(w.mode===LEN_||w.mode===COPY_?256:0),(N===0&&I===0||S===Z_FINISH$1)&&W===Z_OK$1&&(W=Z_BUF_ERROR),W},inflateEnd=_=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;let S=_.state;return S.window&&(S.window=null),_.state=null,Z_OK$1},inflateGetHeader=(_,S)=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const w=_.state;return(w.wrap&2)===0?Z_STREAM_ERROR$1:(w.head=S,S.done=!1,Z_OK$1)},inflateSetDictionary=(_,S)=>{const w=S.length;let E,T,A;return inflateStateCheck(_)||(E=_.state,E.wrap!==0&&E.mode!==DICT)?Z_STREAM_ERROR$1:E.mode===DICT&&(T=1,T=adler32_1(T,S,w,0),T!==E.check)?Z_DATA_ERROR$1:(A=updatewindow(_,S,w,w),A?(E.mode=MEM,Z_MEM_ERROR$1):(E.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(_){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},_||{});const S=this.options;S.raw&&S.windowBits>=0&&S.windowBits<16&&(S.windowBits=-S.windowBits,S.windowBits===0&&(S.windowBits=-15)),S.windowBits>=0&&S.windowBits<16&&!(_&&_.windowBits)&&(S.windowBits+=32),S.windowBits>15&&S.windowBits<48&&(S.windowBits&15)===0&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let w=inflate_1$2.inflateInit2(this.strm,S.windowBits);if(w!==Z_OK)throw new Error(messages[w]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),S.dictionary&&(typeof S.dictionary=="string"?S.dictionary=strings.string2buf(S.dictionary):toString.call(S.dictionary)==="[object ArrayBuffer]"&&(S.dictionary=new Uint8Array(S.dictionary)),S.raw&&(w=inflate_1$2.inflateSetDictionary(this.strm,S.dictionary),w!==Z_OK)))throw new Error(messages[w])}Inflate$1.prototype.push=function(_,S){const w=this.strm,E=this.options.chunkSize,T=this.options.dictionary;let A,k,x;if(this.ended)return!1;for(S===~~S?k=S:k=S===!0?Z_FINISH:Z_NO_FLUSH,toString.call(_)==="[object ArrayBuffer]"?w.input=new Uint8Array(_):w.input=_,w.next_in=0,w.avail_in=w.input.length;;){for(w.avail_out===0&&(w.output=new Uint8Array(E),w.next_out=0,w.avail_out=E),A=inflate_1$2.inflate(w,k),A===Z_NEED_DICT&&T&&(A=inflate_1$2.inflateSetDictionary(w,T),A===Z_OK?A=inflate_1$2.inflate(w,k):A===Z_DATA_ERROR&&(A=Z_NEED_DICT));w.avail_in>0&&A===Z_STREAM_END&&w.state.wrap>0&&_[w.next_in]!==0;)inflate_1$2.inflateReset(w),A=inflate_1$2.inflate(w,k);switch(A){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(A),this.ended=!0,!1}if(x=w.avail_out,w.next_out&&(w.avail_out===0||A===Z_STREAM_END))if(this.options.to==="string"){let R=strings.utf8border(w.output,w.next_out),P=w.next_out-R,M=strings.buf2string(w.output,R);w.next_out=P,w.avail_out=E-P,P&&w.output.set(w.output.subarray(R,R+P),0),this.onData(M)}else this.onData(w.output.length===w.next_out?w.output:w.output.subarray(0,w.next_out));if(!(A===Z_OK&&x===0)){if(A===Z_STREAM_END)return A=inflate_1$2.inflateEnd(this.strm),this.onEnd(A),this.ended=!0,!0;if(w.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(_){this.chunks.push(_)};Inflate$1.prototype.onEnd=function(_){_===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function inflate$1(_,S){const w=new Inflate$1(S);if(w.push(_),w.err)throw w.msg||messages[w.err];return w.result}function inflateRaw$1(_,S){return S=S||{},S.raw=!0,inflate$1(_,S)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var Deflate_1=Deflate,deflate_1=deflate,deflateRaw_1=deflateRaw,gzip_1=gzip,Inflate_1=Inflate,inflate_1=inflate,inflateRaw_1=inflateRaw,ungzip_1=ungzip,constants_1=constants$2,pako={Deflate:Deflate_1,deflate:deflate_1,deflateRaw:deflateRaw_1,gzip:gzip_1,Inflate:Inflate_1,inflate:inflate_1,inflateRaw:inflateRaw_1,ungzip:ungzip_1,constants:constants_1};const _sfc_main$i={__name:"AnimatedSticker",props:{src:{type:String,required:!0},loop:{type:Boolean,default:!1}},setup(_,{expose:S}){const w=_,E=ref$1(null);let T=null;const A=async()=>{if(T&&(T.destroy(),T=null),E.value&&w.src)try{const k=await fetch(w.src);if(!k.ok)throw new Error(`Failed to fetch TGS file: ${k.status} ${k.statusText}`);const x=await k.arrayBuffer(),R=pako.inflate(new Uint8Array(x),{to:"string"}),P=JSON.parse(R);T=lottie.loadAnimation({container:E.value,renderer:"svg",loop:w.loop,autoplay:w.loop,animationData:P})}catch(k){console.error(`Lottie Error: Could not load or process animation from ${w.src}`,k),E.value&&(E.value.innerHTML=`<span title="${k.message}"></span>`)}};return S({playAnimation(){T&&T.goToAndPlay(0,!0)},stopAnimation(){T&&T.stop()}}),onMounted(()=>{const k=new IntersectionObserver(x=>{x[0].isIntersecting&&(A(),k.disconnect())},{threshold:.1});E.value&&k.observe(E.value),onUnmounted(()=>{k.disconnect()})}),onUnmounted(()=>{T&&T.destroy()}),watch(()=>w.src,(k,x)=>{k&&k!==x&&A()}),(k,x)=>(openBlock(),createElementBlock("div",{class:"sticker-animation-container",ref_key:"lottieContainer",ref:E},null,512))}},AnimatedSticker=_export_sfc(_sfc_main$i,[["__scopeId","data-v-4e8fb376"]]),STICKER_PACKS={general_animations:{name:" ",stickers:[{id:"blocked_peers_empty",file:"animations/blocked_peers_empty.tgs"},{id:"cake",file:"animations/cake.tgs"},{id:"camera_outline",file:"animations/camera_outline.tgs"},{id:"change_number",file:"animations/change_number.tgs"},{id:"chat_link",file:"animations/chat_link.tgs"},{id:"cloud_filters",file:"animations/cloud_filters.tgs"},{id:"collectible_phone",file:"animations/collectible_phone.tgs"},{id:"collectible_username",file:"animations/collectible_username.tgs"},{id:"diamond",file:"animations/diamond.tgs"},{id:"discussion",file:"animations/discussion.tgs"},{id:"filters",file:"animations/filters.tgs"},{id:"greeting",file:"animations/greeting.tgs"},{id:"hello_status",file:"animations/hello_status.tgs"},{id:"hours",file:"animations/hours.tgs"},{id:"local_passcode_enter",file:"animations/local_passcode_enter.tgs"},{id:"location",file:"animations/location.tgs"},{id:"media_forbidden",file:"animations/media_forbidden.tgs"},{id:"my_gifts_empty",file:"animations/my_gifts_empty.tgs"},{id:"noresults",file:"animations/noresults.tgs"},{id:"no_chats",file:"animations/no_chats.tgs"},{id:"palette",file:"animations/palette.tgs"},{id:"phone",file:"animations/phone.tgs"},{id:"photo_suggest_icon",file:"animations/photo_suggest_icon.tgs"},{id:"robot",file:"animations/robot.tgs"},{id:"rtmp",file:"animations/rtmp.tgs"},{id:"search",file:"animations/search.tgs"},{id:"show_or_premium_lastseen",file:"animations/show_or_premium_lastseen.tgs"},{id:"show_or_premium_readtime",file:"animations/show_or_premium_readtime.tgs"},{id:"sleep",file:"animations/sleep.tgs"},{id:"starref_link",file:"animations/starref_link.tgs"},{id:"stats",file:"animations/stats.tgs"},{id:"stats_boosts",file:"animations/stats_boosts.tgs"},{id:"stats_earn",file:"animations/stats_earn.tgs"},{id:"transcribe_loading",file:"animations/transcribe_loading.tgs"},{id:"ttl",file:"animations/ttl.tgs"},{id:"voice_ttl_idle",file:"animations/voice_ttl_idle.tgs"},{id:"voice_ttl_start",file:"animations/voice_ttl_start.tgs"},{id:"writing",file:"animations/writing.tgs"}]},cloud_password_pack:{name:" ",stickers:[{id:"email",file:"animations/cloud_password/email.tgs"},{id:"hint",file:"animations/cloud_password/hint.tgs"},{id:"intro",file:"animations/cloud_password/intro.tgs"},{id:"password_input",file:"animations/cloud_password/password_input.tgs"},{id:"validate",file:"animations/cloud_password/validate.tgs"}]},dice_pack:{name:" ",stickers:[{id:"bball_idle",file:"animations/dice/bball_idle.tgs"},{id:"dart_idle",file:"animations/dice/dart_idle.tgs"},{id:"dice_idle",file:"animations/dice/dice_idle.tgs"},{id:"fball_idle",file:"animations/dice/fball_idle.tgs"},{id:"slot_0_idle",file:"animations/dice/slot_0_idle.tgs"},{id:"slot_1_idle",file:"animations/dice/slot_1_idle.tgs"},{id:"slot_2_idle",file:"animations/dice/slot_2_idle.tgs"},{id:"slot_back",file:"animations/dice/slot_back.tgs"},{id:"slot_pull",file:"animations/dice/slot_pull.tgs"},{id:"winners",file:"animations/dice/winners.tgs"}]},edit_peers_pack:{name:" ",stickers:[{id:"direct_messages",file:"animations/edit_peers/direct_messages.tgs"},{id:"topics",file:"animations/edit_peers/topics.tgs"},{id:"topics_list",file:"animations/edit_peers/topics_list.tgs"},{id:"topics_tabs",file:"animations/edit_peers/topics_tabs.tgs"}]},profile_pack:{name:" ",stickers:[{id:"profile_muting",file:"animations/profile/profile_muting.tgs"},{id:"profile_unmuting",file:"animations/profile/profile_unmuting.tgs"}]},star_reaction_pack:{name:" ",stickers:[{id:"appear",file:"animations/star_reaction/appear.tgs"},{id:"center",file:"animations/star_reaction/center.tgs"},{id:"effect1",file:"animations/star_reaction/effect1.tgs"},{id:"effect2",file:"animations/star_reaction/effect2.tgs"},{id:"effect3",file:"animations/star_reaction/effect3.tgs"},{id:"select",file:"animations/star_reaction/select.tgs"},{id:"toast",file:"animations/star_reaction/toast.tgs"}]},swipe_action_pack:{name:" ",stickers:[{id:"archive",file:"animations/swipe_action/archive.tgs"},{id:"delete",file:"animations/swipe_action/delete.tgs"},{id:"disabled",file:"animations/swipe_action/disabled.tgs"},{id:"mute",file:"animations/swipe_action/mute.tgs"},{id:"pin",file:"animations/swipe_action/pin.tgs"},{id:"read",file:"animations/swipe_action/read.tgs"},{id:"unarchive",file:"animations/swipe_action/unarchive.tgs"},{id:"unmute",file:"animations/swipe_action/unmute.tgs"},{id:"unpin",file:"animations/swipe_action/unpin.tgs"},{id:"unread",file:"animations/swipe_action/unread.tgs"}]},toast_pack:{name:" ",stickers:[{id:"chats_filter_in",file:"animations/toast/chats_filter_in.tgs"},{id:"saved_messages",file:"animations/toast/saved_messages.tgs"},{id:"tagged",file:"animations/toast/tagged.tgs"}]}};function getStickerPathById(_){if(!_||typeof _!="string")return null;const[S,w]=_.split("/");if(!S||!w)return null;const E=STICKER_PACKS[S];if(!E)return null;const T=E.stickers.find(A=>A.id===w);return T?T.file:null}const _hoisted_1$g={key:0,class:"system-message"},_hoisted_2$c={key:0,class:"tool-call-indicator"},_hoisted_3$b={key:1,class:"call-log-content"},_hoisted_4$7={class:"call-icon"},_hoisted_5$6={key:2},_hoisted_6$5={key:0,class:"sender-name"},_hoisted_7$4={class:"content-wrapper"},_hoisted_8$3=["innerHTML"],_hoisted_9$3={key:1,class:"audio-content"},_hoisted_10$2={class:"duration-label"},_hoisted_11$2={class:"location-info"},_hoisted_12$2={class:"location-coords"},_hoisted_13$2={key:1,class:"media-placeholder"},_hoisted_14$2={key:1},_hoisted_15$1={key:0,class:"media-placeholder receiving"},_hoisted_16$1={class:"transfer-info"},_hoisted_17=["title"],_hoisted_18=["value","max"],_hoisted_19={class:"transfer-stats"},_hoisted_20={key:0},_hoisted_21={key:1,class:"media-preview-container"},_hoisted_22={key:0,class:"media-placeholder"},_hoisted_23={key:1,class:"video-preview"},_hoisted_24=["src","alt"],_hoisted_25={key:0,class:"play-overlay"},_hoisted_26={key:2,class:"file-info-wrapper"},_hoisted_27={class:"file-icon-container"},_hoisted_28={class:"file-info-text"},_hoisted_29=["title"],_hoisted_30={class:"file-meta"},_hoisted_31={key:4,class:"tts-control"},_hoisted_32=["title"],_hoisted_33={key:1,class:"message-meta"},_hoisted_34={class:"timestamp"},_hoisted_35={key:0,class:"status-icon"},_hoisted_36={key:1,class:"delivered"},_sfc_main$h={__name:"MessageBubble",props:{message:{type:Object,required:!0},isConsecutive:{type:Boolean,default:!1}},setup(_){const S=_,w=useUserStore(),E=useUiStore(),T=useChatStore(),A=useTtsStore(),k=useTransferStore(),x=computed(()=>S.message.sender===w.userId),R=computed(()=>!!S.message.groupId),P=computed(()=>w.contacts[S.message.sender]),M=computed(()=>{var oe;return!x.value&&((oe=P.value)==null?void 0:oe.isSpecial)}),N=computed(()=>({sent:x.value,received:!x.value,"system-wrapper":S.message.type==="system"||S.message.isRetracted})),I=computed(()=>P.value?P.value.name:` ${String(S.message.sender).substring(0,4)}`),V=computed(()=>S.message.type==="text"&&S.message.content?formatMessageText(S.message.content):""),B=computed(()=>new Date(S.message.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),D=ref$1(null),z=ref$1(null),O=ref$1(!1),L=ref$1(null);let F=null;const $=computed(()=>["file","image","video","sticker","audio"].includes(S.message.type)),H=computed(()=>{const oe=S.message.fileType;return oe?oe.startsWith("image/")||oe.startsWith("video/"):!1}),j=computed(()=>S.message.type==="sticker"&&S.message.stickerId?getStickerPathById(S.message.stickerId):null),q=computed(()=>{var oe,ce;return(oe=S.message.fileType)!=null&&oe.startsWith("video/")?z.value:(ce=S.message.fileType)!=null&&ce.startsWith("image/")?D.value:null}),W=oe=>{var ce;return((ce=oe==null?void 0:oe.split(".").pop())==null?void 0:ce.substring(0,4).toUpperCase())||"FILE"},X=oe=>typeof oe!="number"||isNaN(oe)?"":oe<1024?`${oe} B`:oe<1024*1024?`${(oe/1024).toFixed(1)} KB`:`${(oe/1024/1024).toFixed(2)} MB`,te=oe=>{if(typeof oe!="number")return"0:00";const ce=Math.floor(oe/60),ye=Math.floor(oe%60);return`${ce}:${ye<10?"0":""}${ye}`},ee=ref$1(null),G=computed(()=>A.messageTtsState[S.message.id]||"idle"),de=computed(()=>{var oe,ce,ye,xe;return M.value&&((ye=(ce=(oe=P.value)==null?void 0:oe.aiConfig)==null?void 0:ce.tts)==null?void 0:ye.enabled)&&S.message.type==="text"&&((xe=S.message.content)==null?void 0:xe.trim().length)>0&&!S.message.isStreaming}),le=computed(()=>k.transfers[S.message.fileHash]),ae=oe=>oe===1/0||!oe?"":oe<60?`${Math.round(oe)}s`:`${Math.floor(oe/60)}m ${Math.round(oe%60)}s`,Q=computed(()=>{if(S.message.subType!=="call-log"||!S.message.callData)return"";const{type:oe,callerId:ce}=S.message.callData,ye=ce===w.userId;return oe==="start"||oe==="end"?"":oe==="missed"?ye?"":"":oe==="declined"?"":oe==="cancelled"?"":""});function ie(){E.showLocationViewer({latitude:S.message.latitude,longitude:S.message.longitude})}watch(G,(oe,ce)=>{const ye=A.audioUrlCache.get(S.message.id);oe==="playing"&&ye?(ee.value||(ee.value=new Audio(ye),ee.value.onended=()=>A.setPlaybackFinished(S.message.id),ee.value.onpause=()=>A.setPlaybackFinished(S.message.id)),ee.value.play().catch(xe=>{log(`Error playing TTS audio: ${xe.message}`,"ERROR"),A.messageTtsState[S.message.id]="error"})):oe==="ready"&&ce==="playing"&&ee.value&&ee.value.pause()});function Z(){A.togglePlay(S.message.id)}function J(){A.requestTtsForMessage({...S.message,senderContact:P.value})}async function ue(){var ce;if(!$.value||S.message.type==="sticker"||!S.message.fileHash)return;const oe=await mediaCacheService.getUrl(S.message.fileHash);if(oe&&(D.value=oe),(ce=S.message.fileType)!=null&&ce.startsWith("video/")){const ye=await mediaCacheService.getUrl(S.message.fileHash,!0);ye&&(z.value=ye)}oe||eventBus.on("file:ready",pe)}function pe({fileHash:oe}){oe===S.message.fileHash&&(z.value=null,ue(),eventBus.off("file:ready",pe))}function Re(){if(S.message.type==="sticker")return;const oe=S.message.fileType,ce=oe&&(oe.startsWith("image/")||oe.startsWith("video/")||oe==="application/pdf"||oe.startsWith("text/"));if(D.value&&ce)E.showMediaViewer({type:S.message.type,fileType:oe,src:D.value,alt:S.message.fileName});else if(D.value){const ye=document.createElement("a");ye.href=D.value,ye.download=S.message.fileName||"download",document.body.appendChild(ye),ye.click(),document.body.removeChild(ye)}}function me(){F&&F.playPause()}function ge(oe){if(S.message.type==="system"||S.message.isRetracted)return;const ce=[];if(S.message.type==="text"&&S.message.content&&ce.push({label:"",action:()=>{const ye=S.message.content.replace(//g,"").trim();navigator.clipboard.writeText(ye).then(()=>{eventBus.emit("showNotification",{message:"",type:"success"})}).catch(xe=>{log(`: ${xe}`,"ERROR"),eventBus.emit("showNotification",{message:"",type:"error"})})}}),$.value&&S.message.type!=="sticker"&&D.value){const ye=S.message.fileType;ye&&(ye.startsWith("image/")||ye.startsWith("video/")||ye==="application/pdf"||ye.startsWith("text/"))&&ce.unshift({label:"",action:Re}),ce.unshift({label:"",action:()=>{const Ae=document.createElement("a");Ae.href=D.value,Ae.download=S.message.fileName||"download",document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae)}})}ce.push({label:"",action:()=>E.showConfirmationModal({message:"",onConfirm:()=>T.deleteMessage(S.message.id)}),class:"danger"}),T.isMessageRetractable(S.message.id)&&ce.push({label:"",action:()=>T.retractMessage(S.message.id)}),ce.length>0&&E.showContextMenu({event:oe,items:ce,target:{type:"message",id:S.message.id}})}async function we(){S.message.status!=="failed"||!x.value||await T.resendFailedMessages(T.currentChatId)}return watch(D,async(oe,ce)=>{if(F&&(F.destroy(),F=null),oe&&S.message.type==="audio"&&L.value)try{F=C.create({container:L.value,url:oe,height:38,waveColor:"rgba(128, 128, 128, 0.5)",progressColor:"var(--color-brand-primary)",cursorWidth:2,cursorColor:"var(--color-brand-primary-dark)",barWidth:3,barRadius:3,interact:!0}),F.on("play",()=>O.value=!0),F.on("pause",()=>O.value=!1),F.on("finish",()=>O.value=!1),F.on("error",ye=>log(`WaveSurfer error: ${ye}`,"ERROR"))}catch(ye){log(`Failed to create WaveSurfer instance: ${ye}`,"ERROR")}},{immediate:!0}),onMounted(()=>{de.value&&G.value==="idle"&&A.requestTtsForMessage({...S.message,senderContact:P.value})}),watch(()=>[S.message.fileHash,S.message.status],([oe,ce])=>{ce!=="receiving"&&ue()},{immediate:!0}),onUnmounted(()=>{eventBus.off("file:ready",pe),F&&(F.destroy(),F=null),ee.value&&(ee.value.pause(),ee.value=null)}),(oe,ce)=>{var xe,Ae;const ye=resolveDirective("motion-slide-bottom");return withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass(["message-wrapper",{...N.value,consecutive:_.isConsecutive}]),onContextmenu:withModifiers(ge,["prevent"]),onDblclick:ge,delay:100},[_.message.type==="system"||_.message.isRetracted?(openBlock(),createElementBlock("div",_hoisted_1$g,[_.message.toolCallInfo||_.message.isThinking?(openBlock(),createElementBlock("div",_hoisted_2$c,[ce[1]||(ce[1]=createBaseVNode("div",{class:"thinking-dots"},[createBaseVNode("span"),createBaseVNode("span"),createBaseVNode("span")],-1)),createBaseVNode("span",null,toDisplayString(_.message.toolCallInfo?`: ${_.message.toolCallInfo.name}...`:"..."),1)])):_.message.subType==="call-log"?(openBlock(),createElementBlock("div",_hoisted_3$b,[createBaseVNode("span",_hoisted_4$7,toDisplayString(Q.value),1),createBaseVNode("span",null,toDisplayString(_.message.content),1)])):(openBlock(),createElementBlock("span",_hoisted_5$6,toDisplayString(_.message.content),1))])):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["message-bubble",{"character-message":M.value,[_.message.sender]:M.value,"sticker-bubble":_.message.type==="sticker"}])},[!x.value&&R.value?(openBlock(),createElementBlock("div",_hoisted_6$5,toDisplayString(I.value),1)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_7$4,[_.message.type==="text"?(openBlock(),createElementBlock("div",{key:0,class:"message-content",innerHTML:V.value},null,8,_hoisted_8$3)):_.message.type==="audio"?(openBlock(),createElementBlock("div",_hoisted_9$3,[createBaseVNode("button",{class:"play-button",onClick:me},toDisplayString(O.value?"":""),1),createBaseVNode("div",{ref_key:"waveformRef",ref:L,class:"waveform-container"},null,512),createBaseVNode("span",_hoisted_10$2,toDisplayString(te(_.message.duration)),1)])):_.message.type==="location"?(openBlock(),createElementBlock("div",{key:2,class:"location-content",onClick:ie},[ce[3]||(ce[3]=createBaseVNode("div",{class:"location-icon"},"",-1)),createBaseVNode("div",_hoisted_11$2,[ce[2]||(ce[2]=createBaseVNode("div",{class:"location-title"},"",-1)),createBaseVNode("div",_hoisted_12$2,toDisplayString(_.message.latitude.toFixed(4))+", "+toDisplayString(_.message.longitude.toFixed(4)),1)])])):$.value?(openBlock(),createElementBlock("div",{key:3,class:"media-content",onClick:Re},[_.message.type==="sticker"?(openBlock(),createElementBlock("div",{key:0,class:"sticker-wrapper",onClick:ce[0]||(ce[0]=withModifiers(()=>{},["stop"]))},[j.value?(openBlock(),createBlock(AnimatedSticker,{key:0,src:j.value,loop:!0},null,8,["src"])):(openBlock(),createElementBlock("div",_hoisted_13$2,[...ce[4]||(ce[4]=[createBaseVNode("span",null,"",-1)])]))])):(openBlock(),createElementBlock("div",_hoisted_14$2,[_.message.status==="receiving"?(openBlock(),createElementBlock("div",_hoisted_15$1,[createBaseVNode("div",_hoisted_16$1,[createBaseVNode("span",{class:"file-name",title:_.message.fileName},toDisplayString(_.message.fileName),9,_hoisted_17),le.value?(openBlock(),createElementBlock("progress",{key:0,value:le.value.receivedBytes,max:le.value.totalBytes,class:"transfer-progress"},null,8,_hoisted_18)):createCommentVNode("",!0),createBaseVNode("span",_hoisted_19,[createTextVNode(toDisplayString(X(((xe=le.value)==null?void 0:xe.receivedBytes)||0))+" / "+toDisplayString(X(_.message.fileSize))+" ",1),le.value&&le.value.etaSeconds<1/0?(openBlock(),createElementBlock("span",_hoisted_20," - ETA: "+toDisplayString(ae(le.value.etaSeconds)),1)):createCommentVNode("",!0)])])])):H.value?(openBlock(),createElementBlock("div",_hoisted_21,[q.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_22,[createVNode(SkeletonLoader,{type:"grid-item",shimmer:!0})])),q.value?(openBlock(),createElementBlock("div",_hoisted_23,[createBaseVNode("img",{src:q.value,alt:_.message.fileName||"media preview",class:"media-image",loading:"lazy"},null,8,_hoisted_24),(Ae=_.message.fileType)!=null&&Ae.startsWith("video/")?(openBlock(),createElementBlock("div",_hoisted_25,[...ce[5]||(ce[5]=[createBaseVNode("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M8 5v14l11-7z"})],-1)])])):createCommentVNode("",!0)])):createCommentVNode("",!0)])):(openBlock(),createElementBlock("div",_hoisted_26,[createBaseVNode("div",_hoisted_27,toDisplayString(W(_.message.fileName)),1),createBaseVNode("div",_hoisted_28,[createBaseVNode("div",{class:"file-name",title:_.message.fileName||""},toDisplayString(_.message.fileName||""),9,_hoisted_29),createBaseVNode("div",_hoisted_30,toDisplayString(X(_.message.size)),1)])]))]))])):createCommentVNode("",!0),de.value?(openBlock(),createElementBlock("div",_hoisted_31,[G.value==="error"?(openBlock(),createElementBlock("button",{key:0,class:"tts-button error",title:"TTS , ",onClick:withModifiers(J,["stop"])},"")):G.value==="loading"?(openBlock(),createBlock(Spinner,{key:1,size:"x-small"})):G.value==="ready"||G.value==="playing"?(openBlock(),createElementBlock("button",{key:2,class:normalizeClass(["tts-button",{playing:G.value==="playing"}]),onClick:withModifiers(Z,["stop"]),title:G.value==="playing"?"":""},null,10,_hoisted_32)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),!_.message.isRetracted&&_.message.type!=="system"?(openBlock(),createElementBlock("div",_hoisted_33,[createBaseVNode("span",_hoisted_34,toDisplayString(B.value),1),x.value?(openBlock(),createElementBlock("div",_hoisted_35,[_.message.status==="sending"?(openBlock(),createBlock(Spinner,{key:0,size:"x-small"})):_.message.status==="sent"||_.message.status==="delivered"?(openBlock(),createElementBlock("span",_hoisted_36,"")):_.message.status==="failed"?(openBlock(),createElementBlock("span",{key:2,class:"failed-icon",title:"",onClick:we},"!")):createCommentVNode("",!0)])):createCommentVNode("",!0)])):createCommentVNode("",!0)],2))],34)),[[ye]])}}},MessageBubble=_export_sfc(_sfc_main$h,[["__scopeId","data-v-8b0cd5e8"]]),_hoisted_1$f={class:"message-area",ref:"scrollContainerRef"},_sfc_main$g={__name:"MessageArea",props:{chatId:{type:String,required:!0}},setup(_){const S=_,w=useChatStore(),E=useUserStore(),T=ref$1(null),A=ref$1(!1),k=(N="smooth")=>{nextTick(()=>{var I;(I=T.value)==null||I.scrollToBottom()})},x=N=>{const I=w.currentChatMessages.findIndex(V=>V.id===N);I>-1&&T.value&&T.value.scrollToItem(I)},R=({chatId:N,dateString:I})=>{if(N!==S.chatId)return;const V=new Date(`${I}T00:00:00.000Z`).getTime(),B=new Date(`${I}T23:59:59.999Z`).getTime();let D=-1;for(let z=0;z<w.currentChatMessages.length;z++){const O=new Date(w.currentChatMessages[z].timestamp).getTime();if(O>=V&&O<=B){D=z;break}}D>-1&&T.value?(T.value.scrollToItem(D),eventBus.emit("showNotification",{message:` ${I} `,type:"info"})):eventBus.emit("showNotification",{message:` ${I} `,type:"warning"})};watch(()=>w.currentChatMessages.length,(N,I)=>{if(N>I){const V=w.currentChatMessages[N-1];V&&typeof V.sender<"u"&&(V.sender===E.userId||!A.value||V.isStreaming)&&k("smooth")}},{flush:"post"}),watch(()=>S.chatId,()=>{k("auto")},{immediate:!0});let P=null;const M=()=>{if(P){const N=P.scrollHeight-P.scrollTop-P.clientHeight<200;A.value=!N}};return onMounted(()=>{var N;P=(N=T.value)==null?void 0:N.$el,P&&P.addEventListener("scroll",M),eventBus.on("chat:scroll-to-message",x),eventBus.on("chat:scroll-to-date",R)}),onUnmounted(()=>{P&&P.removeEventListener("scroll",M),eventBus.off("chat:scroll-to-message",x),eventBus.off("chat:scroll-to-date",R)}),(N,I)=>(openBlock(),createElementBlock("div",_hoisted_1$f,[createVNode(unref(script$1),{ref_key:"scrollerRef",ref:T,class:"scroller",items:unref(w).currentChatMessages,"min-item-size":52,"key-field":"id"},{default:withCtx(({item:V,index:B,active:D})=>[createVNode(unref(script),{item:V,active:D,"data-index":B,"data-id":V.id,class:"scroller-item"},{default:withCtx(()=>[createVNode(MessageBubble,{message:V,"is-consecutive":V.isConsecutive},null,8,["message","is-consecutive"])]),_:2},1032,["item","active","data-index","data-id"])]),_:1},8,["items"]),withDirectives(createBaseVNode("button",{onClick:k,class:"scroll-to-bottom"},[...I[0]||(I[0]=[createBaseVNode("span",null,"",-1)])],512),[[vShow,A.value]])],512))}},MessageArea=_export_sfc(_sfc_main$g,[["__scopeId","data-v-34ba7dfa"]]),EMOJI_LIST=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_hoisted_1$e={class:"picker-tabs"},_hoisted_2$b={class:"picker-content"},_hoisted_3$a={class:"emoji-grid scroller"},_hoisted_4$6=["onClick","enter"],_hoisted_5$5={class:"sticker-grid scroller"},_hoisted_6$4=["enter"],_hoisted_7$3=["onClick","onMouseenter","onMouseleave"],_sfc_main$f={__name:"EmojiPicker",props:{show:Boolean},emits:["select-emoji","select-sticker"],setup(_,{emit:S}){const w=S,E=ref$1("emoji"),T=EMOJI_LIST,A=ref$1(STICKER_PACKS),k=ref$1(new Map),x=(I,V)=>{V&&k.value.set(I,V)};onBeforeUpdate(()=>{k.value.clear()});const R=(I,V)=>{const B=`${I}/${V}`,D=k.value.get(B);D&&D.playAnimation()},P=(I,V)=>{const B=`${I}/${V}`,D=k.value.get(B);D&&D.stopAnimation()};function M(I){w("select-emoji",I)}function N(I,V){const B=`${I}/${V}`;w("select-sticker",B)}return(I,V)=>{const B=resolveDirective("motion");return openBlock(),createBlock(Transition,{name:"picker-fade"},{default:withCtx(()=>[_.show?(openBlock(),createElementBlock("div",{key:0,class:"picker-container",onClick:V[2]||(V[2]=withModifiers(()=>{},["stop"]))},[createBaseVNode("nav",_hoisted_1$e,[createBaseVNode("button",{class:normalizeClass({active:E.value==="emoji"}),onClick:V[0]||(V[0]=D=>E.value="emoji"),title:""},"",2),createBaseVNode("button",{class:normalizeClass({active:E.value==="sticker"}),onClick:V[1]||(V[1]=D=>E.value="sticker"),title:""},"",2)]),createBaseVNode("div",_hoisted_2$b,[withDirectives(createBaseVNode("div",_hoisted_3$a,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(T),(D,z)=>withDirectives((openBlock(),createElementBlock("span",{key:D,onClick:O=>M(D),class:"emoji-item",initial:{opacity:0,y:10},enter:{opacity:1,y:0,transition:{type:"spring",stiffness:350,damping:25,delay:10+z*5}}},[createTextVNode(toDisplayString(D),1)],8,_hoisted_4$6)),[[B]])),128))],512),[[vShow,E.value==="emoji"]]),withDirectives(createBaseVNode("div",_hoisted_5$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(A.value,(D,z)=>(openBlock(),createElementBlock(Fragment,{key:z},[(openBlock(!0),createElementBlock(Fragment,null,renderList(D.stickers,(O,L)=>withDirectives((openBlock(),createElementBlock("div",{key:O.id,class:"sticker-item-wrapper",initial:{opacity:0,y:10},enter:{opacity:1,y:0,transition:{type:"spring",stiffness:350,damping:25,delay:10+L*5}}},[createBaseVNode("div",{class:"sticker-item",onClick:F=>N(z,O.id),onMouseenter:F=>R(z,O.id),onMouseleave:F=>P(z,O.id)},[createVNode(AnimatedSticker,{src:O.file,ref_for:!0,ref:F=>x(`${z}/${O.id}`,F)},null,8,["src"])],40,_hoisted_7$3)],8,_hoisted_6$4)),[[B]])),128))],64))),128))],512),[[vShow,E.value==="sticker"]])])])):createCommentVNode("",!0)]),_:1})}}},EmojiPicker=_export_sfc(_sfc_main$f,[["__scopeId","data-v-18f8ce89"]]),_hoisted_1$d={key:0,class:"mention-list"},_hoisted_2$a=["onClick"],_hoisted_3$9={class:"mention-name"},_sfc_main$e={__name:"AiMentionList",props:{show:Boolean,suggestions:{type:Array,default:()=>[]}},emits:["select"],setup(_,{emit:S}){const w=S;function E(T){w("select",T)}return(T,A)=>(openBlock(),createBlock(Transition,{name:"mention-fade"},{default:withCtx(()=>[_.show&&_.suggestions.length?(openBlock(),createElementBlock("div",_hoisted_1$d,[(openBlock(!0),createElementBlock(Fragment,null,renderList(_.suggestions,k=>(openBlock(),createElementBlock("div",{key:k.id,class:"mention-item",onClick:x=>E(k)},[createVNode(Avatar,{entity:k,size:"small"},null,8,["entity"]),createBaseVNode("span",_hoisted_3$9,toDisplayString(k.name),1)],8,_hoisted_2$a))),128))])):createCommentVNode("",!0)]),_:1}))}},AiMentionList=_export_sfc(_sfc_main$e,[["__scopeId","data-v-ec622b72"]]),mediaRecorder=ref$1(null),audioChunks=ref$1([]),recordingStartTime=ref$1(null),localAudioStream=ref$1(null),mediaService={async startRecording(){var _;if(((_=mediaRecorder.value)==null?void 0:_.state)==="recording")return null;try{return(!localAudioStream.value||localAudioStream.value.getAudioTracks().some(S=>S.readyState==="ended"))&&(this.releaseAudioResources(),localAudioStream.value=await navigator.mediaDevices.getUserMedia({audio:AppSettings.media.audioConstraints})),mediaRecorder.value=new MediaRecorder(localAudioStream.value),mediaRecorder.value.ondataavailable=S=>{S.data.size>0&&audioChunks.value.push(S.data)},mediaRecorder.value.onstop=()=>{if(audioChunks.value.length===0)return;const S=new Blob(audioChunks.value,{type:mediaRecorder.value.mimeType}),w=Math.round((Date.now()-recordingStartTime.value)/1e3);eventBus.emit("recording:complete",{blob:S,duration:w}),audioChunks.value=[]},mediaRecorder.value.start(),recordingStartTime.value=Date.now(),!0}catch(S){return log(`: ${S}`,"ERROR"),eventBus.emit("showNotification",{message:"",type:"error"}),this.releaseAudioResources(),!1}},stopRecording(_=!1){var S;((S=mediaRecorder.value)==null?void 0:S.state)==="recording"&&mediaRecorder.value.stop(),_&&(audioChunks.value=[])},releaseAudioResources(){localAudioStream.value&&(localAudioStream.value.getTracks().forEach(_=>_.stop()),localAudioStream.value=null),mediaRecorder.value=null},async checkDevices(){const _={video:{status:"unchecked",stream:null,error:null},audio:{status:"unchecked",stream:null,error:null}};try{const S=await navigator.mediaDevices.getUserMedia({video:!0});_.video.status="ok",_.video.stream=S}catch(S){_.video.error=S.name,S.name==="NotFoundError"||S.name==="DevicesNotFoundError"?_.video.status="not_found":S.name==="NotAllowedError"?_.video.status="denied":_.video.status="error"}try{const S=await navigator.mediaDevices.getUserMedia({audio:!0});_.audio.status="ok",S.getTracks().forEach(w=>w.stop())}catch(S){_.audio.error=S.name,S.name==="NotFoundError"||S.name==="DevicesNotFoundError"?_.audio.status="not_found":S.name==="NotAllowedError"?_.audio.status="denied":_.audio.status="error"}return _},async captureScreen(_="motion",S=!1){if(log(`Screen capture initiated. For screenshot: ${S}`,"INFO"),window.Android&&typeof window.Android.startScreenCapture=="function")return log("Invoking native Android screen capture...","INFO"),eventBus.emit("showNotification",{message:"...",type:"info"}),window.Android.startScreenCapture(),null;if(typeof navigator.mediaDevices.getDisplayMedia!="function")return log("getDisplayMedia API is not supported.","ERROR"),eventBus.emit("showNotification",{message:"",type:"error"}),null;try{const w=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always",contentHint:_},audio:!0});if(log("Successfully obtained MediaStream from getDisplayMedia.","DEBUG"),!S)return w;await new Promise(P=>setTimeout(P,300));const E=w.getVideoTracks()[0];if(!E)throw new Error("");const T=document.createElement("video");T.style.position="fixed",T.style.top="-9999px",T.style.left="-9999px",T.muted=!0,T.srcObject=w,document.body.appendChild(T),E.onended=()=>{log("Video track ended, likely by user action.","INFO"),T&&T.remove(),!useUiStore().activeModal==="screenshotEditor"&&w.getTracks().forEach(P=>P.stop())},await new Promise((P,M)=>{T.onloadedmetadata=P,T.onerror=M}),await T.play();const k=await new ImageCapture(E).grabFrame(),x=document.createElement("canvas");x.width=k.width,x.height=k.height,x.getContext("2d").drawImage(k,0,0);const R=await new Promise(P=>x.toBlob(P,"image/png"));if(R){log("Canvas converted to Blob successfully for screenshot.","INFO");const P=URL.createObjectURL(R);eventBus.emit("screenshot:raw-captured",{dataUrl:P,blob:R,originalStream:w})}else throw new Error("canvas.toBlob() resulted in a null blob.");return T.remove(),null}catch(w){return w.name==="NotAllowedError"?(log("User denied screen sharing permission.","INFO"),eventBus.emit("showNotification",{message:"",type:"info"})):(log(`getDisplayMedia failed: ${w}`,"ERROR"),eventBus.emit("showNotification",{message:`: ${w.message}`,type:"error"})),null}}};window.handleNativeScreenshot=function(_){if(log("","INFO"),!_||!_.startsWith("data:image/")){eventBus.emit("showNotification",{message:"",type:"error"});return}fetch(_).then(S=>S.blob()).then(S=>{if(S){const w=URL.createObjectURL(S);eventBus.emit("screenshot:raw-captured",{dataUrl:w,blob:S,originalStream:null})}})};const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;let recognition=null,callbacks={},_shouldBeRunning=!1;SpeechRecognition?(recognition=new SpeechRecognition,recognition.continuous=!0,recognition.interimResults=!0,recognition.lang="zh-CN",recognition.onstart=()=>{log("STT recognition started.","INFO"),callbacks.onStart&&callbacks.onStart()},recognition.onresult=_=>{callbacks.onResult&&callbacks.onResult(_)},recognition.onerror=_=>{log(`STT Error: ${_.error}`,"ERROR"),callbacks.onError&&callbacks.onError(_.error)},recognition.onend=()=>{if(log("STT recognition ended.","INFO"),_shouldBeRunning){log("STT stopped unexpectedly. Restarting automatically...","WARN");try{recognition.start()}catch(_){log(`Error restarting STT: ${_.message}`,"ERROR")}}else callbacks.onEnd&&callbacks.onEnd()}):log("Web Speech API is not supported in this browser.","WARN");const sttService={init(_){SpeechRecognition&&(callbacks=_)},start(){if(!SpeechRecognition){eventBus.emit("showNotification",{message:"",type:"error"});return}if(!_shouldBeRunning)try{_shouldBeRunning=!0,recognition.start()}catch(_){log(`STT could not start: ${_.message}`,"ERROR"),_shouldBeRunning=!1}},stop(){!SpeechRecognition||!_shouldBeRunning||(_shouldBeRunning=!1,recognition.stop())},isListening(){return _shouldBeRunning}},_hoisted_1$c={class:"message-input-root"},_hoisted_2$9={key:0,class:"preview-container"},_hoisted_3$8={key:0,class:"audio-preview"},_hoisted_4$5={class:"preview-duration"},_hoisted_5$4={key:1,class:"file-preview"},_hoisted_6$3=["src"],_hoisted_7$2={key:1},_hoisted_8$2={key:0,class:"locked-recording-bar"},_hoisted_9$2={class:"recording-timer"},_hoisted_10$1={key:0,class:"hint-text"},_hoisted_11$1=["placeholder","readonly"],_hoisted_12$1={class:"input-actions-area"},_hoisted_13$1={key:"voice",class:"voice-button-wrapper"},_hoisted_14$1={key:0,class:"lock-hint"},LOCK_THRESHOLD=-60,CANCEL_THRESHOLD=-80,_sfc_main$d={__name:"MessageInput",setup(_){const S=useChatStore(),w=useUserStore(),E=useGroupStore(),T=useUiStore(),A=ref$1(""),k=ref$1(null),x=ref$1(null),R=ref$1(null),P=ref$1(!1),M=ref$1(0);let N=null,I=null;const V=ref$1(null);let B=null;const D=ref$1(!1),z=ref$1(!1),O=ref$1([]),L=ref$1(!1),F=ref$1({x:0,y:0}),$=ref$1(!1),H=ref$1(!1),j=ref$1(!1),q=ref$1(""),W=ref$1(""),X=computed(()=>{if(!S.currentChatId)return!1;const Se=w.contacts[S.currentChatId];return(Se==null?void 0:Se.isAI)===!0}),te=computed(()=>q.value?q.value:H.value?"...":"..."),ee=computed(()=>H.value?"":" ()"),G=()=>{nextTick(()=>{const Se=k.value;Se&&(Se.style.height="auto",Se.style.height=`${Math.min(Se.scrollHeight,150)}px`)})},de=Se=>{Se.key==="Enter"&&!Se.shiftKey&&!Se.ctrlKey&&!H.value&&(Se.preventDefault(),ae())},le=()=>{var Se;return(Se=x.value)==null?void 0:Se.click()};function ae(){R.value?((R.value.type==="audio"||R.value.type==="file")&&S.sendMessage({file:R.value}),me()):A.value.trim()&&(S.sendMessage({content:A.value.trim()}),A.value="",G())}function Q(Se){S.sendMessage({stickerId:Se}),T.toggleEmojiPicker(!1)}function ie(Se){const Ce=k.value,Fe=Ce.selectionStart,$e=Ce.selectionEnd;A.value=A.value.substring(0,Fe)+Se+A.value.substring($e),nextTick(()=>{Ce.selectionStart=Ce.selectionEnd=Fe+Se.length,Ce.focus()})}function Z(){T.toggleEmojiPicker()}function J(Se){T.isEmojiPickerVisible&&!Se.target.closest(".picker-container, .input-container")&&T.toggleEmojiPicker(!1)}async function ue(Se){const Ce=Se.target.files[0];Ce&&await Re(Ce),Se.target&&(Se.target.value="")}async function pe(Se){const Ce=Se.clipboardData.files[0];Ce!=null&&Ce.type.startsWith("image/")&&(Se.preventDefault(),await Re(Ce))}async function Re(Se){me();const Ce=await generateHash(Se),Fe=Se.type.startsWith("image/");R.value={type:"file",blob:Se,hash:Ce,name:Se.name,fileType:Se.type,size:Se.size,isImage:Fe,url:Fe?URL.createObjectURL(Se):null}}function me(){var Se;(Se=R.value)!=null&&Se.url&&URL.revokeObjectURL(R.value.url),B&&(B.destroy(),B=null),R.value=null,D.value=!1}function ge(){B&&B.playPause()}watch(R,(Se,Ce)=>{Ce&&B&&(B.destroy(),B=null,D.value=!1),Se&&Se.type==="audio"&&nextTick(()=>{V.value&&(B=C.create({container:V.value,url:Se.url,height:32,waveColor:"var(--color-text-tertiary)",progressColor:"var(--color-brand-secondary)",cursorWidth:1,cursorColor:"var(--color-brand-primary)",barWidth:2,barRadius:2}),B.on("play",()=>D.value=!0),B.on("pause",()=>D.value=!1),B.on("finish",()=>D.value=!1))})});const we=Se=>{const Ce=Math.floor(Se/60),Fe=Se%60;return`${Ce}:${Fe<10?"0":""}${Fe}`};function oe(){H.value||(W.value=A.value?A.value+" ":"",sttService.start())}function ce(){H.value&&(j.value=!0,sttService.stop())}async function ye(Se){if(P.value)return;if(me(),await mediaService.startRecording()){P.value=!0;const Fe=Se.touches?Se.touches[0]:Se;F.value={x:Fe.clientX,y:Fe.clientY},M.value=0,N=setInterval(()=>{M.value++},1e3)}}function xe(){P.value&&(L.value||(clearInterval(N),$.value?mediaService.stopRecording(!0):mediaService.stopRecording(),P.value=!1,$.value=!1))}function Ae(Se){if(!P.value||L.value)return;const Ce=Se.touches?Se.touches[0]:Se,Fe=Ce.clientY-F.value.y,$e=Ce.clientX-F.value.x;Fe<LOCK_THRESHOLD?(L.value=!0,F.value={x:0,y:0}):$e<CANCEL_THRESHOLD?$.value=!0:$.value=!1}function se(){L.value=!1,P.value=!1,clearInterval(N),mediaService.stopRecording(!0)}function K(){L.value=!1,P.value=!1,clearInterval(N),mediaService.stopRecording()}function ne({blob:Se,duration:Ce}){me();const Fe=URL.createObjectURL(Se);R.value={type:"audio",blob:Se,duration:Ce,url:Fe,hash:`audio_${Date.now()}`,name:"voice-message.webm",fileType:Se.type,size:Se.size}}async function fe(){await mediaService.captureScreen("detail",!0)}function Ee(Se){T.showOverlayModal("screenshotEditor",Se)}function be(Se){me(),R.value={type:"file",...Se,isImage:!0,url:URL.createObjectURL(Se.blob)}}function Te(){T.showModal("locationPicker")}function Ne(){G(),ve(),Oe()}function ve(){I&&clearTimeout(I),webrtcService.sendTyping(S.currentChatId),I=setTimeout(()=>{},2e3)}function Oe(){const Se=A.value,Ce=k.value.selectionStart,Fe=Se.substring(0,Ce),$e=Fe.lastIndexOf("@");if($e!==-1&&S.currentChatId.startsWith("group_")){const De=Fe.substring($e+1),ze=E.groups[S.currentChatId];ze&&(O.value=ze.members.map(Ve=>w.contacts[Ve]).filter(Ve=>(Ve==null?void 0:Ve.isAI)&&Ve.name.toLowerCase().includes(De.toLowerCase())),z.value=O.value.length>0)}else z.value=!1}function Pe(Se){const Ce=A.value,Fe=k.value.selectionStart,De=Ce.substring(0,Fe).lastIndexOf("@"),ze=Ce.substring(0,De),Ve=Ce.substring(Fe);A.value=`${ze}@${Se.name} ${Ve}`,z.value=!1,nextTick(()=>{const We=ze.length+`@${Se.name} `.length;k.value.focus(),k.value.setSelectionRange(We,We)})}return onMounted(()=>{document.addEventListener("click",J),eventBus.on("recording:complete",ne),eventBus.on("screenshot:editing-complete",be),eventBus.on("file:dropped",Re),eventBus.on("screenshot:raw-captured",Ee),sttService.init({onStart:()=>{H.value=!0,j.value=!1,q.value=""},onResult:Se=>{let Ce="",Fe="";for(let $e=0;$e<Se.results.length;++$e)Se.results[$e].isFinal?Fe+=Se.results[$e][0].transcript:Ce+=Se.results[$e][0].transcript;A.value=W.value+Fe+Ce,G(),q.value=""},onError:Se=>{q.value=Se==="no-speech"?"...":"",setTimeout(()=>{q.value&&(q.value="")},3e3)},onEnd:()=>{H.value=!1,j.value&&(j.value=!1,W.value="",A.value.trim()&&ae())}})}),onUnmounted(()=>{document.removeEventListener("click",J),eventBus.off("recording:complete",ne),eventBus.off("screenshot:editing-complete",be),eventBus.off("file:dropped",Re),eventBus.off("screenshot:raw-captured",Ee),N&&clearInterval(N),I&&clearTimeout(I),me(),sttService.isListening()&&sttService.stop()}),(Se,Ce)=>(openBlock(),createElementBlock("div",_hoisted_1$c,[createVNode(Transition,{name:"preview-fade"},{default:withCtx(()=>[R.value?(openBlock(),createElementBlock("div",_hoisted_2$9,[R.value.type==="audio"?(openBlock(),createElementBlock("div",_hoisted_3$8,[createBaseVNode("button",{onClick:ge,class:"btn-play-preview"},toDisplayString(D.value?"":""),1),createBaseVNode("div",{ref_key:"previewWaveformRef",ref:V,class:"preview-waveform-container"},null,512),createBaseVNode("span",_hoisted_4$5,toDisplayString(we(R.value.duration)),1),createBaseVNode("button",{onClick:me,class:"btn-cancel-preview"},"")])):createCommentVNode("",!0),R.value.type==="file"?(openBlock(),createElementBlock("div",_hoisted_5$4,[R.value.isImage?(openBlock(),createElementBlock("img",{key:0,src:R.value.url,class:"file-preview-image",alt:"Image Preview"},null,8,_hoisted_6$3)):(openBlock(),createElementBlock("span",_hoisted_7$2," "+toDisplayString(R.value.name),1)),createBaseVNode("div",{class:"preview-actions"},[createBaseVNode("button",{onClick:me,class:"btn-cancel"},"")])])):createCommentVNode("",!0)])):createCommentVNode("",!0)]),_:1}),createVNode(AiMentionList,{show:z.value,suggestions:O.value,onSelect:Pe},null,8,["show","suggestions"]),L.value?(openBlock(),createElementBlock("div",_hoisted_8$2,[Ce[1]||(Ce[1]=createBaseVNode("div",{class:"recording-indicator"},"",-1)),createBaseVNode("div",_hoisted_9$2,toDisplayString(we(M.value)),1),Ce[2]||(Ce[2]=createBaseVNode("div",{class:"spacer"},null,-1)),createBaseVNode("button",{onClick:se,class:"btn-cancel-recording"},""),createBaseVNode("button",{onClick:K,class:"btn-send-recording"},"")])):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["input-container",{"recording-active":P.value}])},[createVNode(Transition,{name:"cancel-hint-fade"},{default:withCtx(()=>[P.value&&!L.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["cancel-hint",{active:$.value}])},[$.value?(openBlock(),createElementBlock("span",_hoisted_10$1,"")):createCommentVNode("",!0)],2)):createCommentVNode("",!0)]),_:1}),createBaseVNode("div",{class:normalizeClass(["input-main-area",{"slide-away":$.value}])},[createVNode(IconButton,{icon:"",title:"/",onClick:withModifiers(Z,["stop"])}),createVNode(IconButton,{icon:"",title:"",onClick:le}),createVNode(IconButton,{icon:"",title:"",onClick:Te}),withDirectives(createBaseVNode("textarea",{ref_key:"textareaRef",ref:k,"onUpdate:modelValue":Ce[0]||(Ce[0]=Fe=>A.value=Fe),onKeydown:de,onInput:Ne,onPaste:pe,placeholder:te.value,class:"message-textarea",readonly:H.value},null,40,_hoisted_11$1),[[vModelText,A.value]])],2),createBaseVNode("div",_hoisted_12$1,[createVNode(TransitionGroup,{name:"actions-slide-fade"},{default:withCtx(()=>[!A.value&&!P.value&&!H.value?(openBlock(),createBlock(IconButton,{key:"screenshot",icon:"",title:"",onClick:fe,class:"screenshot-button"})):createCommentVNode("",!0),!A.value||H.value?(openBlock(),createElementBlock("div",_hoisted_13$1,[X.value?(openBlock(),createBlock(IconButton,{key:0,icon:H.value?"":"",title:ee.value,onMousedown:withModifiers(oe,["prevent"]),onMouseup:withModifiers(ce,["prevent"]),onTouchstart:withModifiers(oe,["prevent"]),onTouchend:withModifiers(ce,["prevent"]),class:normalizeClass(["voice-button",{"stt-active":H.value}])},null,8,["icon","title","class"])):(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(Transition,{name:"lock-hint-fade"},{default:withCtx(()=>[P.value&&!L.value?(openBlock(),createElementBlock("div",_hoisted_14$1,[...Ce[3]||(Ce[3]=[createBaseVNode("span",{class:"lock-icon"},"",-1),createBaseVNode("span",{class:"arrow"},"",-1),createBaseVNode("span",{class:"hint-text"},"",-1)])])):createCommentVNode("",!0)]),_:1}),createVNode(IconButton,{icon:P.value?"":"",title:P.value?`... ${we(M.value)}`:"",onMousedown:withModifiers(ye,["prevent"]),onMouseup:withModifiers(xe,["prevent"]),onMousemove:withModifiers(Ae,["prevent"]),onTouchstart:withModifiers(ye,["prevent"]),onTouchend:withModifiers(xe,["prevent"]),class:normalizeClass(["voice-button",{recording:P.value}])},null,8,["icon","title","class"])],64))])):(openBlock(),createBlock(IconButton,{key:"send",icon:"",title:"",onClick:ae,class:"send-button"}))]),_:1})])],2)),createVNode(EmojiPicker,{show:unref(T).isEmojiPickerVisible,onSelectEmoji:ie,onSelectSticker:Q},null,8,["show"]),createBaseVNode("input",{type:"file",ref_key:"fileInputRef",ref:x,onChange:ue,style:{display:"none"}},null,544)]))}},MessageInput=_export_sfc(_sfc_main$d,[["__scopeId","data-v-02f399d7"]]),_hoisted_1$b={key:0,class:"drag-overlay"},_sfc_main$c={__name:"ChatView",setup(_){const S=useChatStore(),w=ref$1(!1);let E=0;function T(x){x.dataTransfer.types.includes("Files")&&(E++,w.value=!0)}function A(){E--,E===0&&(w.value=!1)}function k(x){E=0,w.value=!1;const R=x.dataTransfer.files[0];R&&eventBus.emit("file:dropped",R)}return(x,R)=>(openBlock(),createElementBlock("div",{class:"chat-view",onDragenter:withModifiers(T,["prevent"]),onDragover:R[0]||(R[0]=withModifiers(()=>{},["prevent"])),onDragleave:withModifiers(A,["prevent"]),onDrop:withModifiers(k,["prevent"])},[createVNode(ChatHeader,{"chat-id":unref(S).currentChatId},null,8,["chat-id"]),createVNode(MessageArea,{"chat-id":unref(S).currentChatId},null,8,["chat-id"]),createVNode(MessageInput,{"chat-id":unref(S).currentChatId},null,8,["chat-id"]),createVNode(Transition,{name:"drag-fade"},{default:withCtx(()=>[w.value?(openBlock(),createElementBlock("div",_hoisted_1$b,[...R[1]||(R[1]=[createBaseVNode("div",{class:"drag-overlay-text"},"",-1)])])):createCommentVNode("",!0)]),_:1})],32))}},ChatView=_export_sfc(_sfc_main$c,[["__scopeId","data-v-01f367e5"]]),_imports_0=""+new URL("../icons/favicon.svg",import.meta.url).href,_hoisted_1$a={class:"welcome-screen"},_hoisted_2$8={class:"status-indicator"},_hoisted_3$7={class:"status-text"},_sfc_main$b={__name:"WelcomeScreen",setup(_){const S=useUserStore(),w=computed(()=>S.userId?webrtcService.isWebSocketConnected.value?` - ID: ${S.userId}`:"":"...");return(E,T)=>(openBlock(),createElementBlock("div",_hoisted_1$a,[T[1]||(T[1]=createBaseVNode("div",{class:"logo-container"},[createBaseVNode("img",{src:_imports_0,alt:"WebChat Logo",width:"64",height:"64"})],-1)),T[2]||(T[2]=createBaseVNode("h2",null,"WebChat",-1)),T[3]||(T[3]=createBaseVNode("p",null,' "+" ',-1)),createBaseVNode("p",_hoisted_2$8,[T[0]||(T[0]=createTextVNode(" : ",-1)),createBaseVNode("span",_hoisted_3$7,toDisplayString(w.value),1)])]))}},WelcomeScreen=_export_sfc(_sfc_main$b,[["__scopeId","data-v-043c762b"]]),_hoisted_1$9={class:"details-panel"},_hoisted_2$7={class:"details-header"},_hoisted_3$6={class:"details-content"},_sfc_main$a={__name:"DetailsPanel",setup(_){const S={template:`
    <Transition name="skeleton-fade" appear>
      <SkeletonLoader type="profile" />
    </Transition>
  `},w=defineAsyncComponent({loader:()=>__vitePreload(()=>import("./UserProfile-CwwM8bFF.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),loadingComponent:S,delay:200,suspensible:!1}),E=defineAsyncComponent({loader:()=>__vitePreload(()=>import("./GroupInfo-DqPASKW1.js"),__vite__mapDeps([4,1,2,5]),import.meta.url),loadingComponent:S,delay:200,suspensible:!1}),T=defineAsyncComponent({loader:()=>__vitePreload(()=>import("./PeopleLobby-BvsCfAOy.js"),__vite__mapDeps([6,7]),import.meta.url),loadingComponent:S,delay:200,suspensible:!1}),A=useUiStore(),k=useChatStore(),x=useUserStore(),R=useGroupStore(),P=computed(()=>{const V=k.currentChatId;return V?x.contacts[V]||R.groups[V]:null}),M=computed(()=>{switch(A.detailsPanelContent){case"info":return P.value?`${P.value.name} `:"";case"lobby":return"";default:return""}}),N=computed(()=>{var V;switch(A.detailsPanelContent){case"info":return((V=P.value)==null?void 0:V.type)==="group"?E:w;case"lobby":return T;default:return null}}),I=computed(()=>`${A.detailsPanelContent}-${k.currentChatId}`);return(V,B)=>{const D=resolveDirective("auto-animate");return withDirectives((openBlock(),createElementBlock("div",_hoisted_1$9,[createBaseVNode("header",_hoisted_2$7,[createBaseVNode("h3",null,toDisplayString(M.value),1),createVNode(IconButton,{icon:"",title:"",onClick:B[0]||(B[0]=z=>unref(A).toggleDetailsPanel(!1))})]),createBaseVNode("div",_hoisted_3$6,[createVNode(Transition,{name:"details-content-fade",mode:"out-in"},{default:withCtx(()=>[(openBlock(),createBlock(KeepAlive,null,[(openBlock(),createBlock(resolveDynamicComponent(N.value),{key:I.value}))],1024))]),_:1})])])),[[D,{duration:300,easing:"cubic-bezier(0.34, 1.56, 0.64, 1)"}]])}}},DetailsPanel=_export_sfc(_sfc_main$a,[["__scopeId","data-v-2c1f22db"]]),_hoisted_1$8={class:"notification-container"},_hoisted_2$6={class:"icon"},_hoisted_3$5={class:"message"},_hoisted_4$4=["onClick"],_sfc_main$9={__name:"NotificationContainer",setup(_){const S=ref$1([]);let w=0;const E=k=>({info:"",success:"",warning:"",error:""})[k]||"",T=({message:k,type:x="info",duration:R=5e3})=>{const P=w++;S.value.push({id:P,message:k,type:x}),setTimeout(()=>A(P),R)},A=k=>{const x=S.value.findIndex(R=>R.id===k);x>-1&&S.value.splice(x,1)};return onMounted(()=>{eventBus.on("showNotification",T)}),onUnmounted(()=>{eventBus.off("showNotification",T)}),(k,x)=>(openBlock(),createElementBlock("div",_hoisted_1$8,[createVNode(TransitionGroup,{name:"notification-list",tag:"div"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(S.value,R=>(openBlock(),createElementBlock("div",{key:R.id,class:normalizeClass(["notification",`notification-${R.type}`])},[createBaseVNode("span",_hoisted_2$6,toDisplayString(E(R.type)),1),createBaseVNode("p",_hoisted_3$5,toDisplayString(R.message),1),createBaseVNode("button",{class:"close",onClick:P=>A(R.id)},"",8,_hoisted_4$4)],2))),128))]),_:1})]))}},NotificationContainer=_export_sfc(_sfc_main$9,[["__scopeId","data-v-96b9535e"]]),_hoisted_1$7={class:"whiteboard-toolbar"},_hoisted_2$5={class:"tool-group"},_hoisted_3$4={class:"color-picker-wrapper"},_hoisted_4$3=["value"],_hoisted_5$3={class:"action-group"},_sfc_main$8={__name:"WhiteboardToolbar",emits:["tool-selected","color-selected","undo","clear"],setup(_,{emit:S}){const w=S,E=ref$1("pen"),T=ref$1("#FF0000");function A(x){E.value=x,w("tool-selected",x)}function k(x){T.value=x.target.value,w("color-selected",x.target.value)}return(x,R)=>{const P=resolveDirective("motion-slide-left");return withDirectives((openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$5,[createVNode(IconButton,{icon:"",title:"",class:normalizeClass({active:E.value==="pen"}),onClick:R[0]||(R[0]=M=>A("pen"))},null,8,["class"]),createVNode(IconButton,{icon:"",title:"",class:normalizeClass({active:E.value==="rect"}),onClick:R[1]||(R[1]=M=>A("rect"))},null,8,["class"])]),R[4]||(R[4]=createBaseVNode("div",{class:"separator"},null,-1)),createBaseVNode("div",_hoisted_3$4,[createBaseVNode("input",{type:"color",value:T.value,onInput:k,class:"color-picker",title:""},null,40,_hoisted_4$3)]),R[5]||(R[5]=createBaseVNode("div",{class:"separator"},null,-1)),createBaseVNode("div",_hoisted_5$3,[createVNode(IconButton,{icon:"",title:"",onClick:R[2]||(R[2]=M=>x.$emit("undo"))}),createVNode(IconButton,{icon:"",title:"",onClick:R[3]||(R[3]=M=>x.$emit("clear"))})])])),[[P]])}}},WhiteboardToolbar=_export_sfc(_sfc_main$8,[["__scopeId","data-v-b4c94a6f"]]),_hoisted_1$6={class:"call-view-header"},_hoisted_2$4={class:"peer-info"},_hoisted_3$3={class:"peer-name"},_hoisted_4$2={class:"status-indicators"},_hoisted_5$2={class:"call-duration"},_hoisted_6$2=["title"],_hoisted_7$1=["title"],_hoisted_8$1={key:0,class:"sharing-banner"},_hoisted_9$1={class:"video-streams"},_hoisted_10={key:0,class:"audio-only-ui"},_hoisted_11={class:"audio-peer-name"},_hoisted_12={class:"call-controls"},_hoisted_13={key:3,class:"quality-settings-wrapper"},_hoisted_14={key:0,class:"quality-menu"},_hoisted_15=["onClick"],_hoisted_16=["onClick"],_sfc_main$7={__name:"VideoCallView",setup(_){const S=useCallStore();useSettingsStore();const w=ref$1(null),E=ref$1(null),T=ref$1(null),A=ref$1(null);let k=null,x=!1,R={x:0,y:0},P=null;const M=ref$1({scale:1,renderedWidth:0,renderedHeight:0,offsetX:0,offsetY:0}),N=computed(()=>S.amISharingScreen?S.localStream:S.remoteStream),I=computed(()=>S.amISharingScreen?S.remoteStream:S.localStream),V=ref$1(!1),B=ref$1(!1),D={auto:"","720p":" (720p)","480p":" (480p)"},z=computed(()=>AppSettings.media.screenSharePresets);watch([N,w],([J,ue])=>{log(`VideoCallView:  watch newStream ID: ${J==null?void 0:J.id}, videoEl  ${!!ue}`,"DEBUG"),ue&&ue.srcObject!==J&&(ue.srcObject=J instanceof MediaStream?J:null,log("VideoCallView: mainVideoRef.srcObject ","INFO"))},{immediate:!0}),watch([I,E],([J,ue])=>{ue&&ue.srcObject!==J&&(ue.srcObject=J instanceof MediaStream?J:null)},{immediate:!0});const O=computed(()=>S.peerContact),L=computed(()=>{var ue,pe;return!(((ue=S.localStream)==null?void 0:ue.getVideoTracks().some(Re=>Re.readyState==="live"&&Re.enabled))||((pe=S.remoteStream)==null?void 0:pe.getVideoTracks().some(Re=>Re.readyState==="live"&&Re.enabled)))}),F=computed(()=>S.isScreenSharing&&S.amISharingScreen),$=computed(()=>I.value&&I.value.getVideoTracks().some(J=>J.readyState==="live")&&!L.value),H=computed(()=>{var J,ue;return S.isScreenSharing&&!F.value?`${(J=O.value)==null?void 0:J.name} `:(ue=O.value)==null?void 0:ue.name}),j=J=>{const ue=S.currentCallQuality[J];return ue==="good"?"quality-good":ue==="medium"?"quality-medium":ue==="poor"?"quality-poor":""},q=J=>J==="good"?"":J==="medium"?"":J==="poor"?"":"";function W(){B.value=!B.value}function X(J){S.setCallQualityPreset(J),B.value=!1}function te(J){S.setScreenShareQualityPreset(J),B.value=!1}function ee(J){B.value&&!J.target.closest(".quality-settings-wrapper")&&(B.value=!1)}function G(){const J=w.value;J&&J.videoWidth>0&&J.videoHeight>0&&(M.value=calculateObjectFitDimensions(J.clientWidth,J.clientHeight,J.videoWidth,J.videoHeight),Z())}function de(){if(!A.value)return;k=A.value.getContext("2d");const J=w.value;J&&(P=new ResizeObserver(ue=>{for(const pe of ue){const{width:Re,height:me}=pe.contentRect;(A.value.width!==Re||A.value.height!==me)&&(A.value.width=Re,A.value.height=me,G())}}),P.observe(J)),A.value.addEventListener("mousedown",ae),A.value.addEventListener("mousemove",Q),A.value.addEventListener("mouseup",ie),A.value.addEventListener("mouseleave",ie)}function le(J){const pe=A.value.getBoundingClientRect(),{offsetX:Re,offsetY:me,renderedWidth:ge,renderedHeight:we}=M.value,oe=J.clientX-pe.left,ce=J.clientY-pe.top,ye=oe-Re,xe=ce-me,Ae=Math.max(0,Math.min(1,ye/ge)),se=Math.max(0,Math.min(1,xe/we));return{x:Ae,y:se}}function ae(J){if(!S.isWhiteboardActive||!S.amISharingScreen)return;x=!0;const ue=le(J);R=ue;const pe={type:"draw_start",tool:S.currentDrawingTool,color:S.currentDrawingColor,...ue};S.addDrawingAction(pe)}const Q=throttle$1(J=>{if(!x||!S.isWhiteboardActive||!S.amISharingScreen)return;const ue=le(J);if(S.currentDrawingTool==="rect"){if(Z(),k){const{offsetX:pe,offsetY:Re,renderedWidth:me,renderedHeight:ge}=M.value;k.strokeStyle=S.currentDrawingColor,k.lineWidth=3;const we=pe+R.x*me,oe=Re+R.y*ge,ce=pe+ue.x*me,ye=Re+ue.y*ge;k.strokeRect(we,oe,ce-we,ye-oe)}}else{const pe={type:"draw_move",...ue};S.addDrawingAction(pe)}},16);function ie(J){if(!x)return;x=!1;const ue=le(J);if(S.currentDrawingTool==="rect"){const pe={type:"draw_rect",color:S.currentDrawingColor,x1:R.x,y1:R.y,x2:ue.x,y2:ue.y},Re=S.drawingHistory.findLastIndex(me=>me.type==="draw_start");Re>-1&&S.drawingHistory.splice(Re),S.addDrawingAction(pe)}else{const pe={type:"draw_end"};S.addDrawingAction(pe)}}function Z(){if(!k||!A.value)return;const J=A.value,{offsetX:ue,offsetY:pe,renderedWidth:Re,renderedHeight:me}=M.value;if(k.clearRect(0,0,J.width,J.height),Re<=0||me<=0)return;let ge=!1,we="#000000";S.drawingHistory.forEach(oe=>{const ce=ue+oe.x*Re,ye=pe+oe.y*me;switch(oe.type){case"draw_start":ge=oe.tool==="pen",ge&&(we=oe.color,k.beginPath(),k.moveTo(ce,ye));break;case"draw_move":ge&&(k.strokeStyle=we,k.lineWidth=3,k.lineTo(ce,ye),k.stroke(),k.beginPath(),k.moveTo(ce,ye));break;case"draw_end":ge&&(k.closePath(),ge=!1);break;case"draw_rect":const xe=ue+oe.x1*Re,Ae=pe+oe.y1*me,se=ue+oe.x2*Re,K=pe+oe.y2*me;k.strokeStyle=oe.color,k.lineWidth=3,k.strokeRect(xe,Ae,se-xe,K-Ae);break}})}return watch(()=>S.drawingHistory,Z,{deep:!0}),watch(()=>S.isWhiteboardActive,J=>{J||Z()}),onMounted(()=>{document.addEventListener("click",ee),nextTick(de)}),onUnmounted(()=>{document.removeEventListener("click",ee),P&&P.disconnect(),A.value&&(A.value.removeEventListener("mousedown",ae),A.value.removeEventListener("mousemove",Q),A.value.removeEventListener("mouseup",ie),A.value.removeEventListener("mouseleave",ie))}),(J,ue)=>{const pe=resolveDirective("motion-slide-right"),Re=resolveDirective("motion-slide-bottom");return openBlock(),createBlock(Transition,{name:"call-view-fade"},{default:withCtx(()=>{var me;return[createBaseVNode("div",{class:normalizeClass(["call-view-container",{"pip-mode":V.value,"audio-only-mode":L.value}]),ref_key:"callContainerRef",ref:T},[createBaseVNode("header",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$4,[createBaseVNode("p",_hoisted_3$3,toDisplayString(H.value),1),createBaseVNode("div",_hoisted_4$2,[createBaseVNode("p",_hoisted_5$2,toDisplayString(unref(S).callDurationFormatted),1),unref(S).currentCallQuality.audio?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(["quality-indicator",j("audio")]),title:`: ${q(unref(S).currentCallQuality.audio)}`},"A",10,_hoisted_6$2)):createCommentVNode("",!0),unref(S).currentCallQuality.video&&!L.value?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(["quality-indicator",j("video")]),title:`: ${q(unref(S).currentCallQuality.video)}`},"V",10,_hoisted_7$1)):createCommentVNode("",!0)])]),createBaseVNode("button",{class:"icon-button minimize-button",title:"",onClick:ue[0]||(ue[0]=ge=>unref(S).minimizeCallView())},[...ue[13]||(ue[13]=[createBaseVNode("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M4 14H10V20",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),createBaseVNode("path",{d:"M20 10H14V4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),createBaseVNode("path",{d:"M14 10L21 3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),createBaseVNode("path",{d:"M3 21L10 14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),F.value?(openBlock(),createElementBlock("div",_hoisted_8$1,[ue[14]||(ue[14]=createTextVNode("   ",-1)),createBaseVNode("button",{onClick:ue[1]||(ue[1]=ge=>unref(S).hangUp())},"")])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_9$1,[createBaseVNode("video",{ref_key:"mainVideoRef",ref:w,class:"main-video",autoplay:"",playsinline:"",muted:"",onLoadedmetadata:G},null,544),createBaseVNode("canvas",{ref_key:"whiteboardCanvasRef",ref:A,class:normalizeClass(["whiteboard-canvas",{active:unref(S).isWhiteboardActive}])},null,2),withDirectives(createBaseVNode("video",{ref_key:"pipVideoRef",ref:E,class:normalizeClass(["pip-video",{"speaking-indicator":unref(S).isSpeaking}]),autoplay:"",playsinline:"",muted:""},null,2),[[vShow,$.value],[pe]]),L.value?(openBlock(),createElementBlock("div",_hoisted_10,[createVNode(Avatar,{entity:O.value,size:"xl","is-speaking":unref(S).isSpeaking},null,8,["entity","is-speaking"]),createBaseVNode("p",_hoisted_11,toDisplayString((me=O.value)==null?void 0:me.name),1)])):createCommentVNode("",!0)]),unref(S).isWhiteboardActive&&unref(S).amISharingScreen?(openBlock(),createBlock(WhiteboardToolbar,{key:1,onToolSelected:ue[2]||(ue[2]=ge=>unref(S).setDrawingTool(ge)),onColorSelected:ue[3]||(ue[3]=ge=>unref(S).setDrawingColor(ge)),onUndo:ue[4]||(ue[4]=ge=>unref(S).undoLastAction()),onClear:ue[5]||(ue[5]=ge=>unref(S).clearWhiteboard())})):createCommentVNode("",!0),withDirectives((openBlock(),createElementBlock("div",_hoisted_12,[unref(S).isScreenSharing&&unref(S).amISharingScreen?(openBlock(),createBlock(IconButton,{key:0,icon:"",title:"",onClick:ue[6]||(ue[6]=ge=>unref(S).toggleWhiteboard()),class:normalizeClass({active:unref(S).isWhiteboardActive})},null,8,["class"])):createCommentVNode("",!0),unref(S).isScreenSharing?(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(IconButton,{icon:unref(S).isMicrophoneMuted?"":"",title:unref(S).isMicrophoneMuted?"":"",onClick:ue[7]||(ue[7]=ge=>unref(S).toggleMicrophone()),class:normalizeClass({active:!unref(S).isMicrophoneMuted}),disabled:!unref(S).microphoneAudioTrack},null,8,["icon","title","class","disabled"]),unref(S).amISharingScreen?(openBlock(),createBlock(IconButton,{key:0,icon:unref(S).isSystemAudioMuted?"":"",title:unref(S).isSystemAudioMuted?"":"",onClick:ue[8]||(ue[8]=ge=>unref(S).toggleSystemAudio()),class:normalizeClass({active:!unref(S).isSystemAudioMuted}),disabled:!unref(S).systemAudioTrack},null,8,["icon","title","class","disabled"])):createCommentVNode("",!0),createVNode(IconButton,{icon:unref(S).isRemoteStreamMuted?"":"",title:unref(S).isRemoteStreamMuted?"":"",onClick:ue[9]||(ue[9]=ge=>unref(S).toggleRemoteMute()),class:normalizeClass({active:!unref(S).isRemoteStreamMuted})},null,8,["icon","title","class"])],64)):(openBlock(),createElementBlock(Fragment,{key:2},[L.value?createCommentVNode("",!0):(openBlock(),createBlock(IconButton,{key:0,icon:unref(S).isVideoEnabled?"":"",title:unref(S).isVideoEnabled?"":"",onClick:ue[10]||(ue[10]=ge=>unref(S).toggleVideo()),class:normalizeClass({active:unref(S).isVideoEnabled})},null,8,["icon","title","class"])),createVNode(IconButton,{icon:unref(S).isAudioMuted?"":"",title:unref(S).isAudioMuted?"":"",onClick:ue[11]||(ue[11]=ge=>unref(S).toggleAudio()),class:normalizeClass({active:!unref(S).isAudioMuted})},null,8,["icon","title","class"])],64)),L.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_13,[createVNode(IconButton,{icon:"",title:"",onClick:W,class:"settings-button"}),createVNode(Transition,{name:"quality-menu-fade"},{default:withCtx(()=>[B.value?(openBlock(),createElementBlock("div",_hoisted_14,[unref(S).isScreenSharing?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(z.value,(ge,we)=>(openBlock(),createElementBlock("button",{key:we,onClick:oe=>te(we),class:normalizeClass({active:unref(S).currentScreenShareQualityPreset===we})},toDisplayString(ge.label),11,_hoisted_15))),128)):(openBlock(),createElementBlock(Fragment,{key:1},renderList(D,(ge,we)=>createBaseVNode("button",{key:we,onClick:oe=>X(we),class:normalizeClass({active:unref(S).currentQualityPreset===we})},toDisplayString(ge),11,_hoisted_16)),64))])):createCommentVNode("",!0)]),_:1})])),createBaseVNode("button",{class:"end-call-button",onClick:ue[12]||(ue[12]=ge=>unref(S).hangUp()),title:""},"")])),[[Re]])],2)]}),_:1})}}},VideoCallView=_export_sfc(_sfc_main$7,[["__scopeId","data-v-916c88b6"]]),_hoisted_1$5=["onClick"],_sfc_main$6={__name:"ContextMenu",setup(_){const S=useUiStore(),w=ref$1(null),E=computed(()=>{const{x:k,y:x}=S.contextMenuPos;return{top:`${x}px`,left:`${k}px`,visibility:"hidden"}});function T(k){typeof k=="function"&&k(),S.hideContextMenu()}function A(k){S.isContextMenuOpen&&w.value&&!w.value.contains(k.target)&&S.hideContextMenu()}return watch(()=>S.isContextMenuOpen,k=>{k&&nextTick(()=>{if(w.value){const{x,y:R}=S.contextMenuPos,P=w.value.offsetWidth,M=w.value.offsetHeight;let N=x,I=R;x+P>window.innerWidth&&(N=window.innerWidth-P-5),R+M>window.innerHeight&&(I=window.innerHeight-M-5),w.value.style.left=`${N}px`,w.value.style.top=`${I}px`,w.value.style.visibility="visible"}})}),onMounted(()=>{document.addEventListener("click",A),document.addEventListener("contextmenu",A,!0)}),onUnmounted(()=>{document.removeEventListener("click",A),document.removeEventListener("contextmenu",A,!0)}),(k,x)=>{const R=resolveDirective("motion");return unref(S).isContextMenuOpen?withDirectives((openBlock(),createElementBlock("div",{key:0,class:"context-menu",style:normalizeStyle(E.value),ref_key:"menuRef",ref:w,initial:{opacity:0,scale:.95},enter:{opacity:1,scale:1,transition:{type:"spring",stiffness:400,damping:25}},leave:{opacity:0,scale:.95}},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(S).contextMenuItems,(P,M)=>(openBlock(),createElementBlock("button",{key:M,class:normalizeClass(["context-menu-item",P.class]),onClick:N=>T(P.action)},toDisplayString(P.label),11,_hoisted_1$5))),128))],4)),[[R]]):createCommentVNode("",!0)}}},ContextMenu=_export_sfc(_sfc_main$6,[["__scopeId","data-v-58d69172"]]),_hoisted_1$4={class:"welcome-header"},_sfc_main$5={__name:"WelcomeHeader",setup(_){const S=useUiStore();return(w,E)=>(openBlock(),createElementBlock("header",_hoisted_1$4,[E[2]||(E[2]=createBaseVNode("div",{class:"spacer"},null,-1)),createVNode(IconButton,{icon:"",title:"",onClick:E[0]||(E[0]=T=>unref(S).showOverlayModal("worldMap"))}),createVNode(IconButton,{icon:"",title:"",onClick:E[1]||(E[1]=T=>unref(S).toggleDetailsPanel(!0,"lobby"))})]))}},WelcomeHeader=_export_sfc(_sfc_main$5,[["__scopeId","data-v-d3f81a34"]]),_hoisted_1$3={class:"widget-info"},_hoisted_2$3={class:"text-info"},_hoisted_3$2={class:"peer-name"},_hoisted_4$1={key:0,class:"screenshare-icon"},_hoisted_5$1={class:"call-status"},_hoisted_6$1={class:"widget-controls"},_sfc_main$4={__name:"FloatingCallWidget",setup(_){const S=useCallStore(),w=()=>{S.maximizeCallView()};return(E,T)=>(openBlock(),createBlock(Transition,{name:"widget-slide-down"},{default:withCtx(()=>{var A;return[unref(S).isCallActive&&!unref(S).isFullScreenCallViewVisible?(openBlock(),createElementBlock("div",{key:0,class:"floating-call-widget",onClick:w},[createBaseVNode("div",_hoisted_1$3,[unref(S).peerContact?(openBlock(),createBlock(Avatar,{key:0,entity:unref(S).peerContact,size:"small"},null,8,["entity"])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_2$3,[createBaseVNode("span",_hoisted_3$2,[unref(S).isScreenSharing?(openBlock(),createElementBlock("span",_hoisted_4$1,"")):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(((A=unref(S).peerContact)==null?void 0:A.name)||""),1)]),createBaseVNode("span",_hoisted_5$1,toDisplayString(unref(S).callDurationFormatted),1)])]),createBaseVNode("div",_hoisted_6$1,[createVNode(IconButton,{icon:unref(S).isAudioMuted?"":"",title:"/",onClick:T[0]||(T[0]=withModifiers(k=>unref(S).toggleAudio(),["stop"])),class:normalizeClass(["control-btn",{active:!unref(S).isAudioMuted}])},null,8,["icon","class"]),createBaseVNode("button",{class:"end-call-btn",onClick:T[1]||(T[1]=withModifiers(k=>unref(S).hangUp(),["stop"])),title:""},"")])])):createCommentVNode("",!0)]}),_:1}))}},FloatingCallWidget=_export_sfc(_sfc_main$4,[["__scopeId","data-v-d573d2ee"]]),_sfc_main$3={},_hoisted_1$2={class:"modal-container-skeleton"},_hoisted_2$2={class:"modal-body-skeleton"},_hoisted_3$1={class:"content-skeleton"};function _sfc_render(_,S){return openBlock(),createElementBlock("div",_hoisted_1$2,[S[2]||(S[2]=createBaseVNode("header",{class:"modal-header-skeleton"},[createBaseVNode("div",{class:"shimmer-bg line title"}),createBaseVNode("div",{class:"shimmer-bg circle small"})],-1)),createBaseVNode("main",_hoisted_2$2,[S[1]||(S[1]=createStaticVNode('<nav class="tabs-skeleton" data-v-ef30713d><div class="shimmer-bg line short" data-v-ef30713d></div><div class="shimmer-bg line short" data-v-ef30713d></div><div class="shimmer-bg line short" data-v-ef30713d></div><div class="shimmer-bg line short" data-v-ef30713d></div></nav>',1)),createBaseVNode("div",_hoisted_3$1,[(openBlock(),createElementBlock(Fragment,null,renderList(4,w=>createBaseVNode("div",{key:w,class:"setting-item-skeleton"},[...S[0]||(S[0]=[createBaseVNode("div",{class:"shimmer-bg line label"},null,-1),createBaseVNode("div",{class:"shimmer-bg line input"},null,-1)])])),64))])])])}const SettingsModalSkeleton=_export_sfc(_sfc_main$3,[["render",_sfc_render],["__scopeId","data-v-ef30713d"]]),_hoisted_1$1={class:"search-bar-wrapper"},_hoisted_2$1=["value"],_sfc_main$2={__name:"MobileGlobalHeader",setup(_){const S=useUiStore(),w=useChatStore(),E=useCallStore(),T=debounce$1(k=>{w.chatListSearchTerm=k.target.value},250),A=computed(()=>({top:E.isCallActive&&!E.isFullScreenCallViewVisible?"50px":"0"}));return(k,x)=>(openBlock(),createElementBlock("header",{class:"mobile-global-header",style:normalizeStyle(A.value)},[createVNode(IconButton,{icon:"",title:"",onClick:x[0]||(x[0]=R=>unref(S).showModal("settings"))}),createBaseVNode("div",_hoisted_1$1,[x[4]||(x[4]=createBaseVNode("span",{class:"search-icon"},"",-1)),createBaseVNode("input",{type:"search",id:"mobile-global-search",value:unref(w).chatListSearchTerm,onInput:x[1]||(x[1]=(...R)=>unref(T)&&unref(T)(...R)),placeholder:"...",class:"search-bar","aria-label":""},null,40,_hoisted_2$1)]),createVNode(IconButton,{icon:"",title:"",onClick:x[2]||(x[2]=R=>unref(S).showOverlayModal("worldMap"))}),createVNode(IconButton,{icon:"",title:"",onClick:x[3]||(x[3]=R=>unref(S).toggleDetailsPanel(!0,"lobby"))})],4))}},MobileGlobalHeader=_export_sfc(_sfc_main$2,[["__scopeId","data-v-44ac7b89"]]),_sfc_main$1={__name:"SidebarResizer",setup(_){const S=useUiStore();let w=0,E=0;function T(x){requestAnimationFrame(()=>{const R=x.clientX-w,P=E+R;S.setSidebarWidth(P)})}function A(x){log("[Resizer] Drag started.","INFO"),w=x.clientX,E=S.sidebarWidth,window.addEventListener("mousemove",T),window.addEventListener("mouseup",k),document.body.classList.add("is-resizing")}function k(){log("[Resizer] Drag stopped.","INFO"),window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",k),document.body.classList.remove("is-resizing")}return onUnmounted(()=>{k()}),(x,R)=>(openBlock(),createElementBlock("div",{class:"resizer-handle",onMousedown:withModifiers(A,["prevent"])},null,32))}},SidebarResizer=_export_sfc(_sfc_main$1,[["__scopeId","data-v-9ae2b39c"]]),_hoisted_1={key:0,class:"loading-overlay"},_hoisted_2={class:"sidebar-container"},_hoisted_3={class:"main-content-wrapper"},_hoisted_4={class:"main-view-container"},_hoisted_5={key:1,class:"welcome-view"},_hoisted_6={key:0,class:"modal-wrapper-container"},_hoisted_7={key:0,class:"modal-overlay-wrapper"},_hoisted_8=["href"],_hoisted_9={key:0,class:"modal-skeleton-wrapper"},SIDEBAR_COLLAPSED_THRESHOLD=80,_sfc_main={__name:"App",setup(_){const S=defineAsyncComponent(()=>__vitePreload(()=>import("./SettingsModal-B0vRU_CE.js"),__vite__mapDeps([8,9,10,11]),import.meta.url)),w=defineAsyncComponent(()=>__vitePreload(()=>import("./NewContactModal-n_u8LAxz.js"),__vite__mapDeps([12,9,10,13]),import.meta.url)),E=defineAsyncComponent(()=>__vitePreload(()=>import("./LocationPickerModal-CnknUs6N.js"),__vite__mapDeps([14,15,9,10,16]),import.meta.url)),T=defineAsyncComponent(()=>__vitePreload(()=>import("./ScreenshotEditor-B6rRLeK-.js"),__vite__mapDeps([17,18]),import.meta.url)),A=defineAsyncComponent(()=>__vitePreload(()=>import("./ScreenshotGuideModal-BjrQB4KQ.js"),__vite__mapDeps([19,9,10,20]),import.meta.url)),k=defineAsyncComponent(()=>__vitePreload(()=>import("./IncomingCallModal-B2J3qiJ_.js"),__vite__mapDeps([21,9,10,22]),import.meta.url)),x=defineAsyncComponent(()=>__vitePreload(()=>import("./ConfirmationModal-BqPN9LM5.js"),__vite__mapDeps([23,9,10,24]),import.meta.url)),R=defineAsyncComponent(()=>__vitePreload(()=>import("./MediaViewerModal-B_49g2X0.js"),__vite__mapDeps([25,26]),import.meta.url)),P=defineAsyncComponent(()=>__vitePreload(()=>import("./LocationViewerModal-9wBLXpXq.js"),__vite__mapDeps([27,15,28]),import.meta.url)),M=defineAsyncComponent(()=>__vitePreload(()=>import("./WorldMapModal-CwQCGVTV.js"),__vite__mapDeps([29,15,30]),import.meta.url)),N=defineAsyncComponent(()=>__vitePreload(()=>import("./ImageCropperModal-D31CoGAa.js"),__vite__mapDeps([31,32]),import.meta.url)),I=useUserStore(),V=useChatStore(),B=useGroupStore(),D=useSettingsStore(),z=useUiStore(),O=useCallStore(),L=useMemoryStore(),F=ref$1(null),$=computed(()=>z.sidebarWidth<SIDEBAR_COLLAPSED_THRESHOLD),H=computed(()=>({"details-panel-open":z.isDetailsPanelOpen,"chat-active":z.isChatViewActiveOnMobile,"sidebar-collapsed":$.value})),j=computed(()=>({"call-widget-active":O.isCallActive&&!O.isFullScreenCallViewVisible})),q=computed(()=>{const ee=D.currentTheme;return ee!=null&&ee.css?`${ee.css.replace(/^public\//,"")}`:""}),W=()=>{window.visualViewport&&document.documentElement.style.setProperty("--visual-viewport-height",`${window.visualViewport.height}px`)},X=ref$1(0);onMounted(async()=>{z.setAppLoading(!0);try{await D.init(),await I.init(),await B.init(),await V.init(),await L.init(),O.setGlobalAudioElement(F.value),webrtcService.init(I.userId)}catch(ee){console.error(":",ee)}finally{apiService.checkAiServiceHealth().then(ee=>{I.updateAiServiceStatus(ee)}),setTimeout(()=>z.setAppLoading(!1),400)}window.visualViewport&&(window.visualViewport.addEventListener("resize",W),W()),history.pushState(null,"",location.href),window.addEventListener("popstate",te)}),onUnmounted(()=>{window.visualViewport&&window.visualViewport.removeEventListener("resize",W),window.removeEventListener("popstate",te)});function te(){let ee=!1;if(z.activeOverlayModal?(z.hideOverlayModal(),ee=!0):z.activeModal?(z.hideModal(),ee=!0):z.isEmojiPickerVisible?(z.toggleEmojiPicker(!1),ee=!0):z.isDetailsPanelOpen?(z.toggleDetailsPanel(!1),ee=!0):z.isChatViewActiveOnMobile&&(z.isChatViewActiveOnMobile=!1,ee=!0),ee)history.pushState(null,"",location.href);else{const G=new Date().getTime();G-X.value<1e3?history.back():(X.value=G,eventBus.emit("showNotification",{message:"",type:"info",duration:2e3}),history.pushState(null,"",location.href))}}return watch(()=>D.customBackgrounds[D.effectiveColorScheme],ee=>{document.body.style.backgroundImage=ee?`url(${ee})`:"none"},{immediate:!0}),watch(()=>[D.currentThemeKey,D.effectiveColorScheme],([ee,G],[de,le]=[])=>{de&&document.body.classList.remove(`theme-${de}`),le&&document.body.classList.remove(`colorscheme-${le}`),ee&&document.body.classList.add(`theme-${ee}`),G&&document.body.classList.add(`colorscheme-${G}`)},{immediate:!0}),(ee,G)=>{const de=resolveDirective("motion-pop");return openBlock(),createElementBlock("div",{id:"app-root",class:normalizeClass(j.value)},[createVNode(MobileGlobalHeader),createVNode(Transition,{name:"app-fade",mode:"out-in"},{default:withCtx(()=>[unref(z).isAppLoading?(openBlock(),createElementBlock("div",_hoisted_1,[createVNode(AppSkeletonLoader)])):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["app-container",H.value]),style:normalizeStyle({"--sidebar-width":`${unref(z).sidebarWidth}px`})},[createBaseVNode("aside",_hoisted_2,[createVNode(ChatList)]),createVNode(SidebarResizer),createBaseVNode("div",_hoisted_3,[createBaseVNode("main",_hoisted_4,[unref(V).currentChatId?(openBlock(),createBlock(ChatView,{key:unref(V).currentChatId})):(openBlock(),createElementBlock("div",_hoisted_5,[createVNode(WelcomeHeader),createVNode(WelcomeScreen)]))]),createBaseVNode("aside",{class:normalizeClass(["details-panel-container",{"is-open":unref(z).isDetailsPanelOpen}])},[createVNode(Transition,{name:"details-content-fade",mode:"out-in"},{default:withCtx(()=>[unref(z).isDetailsPanelOpen?(openBlock(),createBlock(DetailsPanel,{key:unref(V).currentChatId})):createCommentVNode("",!0)]),_:1})],2)])],6))]),_:1}),createVNode(Transition,{name:"modal-fade",onAfterLeave:G[2]||(G[2]=le=>unref(z).modalPrefillData={})},{default:withCtx(()=>[unref(z).activeModal?(openBlock(),createElementBlock("div",_hoisted_6,[unref(z).activeModal==="settings"?withDirectives((openBlock(),createBlock(unref(S),{key:0,onClose:G[0]||(G[0]=le=>unref(z).hideModal())},null,512)),[[de]]):createCommentVNode("",!0),unref(z).activeModal==="newContact"?withDirectives((openBlock(),createBlock(unref(w),{key:1,onClose:G[1]||(G[1]=le=>unref(z).hideModal())},null,512)),[[de]]):createCommentVNode("",!0),unref(z).activeModal==="locationPicker"?withDirectives((openBlock(),createBlock(unref(E),{key:2},null,512)),[[de]]):createCommentVNode("",!0),unref(z).activeModal==="screenshotGuide"?withDirectives((openBlock(),createBlock(unref(A),{key:3},null,512)),[[de]]):createCommentVNode("",!0),unref(z).activeModal==="incomingCall"||unref(z).activeModal==="calling"?withDirectives((openBlock(),createBlock(unref(k),{key:4},null,512)),[[de]]):createCommentVNode("",!0),unref(z).activeModal==="confirmation"?withDirectives((openBlock(),createBlock(unref(x),{key:5},null,512)),[[de]]):createCommentVNode("",!0)])):createCommentVNode("",!0)]),_:1}),createVNode(Transition,{name:"modal-fade"},{default:withCtx(()=>[unref(z).activeOverlayModal?(openBlock(),createElementBlock("div",_hoisted_7,[unref(z).activeOverlayModal==="screenshotEditor"?(openBlock(),createBlock(unref(T),{key:0})):createCommentVNode("",!0),unref(z).activeOverlayModal==="mediaViewer"?(openBlock(),createBlock(unref(R),{key:1})):createCommentVNode("",!0),unref(z).activeOverlayModal==="locationViewer"?(openBlock(),createBlock(unref(P),{key:2})):createCommentVNode("",!0),unref(z).activeOverlayModal==="imageCropper"?(openBlock(),createBlock(unref(N),{key:3})):createCommentVNode("",!0),unref(z).activeOverlayModal==="worldMap"?(openBlock(),createBlock(unref(M),{key:4})):createCommentVNode("",!0)])):createCommentVNode("",!0)]),_:1}),unref(O).isCallActive&&unref(O).isFullScreenCallViewVisible?(openBlock(),createBlock(VideoCallView,{key:0})):createCommentVNode("",!0),unref(O).isCallActive&&!unref(O).isFullScreenCallViewVisible?(openBlock(),createBlock(FloatingCallWidget,{key:1})):createCommentVNode("",!0),createVNode(NotificationContainer),createVNode(ContextMenu),createBaseVNode("link",{id:"theme-stylesheet",rel:"stylesheet",href:q.value},null,8,_hoisted_8),createVNode(Transition,{name:"theme-transition-fade"},{default:withCtx(()=>[unref(D).isThemeTransitioning?(openBlock(),createElementBlock("div",_hoisted_9,[withDirectives(createVNode(SettingsModalSkeleton,null,null,512),[[de]])])):createCommentVNode("",!0)]),_:1}),createBaseVNode("audio",{ref_key:"globalAudioSink",ref:F,style:{display:"none"},autoplay:"",playsinline:""},null,512)],2)}}},app=createApp(_sfc_main);app.config.errorHandler=(_,S,w)=>{console.error("Global Vue Error:",_),console.error("Vue instance:",S),console.error("Component info:",w)};app.use(createPinia());app.use(plugin);app.use(autoAnimatePlugin);app.use(MotionPlugin);app.mount("#app");export{getDefaultExportFromCjs$1 as $,eventBus as A,dbService as B,mediaService as C,useGroupStore as D,useMemoryStore as E,Fragment as F,log as G,onMounted as H,useCallStore as I,AppSettings as J,nextTick as K,LLMProviders as L,IconButton as M,generateHash as N,Avatar as O,renderSlot as P,resolveDirective as Q,withModifiers as R,Spinner as S,Transition as T,createStaticVNode as U,defineStore as V,apiService as W,debounce$1 as X,defineAsyncComponent as Y,__vitePreload as Z,_export_sfc as _,useUserStore as a,resolveComponent as a0,resolveDynamicComponent as a1,vShow as a2,mergeProps as a3,compressImage as a4,SkeletonLoader as a5,script$2 as a6,mediaCacheService as a7,DEFAULT_TTS_CONFIG as a8,vModelCheckbox as a9,vModelDynamic as aa,watchEffect as ab,useChatStore as b,useUiStore as c,reactive as d,computed as e,webrtcService as f,createBlock as g,openBlock as h,withCtx as i,createBaseVNode as j,createVNode as k,createElementBlock as l,createCommentVNode as m,normalizeClass as n,onUnmounted as o,unref as p,createTextVNode as q,ref$1 as r,renderList as s,toDisplayString as t,useSettingsStore as u,withDirectives as v,watch as w,vModelText as x,vModelSelect as y,normalizeStyle as z};
