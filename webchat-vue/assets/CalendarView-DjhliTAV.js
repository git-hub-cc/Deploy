import{_ as I,c as F,b as $,r as x,e as u,l as r,h as c,j as n,t as d,F as _,s as f,n as B,A as K}from"./index-dUS5mm6e.js";const O={class:"calendar-container"},V={class:"calendar-header"},Y={class:"month-year"},E={class:"calendar-grid"},W=["onClick"],z={__name:"CalendarView",props:{chatId:{type:String,required:!0}},setup(y){const h=y,g=F(),m=$(),e=x(new Date),M=u(()=>new Set(m.getDatesWithMessages(h.chatId))),D=u(()=>e.value.toLocaleDateString("zh-CN",{year:"numeric",month:"long"})),w=["日","一","二","三","四","五","六"],S=u(()=>{const s=e.value.getFullYear(),o=e.value.getMonth(),t=new Date(s,o,1).getDay(),v=new Date(s,o+1,0).getDate(),l=[];for(let a=0;a<t;a++)l.push({isEmpty:!0,dateKey:`empty-${a}`});for(let a=1;a<=v;a++){const p=`${s}-${String(o+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`,i=M.value.has(p);l.push({dayOfMonth:a,dateKey:p,hasMessages:i,isEmpty:!1,classes:{empty:!1,"has-messages":i,"no-messages":!i}})}return l});function k(){e.value=new Date(e.value.getFullYear(),e.value.getMonth()-1,1)}function C(){e.value=new Date(e.value.getFullYear(),e.value.getMonth()+1,1)}function b(s){s.hasMessages&&(K.emit("chat:scroll-to-date",{chatId:h.chatId,dateString:s.dateKey}),window.innerWidth<=768&&(g.toggleDetailsPanel(!1),g.isChatViewActiveOnMobile=!0))}return(s,o)=>(c(),r("div",O,[n("div",V,[n("button",{onClick:k,class:"nav-btn"},"‹"),n("span",Y,d(D.value),1),n("button",{onClick:C,class:"nav-btn"},"›")]),n("div",E,[(c(),r(_,null,f(w,t=>n("div",{key:t,class:"weekday"},d(t),1)),64)),(c(!0),r(_,null,f(S.value,t=>(c(),r("div",{key:t.dateKey,class:B(["day-cell",t.classes]),onClick:v=>b(t)},d(t.dayOfMonth),11,W))),128))])]))}},L=I(z,[["__scopeId","data-v-e1d27af5"]]);export{L as default};
