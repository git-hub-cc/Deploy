/*
================================================================================
|                                                                              |
|                  ðŸ“š LexiLearn - Word Weavers (æµ…è‰²ä¸»é¢˜) - REFACTORED ðŸ“š      |
|                                                                              |
================================================================================
*/
body.theme-è‹±è¯­-æµ…è‰² {
    /*
    ================================================================
    |           1. Theme-specific Design Tokens                    |
    ================================================================
    */

    /* --- 1a. Theme Palette Definition --- */
    --ll-bg-main-rgb: 248, 249, 250;
    --ll-bg-container-rgb: 255, 255, 255;
    --ll-bg-sidebar-rgb: 252, 253, 254;
    --ll-bg-elevated-rgb: 249, 250, 251;
    --ll-bg-subtle-accent-rgb: 239, 246, 255;
    --ll-text-primary-rgb: 31, 41, 55;
    --ll-text-secondary-rgb: 75, 85, 99;
    --ll-primary-green-rgb: 16, 185, 129;
    --ll-secondary-blue-rgb: 59, 130, 246;
    --ll-border-light-rgb: 229, 231, 235;

    /* --- 1b. Overriding Base Semantic Variables --- */
    --color-brand-primary: rgb(var(--ll-primary-green-rgb));
    --color-brand-primary-dark: rgb(12, 148, 103);
    --color-text-primary: rgb(var(--ll-text-primary-rgb));
    --color-text-secondary: rgb(var(--ll-text-secondary-rgb));
    --color-text-on-brand: #FFFFFF;
    --color-text-link: rgb(var(--ll-secondary-blue-rgb));

    --color-background-page: rgb(var(--ll-bg-main-rgb));
    --color-background-panel: rgb(var(--ll-bg-sidebar-rgb));
    --color-background-elevated: rgb(var(--ll-bg-elevated-rgb));
    --color-background-hover: rgb(var(--ll-bg-subtle-accent-rgb));
    --color-background-active: rgba(var(--ll-secondary-blue-rgb), 0.1);

    --color-border: rgb(var(--ll-border-light-rgb));
    --color-border-strong: rgb(209, 213, 219);

    --color-status-success: var(--color-brand-primary);
    --color-status-danger: rgb(239, 68, 68);
    --color-status-info: var(--color-text-link);

    --color-message-sent-bg: var(--color-brand-primary);
    --color-message-sent-text: var(--color-text-on-brand);
    --color-message-received-bg: var(--color-background-elevated);
    --color-message-system-bg: rgb(var(--ll-bg-subtle-accent-rgb));
    --color-message-system-text: var(--color-text-secondary);

    /* --- 1c. Overriding Typography & Layout --- */
    --font-family-base: "Nunito Sans", "Segoe UI", system-ui, sans-serif;
    --border-radius-md: 8px;
    --border-radius-lg: 12px;
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.07);

    /* --- 1d. Character Color Palette --- */
    --liubin-primary: #0A7E8C;
    --liubin-msg-bg: linear-gradient(135deg, #f0f9ff, #e0f2fe);
    --liubin-secondary-bg: var(--color-background-active);

    --wangfei-primary: #1E40AF;
    --wangfei-msg-bg: linear-gradient(135deg, #eef2ff, #e0e7ff);
    --wangfei-secondary-bg: var(--color-background-active);

    --kevin-primary: #F97316;
    --kevin-msg-bg: linear-gradient(135deg, #fff7ed, #fffbeb);
    --kevin-secondary-bg: var(--color-background-active);
}

/*
================================================================
|           2. Global Style Overrides for this Theme           |
================================================================
*/
body.theme-è‹±è¯­-æµ…è‰² {
    background-image: var(--custom-background-image, url("data:image/svg+xml,%3Csvg width='10' height='10' viewBox='0 0 10 10' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='10' height='10' fill='%23F8F9FA'/%3E%3Ccircle cx='1' cy='1' r='0.5' fill='%23E5E7EB'/%3E%3C/svg%3E"));
}

body.theme-è‹±è¯­-æµ…è‰² .app-container {
    box-shadow: var(--shadow-md);
    border: 1px solid var(--color-border);
}

body.theme-è‹±è¯­-æµ…è‰² .message-area {
    background-image: linear-gradient(to bottom, transparent calc(1.65em - 1px), rgba(var(--ll-secondary-blue-rgb), 0.08) calc(1.65em - 1px), rgba(var(--ll-secondary-blue-rgb), 0.08) 1.65em);
    background-size: 100% 1.65em;
    background-position: 0 0.5em;
}

body.theme-è‹±è¯­-æµ…è‰² .system-message {
    border: 1px dashed var(--color-border);
}

/*
================================================================
|         3. Character-specific Variable Application           |
================================================================
*/
body.theme-è‹±è¯­-æµ…è‰² .AI_LiuBin_CiHuiDaShi {
    --character-primary-color: var(--liubin-primary);
    --character-text-color: #FFFFFF;
    --character-accent-color: var(--liubin-primary);
    --character-message-bg: var(--liubin-msg-bg);
    --character-secondary-bg: var(--liubin-secondary-bg);
    --character-glow-color: transparent;
}

body.theme-è‹±è¯­-æµ…è‰² .AI_WangFei_YuFaDaShi {
    --character-primary-color: var(--wangfei-primary);
    --character-text-color: #FFFFFF;
    --character-accent-color: var(--wangfei-primary);
    --character-message-bg: var(--wangfei-msg-bg);
    --character-secondary-bg: var(--wangfei-secondary-bg);
    --character-glow-color: transparent;
}

body.theme-è‹±è¯­-æµ…è‰² .AI_Kevin_KouYuTingLi {
    --character-primary-color: var(--kevin-primary);
    --character-text-color: #FFFFFF;
    --character-accent-color: var(--kevin-primary);
    --character-message-bg: var(--kevin-msg-bg);
    --character-secondary-bg: var(--kevin-secondary-bg);
    --character-glow-color: transparent;
}

/*
================================================================
|        4. Theme-specific Character Style Enhancements        |
================================================================
*/
body.theme-è‹±è¯­-æµ…è‰² .chat-list-item.is-special.active {
    background-color: var(--character-secondary-bg);
}

body.theme-è‹±è¯­-æµ…è‰² .chat-list-item.is-special.active .name {
    color: var(--character-primary-color) !important;
}

body.theme-è‹±è¯­-æµ…è‰² .message-bubble.character-message .sender-name {
    color: var(--character-primary-color);
}